"use strict";(self.webpackChunkAgentManagmentSystem=self.webpackChunkAgentManagmentSystem||[]).push([[1968],{7672:(b,f,s)=>{s.d(f,{kt:()=>a,il:()=>u,ye:()=>i});var a=function(o){return o.CLIENT_SIDE="clientSide",o.INFINITE="infinite",o.VIEW_PORT="viewport",o.SERVER_SIDE="serverSide",o}(a||{}),i=function(o){return o[o.AGENT=2]="AGENT",o[o.AFFILIATE=3]="AFFILIATE",o}(i||{}),u=function(o){return o.SMALL="380px",o.MIDDLE="500px",o.LARGE="630px",o.BIG="700px",o.EXTRA_LARGE="800px",o.MEDIUM="550px",o}(u||{})},1968:(b,f,s)=>{s.r(f),s.d(f,{MainComponent:()=>P});var a=s(1368),i=s(6504),u=s(7816),o=s(4060),_=s(8416),g=s(1560),v=s(2096),e=s(2116),c=s(5068),C=s(8848),r=s(2236),l=s(8196),p=s(748);function E(m,I){1&m&&(e.I0R(0,"div",4)(1,"div",5)(2,"label",35),e.OEk(3,"Password:"),e.C$Y()(),e.I0R(4,"div",7)(5,"mat-form-field"),e.wR5(6,"input",36),e.C$Y()()())}function A(m,I){if(1&m){const t=e.KQA();e.I0R(0,"div",44)(1,"button",45),e.qCj("click",function(){e.usT(t);const n=e.GaO(2);return e.CGJ(n.onCancel())}),e.OEk(2,"Cancel"),e.C$Y(),e.I0R(3,"button",46),e.qCj("click",function(){e.usT(t);const n=e.GaO(2);return e.CGJ(n.onSubmit())}),e.OEk(4,"Submit"),e.C$Y()()}if(2&m){const t=e.GaO(2);e.yG2(3),e.E7m("disabled",t.userForm.invalid)}}function T(m,I){if(1&m){const t=e.KQA();e.I0R(0,"div",4)(1,"div",5)(2,"label",37),e.OEk(3,"Old Password:"),e.C$Y()(),e.I0R(4,"div",7)(5,"mat-form-field"),e.wR5(6,"input",38),e.I0R(7,"mat-icon",39),e.qCj("click",function(){e.usT(t);const n=e.GaO();return e.CGJ(n.togglePasswordVisibility("OldPassword"))}),e.OEk(8),e.C$Y()()()(),e.wR5(9,"div",40),e.I0R(10,"div",4)(11,"div",5)(12,"label",41),e.OEk(13,"New Password:"),e.C$Y()(),e.I0R(14,"div",7)(15,"mat-form-field"),e.wR5(16,"input",42),e.I0R(17,"mat-icon",39),e.qCj("click",function(){e.usT(t);const n=e.GaO();return e.CGJ(n.togglePasswordVisibility("NewPassword"))}),e.OEk(18),e.C$Y()()()(),e.wR5(19,"div")(20,"div")(21,"div"),e.yuY(22,A,5,1,"div",43)}if(2&m){const t=e.GaO();e.yG2(6),e._6D("type",t.passwordVisibility.OldPassword?"text":"password"),e.yG2(2),e.oRS(" ",t.passwordVisibility.OldPassword?"visibility":"visibility_off"," "),e.yG2(8),e._6D("type",t.passwordVisibility.NewPassword?"text":"password"),e.yG2(2),e.oRS(" ",t.passwordVisibility.NewPassword?"visibility":"visibility_off"," "),e.yG2(4),e.C0Y(22,t.editMode?22:-1)}}let P=(()=>{class m{constructor(t,d,n,h,N,y){this.mainService=t,this.fb=d,this.configService=n,this.enumService=h,this.localStorageService=N,this.snackbarService=y,this.editMode=!1,this.isAffileate=this.configService.isAffiliate,this.datePipe=new a.y("en-US"),this.passwordVisibility={OldPassword:!1,NewPassword:!1}}ngOnInit(){this.featchAgentsLevelEnum(),this.createForm(),this.getUserStateEnum(),this.getUserTypesEnum(),this.genders=this.localStorageService.get("enums").genders,this.userId=this.localStorageService.get("user").UserId,this.configService.isAffiliate?this.fetchAffiliateById():this.fetchAgentData()}featchAgentsLevelEnum(){this.enumService.getExistingLevels(this.userId).subscribe(t=>{0===t.ResponseCode&&(this.agentsLevelEnum=t.ResponseObject,this.userData&&this.setFormValues())})}fetchAffiliateById(){this.mainService.getAffiliateById().subscribe(t=>{0==t.ResponseCode?(this.userData=t.ResponseObject,this.userForm.patchValue(this.userData)):this.snackbarService.showError(t.Description)})}fetchAgentData(){this.mainService.getAgentData().subscribe(t=>{0==t.ResponseCode?(this.userData=t.ResponseObject,this.setFormValues()):this.snackbarService.showError(t.Description)})}setFormValues(){this.userData.TypeName=this.agentsLevelEnum?.find(t=>t.Id===this.userData?.Type)?.Name,this.userData.StateName=this.userStateEnum?.find(t=>t.Id===this.userData?.State)?.Name,this.userData.GenderName=this.genders?.find(t=>t.Id===this.userData?.Gender)?.Name,this.userForm.patchValue(this.userData)}getUserStateEnum(){this.enumService.getUserStateEnum().subscribe(t=>{0===t.ResponseCode?this.userStateEnum=t.ResponseObject:this.snackbarService.showError(t.Description)})}getUserTypesEnum(){this.enumService.getUserTypes().subscribe(t=>{0===t.ResponseCode?this.userTypes=t.ResponseObject:this.snackbarService.showError(t.Description)})}createForm(){this.userForm=this.fb.group({Id:[],ParentId:[],UserName:[],ClientCount:[],FirstName:[],CurrencyId:[],LastName:[],LanguageId:[],Email:[],State:[],StateName:[],Gender:[],GenderName:[],Type:[],TypeName:[],CreationTime:[],Password:[],OldPassword:[null,i.AQ.required],NewPassword:[null,[i.AQ.required]]})}togglePasswordVisibility(t){this.passwordVisibility={...this.passwordVisibility,[t]:!this.passwordVisibility[t]}}toggleEditMode(){this.editMode=!this.editMode,this.editMode?(this.userForm.get("Id")?.disable(),this.userForm.get("ParentId")?.disable(),this.userForm.get("UserName")?.disable(),this.userForm.get("ClientCount")?.disable(),this.userForm.get("FirstName")?.disable(),this.userForm.get("CurrencyId")?.disable(),this.userForm.get("LastName")?.disable(),this.userForm.get("LanguageId")?.disable(),this.userForm.get("Email")?.disable(),this.userForm.get("State")?.disable(),this.userForm.get("StateName")?.disable(),this.userForm.get("GenderName")?.disable(),this.userForm.get("Type")?.disable(),this.userForm.get("TypeName")?.disable(),this.userForm.get("CreationTime")?.disable()):this.setFormValuesEneble()}setFormValuesEneble(){this.userForm.get("Id")?.enable(),this.userForm.get("ParentId")?.enable(),this.userForm.get("UserName")?.enable(),this.userForm.get("ClientCount")?.enable(),this.userForm.get("FirstName")?.enable(),this.userForm.get("CurrencyId")?.enable(),this.userForm.get("LastName")?.enable(),this.userForm.get("LanguageId")?.enable(),this.userForm.get("Email")?.enable(),this.userForm.get("State")?.enable(),this.userForm.get("StateName")?.enable(),this.userForm.get("Gender")?.enable(),this.userForm.get("GenderName")?.enable(),this.userForm.get("Type")?.enable(),this.userForm.get("TypeName")?.enable(),this.userForm.get("CreationTime")?.enable()}passwordMatchValidator(t){const d=this.userForm?.get("OldPassword")?.value,n=t.value;return null!==d&&null!==n&&d!==n?{passwordMatch:!0}:null}getFormattedDate(){const t=this.userForm.get("CreationTime")?.value;return null!=t?this.datePipe.transform(t,"dd/MM/yyyy HH:mm")??"":""}onSubmit(){const t=this.userForm?.get("OldPassword")?.value,d=this.userForm?.get("NewPassword")?.value;this.mainService.changePassword(d,t,this.configService.isAffiliate?"AFFILIATE":"AGENT").subscribe(h=>{0===h.ResponseCode?this.onCancel():this.snackbarService.showError(h.Description)})}onCancel(){this.editMode=!1,this.setFormValuesEneble()}static#e=this.\u0275fac=function(d){return new(d||m)(e.GI1(c.M),e.GI1(i.im),e.GI1(C.a),e.GI1(r.Y),e.GI1(l.s),e.GI1(p.i))};static#t=this.\u0275cmp=e.In1({type:m,selectors:[["app-main"]],standalone:!0,features:[e.UHJ],decls:98,vars:6,consts:[[1,"content-action"],[1,"edit-btn",3,"click"],[1,"user-profile"],[1,"user-details",3,"formGroup"],[1,"form-row"],[1,"form-label"],["for","Id"],[1,"form-input"],["appearance","outline"],["matInput","","type","text","id","Id","formControlName","Id","readonly",""],["for","ParentId"],["matInput","","type","text","id","ParentId","formControlName","ParentId","readonly",""],["for","UserName"],["matInput","","type","text","id","UserName","formControlName","UserName","readonly",""],["for","ClientCount"],["matInput","","type","text","id","ClientCount","formControlName","ClientCount","readonly",""],["for","FirstName"],["matInput","","type","text","id","FirstName","formControlName","FirstName","readonly",""],["for","CurrencyId"],["matInput","","type","text","id","CurrencyId","formControlName","CurrencyId","readonly",""],["for","LastName"],["matInput","","type","text","id","LastName","formControlName","LastName","readonly",""],["for","LanguageId"],["matInput","","type","text","id","LanguageId","formControlName","LanguageId","readonly",""],["for","Email"],["matInput","","type","email","id","Email","formControlName","Email","readonly",""],["for","State"],["matInput","","type","text","id","StateName","formControlName","StateName","readonly",""],["for","Gender"],["matInput","","type","text","id","GenderName","formControlName","GenderName","readonly",""],["for","TypeName"],["matInput","","type","text","id","TypeName","formControlName","TypeName","readonly",""],["for","CreationTime"],["matInput","","type","text","id","CreationTime","readonly","",3,"disabled","value"],["class","form-row"],["for","Password"],["matInput","","type","password","id","Password","formControlName","Password","placeholder","*******","readonly",""],["for","OldPassword"],["matInput","","placeholder","*******","id","OldPassword","formControlName","OldPassword",3,"type"],["matSuffix","",1,"pointer",3,"click"],[1,"form-row","space"],["for","NewPassword"],["matInput","","placeholder","*******","id","NewPassword","formControlName","NewPassword",3,"type"],["class","actions"],[1,"actions"],["mat-stroked-button","",1,"mat-cancel-btn",3,"click"],["mat-stroked-button","","type","submit",1,"mat-btn",3,"disabled","click"]],template:function(d,n){1&d&&(e.I0R(0,"div",0)(1,"button",1),e.qCj("click",function(){return n.toggleEditMode()}),e.OEk(2),e.C$Y()(),e.I0R(3,"div",2)(4,"form",3)(5,"div",4)(6,"div",5)(7,"label",6),e.OEk(8,"Id:"),e.C$Y()(),e.I0R(9,"div",7)(10,"mat-form-field",8),e.wR5(11,"input",9),e.C$Y()()(),e.I0R(12,"div",4)(13,"div",5)(14,"label",10),e.OEk(15,"Parent Id:"),e.C$Y()(),e.I0R(16,"div",7)(17,"mat-form-field"),e.wR5(18,"input",11),e.C$Y()()(),e.I0R(19,"div",4)(20,"div",5)(21,"label",12),e.OEk(22,"User Name:"),e.C$Y()(),e.I0R(23,"div",7)(24,"mat-form-field"),e.wR5(25,"input",13),e.C$Y()()(),e.I0R(26,"div",4)(27,"div",5)(28,"label",14),e.OEk(29,"Client Count:"),e.C$Y()(),e.I0R(30,"div",7)(31,"mat-form-field"),e.wR5(32,"input",15),e.C$Y()()(),e.I0R(33,"div",4)(34,"div",5)(35,"label",16),e.OEk(36,"First Name:"),e.C$Y()(),e.I0R(37,"div",7)(38,"mat-form-field"),e.wR5(39,"input",17),e.C$Y()()(),e.I0R(40,"div",4)(41,"div",5)(42,"label",18),e.OEk(43,"Currency:"),e.C$Y()(),e.I0R(44,"div",7)(45,"mat-form-field"),e.wR5(46,"input",19),e.C$Y()()(),e.I0R(47,"div",4)(48,"div",5)(49,"label",20),e.OEk(50,"Last Name:"),e.C$Y()(),e.I0R(51,"div",7)(52,"mat-form-field"),e.wR5(53,"input",21),e.C$Y()()(),e.I0R(54,"div",4)(55,"div",5)(56,"label",22),e.OEk(57,"Language:"),e.C$Y()(),e.I0R(58,"div",7)(59,"mat-form-field"),e.wR5(60,"input",23),e.C$Y()()(),e.I0R(61,"div",4)(62,"div",5)(63,"label",24),e.OEk(64,"Email:"),e.C$Y()(),e.I0R(65,"div",7)(66,"mat-form-field"),e.wR5(67,"input",25),e.C$Y()()(),e.I0R(68,"div",4)(69,"div",5)(70,"label",26),e.OEk(71,"State:"),e.C$Y()(),e.I0R(72,"div",7)(73,"mat-form-field"),e.wR5(74,"input",27),e.C$Y()()(),e.I0R(75,"div",4)(76,"div",5)(77,"label",28),e.OEk(78,"Gender:"),e.C$Y()(),e.I0R(79,"div",7)(80,"mat-form-field"),e.wR5(81,"input",29),e.C$Y()()(),e.I0R(82,"div",4)(83,"div",5)(84,"label",30),e.OEk(85,"Type:"),e.C$Y()(),e.I0R(86,"div",7)(87,"mat-form-field"),e.wR5(88,"input",31),e.C$Y()()(),e.I0R(89,"div",4)(90,"div",5)(91,"label",32),e.OEk(92,"Creation Time:"),e.C$Y()(),e.I0R(93,"div",7)(94,"mat-form-field"),e.wR5(95,"input",33),e.C$Y()()(),e.yuY(96,E,7,0,"div",34)(97,T,23,5),e.C$Y()()),2&d&&(e.yG2(2),e.cNF("Edit"),e.yG2(2),e.E7m("formGroup",n.userForm),e.yG2(91),e.E7m("disabled",n.editMode)("value",n.getFormattedDate()),e.yG2(),e.C0Y(96,n.editMode?-1:96),e.yG2(),e.C0Y(97,n.editMode?97:-1))},dependencies:[a.MD,i.y,i.sz,i.ot,i.ue,i.u,i.sl,i.uW,i.Wo,u.oJ,u.Gw,o.wb,o.Up,o.Gm,_.cN,_.yi,g.oB,g.qL,v.d5],styles:[".content-action{height:6%;display:flex;align-items:center;flex-wrap:wrap;padding-right:10px;padding-left:10px;margin-bottom:20px}.content-action .title{font-size:20px;letter-spacing:.04em;color:#076192;flex:1;padding-left:10px}.content-action .title a{text-decoration:none;color:#076192}.content-action .title span{color:#000}.content-action .edit-btn{background-color:#239dff;padding:10px;border:1px solid #239dff;min-width:104px;color:#fff;border-radius:4px;font-size:16px;font-weight:500;margin-left:auto}.content-action .edit-btn.disabled{opacity:.7;pointer-events:none}.content-action .edit-btn:hover{border:1px solid #076192;background-color:#dbecf8;color:#000}.user-profile{display:grid;grid-template-columns:1fr;gap:10px;padding-left:10px;padding-right:10px}.user-profile h2{text-align:left}.user-profile .edit-button{float:right;margin-right:10px;padding:5px 10px}.user-profile .user-details{display:grid;grid-template-columns:repeat(2,1fr);gap:20px}.user-profile .user-details .form-row{display:flex;align-items:center;position:relative;min-height:50px}.user-profile .user-details .form-row .form-label{position:absolute;min-height:45px;padding:0 10px;top:12%;border-radius:4px;width:33%;display:flex;align-items:center;background-color:#dbecf8;color:#0573ba;font-size:16px;font-weight:400;line-height:19px;letter-spacing:.04em;text-align:left}.user-profile .user-details .form-row .form-input{position:absolute;min-height:46px;border-radius:4px;top:11%;left:36%;width:64%;display:flex;align-items:center;box-sizing:border-box;font-size:16px;letter-spacing:.04em;text-align:left;word-break:break-all;overflow:auto}.user-profile .user-details .form-row .form-input mat-form-field{width:100%}.user-profile .user-details .form-row .form-input input{width:100%;padding:5px}.user-profile .actions{display:flex;justify-content:flex-end;align-items:center;column-gap:6px}.user-profile .actions .mat-btn{background-color:#239dff;padding:10px;border:1px solid #239dff;min-width:104px;color:#fff;border-radius:4px;font-size:16px;font-weight:500}.user-profile .actions .mat-btn.disabled{opacity:.7;pointer-events:none}.user-profile .actions .mat-btn:hover{border:1px solid #076192;background-color:#dbecf8;color:#000}.user-profile .actions .mat-btn.disabled{color:#076192!important;background-color:#a0c4d8;pointer-events:none}.user-profile .actions .mat-btn.disabled .mat-button-wrapper{color:#076192!important}.user-profile .actions .mat-btn:hover{cursor:pointer;border:1px solid #076192;background:linear-gradient(#076192,#258ecd 50%,#0573ba)}.user-profile .actions .mat-cancel-btn{background-color:#239dff;padding:10px;border:1px solid #239dff;min-width:104px;color:#fff;border-radius:4px;font-size:16px;font-weight:500;background:none;color:#000;border:1px solid var(--text-3, rgb(89, 89, 89))}.user-profile .actions .mat-cancel-btn.disabled{opacity:.7;pointer-events:none}.user-profile .actions .mat-cancel-btn:hover{border:1px solid #076192;background-color:#dbecf8;color:#000}.user-profile .actions .mat-cancel-btn:hover{border:1px solid #076192;background:#c4c4c4}.user-profile .actions .mat-cancel-btn:hover .mat-button-wrapper{color:#076192!important}@media screen and (max-width: 768px){.title{font-size:16px!important;font-weight:500;color:var(--text-1, rgb(31, 31, 31))!important}.content-action .edit-btn{margin-top:43px}.user-profile .user-details{display:grid;grid-template-columns:1fr!important}.user-profile .user-details .form-row{flex-direction:column}.user-profile .user-details .form-row .form-label{position:static;padding:0;width:100%;font-size:18px;margin-bottom:4px;color:var(--main, rgb(33, 150, 243))}.user-profile .user-details .form-row .form-label label{padding-left:16px}.user-profile .user-details .form-row .form-input{position:static;width:100%}.user-profile .user-details .form-row.space{display:none}.mat-mdc-tab-link{background-color:#f5f5f5!important;margin-right:4px;height:39px!important}body.theme-dark .title{color:#fff!important}body.theme-dark .container{background-color:#303030!important}}\n"],encapsulation:2})}return m})()},5068:(b,f,s)=>{s.d(f,{M:()=>e});var a=s(2684),i=s(1e3),o=(s(7672),s(2116)),_=s(9600),g=s(8848);let e=(()=>{class c{constructor(r,l){this.mainApiService=r,this.configService=l,this.url=this.configService.getApiUrl}getPayoutsInfo(r,l){return this.mainApiService.apiPost(this.url,a.M.DASHBOARD,i.a.GET_PAYMENTS_INFO,{FromDate:r,ToDate:l},!0)}getTicker(){return this.mainApiService.apiPost(this.url,a.M.AGENT,i.a.GET_TICKER,{},!0)}getBalance(){return this.mainApiService.apiPost(this.url,a.M.AFFILIATE,i.a.GET_BALANCE,{},!0)}saveUserState(r,l,p){return this.mainApiService.apiPost(this.url,a.M.AGENT,i.a.UPDATE_USER_STATE,{AdminMenuId:l,GridIndex:p,State:r},!0)}getAgnetsBalance(){return this.mainApiService.apiPost(this.url,a.M.AGENT,i.a.GET_BALANCE,{},!0)}getAgentStates(){return this.mainApiService.apiPost(this.url,a.M.AGENT,i.a.GET_AGENT_STATES,{},!0)}getAffiliateById(){return this.mainApiService.apiPost(this.url,a.M.AFFILIATE,i.a.GET_AFFILIATE_BY_ID,{},!0)}changePassword(r,l,p){return this.mainApiService.apiPost(this.url,a.M[p],i.a.CHANGE_PASSWORD,{NewPassword:r,OldPassword:l},!0)}getCommissionPlan(r){return this.mainApiService.apiPost(this.url,a.M.COMMISSION,i.a.GET_COMMISSION_PLAN,r,!0)}getProducts(r){return this.mainApiService.apiPost(this.url,a.M.PRODUCT,i.a.GET_PRODUCTS,r,!0)}getReferralLinks(r,l,p,E){return this.mainApiService.apiPost(this.url,a.M.AFFILIATE,i.a.GET_REFERRAL_LINKS,{FieldNameToOrderBy:r,OrderBy:l,SkipCount:p,TakeCount:E},!0)}getAnnouncements(r){return this.mainApiService.apiPost(this.url,a.M.AGENT,i.a.GET_ANNOUNCEMENTS,{...r},!0)}generateReferralLink(){return this.mainApiService.apiPost(this.url,a.M.AFFILIATE,i.a.GENERATE_NEW_LINK,{},!0)}getSubAccounts(r){return this.mainApiService.apiPost(this.url,a.M.AGENT,i.a.GET_SUB_ACCOUNTS,r,!0)}getBetShops(){return this.mainApiService.apiPost(this.url,a.M.BET_SHOP,i.a.GET_BET_SHOPS,{},!0)}saveSubAccount(r){return this.mainApiService.apiPost(this.url,a.M.AGENT,i.a.SAVE_SUB_ACCOUNT,{...r},!0)}getUserState(r,l){return this.mainApiService.apiPost(this.url,a.M.AGENT,i.a.GET_USER_STATE,{AdminMenuId:r,GridIndex:l},!0)}createAgent(r){return this.mainApiService.apiPost(this.url,a.M.AGENT,i.a.CREATE_AGENT,{...r},!0)}saveAnnouncement(r){return this.mainApiService.apiPost(this.url,a.M.AGENT,i.a.SAVE_ANNOUNCEMENT,{...r},!0)}getAgentData(){return this.mainApiService.apiPost(this.url,a.M.AGENT,i.a.GET_AGENT_DATA,{},!0)}updateCommissionPlan(r){return this.mainApiService.apiPost(this.url,a.M.COMMISSION,i.a.UPDATE_COMMISSION_PLAN,{...r},!0)}getExistingLevels(){return this.mainApiService.apiPost(this.url,a.M.AGENT,i.a.GET_EXISTING_LEVELS,{},!0)}static#e=this.\u0275fac=function(l){return new(l||c)(o.CoB(_._),o.CoB(g.a))};static#t=this.\u0275prov=o.wxM({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()}}]);