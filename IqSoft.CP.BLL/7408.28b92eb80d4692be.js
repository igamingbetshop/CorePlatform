"use strict";(self.webpackChunkAgentManagmentSystem=self.webpackChunkAgentManagmentSystem||[]).push([[7408],{7408:(Su,Oi,Re)=>{Re.d(Oi,{K:()=>it});var f=Re(2100),Ce=Re(6504),kr=Re(6928),we=Re(5657),Zo=Re(4680),Bn=Re(8848),gs=Re(8196),Gr=(Re(7024),Re(2064)),Cu=Re(5068),pe=Re(2116);let it=(()=>{class Ut{constructor(le){this.injector=le,this.headerHeight=33,this.rowHeight=42,this.enableBrowserTooltips=!0,this.gridIndex=0,this.loadingUserState=!0,this.subscription=new kr.wH,this.previousState=null,this.defaultColDef={flex:1,unSortIcon:!1,resizable:!0,editable:!1,filter:"agNumberColumnFilter",floatingFilter:!0,floatingFilterComponentParams:{suppressFilterButton:!0},minWidth:60,menuTabs:["filterMenuTab","generalMenuTab"],cellStyle:{"padding-left":"2px"}},this.sideBar={toolPanels:[{id:"columns",labelDefault:"Columns",labelKey:"columns",iconKey:"columns",toolPanel:"agColumnsToolPanel",toolPanelParams:{suppressPivots:!0,suppressPivotMode:!0,suppressRowGroups:!0,suppressValues:!0}}],defaultToolPanel:"columns"},this.saveStateSbj=new we.E,this.columnStateSubject=new we.E,this.configService=le.get(Bn.a),this.mainService=le.get(Cu.M),this.router=le.get(f.E5),this.route=le.get(f.gV),this.localstorageService=le.get(gs.s),this.translate=le.get(Gr.qS),this.dateRangeFG=new Ce.k1({start:new Ce.yM,end:new Ce.yM})}ngOnInit(){}onGridReady(le){this.gridApi=le.api,this.columnApi=le.columnApi,this.gridApi?.closeToolPanel(),this.addResetButton();let be=!0;this.adminMenuId?(this.saveStateSbj.pipe((0,Zo.o)(1e3)).subscribe(()=>{be||this.saveState(),be=!1}),this.getUserState()):this.loadingUserState=!0}addResetButton(){const le=document.querySelector(".ag-tool-panel-wrapper .ag-column-select"),be=document.createElement("button");be.textContent="Reset",be.classList.add("mat-stroked-button","mat-reset-btn"),be.addEventListener("click",this.resetState.bind(this)),le&&le.prepend(be)}getUserState(){this.mainService.getUserState(this.adminMenuId,this.gridIndex).subscribe(le=>{if(0===le.ResponseCode){const be=JSON.parse(le.ResponseObject);if(be)try{this.columnApi.applyColumnState({state:be,applyOrder:!0})}catch(Jo){console.error("Error applying column state:",Jo)}finally{setTimeout(()=>{this.loadingUserState=!1},300)}else console.warn("No column state data found."),setTimeout(()=>{this.columnApi.resetColumnState(),this.gridApi?.closeToolPanel(),this.loadingUserState=!1},0)}else console.error("Error fetching user state:",le.ResponseMessage)})}saveState(){const le=this.columnApi.getColumnState(),be=JSON.parse(JSON.stringify(le)),Jo=JSON.parse(JSON.stringify(this.previousState));this.deepEqual(be,Jo)||(this.previousState=le,this.mainService.saveUserState(JSON.stringify(le),this.adminMenuId,this.gridIndex).subscribe(Qd=>{}))}deepEqual(le,be){return JSON.stringify(le)===JSON.stringify(be)}resetState(){this.columnApi.resetColumnState(),this.gridApi?.closeToolPanel()}getCurrentPage(){this.gridApi?.refreshServerSide({purge:!0})}onColumnResized(le){this.saveStateSbj.next()}onColumnVisible(le){this.saveStateSbj.next()}onColumnPinned(le){this.saveStateSbj.next()}onColumnMoved(le){this.saveStateSbj.next()}isEmpty(le){return 0===Object.keys(le).length&&le.constructor===Object}getIsAnd(le){return!le||"AND"===le}setSort(le,be){le&&le.length?(be.OrderBy="asc"===le[0].sort?0:1,be.FieldNameToOrderBy=le[0].colId):(be.OrderBy=null,be.FieldNameToOrderBy="")}localizeHeader(le){return this.translate.instant(le.colDef?le.colDef.headerName:"")||""}onColumnStateChange(){const le=this.columnApi.getColumnState();this.columnStateSubject.next(le)}ngOnDestroy(){this.columnStateSubject.unsubscribe()}getContextMenuItems(le){return["copy"]}static#e=this.\u0275fac=function(be){return new(be||Ut)(pe.GI1(pe.zZn))};static#t=this.\u0275dir=pe.Sc5({type:Ut,standalone:!0})}return Ut})()},7672:(Su,Oi,Re)=>{Re.d(Oi,{kt:()=>f,il:()=>kr,ye:()=>Ce});var f=function(we){return we.CLIENT_SIDE="clientSide",we.INFINITE="infinite",we.VIEW_PORT="viewport",we.SERVER_SIDE="serverSide",we}(f||{}),Ce=function(we){return we[we.AGENT=2]="AGENT",we[we.AFFILIATE=3]="AFFILIATE",we}(Ce||{}),kr=function(we){return we.SMALL="380px",we.MIDDLE="500px",we.LARGE="630px",we.BIG="700px",we.EXTRA_LARGE="800px",we.MEDIUM="550px",we}(kr||{})},5068:(Su,Oi,Re)=>{Re.d(Oi,{M:()=>qo});var f=Re(2684),Ce=Re(1e3),we=(Re(7672),Re(2116)),Zo=Re(9600),Bn=Re(8848);let qo=(()=>{class Gr{constructor(pe,it){this.mainApiService=pe,this.configService=it,this.url=this.configService.getApiUrl}getPayoutsInfo(pe,it){return this.mainApiService.apiPost(this.url,f.M.DASHBOARD,Ce.a.GET_PAYMENTS_INFO,{FromDate:pe,ToDate:it},!0)}getTicker(){return this.mainApiService.apiPost(this.url,f.M.AGENT,Ce.a.GET_TICKER,{},!0)}getBalance(){return this.mainApiService.apiPost(this.url,f.M.AFFILIATE,Ce.a.GET_BALANCE,{},!0)}saveUserState(pe,it,Ut){return this.mainApiService.apiPost(this.url,f.M.AGENT,Ce.a.UPDATE_USER_STATE,{AdminMenuId:it,GridIndex:Ut,State:pe},!0)}getAgnetsBalance(){return this.mainApiService.apiPost(this.url,f.M.AGENT,Ce.a.GET_BALANCE,{},!0)}getAgentStates(){return this.mainApiService.apiPost(this.url,f.M.AGENT,Ce.a.GET_AGENT_STATES,{},!0)}getAffiliateById(){return this.mainApiService.apiPost(this.url,f.M.AFFILIATE,Ce.a.GET_AFFILIATE_BY_ID,{},!0)}changePassword(pe,it,Ut){return this.mainApiService.apiPost(this.url,f.M[Ut],Ce.a.CHANGE_PASSWORD,{NewPassword:pe,OldPassword:it},!0)}getCommissionPlan(pe){return this.mainApiService.apiPost(this.url,f.M.COMMISSION,Ce.a.GET_COMMISSION_PLAN,pe,!0)}getProducts(pe){return this.mainApiService.apiPost(this.url,f.M.PRODUCT,Ce.a.GET_PRODUCTS,pe,!0)}getReferralLinks(pe,it,Ut,Ue){return this.mainApiService.apiPost(this.url,f.M.AFFILIATE,Ce.a.GET_REFERRAL_LINKS,{FieldNameToOrderBy:pe,OrderBy:it,SkipCount:Ut,TakeCount:Ue},!0)}getAnnouncements(pe){return this.mainApiService.apiPost(this.url,f.M.AGENT,Ce.a.GET_ANNOUNCEMENTS,{...pe},!0)}generateReferralLink(){return this.mainApiService.apiPost(this.url,f.M.AFFILIATE,Ce.a.GENERATE_NEW_LINK,{},!0)}getSubAccounts(pe){return this.mainApiService.apiPost(this.url,f.M.AGENT,Ce.a.GET_SUB_ACCOUNTS,pe,!0)}getBetShops(){return this.mainApiService.apiPost(this.url,f.M.BET_SHOP,Ce.a.GET_BET_SHOPS,{},!0)}saveSubAccount(pe){return this.mainApiService.apiPost(this.url,f.M.AGENT,Ce.a.SAVE_SUB_ACCOUNT,{...pe},!0)}getUserState(pe,it){return this.mainApiService.apiPost(this.url,f.M.AGENT,Ce.a.GET_USER_STATE,{AdminMenuId:pe,GridIndex:it},!0)}createAgent(pe){return this.mainApiService.apiPost(this.url,f.M.AGENT,Ce.a.CREATE_AGENT,{...pe},!0)}saveAnnouncement(pe){return this.mainApiService.apiPost(this.url,f.M.AGENT,Ce.a.SAVE_ANNOUNCEMENT,{...pe},!0)}getAgentData(){return this.mainApiService.apiPost(this.url,f.M.AGENT,Ce.a.GET_AGENT_DATA,{},!0)}updateCommissionPlan(pe){return this.mainApiService.apiPost(this.url,f.M.COMMISSION,Ce.a.UPDATE_COMMISSION_PLAN,{...pe},!0)}getExistingLevels(){return this.mainApiService.apiPost(this.url,f.M.AGENT,Ce.a.GET_EXISTING_LEVELS,{},!0)}static#e=this.\u0275fac=function(it){return new(it||Gr)(we.CoB(Zo._),we.CoB(Bn.a))};static#t=this.\u0275prov=we.wxM({token:Gr,factory:Gr.\u0275fac,providedIn:"root"})}return Gr})()},7024:(Su,Oi,Re)=>{var f=Re(2036),Ce=function(){function o(){this.ieCompatibility=!1}return o.prototype.init=function(){this.ieCompatibility="5d41402abc4b2a76b9719d911017c592"!=this.md5("hello")},o.prototype.md5cycle=function(t,e){var r=t[0],n=t[1],i=t[2],a=t[3];r=this.ff(r,n,i,a,e[0],7,-680876936),a=this.ff(a,r,n,i,e[1],12,-389564586),i=this.ff(i,a,r,n,e[2],17,606105819),n=this.ff(n,i,a,r,e[3],22,-1044525330),r=this.ff(r,n,i,a,e[4],7,-176418897),a=this.ff(a,r,n,i,e[5],12,1200080426),i=this.ff(i,a,r,n,e[6],17,-1473231341),n=this.ff(n,i,a,r,e[7],22,-45705983),r=this.ff(r,n,i,a,e[8],7,1770035416),a=this.ff(a,r,n,i,e[9],12,-1958414417),i=this.ff(i,a,r,n,e[10],17,-42063),n=this.ff(n,i,a,r,e[11],22,-1990404162),r=this.ff(r,n,i,a,e[12],7,1804603682),a=this.ff(a,r,n,i,e[13],12,-40341101),i=this.ff(i,a,r,n,e[14],17,-1502002290),n=this.ff(n,i,a,r,e[15],22,1236535329),r=this.gg(r,n,i,a,e[1],5,-165796510),a=this.gg(a,r,n,i,e[6],9,-1069501632),i=this.gg(i,a,r,n,e[11],14,643717713),n=this.gg(n,i,a,r,e[0],20,-373897302),r=this.gg(r,n,i,a,e[5],5,-701558691),a=this.gg(a,r,n,i,e[10],9,38016083),i=this.gg(i,a,r,n,e[15],14,-660478335),n=this.gg(n,i,a,r,e[4],20,-405537848),r=this.gg(r,n,i,a,e[9],5,568446438),a=this.gg(a,r,n,i,e[14],9,-1019803690),i=this.gg(i,a,r,n,e[3],14,-187363961),n=this.gg(n,i,a,r,e[8],20,1163531501),r=this.gg(r,n,i,a,e[13],5,-1444681467),a=this.gg(a,r,n,i,e[2],9,-51403784),i=this.gg(i,a,r,n,e[7],14,1735328473),n=this.gg(n,i,a,r,e[12],20,-1926607734),r=this.hh(r,n,i,a,e[5],4,-378558),a=this.hh(a,r,n,i,e[8],11,-2022574463),i=this.hh(i,a,r,n,e[11],16,1839030562),n=this.hh(n,i,a,r,e[14],23,-35309556),r=this.hh(r,n,i,a,e[1],4,-1530992060),a=this.hh(a,r,n,i,e[4],11,1272893353),i=this.hh(i,a,r,n,e[7],16,-155497632),n=this.hh(n,i,a,r,e[10],23,-1094730640),r=this.hh(r,n,i,a,e[13],4,681279174),a=this.hh(a,r,n,i,e[0],11,-358537222),i=this.hh(i,a,r,n,e[3],16,-722521979),n=this.hh(n,i,a,r,e[6],23,76029189),r=this.hh(r,n,i,a,e[9],4,-640364487),a=this.hh(a,r,n,i,e[12],11,-421815835),i=this.hh(i,a,r,n,e[15],16,530742520),n=this.hh(n,i,a,r,e[2],23,-995338651),r=this.ii(r,n,i,a,e[0],6,-198630844),a=this.ii(a,r,n,i,e[7],10,1126891415),i=this.ii(i,a,r,n,e[14],15,-1416354905),n=this.ii(n,i,a,r,e[5],21,-57434055),r=this.ii(r,n,i,a,e[12],6,1700485571),a=this.ii(a,r,n,i,e[3],10,-1894986606),i=this.ii(i,a,r,n,e[10],15,-1051523),n=this.ii(n,i,a,r,e[1],21,-2054922799),r=this.ii(r,n,i,a,e[8],6,1873313359),a=this.ii(a,r,n,i,e[15],10,-30611744),i=this.ii(i,a,r,n,e[6],15,-1560198380),n=this.ii(n,i,a,r,e[13],21,1309151649),r=this.ii(r,n,i,a,e[4],6,-145523070),a=this.ii(a,r,n,i,e[11],10,-1120210379),i=this.ii(i,a,r,n,e[2],15,718787259),n=this.ii(n,i,a,r,e[9],21,-343485551),t[0]=this.add32(r,t[0]),t[1]=this.add32(n,t[1]),t[2]=this.add32(i,t[2]),t[3]=this.add32(a,t[3])},o.prototype.cmn=function(t,e,r,n,i,a){return e=this.add32(this.add32(e,t),this.add32(n,a)),this.add32(e<<i|e>>>32-i,r)},o.prototype.ff=function(t,e,r,n,i,a,s){return this.cmn(e&r|~e&n,t,e,i,a,s)},o.prototype.gg=function(t,e,r,n,i,a,s){return this.cmn(e&n|r&~n,t,e,i,a,s)},o.prototype.hh=function(t,e,r,n,i,a,s){return this.cmn(e^r^n,t,e,i,a,s)},o.prototype.ii=function(t,e,r,n,i,a,s){return this.cmn(r^(e|~n),t,e,i,a,s)},o.prototype.md51=function(t){var n,e=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(n=64;n<=t.length;n+=64)this.md5cycle(r,this.md5blk(t.substring(n-64,n)));t=t.substring(n-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(n=0;n<t.length;n++)i[n>>2]|=t.charCodeAt(n)<<(n%4<<3);if(i[n>>2]|=128<<(n%4<<3),n>55)for(this.md5cycle(r,i),n=0;n<16;n++)i[n]=0;return i[14]=8*e,this.md5cycle(r,i),r},o.prototype.md5blk=function(t){for(var e=[],r=0;r<64;r+=4)e[r>>2]=t.charCodeAt(r)+(t.charCodeAt(r+1)<<8)+(t.charCodeAt(r+2)<<16)+(t.charCodeAt(r+3)<<24);return e},o.prototype.rhex=function(t){for(var e="0123456789abcdef".split(""),r="",n=0;n<4;n++)r+=e[t>>8*n+4&15]+e[t>>8*n&15];return r},o.prototype.hex=function(t){for(var e=0;e<t.length;e++)t[e]=this.rhex(t[e]);return t.join("")},o.prototype.md5=function(t){return this.hex(this.md51(t))},o.prototype.add32=function(t,e){return this.ieCompatibility?this.add32Compat(t,e):this.add32Std(t,e)},o.prototype.add32Std=function(t,e){return t+e&4294967295},o.prototype.add32Compat=function(t,e){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r},o}();function we(o){return null==o||0===o.length}var Bn=function(){function o(t){this.watermarkMessage=void 0,this.document=t,this.md5=new Ce,this.md5.init()}return o.prototype.validateLicense=function(){if(we(o.licenseKey))(!this.isWebsiteUrl()||this.isForceWatermark())&&this.outputMissingLicenseKey();else if(o.licenseKey.length>32)if(-1!==o.licenseKey.indexOf("For_Trialing_ag-Grid_Only"))this.outputInvalidLicenseKey();else{var t=o.extractLicenseComponents(o.licenseKey),r=t.license,n=t.version,i=t.isTrial;t.md5===this.md5.md5(r)?function Zo(o,t){return void 0===t&&(t=!1),null!=o&&(""!==o||t)}(n)&&n?this.validateLicenseKeyForVersion(n,!!i,r):this.validateLegacyKey(r):this.outputInvalidLicenseKey()}else this.outputInvalidLicenseKey()},o.extractExpiry=function(t){var e=t.substring(t.lastIndexOf("_")+1,t.length);return new Date(parseInt(o.decode(e),10))},o.extractLicenseComponents=function(t){var e=t.replace(/[\u200B-\u200D\uFEFF]/g,""),r=(e=e.replace(/\r?\n|\r/g,"")).length-32,n=e.substring(r),i=e.substring(0,r),a=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i}(o.extractBracketedInformation(e),2);return{md5:n,license:i,version:a[0],isTrial:a[1]}},o.prototype.getLicenseDetails=function(t){var e=o.extractLicenseComponents(t),n=e.license,i=e.version,a=e.isTrial,s=e.md5===this.md5.md5(n)&&-1===t.indexOf("For_Trialing_ag-Grid_Only"),l=null,u=null;return s&&(u=o.extractExpiry(n),s=!isNaN(u.getTime()),a)&&(l=u<new Date),{licenseKey:t,valid:s,expiry:s?o.formatDate(u):null,version:i||"legacy",isTrial:a,trialExpired:l}},o.prototype.isDisplayWatermark=function(){return this.isForceWatermark()||!this.isLocalhost()&&!this.isWebsiteUrl()&&!we(this.watermarkMessage)},o.prototype.getWatermarkMessage=function(){return this.watermarkMessage||""},o.prototype.getHostname=function(){var r=(this.document.defaultView||window).location.hostname;return void 0===r?"":r},o.prototype.isForceWatermark=function(){var r=(this.document.defaultView||window).location.pathname;return!!r&&-1!==r.indexOf("forceWatermark")},o.prototype.isWebsiteUrl=function(){return null!==this.getHostname().match(/^((?:\w+\.)?ag-grid\.com)$/)},o.prototype.isLocalhost=function(){return null!==this.getHostname().match(/^(?:127\.0\.0\.1|localhost)$/)},o.formatDate=function(t){var r=t.getDate(),n=t.getMonth(),i=t.getFullYear();return r+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][n]+" "+i},o.getGridReleaseDate=function(){return new Date(parseInt(o.decode(o.RELEASE_INFORMATION),10))},o.decode=function(t){for(var i,a,s,l,u,c,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="",d=0,h=t.replace(/[^A-Za-z0-9+/=]/g,"");d<h.length;)s=e.indexOf(h.charAt(d++)),i=(15&(l=e.indexOf(h.charAt(d++))))<<4|(u=e.indexOf(h.charAt(d++)))>>2,a=(3&u)<<6|(c=e.indexOf(h.charAt(d++))),r+=String.fromCharCode(s<<2|l>>4),64!=u&&(r+=String.fromCharCode(i)),64!=c&&(r+=String.fromCharCode(a));return o.utf8_decode(r)},o.utf8_decode=function(t){t=t.replace(/rn/g,"n");for(var e="",r=0;r<t.length;r++){var n=t.charCodeAt(r);n<128?e+=String.fromCharCode(n):n>127&&n<2048?(e+=String.fromCharCode(n>>6|192),e+=String.fromCharCode(63&n|128)):(e+=String.fromCharCode(n>>12|224),e+=String.fromCharCode(n>>6&63|128),e+=String.fromCharCode(63&n|128))}return e},o.setLicenseKey=function(t){this.licenseKey=t},o.extractBracketedInformation=function(t){var e=t.split("[").filter(function(i){return i.indexOf("]")>-1}).map(function(i){return i.split("]")[0]});if(!e||0===e.length)return[null,null];var r=1===e.filter(function(i){return"TRIAL"===i}).length;return[e.filter(function(i){return 0===i.indexOf("v")}).map(function(i){return i.replace(/^v/,"")})[0],r]},o.prototype.validateLicenseKeyForVersion=function(t,e,r){"2"===t&&(e?this.validateForTrial(r):this.validateLegacyKey(r))},o.prototype.validateLegacyKey=function(t){var e=o.getGridReleaseDate(),r=o.extractExpiry(t),n=!1,i=!1;if(isNaN(r.getTime())||(n=!0,i=e<r),n){if(!i){var a=o.formatDate(r),s=o.formatDate(e);this.outputIncompatibleVersion(a,s)}}else this.outputInvalidLicenseKey()},o.prototype.validateForTrial=function(t){var e=o.extractExpiry(t),r=new Date,n=!1,i=!1;if(isNaN(e.getTime())||(n=!0,i=e>r),n){if(!i){var a=o.formatDate(e);this.outputExpiredTrialKey(a)}}else this.outputInvalidLicenseKey()},o.prototype.outputInvalidLicenseKey=function(){console.error("*****************************************************************************************************************"),console.error("***************************************** AG Grid Enterprise License ********************************************"),console.error("********************************************* Invalid License ***************************************************"),console.error("* Your license for AG Grid Enterprise is not valid - please contact info@ag-grid.com to obtain a valid license. *"),console.error("*****************************************************************************************************************"),console.error("*****************************************************************************************************************"),this.watermarkMessage="Invalid License"},o.prototype.outputExpiredTrialKey=function(t){console.error("****************************************************************************************************************"),console.error("***************************************** AG Grid Enterprise License *******************************************"),console.error("*****************************************   Trial Period Expired.    *******************************************"),console.error("* Your license for AG Grid Enterprise expired on "+t+".                                                *"),console.error("* Please email info@ag-grid.com to purchase a license.                                                         *"),console.error("****************************************************************************************************************"),console.error("****************************************************************************************************************"),this.watermarkMessage="Trial Period Expired"},o.prototype.outputMissingLicenseKey=function(){console.error("****************************************************************************************************************"),console.error("***************************************** AG Grid Enterprise License *******************************************"),console.error("****************************************** License Key Not Found ***********************************************"),console.error("* All AG Grid Enterprise features are unlocked.                                                                *"),console.error("* This is an evaluation only version, it is not licensed for development projects intended for production.     *"),console.error("* If you want to hide the watermark, please email info@ag-grid.com for a trial license.                        *"),console.error("****************************************************************************************************************"),console.error("****************************************************************************************************************"),this.watermarkMessage="For Trial Use Only"},o.prototype.outputIncompatibleVersion=function(t,e){console.error("****************************************************************************************************************************"),console.error("****************************************************************************************************************************"),console.error("*                                             AG Grid Enterprise License                                                   *"),console.error("*                           License not compatible with installed version of AG Grid Enterprise.                           *"),console.error("*                                                                                                                          *"),console.error("* Your AG Grid License entitles you to all versions of AG Grid that we release within the time covered by your license     *"),console.error("* - typically we provide one year licenses which entitles you to all releases / updates of AG Grid within that year.       *"),console.error("* Your license has an end (expiry) date which stops the license key working with versions of AG Grid released after the    *"),console.error("* license end date. The license key that you have expires on "+t+", however the version of AG Grid you    *"),console.error("* are trying to use was released on "+e+".                                                               *"),console.error("*                                                                                                                          *"),console.error("* Please contact info@ag-grid.com to renew your subscription to new versions and get a new license key to work with this   *"),console.error("* version of AG Grid.                                                                                                      *"),console.error("****************************************************************************************************************************"),console.error("****************************************************************************************************************************"),this.watermarkMessage="License Expired"},o.RELEASE_INFORMATION="MTY5ODkxNzc1MzgxNA==",o}(),gs=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),qo=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Gr=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return gs(t,o),t.prototype.validateLicense=function(){this.licenseManager=new Bn(this.gridOptionsService.getDocument()),this.licenseManager.validateLicense()},t.getLicenseDetails=function(e){return new Bn(null).getLicenseDetails(e)},t.prototype.isDisplayWatermark=function(){return this.licenseManager.isDisplayWatermark()},t.prototype.getWatermarkMessage=function(){return this.licenseManager.getWatermarkMessage()},t.setLicenseKey=function(e){Bn.setLicenseKey(e)},qo([f.Ydw],t.prototype,"validateLicense",null),qo([(0,f.ekA)("licenseManager")],t)}(f._QX),Cu=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),pe=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},it=function(o){function t(){return o.call(this,'<div class="ag-watermark">\n                <div ref="eLicenseTextRef" class="ag-watermark-text"></div>\n            </div>')||this}return Cu(t,o),t.prototype.postConstruct=function(){var e=this,r=this.shouldDisplayWatermark();this.setDisplayed(r),r&&(this.eLicenseTextRef.innerText=this.licenseManager.getWatermarkMessage(),window.setTimeout(function(){return e.addCssClass("ag-opacity-zero")},0),window.setTimeout(function(){return e.setDisplayed(!1)},5e3))},t.prototype.shouldDisplayWatermark=function(){return this.licenseManager.isDisplayWatermark()},pe([(0,f.Qnc)("licenseManager")],t.prototype,"licenseManager",void 0),pe([(0,f.IzG)("eLicenseTextRef")],t.prototype,"eLicenseTextRef",void 0),pe([f.QhY],t.prototype,"postConstruct",null),t}(f.YlN),Ue={version:"30.2.1",moduleName:f.ekS.EnterpriseCoreModule,beans:[Gr],agStackComponents:[{componentName:"AgWatermark",componentClass:it}]},le=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),be=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Jo=function(o){function t(e){var r=o.call(this,'\n            <div class="ag-advanced-filter-header" role="row">\n            </div>')||this;return r.enabled=e,r}return le(t,o),t.prototype.postConstruct=function(){var e=this;this.setupAdvancedFilter(this.enabled),this.addDestroyFunc(function(){return e.destroyBean(e.eAdvancedFilter)}),this.addManagedListener(this.eventService,f.YFc.EVENT_GRID_COLUMNS_CHANGED,function(){return e.onGridColumnsChanged()}),this.addGuiEventListener("keydown",function(r){return e.onKeyDown(r)}),this.addGuiEventListener("focusout",function(r){e.getFocusableElement().contains(r.relatedTarget)||e.focusService.clearAdvancedFilterColumn()})},t.prototype.getFocusableElement=function(){var e,r;return null!==(r=null===(e=this.eAdvancedFilter)||void 0===e?void 0:e.getGui())&&void 0!==r?r:this.getGui()},t.prototype.setEnabled=function(e){e!==this.enabled&&this.setupAdvancedFilter(e)},t.prototype.refresh=function(){var e;null===(e=this.eAdvancedFilter)||void 0===e||e.refresh()},t.prototype.getHeight=function(){return this.height},t.prototype.setInputDisabled=function(e){var r;null===(r=this.eAdvancedFilter)||void 0===r||r.setInputDisabled(e)},t.prototype.setupAdvancedFilter=function(e){var r=this.getGui();if(e){this.eAdvancedFilter=this.createBean(new wu);var n=this.eAdvancedFilter.getGui();this.eAdvancedFilter.addCssClass("ag-advanced-filter-header-cell"),this.height=this.columnModel.getFloatingFiltersHeight();var i=this.height+"px";r.style.height=i,r.style.minHeight=i,this.setAriaRowIndex(),f._.setAriaRole(n,"gridcell"),f._.setAriaColIndex(n,1),this.setAriaColumnCount(n),r.appendChild(n)}else f._.clearElement(r),this.destroyBean(this.eAdvancedFilter),this.height=0;f._.setDisplayed(r,e),this.enabled=e},t.prototype.setAriaColumnCount=function(e){var r,n;f._.setAriaColSpan(e,null!==(n=null===(r=this.columnModel.getAllGridColumns())||void 0===r?void 0:r.length)&&void 0!==n?n:0)},t.prototype.setAriaRowIndex=function(){f._.setAriaRowIndex(this.getGui(),this.headerNavigationService.getHeaderRowCount())},t.prototype.onGridColumnsChanged=function(){this.eAdvancedFilter&&(this.setAriaColumnCount(this.eAdvancedFilter.getGui()),this.setAriaRowIndex())},t.prototype.onKeyDown=function(e){switch(e.key){case f.Axe.ENTER:this.hasFocus()&&this.focusService.focusInto(this.getFocusableElement())&&e.preventDefault();break;case f.Axe.ESCAPE:this.hasFocus()||this.getFocusableElement().focus();break;case f.Axe.UP:this.navigateUpDown(!0,e);break;case f.Axe.DOWN:this.navigateUpDown(!1,e);break;case f.Axe.TAB:if(this.hasFocus())this.navigateLeftRight(e);else{var r=this.focusService.findNextFocusableElement(this.getFocusableElement(),null,e.shiftKey);r?(e.preventDefault(),r.focus()):this.navigateLeftRight(e)}}},t.prototype.navigateUpDown=function(e,r){this.hasFocus()&&this.focusService.focusNextFromAdvancedFilter(e)&&r.preventDefault()},t.prototype.navigateLeftRight=function(e){(e.shiftKey?this.focusService.focusLastHeader():this.focusService.focusNextFromAdvancedFilter(!1,!0))&&e.preventDefault()},t.prototype.hasFocus=function(){return this.gridOptionsService.getDocument().activeElement===this.getFocusableElement()},be([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),be([(0,f.Qnc)("focusService")],t.prototype,"focusService",void 0),be([(0,f.Qnc)("headerNavigationService")],t.prototype,"headerNavigationService",void 0),be([f.QhY],t.prototype,"postConstruct",null),t}(f.YlN),Qd=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ys=function(){return ys=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},ys.apply(this,arguments)},Zd=function(o){function t(e){var r=o.call(this,ys(ys({},e),{template:'\n                <div class="ag-picker-field" role="presentation">\n                    <div ref="eLabel"></div>\n                    <div ref="eWrapper" class="ag-wrapper ag-picker-collapsed">\n                        <div ref="eDisplayField" class="ag-picker-field-display"></div>\n                        <ag-input-text-field ref="eInput" class="ag-rich-select-field-input"></ag-input-text-field>\n                        <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>\n                    </div>\n                </div>'}))||this;return r.params=e,r}return Qd(t,o),t.prototype.showPicker=function(){var e=this;setTimeout(function(){return o.prototype.showPicker.call(e)})},t.prototype.hidePicker=function(){var e=this;setTimeout(function(){return o.prototype.hidePicker.call(e)})},t.prototype.postConstruct=function(){o.prototype.postConstruct.call(this);var e=this.params,r=e.wrapperClassName,n=e.ariaLabel;f._.setDisplayed(this.eDisplayField,!1),r&&this.eWrapper.classList.add(r),f._.setAriaLabelledBy(this.eWrapper,""),f._.setAriaLabel(this.eWrapper,n)},t.prototype.onEnterKeyDown=function(e){f._.stopPropagationForAgGrid(e),this.isPickerDisplayed?o.prototype.onEnterKeyDown.call(this,e):(e.preventDefault(),this.showPicker())},t}(f.K8H),Ly=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),_u=function(o){function t(e,r){var n=o.call(this)||this;return n.comp=e,n.virtualList=r,n}return Ly(t,o),t.prototype.postConstruct=function(){var e=this;this.createManagedBean(new f.iWp(this.comp,this.virtualList,{dragSourceType:f.gt1.AdvancedFilterBuilder,listItemDragStartEvent:t.EVENT_DRAG_STARTED,listItemDragEndEvent:t.EVENT_DRAG_ENDED,eventSource:this,getCurrentDragValue:function(r){return e.getCurrentDragValue(r)},isMoveBlocked:function(){return!1},getNumRows:function(r){return r.getNumItems()},moveItem:function(r,n){return e.moveItem(r,n)}}))},t.prototype.getCurrentDragValue=function(e){return e.item},t.prototype.moveItem=function(e,r){this.comp.moveItem(e,r)},t.EVENT_DRAG_STARTED="advancedFilterBuilderDragStarted",t.EVENT_DRAG_ENDED="advancedFilterBuilderDragEnded",function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);n>3&&i&&Object.defineProperty(t,e,i)}([f.QhY],t.prototype,"postConstruct",null),t}(f._QX),ky=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),qd=function(o){function t(e,r,n){var i=o.call(this)||this;return i.eGui=e,i.focusWrapper=r,i.eFocusableComp=n,i}return ky(t,o),t.prototype.postConstruct=function(){var e=this;this.addManagedListener(this.eGui,"keydown",function(r){switch(r.key){case f.Axe.TAB:r.defaultPrevented||f._.stopPropagationForAgGrid(r);break;case f.Axe.UP:case f.Axe.DOWN:f._.stopPropagationForAgGrid(r);break;case f.Axe.ESCAPE:if(f._.isStopPropagationForAgGrid(r))return;var n=e.gridOptionsService.getDocument();e.eGui.contains(n.activeElement)&&(r.preventDefault(),f._.stopPropagationForAgGrid(r),e.focusWrapper.focus())}}),this.addManagedListener(this.focusWrapper,"keydown",function(r){if(r.key===f.Axe.ENTER){if(f._.isStopPropagationForAgGrid(r))return;e.gridOptionsService.getDocument().activeElement===e.focusWrapper&&(r.preventDefault(),f._.stopPropagationForAgGrid(r),e.eFocusableComp.getFocusableElement().focus())}}),this.addManagedListener(this.focusWrapper,"focusin",function(){e.focusWrapper.classList.add("ag-advanced-filter-builder-virtual-list-item-highlight")}),this.addManagedListener(this.focusWrapper,"focusout",function(r){e.focusWrapper.contains(r.relatedTarget)||e.focusWrapper.classList.remove("ag-advanced-filter-builder-virtual-list-item-highlight")})},function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);n>3&&i&&Object.defineProperty(t,e,i)}([f.QhY],t.prototype,"postConstruct",null),t}(f._QX);function Jd(o,t){return{pickerAriaLabelKey:"ariaLabelAdvancedFilterBuilderAddField",pickerAriaLabelValue:"Advanced Filter Builder Add Field",pickerType:"ag-list",valueList:[{key:"condition",displayValue:o("advancedFilterBuilderAddCondition")},{key:"join",displayValue:o("advancedFilterBuilderAddJoin")}],valueFormatter:function(e){var r;return null==e?null:null!==(r=e.displayValue)&&void 0!==r?r:e.key},pickerIcon:"advancedFilterBuilderAdd",maxPickerWidth:(t??120)+"px",wrapperClassName:"ag-advanced-filter-builder-item-button",ariaLabel:o("advancedFilterBuilderAddButtonTooltip")}}var Dt=function(){function o(){}return o.EVENT_ADDED="advancedFilterBuilderAdded",o.EVENT_MOVED="advancedFilterBuilderMoved",o.EVENT_REMOVED="advancedFilterBuilderRemoved",o.EVENT_VALUE_CHANGED="advancedFilterBuilderValueChanged",o.EVENT_VALID_CHANGED="advancedFilterBuilderValidChanged",o}(),Vy=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ef=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},By=function(o){function t(){var e=o.call(this,'\n            <div class="ag-advanced-filter-builder-item-condition" role="presentation"></div>\n        ')||this;return e.validationMessage=null,e}return Vy(t,o),t.prototype.init=function(e){var r=this,n=e.item,i=e.createPill;this.item=n,this.createPill=i,this.filterModel=n.filterModel,this.setupColumnCondition(this.filterModel),this.validate(),this.addDestroyFunc(function(){return r.destroyBeans([r.eColumnPill,r.eOperatorPill,r.eOperandPill])})},t.prototype.getDragName=function(){return this.filterModel.colId?this.advancedFilterExpressionService.parseColumnFilterModel(this.filterModel):this.getDefaultColumnDisplayValue()},t.prototype.getAriaLabel=function(){return this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderFilterItem")+" "+this.getDragName()},t.prototype.getValidationMessage=function(){return this.validationMessage},t.prototype.getFocusableElement=function(){return this.eColumnPill.getFocusableElement()},t.prototype.setupColumnCondition=function(e){var n,i,r=this,a=this.advancedFilterExpressionService.getColumnDetails(e.colId);this.baseCellDataType=null!==(n=a?.baseCellDataType)&&void 0!==n?n:"text",this.column=a?.column,this.numOperands=this.getNumOperands(this.getOperatorKey()),this.eColumnPill=this.createPill({key:this.getColumnKey(),displayValue:null!==(i=this.getColumnDisplayValue())&&void 0!==i?i:this.getDefaultColumnDisplayValue(),cssClass:"ag-advanced-filter-builder-column-pill",isSelect:!0,getEditorParams:function(){return{values:r.advancedFilterExpressionService.getColumnAutocompleteEntries()}},update:function(s){return r.setColumnKey(s)},pickerAriaLabelKey:"ariaLabelAdvancedFilterBuilderColumnSelectField",pickerAriaLabelValue:"Advanced Filter Builder Column Select Field",ariaLabel:this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderColumn")}),this.getGui().appendChild(this.eColumnPill.getGui()),f._.exists(this.getColumnKey())&&(this.createOperatorPill(),this.hasOperand()&&this.createOperandPill())},t.prototype.createOperatorPill=function(){var r,e=this;this.eOperatorPill=this.createPill({key:this.getOperatorKey(),displayValue:null!==(r=this.getOperatorDisplayValue())&&void 0!==r?r:this.getDefaultOptionSelectValue(),cssClass:"ag-advanced-filter-builder-option-pill",isSelect:!0,getEditorParams:function(){return{values:e.getOperatorAutocompleteEntries()}},update:function(n){return e.setOperatorKey(n)},pickerAriaLabelKey:"ariaLabelAdvancedFilterBuilderOptionSelectField",pickerAriaLabelValue:"Advanced Filter Builder Option Select Field",ariaLabel:this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderOption")}),this.eColumnPill.getGui().insertAdjacentElement("afterend",this.eOperatorPill.getGui())},t.prototype.createOperandPill=function(){var r,e=this,n=null!==(r=this.getOperandDisplayValue())&&void 0!==r?r:"";this.eOperandPill=this.createPill({key:n,displayValue:n,baseCellDataType:this.baseCellDataType,cssClass:"ag-advanced-filter-builder-value-pill",isSelect:!1,update:function(i){return e.setOperand(i)},ariaLabel:this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderValue")}),this.getGui().appendChild(this.eOperandPill.getGui())},t.prototype.getColumnKey=function(){return this.filterModel.colId},t.prototype.getColumnDisplayValue=function(){return this.advancedFilterExpressionService.getColumnDisplayValue(this.filterModel)},t.prototype.getOperatorKey=function(){return this.filterModel.type},t.prototype.getOperatorDisplayValue=function(){return this.advancedFilterExpressionService.getOperatorDisplayValue(this.filterModel)},t.prototype.getOperandDisplayValue=function(){return this.advancedFilterExpressionService.getOperandDisplayValue(this.filterModel,!0)},t.prototype.hasOperand=function(){return this.numOperands>0},t.prototype.getOperatorAutocompleteEntries=function(){return this.column?this.advancedFilterExpressionService.getOperatorAutocompleteEntries(this.column,this.baseCellDataType):[]},t.prototype.setColumnKey=function(e){var r;this.eOperatorPill||this.createOperatorPill();var n=this.advancedFilterExpressionService.getColumnDetails(e);this.column=n?.column;var i=null!==(r=n?.baseCellDataType)&&void 0!==r?r:"text";this.baseCellDataType!==i&&(this.baseCellDataType=i,this.setOperatorKey(void 0),this.eOperatorPill&&(f._.removeFromParent(this.eOperatorPill.getGui()),this.destroyBean(this.eOperatorPill),this.createOperatorPill()),this.validate()),this.filterModel.colId=e,this.filterModel.filterType=this.baseCellDataType},t.prototype.setOperatorKey=function(e){var r=this.getNumOperands(e);r!==this.numOperands&&(this.numOperands=r,0===r?this.destroyOperandPill():(this.createOperandPill(),"number"!==this.baseCellDataType&&this.setOperand(""))),this.filterModel.type=e,this.validate()},t.prototype.setOperand=function(e){var r,n=e;this.column&&(n=null!==(r=this.advancedFilterExpressionService.getOperandModelValue(e,this.baseCellDataType,this.column))&&void 0!==r?r:""),this.filterModel.filter=n,this.validate()},t.prototype.getNumOperands=function(e){var r,n;return null!==(n=null===(r=this.advancedFilterExpressionService.getExpressionOperator(this.baseCellDataType,e))||void 0===r?void 0:r.numOperands)&&void 0!==n?n:0},t.prototype.destroyOperandPill=function(){delete this.filterModel.filter,this.getGui().removeChild(this.eOperandPill.getGui()),this.destroyBean(this.eOperandPill),this.eOperandPill=void 0},t.prototype.validate=function(){var e=null;f._.exists(this.getColumnKey())?f._.exists(this.getOperatorKey())?this.numOperands>0&&!f._.exists(this.getOperandDisplayValue())&&(e=this.advancedFilterExpressionService.translate("advancedFilterBuilderValidationEnterValue")):e=this.advancedFilterExpressionService.translate("advancedFilterBuilderValidationSelectOption"):e=this.advancedFilterExpressionService.translate("advancedFilterBuilderValidationSelectColumn"),this.item.valid=!e,e!==this.validationMessage&&(this.validationMessage=e,this.dispatchEvent({type:Dt.EVENT_VALID_CHANGED}))},t.prototype.getDefaultColumnDisplayValue=function(){return this.advancedFilterExpressionService.translate("advancedFilterBuilderSelectColumn")},t.prototype.getDefaultOptionSelectValue=function(){return this.advancedFilterExpressionService.translate("advancedFilterBuilderSelectOption")},ef([(0,f.Qnc)("advancedFilterExpressionService")],t.prototype,"advancedFilterExpressionService",void 0),ef([(0,f.Qnc)("valueParserService")],t.prototype,"valueParserService",void 0),t}(f.YlN),jy=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ms=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},zy=function(o){function t(e){var r=o.call(this,'\n            <div class="ag-advanced-filter-builder-pill-wrapper" role="presentation">\n                <div ref="ePill" class="ag-advanced-filter-builder-pill" role="button">\n                    <span ref="eLabel" class="ag-advanced-filter-builder-pill-display"></span>\n                </div>\n            </div>\n        ')||this;return r.params=e,r.value=e.value,r}return jy(t,o),t.prototype.postConstruct=function(){var e=this,r=this.params,i=r.ariaLabel;this.ePill.classList.add(r.cssClass),this.activateTabIndex([this.ePill]),this.eLabel.id=""+this.getCompId(),f._.setAriaDescribedBy(this.ePill,this.eLabel.id),f._.setAriaLabel(this.ePill,i),this.renderValue(),this.addManagedListener(this.ePill,"click",function(a){a.preventDefault(),e.showEditor()}),this.addManagedListener(this.ePill,"keydown",function(a){a.key===f.Axe.ENTER&&(a.preventDefault(),f._.stopPropagationForAgGrid(a),e.showEditor())}),this.addDestroyFunc(function(){return e.destroyBean(e.eEditor)})},t.prototype.getFocusableElement=function(){return this.ePill},t.prototype.showEditor=function(){var e=this;if(!this.eEditor){f._.setDisplayed(this.ePill,!1),this.eEditor=this.createEditorComp(this.params.type),this.eEditor.setValue(this.value);var r=this.eEditor.getGui();this.eEditor.addManagedListener(r,"keydown",function(n){switch(n.key){case f.Axe.ENTER:n.preventDefault(),f._.stopPropagationForAgGrid(n),e.updateValue(!0);break;case f.Axe.ESCAPE:n.preventDefault(),f._.stopPropagationForAgGrid(n),e.hideEditor(!0)}}),this.eEditor.addManagedListener(r,"focusout",function(){e.updateValue(!1)}),this.getGui().appendChild(r),this.eEditor.getFocusableElement().focus()}},t.prototype.createEditorComp=function(e){var r;switch(e){case"text":r=new f.KCZ;break;case"number":r=new f.Q3Y;break;case"date":r=new f.i6X}return this.createBean(r)},t.prototype.hideEditor=function(e){var r=this.eEditor;r&&(this.eEditor=void 0,this.getGui().removeChild(r.getGui()),this.destroyBean(r),f._.setDisplayed(this.ePill,!0),e&&this.ePill.focus())},t.prototype.renderValue=function(){var e;this.eLabel.classList.remove("ag-advanced-filter-builder-value-empty","ag-advanced-filter-builder-value-number","ag-advanced-filter-builder-value-text"),f._.exists(this.value)?"number"===this.params.type?(e=this.value,this.eLabel.classList.add("ag-advanced-filter-builder-value-number")):(e='"'+this.value+'"',this.eLabel.classList.add("ag-advanced-filter-builder-value-text")):(e=this.advancedFilterExpressionService.translate("advancedFilterBuilderEnterValue"),this.eLabel.classList.add("ag-advanced-filter-builder-value-empty")),this.eLabel.innerText=e},t.prototype.updateValue=function(e){var r;if(this.eEditor){var n=null!==(r=this.eEditor.getValue())&&void 0!==r?r:"";this.dispatchEvent({type:f.YFc.EVENT_FIELD_VALUE_CHANGED,value:n}),this.value=n,this.renderValue(),this.hideEditor(e)}},ms([(0,f.IzG)("ePill")],t.prototype,"ePill",void 0),ms([(0,f.IzG)("eLabel")],t.prototype,"eLabel",void 0),ms([(0,f.Qnc)("advancedFilterExpressionService")],t.prototype,"advancedFilterExpressionService",void 0),ms([f.QhY],t.prototype,"postConstruct",null),t}(f.YlN),Hy=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Wy=function(o){function t(){return o.call(this,'\n            <div class="ag-advanced-filter-builder-item-condition" role="presentation"></div>\n        ')||this}return Hy(t,o),t.prototype.init=function(e){var r=this,i=e.createPill,a=e.item.filterModel;this.filterModel=a,this.ePill=i({key:a.type,displayValue:this.advancedFilterExpressionService.parseJoinOperator(a),cssClass:"ag-advanced-filter-builder-join-pill",isSelect:!0,getEditorParams:function(){return{values:r.advancedFilterExpressionService.getJoinOperatorAutocompleteEntries()}},update:function(s){return a.type=s},pickerAriaLabelKey:"ariaLabelAdvancedFilterBuilderJoinSelectField",pickerAriaLabelValue:"Advanced Filter Builder Join Operator Select Field",ariaLabel:this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderJoinOperator")}),this.getGui().appendChild(this.ePill.getGui()),this.addDestroyFunc(function(){return r.destroyBean(r.ePill)})},t.prototype.getDragName=function(){return this.advancedFilterExpressionService.parseJoinOperator(this.filterModel)},t.prototype.getAriaLabel=function(){return this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderGroupItem")+" "+this.getDragName()},t.prototype.getValidationMessage=function(){return null},t.prototype.getFocusableElement=function(){return this.ePill.getFocusableElement()},function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);n>3&&i&&Object.defineProperty(t,e,i)}([(0,f.Qnc)("advancedFilterExpressionService")],t.prototype,"advancedFilterExpressionService",void 0),t}(f.YlN),Ky=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ss=function(){return Ss=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},Ss.apply(this,arguments)},Yy=function(o){function t(e){var r=o.call(this,Ss(Ss({},e),{template:'\n                <div class="ag-picker-field ag-advanced-filter-builder-pill-wrapper" role="presentation">\n                    <div ref="eLabel"></div>\n                    <div ref="eWrapper" class="ag-wrapper ag-advanced-filter-builder-pill ag-picker-collapsed">\n                        <div ref="eDisplayField" class="ag-picker-field-display ag-advanced-filter-builder-pill-display"></div>\n                        <ag-input-text-field ref="eInput" class="ag-rich-select-field-input"></ag-input-text-field>\n                        <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>\n                    </div>\n                </div>'}))||this;return r.params=e,r}return Ky(t,o),t.prototype.getFocusableElement=function(){return this.eWrapper},t.prototype.showPicker=function(){var e=this;setTimeout(function(){return o.prototype.showPicker.call(e)})},t.prototype.hidePicker=function(){var e=this;setTimeout(function(){return o.prototype.hidePicker.call(e)})},t.prototype.postConstruct=function(){o.prototype.postConstruct.call(this);var e=this.params,n=e.ariaLabel;this.eWrapper.classList.add(e.wrapperClassName),f._.setAriaLabelledBy(this.eWrapper,""),f._.setAriaLabel(this.eWrapper,n)},t.prototype.createPickerComponent=function(){var e;if(!this.values){var r=this.params.getEditorParams().values;this.values=r;var n=this.value.key,i=null!==(e=r.find(function(a){return a.key===n}))&&void 0!==e?e:{key:n,displayValue:this.value.displayValue};this.value=i}return o.prototype.createPickerComponent.call(this)},t.prototype.onEnterKeyDown=function(e){f._.stopPropagationForAgGrid(e),this.isPickerDisplayed?o.prototype.onEnterKeyDown.call(this,e):(e.preventDefault(),this.showPicker())},t}(f.K8H),$y=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Mt=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},xu=function(o){function t(e,r,n){var i=o.call(this,'\n            <div class="ag-advanced-filter-builder-item-wrapper" role="presentation">\n                <div ref="eItem" class="ag-advanced-filter-builder-item" role="presentation">\n                    <div ref="eTreeLines" class="ag-advanced-filter-builder-item-tree-lines" aria-hidden="true"></div>\n                    <span ref="eDragHandle" class="ag-drag-handle" aria-hidden="true"></span>\n                    <span ref="eValidation" class="ag-advanced-filter-builder-item-button ag-advanced-filter-builder-invalid" aria-hidden="true"></span>\n                </div>\n                <div ref="eButtons" class="ag-advanced-filter-builder-item-buttons">\n                    <span ref="eMoveUpButton" class="ag-advanced-filter-builder-item-button" role="button"></span>\n                    <span ref="eMoveDownButton" class="ag-advanced-filter-builder-item-button" role="button"></span>\n                    <div ref="eAddButton" role="presentation"></div>\n                    <span ref="eRemoveButton" class="ag-advanced-filter-builder-item-button" role="button"></span>\n                </div>\n            </div>\n        ')||this;return i.item=e,i.dragFeature=r,i.focusWrapper=n,i.moveUpDisabled=!1,i.moveDownDisabled=!1,i}return $y(t,o),t.prototype.postConstruct=function(){var e=this,r=this.item,i=r.level,a=r.showMove;if(this.ePillWrapper=this.createManagedBean("join"===r.filterModel.filterType?new Wy:new By),this.ePillWrapper.init({item:this.item,createPill:function(u){return e.createPill(u)}}),this.eDragHandle.insertAdjacentElement("afterend",this.ePillWrapper.getGui()),0===i){var l=document.createElement("div");l.classList.add("ag-advanced-filter-builder-item-tree-line-vertical-bottom"),l.classList.add("ag-advanced-filter-builder-item-tree-line-root"),this.eTreeLines.appendChild(l),f._.setDisplayed(this.eDragHandle,!1),f._.setDisplayed(this.eButtons,!1),f._.setAriaExpanded(this.focusWrapper,!0)}else this.setupTreeLines(i),this.eDragHandle.appendChild(f._.createIconNoSpan("advancedFilterBuilderDrag",this.gridOptionsService)),this.setupValidation(),this.setupMoveButtons(a),this.setupAddButton(),this.setupRemoveButton(),this.setupDragging(),this.updateAriaExpanded();f._.setAriaLevel(this.focusWrapper,i+1),this.initialiseTabGuard({}),this.createManagedBean(new qd(this.getGui(),this.focusWrapper,this.ePillWrapper)),this.updateAriaLabel(),this.addManagedListener(this.ePillWrapper,Dt.EVENT_VALUE_CHANGED,function(){return e.dispatchEvent({type:Dt.EVENT_VALUE_CHANGED})}),this.addManagedListener(this.ePillWrapper,Dt.EVENT_VALID_CHANGED,function(){return e.updateValidity()})},t.prototype.setState=function(e){if(0!==this.item.level){var n=this.item.showMove,i=e.disableMoveUp,a=e.disableMoveDown;this.updateTreeLines(e.treeLines,e.showStartTreeLine),this.updateAriaExpanded(),n&&(this.moveUpDisabled=!!i,this.moveDownDisabled=!!a,this.eMoveUpButton.classList.toggle("ag-advanced-filter-builder-item-button-disabled",i),this.eMoveDownButton.classList.toggle("ag-advanced-filter-builder-item-button-disabled",a),f._.setAriaDisabled(this.eMoveUpButton,!!i),f._.setAriaDisabled(this.eMoveDownButton,!!a),this.moveUpTooltipFeature.refreshToolTip(),this.moveDownTooltipFeature.refreshToolTip())}},t.prototype.focusMoveButton=function(e){(e?this.eMoveUpButton:this.eMoveDownButton).focus()},t.prototype.afterAdd=function(){this.ePillWrapper.getFocusableElement().focus()},t.prototype.setupTreeLines=function(e){for(var r=0;r<e;r++){var n=document.createElement("div");this.eTreeLines.appendChild(n)}},t.prototype.updateTreeLines=function(e,r){for(var n=e.length-1,i=this.eTreeLines.children,a=0;a<n;a++){var s=i.item(a);s&&s.classList.toggle("ag-advanced-filter-builder-item-tree-line-vertical",!e[a])}var l=i.item(n);if(l){l.classList.add("ag-advanced-filter-builder-item-tree-line-horizontal");var u=e[n];l.classList.toggle("ag-advanced-filter-builder-item-tree-line-vertical-top",u),l.classList.toggle("ag-advanced-filter-builder-item-tree-line-vertical",!u)}this.eDragHandle.classList.toggle("ag-advanced-filter-builder-item-tree-line-vertical-bottom",r)},t.prototype.setupValidation=function(){var e=this;this.eValidation.appendChild(f._.createIconNoSpan("advancedFilterBuilderInvalid",this.gridOptionsService)),this.validationTooltipFeature=this.createManagedBean(new f.q8V({getGui:function(){return e.eValidation},getLocation:function(){return"advancedFilter"},getTooltipValue:function(){return e.ePillWrapper.getValidationMessage()},getTooltipShowDelayOverride:function(){return 1e3}},this.beans)),this.validationTooltipFeature.setComp(this.eValidation),this.updateValidity()},t.prototype.setupAddButton=function(){var r,e=this,n=Jd(function(s){return e.advancedFilterExpressionService.translate(s)},null===(r=this.gridOptionsService.get("advancedFilterBuilderParams"))||void 0===r?void 0:r.addSelectWidth),i=this.createManagedBean(new Zd(n));this.addManagedListener(i,f.YFc.EVENT_FIELD_PICKER_VALUE_SELECTED,function(s){return e.dispatchEvent({type:Dt.EVENT_ADDED,item:e.item,isJoin:"join"===s.value.key})}),this.eAddButton.appendChild(i.getGui()),this.createManagedBean(new f.q8V({getGui:function(){return e.eAddButton},getLocation:function(){return"advancedFilter"},getTooltipValue:function(){return e.advancedFilterExpressionService.translate("advancedFilterBuilderAddButtonTooltip")}},this.beans)).setComp(this.eAddButton)},t.prototype.setupRemoveButton=function(){var e=this;this.eRemoveButton.appendChild(f._.createIconNoSpan("advancedFilterBuilderRemove",this.gridOptionsService)),this.addManagedListener(this.eRemoveButton,"click",function(){return e.removeItem()}),this.addManagedListener(this.eRemoveButton,"keydown",function(n){n.key===f.Axe.ENTER&&(n.preventDefault(),f._.stopPropagationForAgGrid(n),e.removeItem())}),this.createManagedBean(new f.q8V({getGui:function(){return e.eRemoveButton},getLocation:function(){return"advancedFilter"},getTooltipValue:function(){return e.advancedFilterExpressionService.translate("advancedFilterBuilderRemoveButtonTooltip")}},this.beans)).setComp(this.eRemoveButton),f._.setAriaLabel(this.eRemoveButton,this.advancedFilterExpressionService.translate("advancedFilterBuilderRemoveButtonTooltip")),this.activateTabIndex([this.eRemoveButton])},t.prototype.setupMoveButtons=function(e){var r=this;e?(this.eMoveUpButton.appendChild(f._.createIconNoSpan("advancedFilterBuilderMoveUp",this.gridOptionsService)),this.addManagedListener(this.eMoveUpButton,"click",function(){return r.moveItem(!0)}),this.addManagedListener(this.eMoveUpButton,"keydown",function(n){n.key===f.Axe.ENTER&&(n.preventDefault(),f._.stopPropagationForAgGrid(n),r.moveItem(!0))}),this.moveUpTooltipFeature=this.createManagedBean(new f.q8V({getGui:function(){return r.eMoveUpButton},getLocation:function(){return"advancedFilter"},getTooltipValue:function(){return r.moveUpDisabled?null:r.advancedFilterExpressionService.translate("advancedFilterBuilderMoveUpButtonTooltip")}},this.beans)),this.moveUpTooltipFeature.setComp(this.eMoveUpButton),f._.setAriaLabel(this.eMoveUpButton,this.advancedFilterExpressionService.translate("advancedFilterBuilderMoveUpButtonTooltip")),this.eMoveDownButton.appendChild(f._.createIconNoSpan("advancedFilterBuilderMoveDown",this.gridOptionsService)),this.addManagedListener(this.eMoveDownButton,"click",function(){return r.moveItem(!1)}),this.addManagedListener(this.eMoveDownButton,"keydown",function(n){n.key===f.Axe.ENTER&&(n.preventDefault(),f._.stopPropagationForAgGrid(n),r.moveItem(!1))}),this.moveDownTooltipFeature=this.createManagedBean(new f.q8V({getGui:function(){return r.eMoveDownButton},getLocation:function(){return"advancedFilter"},getTooltipValue:function(){return r.moveDownDisabled?null:r.advancedFilterExpressionService.translate("advancedFilterBuilderMoveDownButtonTooltip")}},this.beans)),this.moveDownTooltipFeature.setComp(this.eMoveDownButton),f._.setAriaLabel(this.eMoveDownButton,this.advancedFilterExpressionService.translate("advancedFilterBuilderMoveDownButtonTooltip")),this.activateTabIndex([this.eMoveUpButton,this.eMoveDownButton])):(f._.setDisplayed(this.eMoveUpButton,!1),f._.setDisplayed(this.eMoveDownButton,!1))},t.prototype.updateValidity=function(){f._.setVisible(this.eValidation,!this.item.valid),this.validationTooltipFeature.refreshToolTip(),this.updateAriaLabel()},t.prototype.createPill=function(e){var n,i,r=this,a=e.key,s=e.displayValue,l=e.cssClass,u=e.update,c=e.ariaLabel,d=function(C){null!=C&&(u(C),r.dispatchEvent({type:Dt.EVENT_VALUE_CHANGED}))};if(e.isSelect){var h=e.getEditorParams,p=e.pickerAriaLabelKey,v=e.pickerAriaLabelValue,g=this.gridOptionsService.get("advancedFilterBuilderParams"),y=(null!==(n=g?.pillSelectMinWidth)&&void 0!==n?n:140)+"px",S=(null!==(i=g?.pillSelectMaxWidth)&&void 0!==i?i:200)+"px",m=this.createBean(new Yy({pickerAriaLabelKey:p,pickerAriaLabelValue:v,pickerType:"ag-list",value:{key:a,displayValue:s},valueFormatter:function(C){var _;return null==C?null:null!==(_=C.displayValue)&&void 0!==_?_:C.key},variableWidth:!0,minPickerWidth:y,maxPickerWidth:S,getEditorParams:h,wrapperClassName:l,ariaLabel:c}));return this.addManagedListener(m,f.YFc.EVENT_FIELD_PICKER_VALUE_SELECTED,function(C){var _=C.value;return d(_?.key)}),m}return m=this.createBean(new zy({value:s,cssClass:l,type:this.getInputType(e.baseCellDataType),ariaLabel:c})),this.addManagedListener(m,f.YFc.EVENT_FIELD_VALUE_CHANGED,function(_){return d(_.value)}),m},t.prototype.getInputType=function(e){switch(e){case"text":case"object":case"boolean":return"text";case"number":return"number";case"date":case"dateString":return"date"}},t.prototype.setupDragging=function(){var e=this,r={type:f.gt1.AdvancedFilterBuilder,eElement:this.eDragHandle,dragItemName:function(){return e.ePillWrapper.getDragName()},getDefaultIconName:function(){return f.sZo.ICON_NOT_ALLOWED},getDragItem:function(){return{}},onDragStarted:function(){return e.dragFeature.dispatchEvent({type:_u.EVENT_DRAG_STARTED,item:e.item})},onDragStopped:function(){return e.dragFeature.dispatchEvent({type:_u.EVENT_DRAG_ENDED})}};this.dragAndDropService.addDragSource(r,!0),this.addDestroyFunc(function(){return e.dragAndDropService.removeDragSource(r)})},t.prototype.updateAriaLabel=function(){var i,e=this.ePillWrapper.getAriaLabel(),r=""+(this.item.level+1),n=this.ePillWrapper.getValidationMessage();i=n?this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderItemValidation",[e,r,n]):this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderItem",[e,r]),f._.setAriaLabel(this.focusWrapper,i)},t.prototype.updateAriaExpanded=function(){f._.removeAriaExpanded(this.focusWrapper);var e=this.item.filterModel;"join"===e?.filterType&&e.conditions.length&&f._.setAriaExpanded(this.focusWrapper,!0)},t.prototype.removeItem=function(){this.dispatchEvent({type:Dt.EVENT_REMOVED,item:this.item})},t.prototype.moveItem=function(e){this.dispatchEvent({type:Dt.EVENT_MOVED,item:this.item,backwards:e})},Mt([(0,f.IzG)("eTreeLines")],t.prototype,"eTreeLines",void 0),Mt([(0,f.IzG)("eDragHandle")],t.prototype,"eDragHandle",void 0),Mt([(0,f.IzG)("eItem")],t.prototype,"eItem",void 0),Mt([(0,f.IzG)("eButtons")],t.prototype,"eButtons",void 0),Mt([(0,f.IzG)("eValidation")],t.prototype,"eValidation",void 0),Mt([(0,f.IzG)("eMoveUpButton")],t.prototype,"eMoveUpButton",void 0),Mt([(0,f.IzG)("eMoveDownButton")],t.prototype,"eMoveDownButton",void 0),Mt([(0,f.IzG)("eAddButton")],t.prototype,"eAddButton",void 0),Mt([(0,f.IzG)("eRemoveButton")],t.prototype,"eRemoveButton",void 0),Mt([(0,f.Qnc)("beans")],t.prototype,"beans",void 0),Mt([(0,f.Qnc)("dragAndDropService")],t.prototype,"dragAndDropService",void 0),Mt([(0,f.Qnc)("advancedFilterExpressionService")],t.prototype,"advancedFilterExpressionService",void 0),Mt([f.QhY],t.prototype,"postConstruct",null),t}(f._0_),Xy=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Cs=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Qy=function(o){function t(e,r){var n=o.call(this,'\n            <div class="ag-advanced-filter-builder-item-wrapper" role="presentation">\n                <div ref="eItem" class="ag-advanced-filter-builder-item" role="presentation">\n                    <div class="ag-advanced-filter-builder-item-tree-lines" aria-hidden="true">\n                        <div class="ag-advanced-filter-builder-item-tree-line-vertical-top ag-advanced-filter-builder-item-tree-line-horizontal"></div>\n                    </div>\n                </div>\n            </div>\n        ')||this;return n.item=e,n.focusWrapper=r,n}return Xy(t,o),t.prototype.postConstruct=function(){var r,e=this;f._.setAriaLevel(this.focusWrapper,2);var n=Jd(function(s){return e.advancedFilterExpressionService.translate(s)},null===(r=this.gridOptionsService.get("advancedFilterBuilderParams"))||void 0===r?void 0:r.addSelectWidth),i=this.createManagedBean(new Zd(n));this.addManagedListener(i,f.YFc.EVENT_FIELD_PICKER_VALUE_SELECTED,function(s){e.dispatchEvent({type:Dt.EVENT_ADDED,item:e.item,isJoin:"join"===s.value.key})}),this.eItem.appendChild(i.getGui()),this.createManagedBean(new f.q8V({getGui:function(){return i.getGui()},getLocation:function(){return"advancedFilter"},getTooltipValue:function(){return e.advancedFilterExpressionService.translate("advancedFilterBuilderAddButtonTooltip")}},this.beans)).setComp(i.getGui()),this.createManagedBean(new qd(this.getGui(),this.focusWrapper,i)),f._.setAriaLabel(this.focusWrapper,this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderItem",[this.advancedFilterExpressionService.translate("advancedFilterBuilderAddButtonTooltip"),""+(this.item.level+1)]))},t.prototype.afterAdd=function(){},Cs([(0,f.Qnc)("beans")],t.prototype,"beans",void 0),Cs([(0,f.Qnc)("advancedFilterExpressionService")],t.prototype,"advancedFilterExpressionService",void 0),Cs([(0,f.IzG)("eItem")],t.prototype,"eItem",void 0),Cs([f.QhY],t.prototype,"postConstruct",null),t}(f.YlN),Zy=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),cn=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},em=function(o){function t(){var e=o.call(this,'\n            <div role="presentation" class="ag-advanced-filter-builder" tabindex="-1">\n                <div role="presentation" class="ag-advanced-filter-builder-list" ref="eList"></div>\n                <div role="presentation" class="ag-advanced-filter-builder-button-panel">\n                    <button class="ag-button ag-standard-button ag-advanced-filter-builder-apply-button" ref="eApplyFilterButton"></button>\n                    <button class="ag-button ag-standard-button ag-advanced-filter-builder-cancel-button" ref="eCancelFilterButton"></button>\n                </div>\n            </div>')||this;return e.validationMessage=null,e}return Zy(t,o),t.prototype.postConstruct=function(){var r,e=this,n=(null!==(r=this.gridOptionsService.get("advancedFilterBuilderParams"))&&void 0!==r?r:{}).showMoveButtons;this.showMove=!!n,this.addManagedPropertyListener("advancedFilterBuilderParams",function(i){var a=i.currentValue;e.showMove=!!a?.showMoveButtons,e.refreshList(!1)}),this.filterModel=this.setupFilterModel(),this.setupVirtualList(),this.dragFeature=this.createManagedBean(new _u(this,this.virtualList)),this.setupButtons()},t.prototype.refresh=function(){var e=this.virtualList.getLastFocusedRow();this.setupFilterModel(),this.validateItems(),this.refreshList(!1),null!=e&&(this.virtualList.getComponentAt(e)||(e=0),this.virtualList.focusRow(e))},t.prototype.getNumItems=function(){return this.items.length},t.prototype.moveItem=function(e,r){!r||!e||this.moveItemToIndex(e,r.rowIndex,r.position)},t.prototype.afterGuiAttached=function(){this.virtualList.focusRow(0)},t.prototype.setupVirtualList=function(){var e=this;this.virtualList=this.createManagedBean(new f.aSq({cssIdentifier:"advanced-filter-builder",ariaRole:"tree",listName:this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderList")})),this.virtualList.setComponentCreator(this.createItemComponent.bind(this)),this.virtualList.setComponentUpdater(this.updateItemComponent.bind(this)),this.virtualList.setRowHeight(40),this.eList.appendChild(this.virtualList.getGui()),this.virtualList.setModel({getRowCount:function(){return e.items.length},getRow:function(r){return e.items[r]},areRowsEqual:function(r,n){return r===n}}),this.buildList(),this.virtualList.refresh()},t.prototype.setupButtons=function(){var e=this;this.eApplyFilterButton.innerText=this.advancedFilterExpressionService.translate("advancedFilterBuilderApply"),this.activateTabIndex([this.eApplyFilterButton]),this.addManagedListener(this.eApplyFilterButton,"click",function(){e.advancedFilterService.setModel(e.filterModel),e.filterManager.onFilterChanged({source:"advancedFilter"}),e.close()}),this.validationTooltipFeature=this.createManagedBean(new f.q8V({getGui:function(){return e.eApplyFilterButton},getLocation:function(){return"advancedFilter"},getTooltipValue:function(){return e.validationMessage},getTooltipShowDelayOverride:function(){return 1e3}},this.beans)),this.validationTooltipFeature.setComp(this.eApplyFilterButton),this.validate(),this.addManagedListener(this.eApplyFilterButton,"mouseenter",function(){return e.addOrRemoveCssClass("ag-advanced-filter-builder-validation",!0)}),this.addManagedListener(this.eApplyFilterButton,"mouseleave",function(){return e.addOrRemoveCssClass("ag-advanced-filter-builder-validation",!1)}),this.eCancelFilterButton.innerText=this.advancedFilterExpressionService.translate("advancedFilterBuilderCancel"),this.activateTabIndex([this.eCancelFilterButton]),this.addManagedListener(this.eCancelFilterButton,"click",function(){return e.close()})},t.prototype.removeItemFromParent=function(e){var r=e.parent.conditions.indexOf(e.filterModel);return e.parent.conditions.splice(r,1),r},t.prototype.moveItemToIndex=function(e,r,n){var i,u,a=this.items[r],s="join"===(null===(i=a.filterModel)||void 0===i?void 0:i.filterType)&&"bottom"===n,l=s?a.filterModel:a.parent;l&&!this.isChildOrSelf(l,e.filterModel)&&a!==e&&(this.removeItemFromParent(e),s?u=0:-1===(u=l.conditions.indexOf(a.filterModel))?u=l.conditions.length:"bottom"===n&&(u+=1),l.conditions.splice(u,0,e.filterModel),this.refreshList(!1))},t.prototype.isChildOrSelf=function(e,r){var n=this;return e===r||"join"===r.filterType&&r.conditions.some(function(i){return n.isChildOrSelf(e,i)})},t.prototype.setupFilterModel=function(){var e=this.formatFilterModel(this.advancedFilterService.getModel());return this.stringifiedModel=JSON.stringify(e),e},t.prototype.formatFilterModel=function(e){return"join"!==(e=e??{filterType:"join",type:"AND",conditions:[]}).filterType&&(e={filterType:"join",type:"AND",conditions:[e]}),e},t.prototype.buildList=function(){var e=this,r=function(n,i,a,s){i.push({filterModel:n,level:a,parent:s,valid:!0,showMove:e.showMove}),"join"===n.filterType&&(n.conditions.forEach(function(l){return r(l,i,a+1,n)}),0===a&&i.push({filterModel:null,level:a+1,parent:n,valid:!0}))};this.items=[],r(this.filterModel,this.items,0)},t.prototype.refreshList=function(e){if(!e){var r=[];this.items.forEach(function(n){n.valid||r.push(n.filterModel)}),this.buildList(),r.length&&this.items.forEach(function(n){n.filterModel&&r.includes(n.filterModel)&&(n.valid=!1)})}this.virtualList.refresh(e),this.validate()},t.prototype.updateItemComponent=function(e,r){var n=this,i=this.items.indexOf(e),a=function(c,d){var h=n.items.find(function(g){return g.filterModel===c}),p=h?.parent;if(p){var v=p.conditions;a(p,d),d.push(v[v.length-1]===c)}},s=[],l=e.filterModel;l&&(a(l,s),s[0]=!1);var u="join"===l?.filterType&&!!l.conditions.length;r.setState({disableMoveUp:1===i,disableMoveDown:!this.canMoveDown(e,i),treeLines:s,showStartTreeLine:u})},t.prototype.createItemComponent=function(e,r){var n=this,i=this.createBean(e.filterModel?new xu(e,this.dragFeature,r):new Qy(e,r));return i.addManagedListener(i,Dt.EVENT_REMOVED,function(a){return n.removeItem(a.item)}),i.addManagedListener(i,Dt.EVENT_VALUE_CHANGED,function(){return n.validate()}),i.addManagedListener(i,Dt.EVENT_ADDED,function(a){return n.addItem(a.item,a.isJoin)}),i.addManagedListener(i,Dt.EVENT_MOVED,function(a){return n.moveItemUpDown(a.item,a.backwards)}),i instanceof xu&&this.updateItemComponent(e,i),i},t.prototype.addItem=function(e,r){var n,i,a=e.parent,s=e.level,l=e.filterModel,u="join"===l?.filterType,c=r?{filterType:"join",type:"AND",conditions:[]}:{},d=u?l:a,h=u?0:d.conditions.indexOf(l);h>=0?(u||(h+=1),d.conditions.splice(h,0,c)):d.conditions.push(c);var p=this.items.indexOf(e),v=p>=0;v&&(e.filterModel&&p++,(n=this.items).splice.apply(n,function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o}([p,0],function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i}([{filterModel:c,level:u?s+1:s,parent:d,valid:r,showMove:this.showMove}])))),this.refreshList(v),v&&(null===(i=this.virtualList.getComponentAt(p))||void 0===i||i.afterAdd())},t.prototype.removeItem=function(e){var r,n=e.parent,a=n.conditions.indexOf(e.filterModel);n.conditions.splice(a,1);var s="join"===(null===(r=e.filterModel)||void 0===r?void 0:r.filterType),l=this.items.indexOf(e),u=!s&&l>=0;u&&this.items.splice(l,1),this.refreshList(u),l>=0&&this.virtualList.focusRow(l)},t.prototype.moveItemUpDown=function(e,r){var n=this.items.indexOf(e),i=r?n-1:n+1;if(0!==i&&(r||this.canMoveDown(e,n))){var a=this.items[i],s=this.removeItemFromParent(e),l=e.level,u=e.filterModel,c=e.parent,d=a.level,h=a.filterModel,p=a.parent;if(r)if(d===l&&"join"===h.filterType)h.conditions.push(u);else if(d<=l){var v=p.conditions.indexOf(h);p.conditions.splice(v,0,u)}else c.conditions[s-1].conditions.push(u);else if(d===l)if("join"===h.filterType)h.conditions.splice(0,0,u);else{var y=p.conditions.indexOf(h);p.conditions.splice(y+1,0,u)}else if(s<c.conditions.length)c.conditions.splice(s+1,0,u);else{var S=this.items.find(function(w){return w.filterModel===c}),m=S.parent.conditions.indexOf(S.filterModel)+1;S.parent.conditions.splice(m,0,u)}this.refreshList(!1);var C=this.items.findIndex(function(w){return w.filterModel===u});if(C>=0){var _=this.virtualList.getComponentAt(C);_ instanceof xu&&_.focusMoveButton(r)}}},t.prototype.canMoveDown=function(e,r){return!(1===e.level&&r===this.items.length-2||1===e.level&&e.parent.conditions[e.parent.conditions.length-1]===e.filterModel)},t.prototype.close=function(){this.advancedFilterService.getCtrl().toggleFilterBuilder("ui")},t.prototype.validate=function(){var e=!this.items.every(function(r){return r.valid});e?this.validationMessage=this.advancedFilterExpressionService.translate("advancedFilterBuilderValidationIncomplete"):(e=JSON.stringify(this.filterModel)===this.stringifiedModel,this.validationMessage=e?this.advancedFilterExpressionService.translate("advancedFilterBuilderValidationAlreadyApplied"):null),f._.setDisabled(this.eApplyFilterButton,e),this.validationTooltipFeature.refreshToolTip()},t.prototype.validateItems=function(){var e=this,r=function(i){i.type=void 0},n=function(i){delete i.filter};this.items.forEach(function(i){if(i.valid&&i.filterModel&&"join"!==i.filterModel.filterType){var a=i.filterModel,s=a.colId,l=e.advancedFilterExpressionService.getColumnAutocompleteEntries().find(function(h){return h.key===s}),u=e.advancedFilterExpressionService.getColumnDetails(a.colId);if(!l||!u)return i.valid=!1,a.colId=void 0,r(a),void n(a);var d=e.advancedFilterExpressionService.getDataTypeExpressionOperator(u.baseCellDataType).operators[a.type];if(!d)return i.valid=!1,r(a),void n(a);if(d.numOperands>0&&!f._.exists(a.filter))return void(i.valid=!1)}})},cn([(0,f.IzG)("eList")],t.prototype,"eList",void 0),cn([(0,f.IzG)("eApplyFilterButton")],t.prototype,"eApplyFilterButton",void 0),cn([(0,f.IzG)("eCancelFilterButton")],t.prototype,"eCancelFilterButton",void 0),cn([(0,f.Qnc)("filterManager")],t.prototype,"filterManager",void 0),cn([(0,f.Qnc)("advancedFilterService")],t.prototype,"advancedFilterService",void 0),cn([(0,f.Qnc)("advancedFilterExpressionService")],t.prototype,"advancedFilterExpressionService",void 0),cn([(0,f.Qnc)("beans")],t.prototype,"beans",void 0),cn([f.QhY],t.prototype,"postConstruct",null),t}(f.YlN),tm=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ea=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},tf=function(o){function t(e){var r=o.call(this)||this;return r.enabled=e,r}return tm(t,o),t.prototype.postConstruct=function(){var e=this;this.hasAdvancedFilterParent=!!this.gridOptionsService.get("advancedFilterParent"),this.ctrlsService.whenReady(function(){return e.setAdvancedFilterComp()}),this.addManagedListener(this.eventService,f.YFc.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,function(r){return e.onEnabledChanged(r.enabled)}),this.addManagedPropertyListener("advancedFilterParent",function(){return e.updateComps()}),this.addDestroyFunc(function(){e.destroyAdvancedFilterComp(),e.destroyBean(e.eBuilderComp),e.eBuilderDialog&&e.eBuilderDialog.isAlive()&&e.destroyBean(e.eBuilderDialog)})},t.prototype.setupHeaderComp=function(e){this.eHeaderComp=this.createManagedBean(new Jo(this.enabled&&!this.hasAdvancedFilterParent)),e.insertAdjacentElement("beforebegin",this.eHeaderComp.getGui())},t.prototype.focusHeaderComp=function(){return!!this.eHeaderComp&&(this.eHeaderComp.getFocusableElement().focus(),!0)},t.prototype.refreshComp=function(){var e,r;null===(e=this.eFilterComp)||void 0===e||e.refresh(),null===(r=this.eHeaderComp)||void 0===r||r.refresh()},t.prototype.refreshBuilderComp=function(){var e;null===(e=this.eBuilderComp)||void 0===e||e.refresh()},t.prototype.getHeaderHeight=function(){var e,r;return null!==(r=null===(e=this.eHeaderComp)||void 0===e?void 0:e.getHeight())&&void 0!==r?r:0},t.prototype.setInputDisabled=function(e){var r,n;null===(r=this.eFilterComp)||void 0===r||r.setInputDisabled(e),null===(n=this.eHeaderComp)||void 0===n||n.setInputDisabled(e)},t.prototype.toggleFilterBuilder=function(e,r){var n=this;if(!(r&&this.eBuilderDialog||!1===r&&!this.eBuilderDialog)){if(this.eBuilderDialog)return this.builderDestroySource=e,void this.destroyBean(this.eBuilderDialog);this.setInputDisabled(!0);var i=this.getBuilderDialogSize(),a=i.width,s=i.height,l=i.minWidth;this.eBuilderComp=this.createBean(new em),this.eBuilderDialog=this.createBean(new f.MJb({title:this.advancedFilterExpressionService.translate("advancedFilterBuilderTitle"),component:this.eBuilderComp,width:a,height:s,resizable:!0,movable:!0,maximizable:!0,centered:!0,closable:!0,minWidth:l,afterGuiAttached:function(){var u;return null===(u=n.eBuilderComp)||void 0===u?void 0:u.afterGuiAttached()}})),this.dispatchFilterBuilderVisibleChangedEvent(e,!0),this.eBuilderDialog.addEventListener(f.MJb.EVENT_DESTROYED,function(){var u;n.destroyBean(n.eBuilderComp),n.eBuilderComp=void 0,n.eBuilderDialog=void 0,n.setInputDisabled(!1),n.dispatchEvent({type:t.EVENT_BUILDER_CLOSED}),n.dispatchFilterBuilderVisibleChangedEvent(null!==(u=n.builderDestroySource)&&void 0!==u?u:"ui",!1),n.builderDestroySource=void 0})}},t.prototype.dispatchFilterBuilderVisibleChangedEvent=function(e,r){this.eventService.dispatchEvent({type:f.YFc.EVENT_ADVANCED_FILTER_BUILDER_VISIBLE_CHANGED,source:e,visible:r})},t.prototype.getBuilderDialogSize=function(){var e,r,n=null!==(r=null===(e=this.gridOptionsService.get("advancedFilterBuilderParams"))||void 0===e?void 0:e.minWidth)&&void 0!==r?r:500,i=this.popupService.getPopupParent(),a=Math.round(f._.getAbsoluteWidth(i))-2,s=Math.round(.75*f._.getAbsoluteHeight(i))-2;return{width:Math.min(Math.max(600,n),a),height:Math.min(600,s),minWidth:n}},t.prototype.onEnabledChanged=function(e){this.enabled=e,this.updateComps()},t.prototype.updateComps=function(){this.setAdvancedFilterComp(),this.setHeaderCompEnabled(),this.eventService.dispatchEvent({type:f.YFc.EVENT_HEADER_HEIGHT_CHANGED})},t.prototype.setAdvancedFilterComp=function(){var e;if(this.destroyAdvancedFilterComp(),this.enabled){var r=this.gridOptionsService.get("advancedFilterParent");if(this.hasAdvancedFilterParent=!!r,r){var n=this.createBean(new wu),i=n.getGui(),a=this.environment.getTheme().allThemes;a.length&&(e=i.classList).add.apply(e,function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o}([],function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i}(a))),i.classList.add(this.gridOptionsService.is("enableRtl")?"ag-rtl":"ag-ltr"),this.focusService.isKeyboardMode()&&i.classList.add(f._g$.AG_KEYBOARD_FOCUS);var s=this.ctrlsService.getGridCtrl();n.addManagedListener(s,f.YFc.EVENT_KEYBOARD_FOCUS,function(){return i.classList.add(f._g$.AG_KEYBOARD_FOCUS)}),n.addManagedListener(s,f.YFc.EVENT_MOUSE_FOCUS,function(){return i.classList.remove(f._g$.AG_KEYBOARD_FOCUS)}),r.appendChild(i),this.eFilterComp=n}}},t.prototype.setHeaderCompEnabled=function(){var e;null===(e=this.eHeaderComp)||void 0===e||e.setEnabled(this.enabled&&!this.hasAdvancedFilterParent)},t.prototype.destroyAdvancedFilterComp=function(){this.eFilterComp&&(f._.removeFromParent(this.eFilterComp.getGui()),this.destroyBean(this.eFilterComp))},t.EVENT_BUILDER_CLOSED="advancedFilterBuilderClosed",ea([(0,f.Qnc)("focusService")],t.prototype,"focusService",void 0),ea([(0,f.Qnc)("ctrlsService")],t.prototype,"ctrlsService",void 0),ea([(0,f.Qnc)("popupService")],t.prototype,"popupService",void 0),ea([(0,f.Qnc)("advancedFilterExpressionService")],t.prototype,"advancedFilterExpressionService",void 0),ea([f.QhY],t.prototype,"postConstruct",null),t}(f._QX),im=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Vr=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},wu=function(o){function t(){var e=o.call(this,'\n            <div class="ag-advanced-filter" role="presentation" tabindex="-1">\n                <ag-autocomplete ref="eAutocomplete"></ag-autocomplete>\n                <button class="ag-button ag-standard-button ag-advanced-filter-apply-button" ref="eApplyFilterButton"></button>\n                <button class="ag-advanced-filter-builder-button" ref="eBuilderFilterButton">\n                    <span ref="eBuilderFilterButtonIcon" aria-hidden="true"></span>\n                    <span class="ag-advanced-filter-builder-button-label" ref="eBuilderFilterButtonLabel"></span>\n                </button>\n            </div>')||this;return e.expressionParser=null,e.isApplyDisabled=!0,e.builderOpen=!1,e}return im(t,o),t.prototype.postConstruct=function(){var e=this;this.eAutocomplete.setListGenerator(function(r,n){return e.generateAutocompleteListParams(n)}).setValidator(function(){return e.validateValue()}).setForceLastSelection(function(r,n){return e.forceLastSelection(r,n)}).setInputAriaLabel(this.advancedFilterExpressionService.translate("ariaAdvancedFilterInput")).setListAriaLabel(this.advancedFilterExpressionService.translate("ariaLabelAdvancedFilterAutocomplete")),this.refresh(),this.addManagedListener(this.eAutocomplete,f.IFo.EVENT_VALUE_CHANGED,function(r){return e.onValueChanged(r.value)}),this.addManagedListener(this.eAutocomplete,f.IFo.EVENT_VALUE_CONFIRMED,function(r){return e.onValueConfirmed(r.isValid)}),this.addManagedListener(this.eAutocomplete,f.IFo.EVENT_OPTION_SELECTED,function(r){return e.onOptionSelected(r.position,r.updateEntry,r.autocompleteType)}),this.addManagedListener(this.eAutocomplete,f.IFo.EVENT_VALID_CHANGED,function(r){return e.onValidChanged(r.isValid,r.validationMessage)}),this.setupApplyButton(),this.setupBuilderButton()},t.prototype.refresh=function(){var e=this.advancedFilterService.getExpressionDisplayValue();this.eAutocomplete.setValue({value:e??"",position:e?.length,updateListOnlyIfOpen:!0})},t.prototype.setInputDisabled=function(e){this.eAutocomplete.setInputDisabled(e),f._.setDisabled(this.eApplyFilterButton,e||this.isApplyDisabled)},t.prototype.getTooltipParams=function(){var e=o.prototype.getTooltipParams.call(this);return e.location="advancedFilter",e},t.prototype.setupApplyButton=function(){var e=this;this.eApplyFilterButton.innerText=this.advancedFilterExpressionService.translate("advancedFilterApply"),this.activateTabIndex([this.eApplyFilterButton]),this.addManagedListener(this.eApplyFilterButton,"click",function(){return e.onValueConfirmed(e.eAutocomplete.isValid())}),f._.setDisabled(this.eApplyFilterButton,this.isApplyDisabled)},t.prototype.setupBuilderButton=function(){var e=this;this.eBuilderFilterButtonIcon.appendChild(f._.createIconNoSpan("advancedFilterBuilder",this.gridOptionsService)),this.eBuilderFilterButtonLabel.innerText=this.advancedFilterExpressionService.translate("advancedFilterBuilder"),this.activateTabIndex([this.eBuilderFilterButton]),this.addManagedListener(this.eBuilderFilterButton,"click",function(){return e.openBuilder()}),this.addManagedListener(this.advancedFilterService.getCtrl(),tf.EVENT_BUILDER_CLOSED,function(){return e.closeBuilder()})},t.prototype.onValueChanged=function(e){var r;e=f._.makeNull(e),this.advancedFilterService.setExpressionDisplayValue(e),this.expressionParser=this.advancedFilterService.createExpressionParser(e);var n=null===(r=this.expressionParser)||void 0===r?void 0:r.parseExpression();n&&n!==e&&this.eAutocomplete.setValue({value:n,silent:!0,restoreFocus:!0})},t.prototype.onValueConfirmed=function(e){!e||this.isApplyDisabled||(f._.setDisabled(this.eApplyFilterButton,!0),this.advancedFilterService.applyExpression(),this.filterManager.onFilterChanged({source:"advancedFilter"}))},t.prototype.onOptionSelected=function(e,r,n){var i=this.updateExpression(e,r,n);this.eAutocomplete.setValue({value:i.updatedValue,position:i.updatedPosition,updateListOnlyIfOpen:i.hideAutocomplete,restoreFocus:!0})},t.prototype.validateValue=function(){var e,r,n;return null!==(e=this.expressionParser)&&void 0!==e&&e.isValid()?null:null!==(n=null===(r=this.expressionParser)||void 0===r?void 0:r.getValidationMessage())&&void 0!==n?n:null},t.prototype.onValidChanged=function(e,r){this.isApplyDisabled=!e||this.advancedFilterService.isCurrentExpressionApplied(),f._.setDisabled(this.eApplyFilterButton,this.isApplyDisabled),this.setTooltip(r,1e3)},t.prototype.generateAutocompleteListParams=function(e){return this.expressionParser?this.expressionParser.getAutocompleteListParams(e):this.advancedFilterExpressionService.getDefaultAutocompleteListParams("")},t.prototype.updateExpression=function(e,r,n){var i,a;return this.advancedFilterExpressionService.updateAutocompleteCache(r,n),null!==(a=null===(i=this.expressionParser)||void 0===i?void 0:i.updateExpression(e,r,n))&&void 0!==a?a:this.advancedFilterService.getDefaultExpression(r)},t.prototype.forceLastSelection=function(e,r){var n=e.key,i=e.displayValue;return!!r.toLocaleLowerCase().match("^"+(i??n).toLocaleLowerCase()+"\\s*$")},t.prototype.openBuilder=function(){this.builderOpen||(this.builderOpen=!0,f._.setDisabled(this.eBuilderFilterButton,!0),this.advancedFilterService.getCtrl().toggleFilterBuilder("ui"))},t.prototype.closeBuilder=function(){this.builderOpen&&(this.builderOpen=!1,f._.setDisabled(this.eBuilderFilterButton,!1),this.eBuilderFilterButton.focus())},Vr([(0,f.IzG)("eAutocomplete")],t.prototype,"eAutocomplete",void 0),Vr([(0,f.IzG)("eApplyFilterButton")],t.prototype,"eApplyFilterButton",void 0),Vr([(0,f.IzG)("eBuilderFilterButton")],t.prototype,"eBuilderFilterButton",void 0),Vr([(0,f.IzG)("eBuilderFilterButtonIcon")],t.prototype,"eBuilderFilterButtonIcon",void 0),Vr([(0,f.IzG)("eBuilderFilterButtonLabel")],t.prototype,"eBuilderFilterButtonLabel",void 0),Vr([(0,f.Qnc)("advancedFilterService")],t.prototype,"advancedFilterService",void 0),Vr([(0,f.Qnc)("advancedFilterExpressionService")],t.prototype,"advancedFilterExpressionService",void 0),Vr([(0,f.Qnc)("filterManager")],t.prototype,"filterManager",void 0),Vr([f.QhY],t.prototype,"postConstruct",null),t}(f.YlN),om={ariaAdvancedFilterBuilderItem:function(o){return o[0]+". Level "+o[1]+". Press ENTER to edit."},ariaAdvancedFilterBuilderItemValidation:function(o){return o[0]+". Level "+o[1]+". "+o[2]+" Press ENTER to edit."},ariaAdvancedFilterBuilderList:"Advanced Filter Builder List",ariaAdvancedFilterBuilderFilterItem:"Filter Condition",ariaAdvancedFilterBuilderGroupItem:"Filter Group",ariaAdvancedFilterBuilderColumn:"Column",ariaAdvancedFilterBuilderOption:"Option",ariaAdvancedFilterBuilderValue:"Value",ariaAdvancedFilterBuilderJoinOperator:"Join Operator",ariaAdvancedFilterInput:"Advanced Filter Input",ariaLabelAdvancedFilterAutocomplete:"Advanced Filter Autocomplete",advancedFilterContains:"contains",advancedFilterNotContains:"does not contain",advancedFilterTextEquals:"equals",advancedFilterTextNotEqual:"does not equal",advancedFilterStartsWith:"starts with",advancedFilterEndsWith:"ends with",advancedFilterBlank:"is blank",advancedFilterNotBlank:"is not blank",advancedFilterEquals:"=",advancedFilterNotEqual:"!=",advancedFilterGreaterThan:">",advancedFilterGreaterThanOrEqual:">=",advancedFilterLessThan:"<",advancedFilterLessThanOrEqual:"<=",advancedFilterTrue:"is true",advancedFilterFalse:"is false",advancedFilterAnd:"AND",advancedFilterOr:"OR",advancedFilterApply:"Apply",advancedFilterBuilder:"Builder",advancedFilterValidationMissingColumn:"Column is missing",advancedFilterValidationMissingOption:"Option is missing",advancedFilterValidationMissingValue:"Value is missing",advancedFilterValidationInvalidColumn:"Column not found",advancedFilterValidationInvalidOption:"Option not found",advancedFilterValidationMissingQuote:"Value is missing an end quote",advancedFilterValidationNotANumber:"Value is not a number",advancedFilterValidationInvalidDate:"Value is not a valid date",advancedFilterValidationMissingCondition:"Condition is missing",advancedFilterValidationJoinOperatorMismatch:"Join operators within a condition must be the same",advancedFilterValidationInvalidJoinOperator:"Join operator not found",advancedFilterValidationMissingEndBracket:"Missing end bracket",advancedFilterValidationExtraEndBracket:"Too many end brackets",advancedFilterValidationMessage:function(o){return"Expression has an error. "+o[0]+" - "+o[1]+"."},advancedFilterValidationMessageAtEnd:function(o){return"Expression has an error. "+o[0]+" at end of expression."},advancedFilterBuilderTitle:"Advanced Filter",advancedFilterBuilderApply:"Apply",advancedFilterBuilderCancel:"Cancel",advancedFilterBuilderAddButtonTooltip:"Add Filter or Group",advancedFilterBuilderRemoveButtonTooltip:"Remove",advancedFilterBuilderMoveUpButtonTooltip:"Move Up",advancedFilterBuilderMoveDownButtonTooltip:"Move Down",advancedFilterBuilderAddJoin:"Add Group",advancedFilterBuilderAddCondition:"Add Filter",advancedFilterBuilderSelectColumn:"Select a column",advancedFilterBuilderSelectOption:"Select an option",advancedFilterBuilderEnterValue:"Enter a value...",advancedFilterBuilderValidationAlreadyApplied:"Current filter already applied.",advancedFilterBuilderValidationIncomplete:"Not all conditions are complete.",advancedFilterBuilderValidationSelectColumn:"Must select a column.",advancedFilterBuilderValidationSelectOption:"Must select an option.",advancedFilterBuilderValidationEnterValue:"Must enter a value."};function bu(o,t,e){if(!o)return"";var r=e-t;return r?o.slice(0,o.length-r):o}function dn(o,t,e,r,n,i){var a=e+(o.length?1:0),s=0;return n&&(" "===o[a]?s=1:(r+=" ",i&&(r+='"'))),{updatedValue:o.slice(0,t)+r+o.slice(a),updatedPosition:t+r.length+s}}function Ou(o,t){for(var e=t;e<o.length;){if(" "===o[e]){e-=1;break}e++}return e}function Eu(o,t,e,r){e!==t&&(o.expression=dn(o.expression,r-t.length+1,r,e).updatedValue)}var _s=function(){return _s=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},_s.apply(this,arguments)},lm=function(){function o(t,e){this.params=t,this.startPosition=e,this.type="column",this.valid=!0,this.hasStartChar=!1,this.hasEndChar=!1,this.colName=""}return o.prototype.parse=function(t,e){if(t!==jn.COL_START_CHAR||this.colName)if(t===jn.COL_END_CHAR&&this.hasStartChar){if(this.parseColumn(!1,e))return this.hasEndChar=!0,!1;this.colName+=t}else this.colName+=t;else this.hasStartChar=!0},o.prototype.getDisplayValue=function(){return(this.hasStartChar?jn.COL_START_CHAR:"")+this.colName+(this.hasEndChar?jn.COL_END_CHAR:"")},o.prototype.getColId=function(){return this.colId},o.prototype.complete=function(t){this.parseColumn(!0,t)},o.prototype.getValidationError=function(){var t;return this.valid?null:{message:this.params.advancedFilterExpressionService.translate("advancedFilterValidationInvalidColumn"),startPosition:this.startPosition,endPosition:null!==(t=this.endPosition)&&void 0!==t?t:this.params.expression.length-1}},o.prototype.parseColumn=function(t,e){var r;this.endPosition=e;var n=this.params.advancedFilterExpressionService.getColId(this.colName);return n&&this.hasStartChar&&(this.colId=n.colId,Eu(this.params,this.colName,n.columnName,e-1),this.colName=n.columnName,this.column=this.params.columnModel.getPrimaryColumn(this.colId),this.column)?(this.baseCellDataType=null!==(r=this.params.dataTypeService.getBaseDataType(this.column))&&void 0!==r?r:"text",!0):(t&&(this.valid=!1),this.baseCellDataType="text",!1)},o}(),um=function(){function o(t,e,r){this.params=t,this.startPosition=e,this.baseCellDataType=r,this.type="operator",this.valid=!0,this.expectedNumOperands=0,this.operator=""}return o.prototype.parse=function(t,e){if(" "===t||")"===t){if(this.parseOperator(!1,e-1))return!0;this.operator+=t}else this.operator+=t},o.prototype.complete=function(t){this.parseOperator(!0,t)},o.prototype.getValidationError=function(){var t;return this.valid?null:{message:this.params.advancedFilterExpressionService.translate("advancedFilterValidationInvalidOption"),startPosition:this.startPosition,endPosition:null!==(t=this.endPosition)&&void 0!==t?t:this.params.expression.length-1}},o.prototype.getDisplayValue=function(){return this.operator},o.prototype.getOperatorKey=function(){return this.parsedOperator},o.prototype.parseOperator=function(t,e){var r=this.params.advancedFilterExpressionService.getDataTypeExpressionOperator(this.baseCellDataType),n=r.findOperator(this.operator);if(this.endPosition=e,n){this.parsedOperator=n;var i=r.operators[n];this.expectedNumOperands=i.numOperands;var a=i.displayValue;return Eu(this.params,this.operator,a,e),this.operator=a,!0}return(t||!(null===n))&&(this.valid=!1),!1},o}(),cm=function(){function o(t,e,r,n){this.params=t,this.startPosition=e,this.baseCellDataType=r,this.column=n,this.type="operand",this.valid=!0,this.operand="",this.validationMessage=null}return o.prototype.parse=function(t,e){if(" "===t){if(!this.quotes)return this.parseOperand(!1,e),!0;this.operand+=t}else if(")"===t){if("number"===this.baseCellDataType||!this.quotes)return this.parseOperand(!1,e-1),!0;this.operand+=t}else if(this.operand||this.quotes||"'"!==t&&'"'!==t){if(this.quotes&&t===this.quotes)return this.parseOperand(!1,e),!1;this.operand+=t}else this.quotes=t},o.prototype.complete=function(t){this.parseOperand(!0,t)},o.prototype.getValidationError=function(){var t;return this.validationMessage?{message:this.validationMessage,startPosition:this.startPosition,endPosition:null!==(t=this.endPosition)&&void 0!==t?t:this.params.expression.length-1}:null},o.prototype.getRawValue=function(){return this.operand},o.prototype.getModelValue=function(){return this.modelValue},o.prototype.parseOperand=function(t,e){var r=this.params.advancedFilterExpressionService;if(this.endPosition=e,this.modelValue=this.operand,t&&this.quotes)this.valid=!1,this.validationMessage=r.translate("advancedFilterValidationMissingQuote");else if(""===this.modelValue)this.valid=!1,this.validationMessage=r.translate("advancedFilterValidationMissingValue");else{var n=r.getOperandModelValue(this.operand,this.baseCellDataType,this.column);switch(null!=n&&(this.modelValue=n),this.baseCellDataType){case"number":(this.quotes||isNaN(this.modelValue))&&(this.valid=!1,this.validationMessage=r.translate("advancedFilterValidationNotANumber"));break;case"date":case"dateString":null==n&&(this.valid=!1,this.validationMessage=r.translate("advancedFilterValidationInvalidDate"))}}},o}(),jn=function(){function o(t,e){this.params=t,this.startPosition=e,this.isAwaiting=!0}return o.prototype.parseExpression=function(){for(var t,e,r=this.startPosition,n=this.params.expression;r<n.length;){var i=n[r];if(" "!==i||!this.isAwaiting){if(this.isAwaiting=!1,!this.parser){var a=void 0;this.columnParser?this.operatorParser?(this.operandParser=new cm(this.params,r,this.columnParser.baseCellDataType,this.columnParser.column),a=this.operandParser):(this.operatorParser=new um(this.params,r,this.columnParser.baseCellDataType),a=this.operatorParser):(this.columnParser=new lm(this.params,r),a=this.columnParser),this.parser=a}var s=this.parser.parse(i,r);if(null!=s){if(this.isComplete())return this.returnEndPosition(s?r-1:r,!0);this.parser=void 0,this.isAwaiting=!0}}r++}return null===(e=null===(t=this.parser)||void 0===t?void 0:t.complete)||void 0===e||e.call(t,r-1),this.returnEndPosition(r)},o.prototype.isValid=function(){return this.isComplete()&&this.columnParser.valid&&this.operatorParser.valid&&(!this.operandParser||this.operandParser.valid)},o.prototype.getValidationError=function(){var t,e,r,n,i,a=null!==(n=null!==(e=null===(t=this.columnParser)||void 0===t?void 0:t.getValidationError())&&void 0!==e?e:null===(r=this.operatorParser)||void 0===r?void 0:r.getValidationError())&&void 0!==n?n:null===(i=this.operandParser)||void 0===i?void 0:i.getValidationError();if(a)return a;var l,s=this.params.expression.length;return this.columnParser?this.operatorParser?this.operatorParser.expectedNumOperands&&!this.operandParser&&(l="advancedFilterValidationMissingValue"):l="advancedFilterValidationMissingOption":l="advancedFilterValidationMissingColumn",l?{message:this.params.advancedFilterExpressionService.translate(l),startPosition:s,endPosition:s}:null},o.prototype.getFunction=function(t){var e,r,n=this.columnParser.getColId(),i=function sm(o){return o.replace(/(['"])/,"\\$1")}(n),a=null===(e=this.operatorParser)||void 0===e?void 0:e.getOperatorKey(),s=t.operators,l=t.evaluatorParams,u=t.operands,c=this.params.advancedFilterExpressionService.getExpressionOperator(this.columnParser.baseCellDataType,a),d=this.addToListAndGetIndex(s,c),h=this.params.advancedFilterExpressionService.getExpressionEvaluatorParams(n);return"params.operators["+d+"].evaluator(expressionProxy.getValue('"+i+"', node), node, params.evaluatorParams["+this.addToListAndGetIndex(l,h)+"]"+(0===(null===(r=this.operatorParser)||void 0===r?void 0:r.expectedNumOperands)?"":", params.operands["+this.addToListAndGetIndex(u,this.getOperandValue())+"]")+")"},o.prototype.getAutocompleteListParams=function(t){return this.isColumnPosition(t)?this.getColumnAutocompleteListParams(t):this.isOperatorPosition(t)?this.getOperatorAutocompleteListParams(t):this.isBeyondEndPosition(t)?void 0:{enabled:!1}},o.prototype.updateExpression=function(t,e,r){var n,i,a,s,l,u=this.params.expression;if(this.isColumnPosition(t))return dn(this.params.expression,this.startPosition,null!==(n=this.columnParser)&&void 0!==n&&n.getColId()?this.columnParser.endPosition:Ou(u,t),this.params.advancedFilterExpressionService.getColumnValue(e),!0);if(this.isOperatorPosition(t)){var c=this.getBaseCellDataTypeFromOperatorAutocompleteType(r),d=this.hasOperand(c,e.key),h=d&&this.doesOperandNeedQuotes(c),p=void 0;if(null!=(null===(i=this.operatorParser)||void 0===i?void 0:i.startPosition)&&t<this.operatorParser.startPosition)p=dn(u,t,t,null!==(a=e.displayValue)&&void 0!==a?a:e.key,d,h);else{var v=null!==(s=this.operatorParser)&&void 0!==s&&s.getOperatorKey()?this.operatorParser.endPosition:Ou(u,t);p=dn(u,function am(o,t,e){for(var r=t;r<e&&" "===o[r];)r++;return r}(u,this.columnParser.endPosition+1,v),v,null!==(l=e.displayValue)&&void 0!==l?l:e.key,d,h)}return _s(_s({},p),{hideAutocomplete:!d})}return null},o.prototype.getModel=function(){var t=this.columnParser.getColId(),e={filterType:this.columnParser.baseCellDataType,colId:t,type:this.operatorParser.getOperatorKey()};return this.operatorParser.expectedNumOperands&&(e.filter=this.operandParser.getModelValue()),e},o.prototype.getOperandValue=function(){var t=this.operandParser.getRawValue(),e=this.columnParser,r=e.baseCellDataType,n=e.column;switch(r){case"number":t=Number(t);break;case"date":case"dateString":t=this.params.valueParserService.parseValue(n,null,t,void 0)}return"dateString"===r?this.params.dataTypeService.getDateParserFunction()(t):t},o.prototype.isComplete=function(){return!(!this.operatorParser||!(!this.operatorParser.expectedNumOperands||this.operatorParser.expectedNumOperands&&this.operandParser))},o.prototype.isColumnPosition=function(t){return!this.columnParser||null==this.columnParser.endPosition||t<=this.columnParser.endPosition+1},o.prototype.isOperatorPosition=function(t){return!this.operatorParser||null==this.operatorParser.endPosition||t<=this.operatorParser.endPosition+1},o.prototype.isBeyondEndPosition=function(t){return this.isComplete()&&null!=this.endPosition&&t>this.endPosition+1&&this.endPosition+1<this.params.expression.length},o.prototype.returnEndPosition=function(t,e){return this.endPosition=e?t:t-1,t},o.prototype.getColumnAutocompleteListParams=function(t){return this.params.advancedFilterExpressionService.generateAutocompleteListParams(this.params.advancedFilterExpressionService.getColumnAutocompleteEntries(),"column",this.getColumnSearchString(t))},o.prototype.getColumnSearchString=function(t){var e,r,n,i,a,s=null!==(r=null===(e=this.columnParser)||void 0===e?void 0:e.getDisplayValue())&&void 0!==r?r:"",l=bu(s,t,null==(null===(n=this.columnParser)||void 0===n?void 0:n.endPosition)?this.params.expression.length:this.columnParser.endPosition+1),u=(null===(i=this.columnParser)||void 0===i?void 0:i.hasStartChar)&&l.length>0,c=(null===(a=this.columnParser)||void 0===a?void 0:a.hasEndChar)&&l.length===s.length+2;return u?l.slice(1,c?-1:void 0):l},o.prototype.getOperatorAutocompleteListParams=function(t){var e,r,n,i,a,s=null===(e=this.columnParser)||void 0===e?void 0:e.column;if(!s)return{enabled:!1};var l=this.columnParser.baseCellDataType,u=null!=(null===(r=this.operatorParser)||void 0===r?void 0:r.startPosition)&&t<this.operatorParser.startPosition?"":bu(null!==(i=null===(n=this.operatorParser)||void 0===n?void 0:n.getDisplayValue())&&void 0!==i?i:"",t,null==(null===(a=this.operatorParser)||void 0===a?void 0:a.endPosition)?this.params.expression.length:this.operatorParser.endPosition+1);return this.params.advancedFilterExpressionService.generateAutocompleteListParams(this.params.advancedFilterExpressionService.getOperatorAutocompleteEntries(s,l),"operator-"+l,u)},o.prototype.getBaseCellDataTypeFromOperatorAutocompleteType=function(t){return t?.replace("operator-","")},o.prototype.hasOperand=function(t,e){var r,n;return!t||!e||(null!==(n=null===(r=this.params.advancedFilterExpressionService.getExpressionOperator(t,e))||void 0===r?void 0:r.numOperands)&&void 0!==n?n:0)>0},o.prototype.doesOperandNeedQuotes=function(t){return"number"!==t},o.prototype.addToListAndGetIndex=function(t,e){var r=t.length;return t.push(e),r},o.COL_START_CHAR="[",o.COL_END_CHAR="]",o}();function xs(o,t,e){var r=!1,n=o.toLocaleLowerCase(),i=n+" ",a=Object.entries(t).find(function(s){var l=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i}(s,2),c=e(l[1]).toLocaleLowerCase();return c.startsWith(i)&&(r=!0),c===n});return a?a[0]:r?null:void 0}function Tu(o,t){return(t??Object.keys(o)).map(function(r){return{key:r,displayValue:o[r].displayValue}})}var rf=function(){function o(t){this.params=t,this.initOperators()}return o.prototype.getEntries=function(t){return Tu(this.operators,t)},o.prototype.findOperator=function(t){return xs(t,this.operators,function(e){return e.displayValue})},o.prototype.initOperators=function(){var t=this,e=this.params.translate;this.operators={contains:{displayValue:e("advancedFilterContains"),evaluator:function(r,n,i,a){return t.evaluateExpression(r,n,i,a,!1,function(s,l){return s.includes(l)})},numOperands:1},notContains:{displayValue:e("advancedFilterNotContains"),evaluator:function(r,n,i,a){return t.evaluateExpression(r,n,i,a,!0,function(s,l){return!s.includes(l)})},numOperands:1},equals:{displayValue:e("advancedFilterTextEquals"),evaluator:function(r,n,i,a){return t.evaluateExpression(r,n,i,a,!1,function(s,l){return s===l})},numOperands:1},notEqual:{displayValue:e("advancedFilterTextNotEqual"),evaluator:function(r,n,i,a){return t.evaluateExpression(r,n,i,a,!0,function(s,l){return s!=l})},numOperands:1},startsWith:{displayValue:e("advancedFilterStartsWith"),evaluator:function(r,n,i,a){return t.evaluateExpression(r,n,i,a,!1,function(s,l){return s.startsWith(l)})},numOperands:1},endsWith:{displayValue:e("advancedFilterEndsWith"),evaluator:function(r,n,i,a){return t.evaluateExpression(r,n,i,a,!1,function(s,l){return s.endsWith(l)})},numOperands:1},blank:{displayValue:e("advancedFilterBlank"),evaluator:function(r){return null==r||"string"==typeof r&&0===r.trim().length},numOperands:0},notBlank:{displayValue:e("advancedFilterNotBlank"),evaluator:function(r){return null!=r&&("string"!=typeof r||r.trim().length>0)},numOperands:0}}},o.prototype.evaluateExpression=function(t,e,r,n,i,a){return null==t?i:r.caseSensitive?a(r.valueConverter(t,e),n):a(r.valueConverter(t,e).toLocaleLowerCase(),n.toLocaleLowerCase())},o}(),Pu=function(){function o(t){this.params=t,this.initOperators()}return o.prototype.getEntries=function(t){return Tu(this.operators,t)},o.prototype.findOperator=function(t){return xs(t,this.operators,function(e){return e.displayValue})},o.prototype.initOperators=function(){var t=this,e=this.params,r=e.translate,n=e.equals;this.operators={equals:{displayValue:r("advancedFilterEquals"),evaluator:function(i,a,s,l){return t.evaluateSingleOperandExpression(i,a,s,l,!!s.includeBlanksInEquals,n)},numOperands:1},notEqual:{displayValue:r("advancedFilterNotEqual"),evaluator:function(i,a,s,l){return t.evaluateSingleOperandExpression(i,a,s,l,!!s.includeBlanksInEquals,function(u,c){return!n(u,c)})},numOperands:1},greaterThan:{displayValue:r("advancedFilterGreaterThan"),evaluator:function(i,a,s,l){return t.evaluateSingleOperandExpression(i,a,s,l,!!s.includeBlanksInGreaterThan,function(u,c){return u>c})},numOperands:1},greaterThanOrEqual:{displayValue:r("advancedFilterGreaterThanOrEqual"),evaluator:function(i,a,s,l){return t.evaluateSingleOperandExpression(i,a,s,l,!!s.includeBlanksInGreaterThan,function(u,c){return u>=c})},numOperands:1},lessThan:{displayValue:r("advancedFilterLessThan"),evaluator:function(i,a,s,l){return t.evaluateSingleOperandExpression(i,a,s,l,!!s.includeBlanksInLessThan,function(u,c){return u<c})},numOperands:1},lessThanOrEqual:{displayValue:r("advancedFilterLessThanOrEqual"),evaluator:function(i,a,s,l){return t.evaluateSingleOperandExpression(i,a,s,l,!!s.includeBlanksInLessThan,function(u,c){return u<=c})},numOperands:1},blank:{displayValue:r("advancedFilterBlank"),evaluator:function(i){return null==i},numOperands:0},notBlank:{displayValue:r("advancedFilterNotBlank"),evaluator:function(i){return null!=i},numOperands:0}}},o.prototype.evaluateSingleOperandExpression=function(t,e,r,n,i,a){return null==t?i:a(r.valueConverter(t,e),n)},o}(),fm=function(){function o(t){this.params=t,this.initOperators()}return o.prototype.getEntries=function(t){return Tu(this.operators,t)},o.prototype.findOperator=function(t){return xs(t,this.operators,function(e){return e.displayValue})},o.prototype.initOperators=function(){var t=this.params.translate;this.operators={true:{displayValue:t("advancedFilterTrue"),evaluator:function(e){return!!e},numOperands:0},false:{displayValue:t("advancedFilterFalse"),evaluator:function(e){return!1===e},numOperands:0},blank:{displayValue:t("advancedFilterBlank"),evaluator:function(e){return null==e},numOperands:0},notBlank:{displayValue:t("advancedFilterNotBlank"),evaluator:function(e){return null!=e},numOperands:0}}},o}(),hm=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ei=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},vm=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.columnNameToIdMap={},e.columnAutocompleteEntries=null,e.expressionEvaluatorParams={},e}return hm(t,o),t.prototype.postConstruct=function(){this.expressionJoinOperators=this.generateExpressionJoinOperators(),this.expressionOperators=this.generateExpressionOperators()},t.prototype.parseJoinOperator=function(e){var r,n=e.type;return null!==(r=this.expressionJoinOperators[n])&&void 0!==r?r:n},t.prototype.getColumnDisplayValue=function(e){var a,r=e.colId,i=this.getColumnAutocompleteEntries().find(function(s){return s.key===r});return i?this.columnNameToIdMap[(a=i.displayValue).toLocaleUpperCase()]={colId:r,columnName:a}:a=r,a},t.prototype.getOperatorDisplayValue=function(e){var r,n;return null!==(n=null===(r=this.getExpressionOperator(e.filterType,e.type))||void 0===r?void 0:r.displayValue)&&void 0!==n?n:e.type},t.prototype.getOperandModelValue=function(e,r,n){var i;switch(r){case"number":return f._.exists(e)?Number(e):null;case"date":return f._.serialiseDate(this.valueParserService.parseValue(n,null,e,void 0),!1);case"dateString":var a=this.valueParserService.parseValue(n,null,e,void 0);return f._.serialiseDate(null!==(i=this.dataTypeService.getDateParserFunction()(a))&&void 0!==i?i:null,!1)}return e},t.prototype.getOperandDisplayValue=function(e,r){var n,i,l=e.filter,u=this.columnModel.getPrimaryColumn(e.colId),c="";if(null!=l){var d=void 0;switch(e.filterType){case"number":d=null!==(n=f._.toStringOrNull(l))&&void 0!==n?n:"";break;case"date":var h=f._.parseDateTimeFromString(l);d=u?this.valueFormatterService.formatValue(u,null,h):null;break;case"dateString":var p=f._.parseDateTimeFromString(l),v=u?this.dataTypeService.getDateFormatterFunction()(p??void 0):null;d=u?this.valueFormatterService.formatValue(u,null,v):null}"number"!==e.filterType&&(d=null!==(i=d??f._.toStringOrNull(l))&&void 0!==i?i:"",r||(d='"'+d+'"')),c=r?d:" "+d}return c},t.prototype.parseColumnFilterModel=function(e){var r,n;return"["+(null!==(r=this.getColumnDisplayValue(e))&&void 0!==r?r:"")+"] "+(null!==(n=this.getOperatorDisplayValue(e))&&void 0!==n?n:"")+this.getOperandDisplayValue(e)},t.prototype.updateAutocompleteCache=function(e,r){if("column"===r){var n=e.key,i=e.displayValue;this.columnNameToIdMap[e.displayValue.toLocaleUpperCase()]={colId:n,columnName:i}}},t.prototype.translate=function(e,r){var n=om[e];return"function"==typeof n&&(n=n(r)),this.localeService.getLocaleTextFunc()(e,n,r)},t.prototype.generateAutocompleteListParams=function(e,r,n){return{enabled:!0,type:r,searchString:n,entries:e}},t.prototype.getColumnAutocompleteEntries=function(){var r,e=this;if(this.columnAutocompleteEntries)return this.columnAutocompleteEntries;var n=null!==(r=this.columnModel.getAllPrimaryColumns())&&void 0!==r?r:[],i=[],a=this.gridOptionsService.is("includeHiddenColumnsInAdvancedFilter");return n.forEach(function(s){s.getColDef().filter&&(a||s.isVisible()||s.isRowGroupActive())&&i.push({key:s.getColId(),displayValue:e.columnModel.getDisplayNameForColumn(s,"advancedFilter")})}),i.sort(function(s,l){var u,c,d=null!==(u=s.displayValue)&&void 0!==u?u:"",h=null!==(c=l.displayValue)&&void 0!==c?c:"";return d<h?-1:h>d?1:0}),i},t.prototype.getOperatorAutocompleteEntries=function(e,r){var n=this.getActiveOperators(e);return this.getDataTypeExpressionOperator(r).getEntries(n)},t.prototype.getJoinOperatorAutocompleteEntries=function(){return Object.entries(this.expressionJoinOperators).map(function(e){var r=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i}(e,2);return{key:r[0],displayValue:r[1]}})},t.prototype.getDefaultAutocompleteListParams=function(e){return this.generateAutocompleteListParams(this.getColumnAutocompleteEntries(),"column",e)},t.prototype.getDataTypeExpressionOperator=function(e){return this.expressionOperators[e]},t.prototype.getExpressionOperator=function(e,r){var n,i;return null===(i=null===(n=this.getDataTypeExpressionOperator(e))||void 0===n?void 0:n.operators)||void 0===i?void 0:i[r]},t.prototype.getExpressionJoinOperators=function(){return this.expressionJoinOperators},t.prototype.getColId=function(e){var r=e.toLocaleUpperCase(),n=this.columnNameToIdMap[r];if(n)return n;var a=this.getColumnAutocompleteEntries().find(function(c){return c.displayValue.toLocaleUpperCase()===r});if(a){var u={colId:a.key,columnName:a.displayValue};return this.columnNameToIdMap[r]=u,u}return null},t.prototype.getExpressionEvaluatorParams=function(e){var r=this,n=this.expressionEvaluatorParams[e];if(n)return n;var i=this.columnModel.getPrimaryColumn(e);if(!i)return{valueConverter:function(l){return l}};switch(this.dataTypeService.getBaseDataType(i)){case"dateString":n={valueConverter:this.dataTypeService.getDateParserFunction()};break;case"object":n=i.getColDef().filterValueGetter?{valueConverter:function(l){return l}}:{valueConverter:function(l,u){var c;return null!==(c=r.valueFormatterService.formatValue(i,u,l))&&void 0!==c?c:"function"==typeof l.toString?l.toString():""}};break;case"text":case void 0:n={valueConverter:function(l){return f._.toStringOrNull(l)}};break;default:n={valueConverter:function(l){return l}}}var s=i.getColDef().filterParams;return s&&["caseSensitive","includeBlanksInEquals","includeBlanksInLessThan","includeBlanksInGreaterThan"].forEach(function(l){var u=s[l];u&&(n[l]=u)}),this.expressionEvaluatorParams[e]=n,n},t.prototype.getColumnDetails=function(e){var r=this.columnModel.getPrimaryColumn(e);if(!r)return null;var n=this.dataTypeService.getBaseDataType(r);return n?{column:r,baseCellDataType:n}:null},t.prototype.generateExpressionOperators=function(){var e=this,r=function(n,i){return e.translate(n,i)};return{text:new rf({translate:r}),boolean:new fm({translate:r}),object:new rf({translate:r}),number:new Pu({translate:r,equals:function(n,i){return n===i}}),date:new Pu({translate:r,equals:function(n,i){return n.getTime()===i.getTime()}}),dateString:new Pu({translate:r,equals:function(n,i){return n.getTime()===i.getTime()}})}},t.prototype.getColumnValue=function(e){return""+jn.COL_START_CHAR+e.displayValue+jn.COL_END_CHAR},t.prototype.generateExpressionJoinOperators=function(){return{AND:this.translate("advancedFilterAnd"),OR:this.translate("advancedFilterOr")}},t.prototype.getActiveOperators=function(e){var r,n=null===(r=e.getColDef().filterParams)||void 0===r?void 0:r.filterOptions;if(n)return n.every(function(a){return"string"==typeof a})?n:void 0},t.prototype.resetColumnCaches=function(){this.columnAutocompleteEntries=null,this.columnNameToIdMap={}},Ei([(0,f.Qnc)("valueFormatterService")],t.prototype,"valueFormatterService",void 0),Ei([(0,f.Qnc)("valueParserService")],t.prototype,"valueParserService",void 0),Ei([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),Ei([(0,f.Qnc)("dataTypeService")],t.prototype,"dataTypeService",void 0),Ei([f.QhY],t.prototype,"postConstruct",null),Ei([(0,f.ekA)("advancedFilterExpressionService")],t)}(f._QX),gm=function(){function o(t){this.params=t,this.operators=[],this.operatorStartPositions=[],this.operatorEndPositions=[],this.activeOperator=0,this.validationError=null}return o.prototype.parseExpression=function(t){this.operators.push(""),this.operatorStartPositions.push(t),this.operatorEndPositions.push(void 0);for(var e=this.params.expression;t<e.length;){var r=e[t];if(" "===r){if(this.parseOperator(t-1))return this.activeOperator++,t-1;this.operators[this.activeOperator]+=r}else this.operators[this.activeOperator]+=r;t++}return this.parseOperator(t-1),t},o.prototype.isValid=function(){return!(this.validationError||this.operators.length&&!this.parsedOperator)},o.prototype.getValidationError=function(){return this.validationError},o.prototype.getFunction=function(){return"OR"===this.parsedOperator?"||":"&&"},o.prototype.getModel=function(){return"OR"===this.parsedOperator?"OR":"AND"},o.prototype.getAutocompleteListParams=function(t,e){var n,r=this;if(null==e)n="";else{var a=this.operatorEndPositions[e];n=bu(this.operators[e],t,null==a?this.params.expression.length:a+1)}var s=this.params.advancedFilterExpressionService.getJoinOperatorAutocompleteEntries();return(e||null==e&&this.activeOperator)&&(s=s.filter(function(l){return l.key===r.parsedOperator})),this.params.advancedFilterExpressionService.generateAutocompleteListParams(s,"join",n)},o.prototype.updateExpression=function(t,e,r){var n,i,a=this.params.expression,s=null!==(n=e.displayValue)&&void 0!==n?n:e.key;if(0===r)for(var l=this.operatorEndPositions.length-1;l>0;l--){var u=this.operatorEndPositions[l];null!=u&&(a=dn(a,this.operatorStartPositions[l],u,s).updatedValue)}return dn(a,this.operatorStartPositions.length>r?this.operatorStartPositions[r]:a.length,null!==(i=this.operatorEndPositions.length>r?this.operatorEndPositions[r]:void 0)&&void 0!==i?i:Ou(a,t),s,!0)},o.prototype.getNumOperators=function(){return this.operators.length},o.prototype.getLastOperatorEndPosition=function(){return this.operatorEndPositions[this.operatorEndPositions.length-1]},o.prototype.parseOperator=function(t){var e=this.operators.length>this.activeOperator?this.operators[this.activeOperator]:"",r=this.params.advancedFilterExpressionService.getExpressionJoinOperators(),n=xs(e,r,function(a){return a});if(n){this.operatorEndPositions[this.activeOperator]=t;var i=r[n];if(this.activeOperator){if(n!==this.parsedOperator)return this.validationError||(this.validationError={message:this.params.advancedFilterExpressionService.translate("advancedFilterValidationJoinOperatorMismatch"),startPosition:t-e.length+1,endPosition:t}),!1}else this.parsedOperator=n;return e!==i&&(Eu(this.params,e,i,t),this.operators[this.activeOperator]=i),!0}return null!==n&&(this.validationError||(this.validationError={message:this.params.advancedFilterExpressionService.translate("advancedFilterValidationInvalidJoinOperator"),startPosition:t-e.length+1,endPosition:t}),!0)},o}(),ym=function(){function o(t,e){this.params=t,this.startPosition=e,this.expectingExpression=!0,this.expectingOperator=!1,this.expressionParsers=[],this.operatorParser=new gm(this.params),this.missingEndBracket=!1,this.extraEndBracket=!1}return o.prototype.parseExpression=function(){for(var t=this.startPosition,e=this.params.expression;t<e.length;){var r=e[t];if("("!==r||this.expectingOperator){if(")"===r)return this.endPosition=t-1,0===this.startPosition&&(this.extraEndBracket=!0),t;" "!==r&&(this.expectingExpression?(t=(n=new jn(this.params,t)).parseExpression(),this.expressionParsers.push(n),this.expectingExpression=!1,this.expectingOperator=!0):this.expectingOperator&&(t=this.operatorParser.parseExpression(t),this.expectingOperator=!1,this.expectingExpression=!0))}else{var n;t=(n=new o(this.params,t+1)).parseExpression(),this.expressionParsers.push(n),this.expectingExpression=!1,this.expectingOperator=!0}t++}return this.startPosition>0&&(this.missingEndBracket=!0),t},o.prototype.isValid=function(){return!this.missingEndBracket&&!this.extraEndBracket&&this.expressionParsers.length===this.operatorParser.getNumOperators()+1&&this.operatorParser.isValid()&&this.expressionParsers.every(function(t){return t.isValid()})},o.prototype.getValidationError=function(){for(var t=this.operatorParser.getValidationError(),e=0;e<this.expressionParsers.length;e++){var r=this.expressionParsers[e].getValidationError();if(r)return t&&t.startPosition<r.startPosition?t:r}return t||(this.extraEndBracket?{message:this.params.advancedFilterExpressionService.translate("advancedFilterValidationExtraEndBracket"),startPosition:this.endPosition+1,endPosition:this.endPosition+1}:(this.expressionParsers.length===this.operatorParser.getNumOperators()?n="advancedFilterValidationMissingCondition":this.missingEndBracket&&(n="advancedFilterValidationMissingEndBracket"),n?{message:this.params.advancedFilterExpressionService.translate(n),startPosition:this.params.expression.length,endPosition:this.params.expression.length}:null));var n},o.prototype.getFunction=function(t){var e=this.expressionParsers.length>1,r=this.expressionParsers.map(function(n){return n.getFunction(t)}).join(" "+this.operatorParser.getFunction()+" ");return e?"("+r+")":r},o.prototype.getAutocompleteListParams=function(t){if(!(null!=this.endPosition&&t>this.endPosition+1)){if(!this.expressionParsers.length)return this.getColumnAutocompleteListParams();var e=this.getExpressionParserIndex(t);if(null==e)return"("===this.params.expression[t]?{enabled:!1}:this.getColumnAutocompleteListParams();var n=this.expressionParsers[e].getAutocompleteListParams(t);if(!n){if(e<this.expressionParsers.length-1)return this.operatorParser.getAutocompleteListParams(t,e);if(this.expressionParsers.length===this.operatorParser.getNumOperators()){var i=this.operatorParser.getLastOperatorEndPosition();return null==i||t<=i+1?this.operatorParser.getAutocompleteListParams(t,this.operatorParser.getNumOperators()-1):this.getColumnAutocompleteListParams()}return")"===this.params.expression[t-1]?{enabled:!1}:this.operatorParser.getAutocompleteListParams(t)}return n}},o.prototype.updateExpression=function(t,e,r){var n,i=this.params.expression,a=this.getExpressionParserIndex(t);if(null==a){var s="column"===r?this.params.advancedFilterExpressionService.getColumnValue(e):null!==(n=e.displayValue)&&void 0!==n?n:e.key;return dn(i,this.startPosition,this.startPosition,s,!0)}return this.expressionParsers[a].updateExpression(t,e,r)??("column"===r?dn(i,t,i.length-1,this.params.advancedFilterExpressionService.getColumnValue(e),!0):this.operatorParser.updateExpression(t,e,a))},o.prototype.getModel=function(){return this.expressionParsers.length>1?{filterType:"join",type:this.operatorParser.getModel(),conditions:this.expressionParsers.map(function(t){return t.getModel()})}:this.expressionParsers[0].getModel()},o.prototype.getColumnAutocompleteListParams=function(){return this.params.advancedFilterExpressionService.generateAutocompleteListParams(this.params.advancedFilterExpressionService.getColumnAutocompleteEntries(),"column","")},o.prototype.getExpressionParserIndex=function(t){for(var e,r=0;r<this.expressionParsers.length&&!(this.expressionParsers[r].startPosition>t);r++)e=r;return e},o}(),mm=function(){function o(t){this.params=t,this.valid=!1}return o.prototype.parseExpression=function(){this.joinExpressionParser=new ym(this.params,0);var t=this.joinExpressionParser.parseExpression();return this.valid=t>=this.params.expression.length-1&&this.joinExpressionParser.isValid(),this.params.expression},o.prototype.isValid=function(){return this.valid},o.prototype.getValidationMessage=function(){var t=this.joinExpressionParser.getValidationError();if(!t)return null;var e=t.message,r=t.startPosition;return r<this.params.expression.length?this.params.advancedFilterExpressionService.translate("advancedFilterValidationMessage",[e,this.params.expression.slice(r,t.endPosition+1).trim()]):this.params.advancedFilterExpressionService.translate("advancedFilterValidationMessageAtEnd",[e])},o.prototype.getFunction=function(){var t={operands:[],operators:[],evaluatorParams:[]};return{functionBody:"return "+this.joinExpressionParser.getFunction(t)+";",params:t}},o.prototype.getAutocompleteListParams=function(t){var e;return null!==(e=this.joinExpressionParser.getAutocompleteListParams(t))&&void 0!==e?e:{enabled:!1}},o.prototype.updateExpression=function(t,e,r){return this.joinExpressionParser.updateExpression(t,e,r)},o.prototype.getModel=function(){return this.isValid()?this.joinExpressionParser.getModel():null},o}(),Sm=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),fn=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Cm=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.appliedExpression=null,e.expression=null,e.isValid=!0,e}return Sm(t,o),t.prototype.postConstruct=function(){var e=this;this.setEnabled(this.gridOptionsService.is("enableAdvancedFilter"),!0),this.ctrl=this.createManagedBean(new tf(this.enabled)),this.expressionProxy={getValue:function(r,n){var i=e.columnModel.getPrimaryColumn(r);return i?e.valueService.getValue(i,n,!0):void 0}},this.addManagedPropertyListener("enableAdvancedFilter",function(r){return e.setEnabled(!!r.currentValue)}),this.addManagedListener(this.eventService,f.YFc.EVENT_NEW_COLUMNS_LOADED,function(r){return e.onNewColumnsLoaded(r)}),this.addManagedPropertyListener("includeHiddenColumnsInAdvancedFilter",function(){return e.updateValidity()})},t.prototype.isEnabled=function(){return this.enabled},t.prototype.isFilterPresent=function(){return!!this.expressionFunction},t.prototype.doesFilterPass=function(e){return this.expressionFunction(this.expressionProxy,e,this.expressionParams)},t.prototype.getModel=function(){var e,r=this.createExpressionParser(this.appliedExpression);return r?.parseExpression(),null!==(e=r?.getModel())&&void 0!==e?e:null},t.prototype.setModel=function(e){var r=this,n=function(a,s){if("join"===a.filterType){var l=r.advancedFilterExpressionService.parseJoinOperator(a),u=a.conditions.map(function(c){return n(c)}).filter(function(c){return f._.exists(c)}).join(" "+l+" ");return s||a.conditions.length<=1?u:"("+u+")"}return r.advancedFilterExpressionService.parseColumnFilterModel(a)},i=e?n(e,!0):null;this.setExpressionDisplayValue(i),this.applyExpression(),this.ctrl.refreshComp(),this.ctrl.refreshBuilderComp()},t.prototype.getExpressionDisplayValue=function(){return this.expression},t.prototype.setExpressionDisplayValue=function(e){this.expression=e},t.prototype.isCurrentExpressionApplied=function(){return this.appliedExpression===this.expression},t.prototype.createExpressionParser=function(e){return e?new mm({expression:e,columnModel:this.columnModel,dataTypeService:this.dataTypeService,valueParserService:this.valueParserService,advancedFilterExpressionService:this.advancedFilterExpressionService}):null},t.prototype.getDefaultExpression=function(e){var r=this.advancedFilterExpressionService.getColumnValue(e)+" ";return{updatedValue:r,updatedPosition:r.length}},t.prototype.isHeaderActive=function(){return!this.gridOptionsService.get("advancedFilterParent")},t.prototype.getCtrl=function(){return this.ctrl},t.prototype.setEnabled=function(e,r){var n=this.enabled,i="clientSide"===this.rowModel.getType();e&&!i&&f._.doOnce(function(){console.warn("AG Grid: Advanced Filter is only supported with the Client-Side Row Model.")},"advancedFilterCSRM"),this.enabled=e&&i,r||this.enabled===n||this.eventService.dispatchEvent({type:f.YFc.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,enabled:this.enabled})},t.prototype.applyExpression=function(){var e=this.createExpressionParser(this.expression);e?.parseExpression(),this.applyExpressionFromParser(e)},t.prototype.applyExpressionFromParser=function(e){if(this.isValid=!e||e.isValid(),!e||!this.isValid)return this.expressionFunction=null,this.expressionParams=null,void(this.appliedExpression=null);var r=e.getFunction(),i=r.params;this.expressionFunction=new Function("expressionProxy","node","params",r.functionBody),this.expressionParams=i,this.appliedExpression=this.expression},t.prototype.updateValidity=function(){this.advancedFilterExpressionService.resetColumnCaches();var e=this.createExpressionParser(this.expression);e?.parseExpression();var n=(!e||e.isValid())!==this.isValid;return n&&(this.applyExpressionFromParser(e),this.ctrl.refreshComp()),this.ctrl.refreshBuilderComp(),n},t.prototype.onNewColumnsLoaded=function(e){var r=this;if("gridInitializing"===e.source){var n=function(){var a;return r.setModel(null!==(a=r.gridOptionsService.get("advancedFilterModel"))&&void 0!==a?a:null)};if(this.dataTypeService.isPendingInference()){this.ctrl.setInputDisabled(!0);var i=this.addManagedListener(this.eventService,f.YFc.EVENT_DATA_TYPES_INFERRED,function(){i?.(),n(),r.ctrl.setInputDisabled(!1)})}else n()}},fn([(0,f.Qnc)("valueService")],t.prototype,"valueService",void 0),fn([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),fn([(0,f.Qnc)("dataTypeService")],t.prototype,"dataTypeService",void 0),fn([(0,f.Qnc)("valueParserService")],t.prototype,"valueParserService",void 0),fn([(0,f.Qnc)("rowModel")],t.prototype,"rowModel",void 0),fn([(0,f.Qnc)("advancedFilterExpressionService")],t.prototype,"advancedFilterExpressionService",void 0),fn([f.QhY],t.prototype,"postConstruct",null),fn([(0,f.ekA)("advancedFilterService")],t)}(f._QX),xm={version:"30.2.1",moduleName:f.ekS.AdvancedFilterModule,beans:[Cm,vm],agStackComponents:[{componentName:"agAdvancedFilter",componentClass:wu}],dependantModules:[Ue]},wm=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ot=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},nf=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Au="paste",Du="dragCopy",of="clipboard",Ti=function(o){return o[o.CellRange=0]="CellRange",o[o.SelectedRows=1]="SelectedRows",o[o.FocusedCell=2]="FocusedCell",o}(Ti||{}),Em=function(o){function t(){var r=null!==o&&o.apply(this,arguments)||this;return r.lastPasteOperationTime=0,r.navigatorApiFailed=!1,r}var e;return wm(t,o),e=t,t.prototype.init=function(){var r=this;this.logger=this.loggerFactory.create("ClipboardService"),"clientSide"===this.rowModel.getType()&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady(function(n){r.gridCtrl=n.gridCtrl})},t.prototype.pasteFromClipboard=function(){var r=this;this.logger.log("pasteFromClipboard"),!this.gridOptionsService.is("suppressClipboardApi")&&!this.navigatorApiFailed&&navigator.clipboard&&navigator.clipboard.readText?navigator.clipboard.readText().then(this.processClipboardData.bind(this)).catch(function(i){f._.doOnce(function(){console.warn(i),console.warn("AG Grid: Unable to use the Clipboard API (navigator.clipboard.readText()). The reason why it could not be used has been logged in the previous line. For this reason the grid has defaulted to using a workaround which doesn't perform as well. Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API")},"clipboardApiError"),r.navigatorApiFailed=!0,r.pasteFromClipboardLegacy()}):this.pasteFromClipboardLegacy()},t.prototype.pasteFromClipboardLegacy=function(){var r=this,n=!1,i=function(a){var s=(new Date).getTime();s-r.lastPasteOperationTime<50&&(n=!0,a.preventDefault()),r.lastPasteOperationTime=s};this.executeOnTempElement(function(a){a.addEventListener("paste",i),a.focus({preventScroll:!0})},function(a){var s=a.value;n?r.refocusLastFocusedCell():r.processClipboardData(s),a.removeEventListener("paste",i)})},t.prototype.refocusLastFocusedCell=function(){var r=this.focusService.getFocusedCell();r&&this.focusService.setFocusedCell({rowIndex:r.rowIndex,column:r.column,rowPinned:r.rowPinned,forceBrowserFocus:!0})},t.prototype.getClipboardDelimiter=function(){var r=this.gridOptionsService.get("clipboardDelimiter");return f._.exists(r)?r:"\t"},t.prototype.processClipboardData=function(r){var n=this;if(null!=r){var i=e.stringToArray(r,this.getClipboardDelimiter()),a=this.gridOptionsService.getCallback("processDataFromClipboard");a&&(i=a({data:i})),null!=i&&(this.gridOptionsService.is("suppressLastEmptyLineOnPaste")&&this.removeLastLineIfBlank(i),this.doPasteOperation(function(l,u,c,d){n.rangeService&&n.rangeService.isMoreThanOneCell()&&!n.hasOnlyOneValueToPaste(i)?n.pasteIntoActiveRange(i,l,u,d):n.pasteStartingFromFocusedCell(i,l,u,c,d)}))}},t.stringToArray=function(r,n){void 0===n&&(n=",");var i=[],a=function(g){return"\r"===g||"\n"===g},s=!1;if(""===r)return[[""]];for(var u,c,d,l=function(g,y,S){var m=r[S-1],C=r[S],_=r[S+1],w=function(){i[g]||(i[g]=[]),i[g][y]||(i[g][y]="")};if(w(),'"'===C&&(s?'"'===_?(i[g][y]+='"',S++):s=!1:(void 0===m||m===n||a(m))&&(s=!0)),!s&&'"'!==C){if(C===n)return y++,w(),u=g,c=y,d=S,"continue";if(a(C))return y=0,g++,w(),"\r"===C&&"\n"===_&&S++,u=g,c=y,d=S,"continue"}i[g][y]+=C,u=g,c=y,d=S},h=0,p=0,v=0;v<r.length;v++)l(h,p,v),h=u,p=c,v=d;return i},t.prototype.doPasteOperation=function(r){var s,a="clipboard";if(this.eventService.dispatchEvent({type:f.YFc.EVENT_PASTE_START,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,source:a}),this.clientSideRowModel){var l=this.gridOptionsService.is("aggregateOnlyChangedColumns");s=new f.y6Z(l,this.clientSideRowModel.getRootNode())}var u={},c=[];r(u,c,this.focusService.getFocusedCell(),s);var h=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o}([],function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i}(c));s&&(this.clientSideRowModel.doAggregate(s),s.forEachChangedNodeDepthFirst(function(v){h.push(v)})),this.rowRenderer.refreshCells({rowNodes:h}),this.dispatchFlashCells(u),this.fireRowChanged(c),this.refocusLastFocusedCell(),this.eventService.dispatchEvent({type:f.YFc.EVENT_PASTE_END,source:a})},t.prototype.pasteIntoActiveRange=function(r,n,i,a){var s=this,l=this.getRangeSize()%r.length!=0,u=0,c=0;this.iterateActiveRanges(!1,function(h,p,v,g){if(g-u>=r.length){if(l)return;u+=c,c=0}var S=r[g-u];i.push(p);var m=s.gridOptionsService.getCallback("processCellFromClipboard");v.forEach(function(C,_){if(C.isCellEditable(p)&&!C.isSuppressPaste(p)){_>=S.length&&(_%=S.length);var w=s.processCell(p,C,S[_],Du,m,!0);p.setDataValue(C,w,Au),a&&a.addParentNode(p.parent,[C]);var O=s.cellPositionUtils.createIdFromValues({rowIndex:h.rowIndex,column:C,rowPinned:h.rowPinned});n[O]=!0}}),c++})},t.prototype.pasteStartingFromFocusedCell=function(r,n,i,a,s){if(a){var l={rowIndex:a.rowIndex,rowPinned:a.rowPinned},u=this.columnModel.getDisplayedColumnsStartingAt(a.column);this.isPasteSingleValueIntoRange(r)?this.pasteSingleValueIntoRange(r,i,n,s):this.pasteMultipleValues(r,l,i,u,n,of,s)}},t.prototype.isPasteSingleValueIntoRange=function(r){return this.hasOnlyOneValueToPaste(r)&&null!=this.rangeService&&!this.rangeService.isEmpty()},t.prototype.pasteSingleValueIntoRange=function(r,n,i,a){var s=this,l=r[0][0];this.iterateActiveRanges(!1,function(c,d,h){n.push(d),h.forEach(function(p){return s.updateCellValue(d,p,l,i,of,a)})})},t.prototype.hasOnlyOneValueToPaste=function(r){return 1===r.length&&1===r[0].length},t.prototype.copyRangeDown=function(){var r=this;if(this.rangeService&&!this.rangeService.isEmpty()){var n=[];this.doPasteOperation(function(a,s,l,u){var c=r.gridOptionsService.getCallback("processCellForClipboard"),d=r.gridOptionsService.getCallback("processCellFromClipboard");r.iterateActiveRanges(!0,function(p,v,g){n.length?(s.push(v),g.forEach(function(y,S){if(y.isCellEditable(v)&&!y.isSuppressPaste(v)){var m=r.processCell(v,y,n[S],Du,d,!0);v.setDataValue(y,m,Au),u&&u.addParentNode(v.parent,[y]);var w=r.cellPositionUtils.createIdFromValues({rowIndex:p.rowIndex,column:y,rowPinned:p.rowPinned});a[w]=!0}})):g.forEach(function(y){var S=r.processCell(v,y,r.valueService.getValue(y,v),Du,c,!1,!0);n.push(S)})})})}},t.prototype.removeLastLineIfBlank=function(r){var n=f._.last(r);if(n&&1===n.length&&""===n[0]){if(1===r.length)return;f._.removeFromArray(r,n)}},t.prototype.fireRowChanged=function(r){var n=this;"fullRow"===this.gridOptionsService.get("editType")&&r.forEach(function(i){n.eventService.dispatchEvent({type:f.YFc.EVENT_ROW_VALUE_CHANGED,node:i,data:i.data,rowIndex:i.rowIndex,rowPinned:i.rowPinned})})},t.prototype.pasteMultipleValues=function(r,n,i,a,s,l,u){var c=this,d=n,h=null!=this.clientSideRowModel&&!this.gridOptionsService.is("enableGroupEdit")&&!this.gridOptionsService.is("treeData");r.forEach(function(v){var g=function(){for(;;){if(!d)return null;var v=c.rowPositionUtils.getRowNode(d);if(d=c.cellNavigationService.getRowBelow({rowPinned:d.rowPinned,rowIndex:d.rowIndex}),null==v)return null;if(!(v.detail||v.footer||h&&v.group))return v}}();g&&(v.forEach(function(y,S){return c.updateCellValue(g,a[S],y,s,l,u)}),i.push(g))})},t.prototype.updateCellValue=function(r,n,i,a,s,l){if(r&&n&&n.isCellEditable(r)&&!n.isSuppressPaste(r)&&(!r.group||!n.isValueActive())){var u=this.processCell(r,n,i,s,this.gridOptionsService.getCallback("processCellFromClipboard"),!0);r.setDataValue(n,u,Au),a[this.cellPositionUtils.createIdFromValues({rowIndex:r.rowIndex,column:n,rowPinned:r.rowPinned})]=!0,l&&l.addParentNode(r.parent,[n])}},t.prototype.copyToClipboard=function(r){void 0===r&&(r={}),this.copyOrCutToClipboard(r)},t.prototype.cutToClipboard=function(r,n){void 0===r&&(r={}),void 0===n&&(n="api"),this.gridOptionsService.is("suppressCutToClipboard")||(this.eventService.dispatchEvent({type:f.YFc.EVENT_CUT_START,source:n}),this.copyOrCutToClipboard(r,!0),this.eventService.dispatchEvent({type:f.YFc.EVENT_CUT_END,source:n}))},t.prototype.copyOrCutToClipboard=function(r,n){var i=r.includeHeaders,a=r.includeGroupHeaders;this.logger.log("copyToClipboard: includeHeaders = "+i),null==i&&(i=this.gridOptionsService.is("copyHeadersToClipboard")),null==a&&(a=this.gridOptionsService.is("copyGroupHeadersToClipboard"));var s={includeHeaders:i,includeGroupHeaders:a},l=!this.gridOptionsService.is("suppressCopyRowsToClipboard"),u=null;!this.rangeService||this.rangeService.isEmpty()||this.shouldSkipSingleCellRange()?l&&!this.selectionService.isEmpty()?(this.copySelectedRowsToClipboard(s),u=Ti.SelectedRows):this.focusService.isAnyCellFocused()&&(this.copyFocusedCellToClipboard(s),u=Ti.FocusedCell):(this.copySelectedRangeToClipboard(s),u=Ti.CellRange),n&&null!==u&&this.clearCellsAfterCopy(u)},t.prototype.clearCellsAfterCopy=function(r){if(this.eventService.dispatchEvent({type:f.YFc.EVENT_KEY_SHORTCUT_CHANGED_CELL_START}),r===Ti.CellRange)this.rangeService.clearCellRangeCellValues({cellEventSource:"clipboardService"});else if(r===Ti.SelectedRows)this.clearSelectedRows();else{var n=this.focusService.getFocusedCell();if(null==n)return;var i=this.rowPositionUtils.getRowNode(n);i&&this.clearCellValue(i,n.column)}this.eventService.dispatchEvent({type:f.YFc.EVENT_KEY_SHORTCUT_CHANGED_CELL_END})},t.prototype.clearSelectedRows=function(){var r,n,i,a,s=this.selectionService.getSelectedNodes(),l=this.columnModel.getAllDisplayedColumns();try{for(var u=nf(s),c=u.next();!c.done;c=u.next()){var d=c.value;try{for(var h=(i=void 0,nf(l)),p=h.next();!p.done;p=h.next())this.clearCellValue(d,p.value)}catch(g){i={error:g}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}}}catch(g){r={error:g}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}},t.prototype.clearCellValue=function(r,n){n.isCellEditable(r)&&r.setDataValue(n,null,"clipboardService")},t.prototype.shouldSkipSingleCellRange=function(){return this.gridOptionsService.is("suppressCopySingleCellRanges")&&!this.rangeService.isMoreThanOneCell()},t.prototype.iterateActiveRanges=function(r,n,i){var a=this;if(this.rangeService&&!this.rangeService.isEmpty()){var s=this.rangeService.getCellRanges();r?this.iterateActiveRange(s[0],n,i,!0):s.forEach(function(l,u){return a.iterateActiveRange(l,n,i,u===s.length-1)})}},t.prototype.iterateActiveRange=function(r,n,i,a){if(this.rangeService){var s=this.rangeService.getRangeStartRow(r),l=this.rangeService.getRangeEndRow(r);i&&r.columns&&i(r.columns);for(var u=0,c=!1;!c&&null!=s;){var d=this.rowPositionUtils.getRowNode(s);c=this.rowPositionUtils.sameRow(s,l),n(s,d,r.columns,u++,c&&a),s=this.cellNavigationService.getRowBelow(s)}}},t.prototype.copySelectedRangeToClipboard=function(r){if(void 0===r&&(r={}),this.rangeService&&!this.rangeService.isEmpty()){var i=this.rangeService.areAllRangesAbleToMerge()?this.buildDataFromMergedRanges(r):this.buildDataFromRanges(r),s=i.cellsToFlash;this.copyDataToClipboard(i.data),this.dispatchFlashCells(s)}},t.prototype.buildDataFromMergedRanges=function(r){var n=this,i=new Set,a=this.rangeService.getCellRanges(),s=new Map,l=[],u={};a.forEach(function(p){p.columns.forEach(function(S){return i.add(S)});var v=n.getRangeRowPositionsAndCellsToFlash(p),y=v.cellsToFlash;v.rowPositions.forEach(function(S){var m=S.rowIndex+"-"+(S.rowPinned||"null");s.get(m)||(s.set(m,!0),l.push(S))}),Object.assign(u,y)});var c=this.columnModel.getAllDisplayedColumns(),d=Array.from(i);return d.sort(function(p,v){return c.indexOf(p)-c.indexOf(v)}),{data:this.buildExportParams({columns:d,rowPositions:l,includeHeaders:r.includeHeaders,includeGroupHeaders:r.includeGroupHeaders}),cellsToFlash:u}},t.prototype.buildDataFromRanges=function(r){var n=this,i=this.rangeService.getCellRanges(),a=[],s={};return i.forEach(function(l){var u=n.getRangeRowPositionsAndCellsToFlash(l),c=u.rowPositions;Object.assign(s,u.cellsToFlash),a.push(n.buildExportParams({columns:l.columns,rowPositions:c,includeHeaders:r.includeHeaders,includeGroupHeaders:r.includeGroupHeaders}))}),{data:a.join("\n"),cellsToFlash:s}},t.prototype.getRangeRowPositionsAndCellsToFlash=function(r){for(var n=this,i=[],a={},s=this.rangeService.getRangeStartRow(r),l=this.rangeService.getRangeEndRow(r),u=s;u&&(i.push(u),r.columns.forEach(function(c){var v=n.cellPositionUtils.createIdFromValues({rowIndex:u.rowIndex,column:c,rowPinned:u.rowPinned});a[v]=!0}),!this.rowPositionUtils.sameRow(u,l));)u=this.cellNavigationService.getRowBelow(u);return{rowPositions:i,cellsToFlash:a}},t.prototype.copyFocusedCellToClipboard=function(r){var n;void 0===r&&(r={});var i=this.focusService.getFocusedCell();if(null!=i){var a=this.cellPositionUtils.createId(i),u=this.buildExportParams({columns:[i.column],rowPositions:[{rowPinned:i.rowPinned,rowIndex:i.rowIndex}],includeHeaders:r.includeHeaders,includeGroupHeaders:r.includeGroupHeaders});this.copyDataToClipboard(u),this.dispatchFlashCells(((n={})[a]=!0,n))}},t.prototype.copySelectedRowsToClipboard=function(r){void 0===r&&(r={});var s=this.buildExportParams({columns:r.columnKeys,includeHeaders:r.includeHeaders,includeGroupHeaders:r.includeGroupHeaders});this.copyDataToClipboard(s)},t.prototype.buildExportParams=function(r){var n=this,a=r.rowPositions,s=r.includeHeaders,u=r.includeGroupHeaders,d={columnKeys:r.columns,rowPositions:a,skipColumnHeaders:!(void 0!==s&&s),skipColumnGroupHeaders:!(void 0!==u&&u),suppressQuotes:!0,columnSeparator:this.getClipboardDelimiter(),onlySelected:!a,processCellCallback:this.gridOptionsService.getCallback("processCellForClipboard"),processRowGroupCallback:function(h){return n.processRowGroupCallback(h)},processHeaderCallback:this.gridOptionsService.getCallback("processHeaderForClipboard"),processGroupHeaderCallback:this.gridOptionsService.getCallback("processGroupHeaderForClipboard")};return this.csvCreator.getDataAsCsv(d,!0)},t.prototype.processRowGroupCallback=function(r){var n=this,i=r.node,a=i.key,s=a??"";if(r.node.footer){var l="";a&&a.length&&(l=" "+a),s="Total"+l}var u=this.gridOptionsService.getCallback("processCellForClipboard");if(u){var c=i.rowGroupColumn;return!c&&i.footer&&-1===i.level&&(c=this.columnModel.getRowGroupColumns()[0]),u({value:s,node:i,column:c,type:"clipboard",formatValue:function(d){var h;return null!==(h=n.valueFormatterService.formatValue(c,i,d))&&void 0!==h?h:d},parseValue:function(d){return n.valueParserService.parseValue(c,i,d,n.valueService.getValue(c,i))}})}return s},t.prototype.dispatchFlashCells=function(r){var n=this;window.setTimeout(function(){n.eventService.dispatchEvent({type:f.YFc.EVENT_FLASH_CELLS,cells:r})},0)},t.prototype.processCell=function(r,n,i,a,s,l,u){var d,c=this;return s?s({column:n,node:r,value:i,type:a,formatValue:function(p){var v;return null!==(v=c.valueFormatterService.formatValue(n,r??null,p))&&void 0!==v?v:p},parseValue:function(p){return c.valueParserService.parseValue(n,r??null,p,c.valueService.getValue(n,r))}}):l&&n.getColDef().useValueParserForImport?this.valueParserService.parseValue(n,r??null,i,this.valueService.getValue(n,r)):u&&n.getColDef().useValueFormatterForExport&&null!==(d=this.valueFormatterService.formatValue(n,r??null,i))&&void 0!==d?d:i},t.prototype.copyDataToClipboard=function(r){var n=this,i=this.gridOptionsService.getCallback("sendToClipboard");i?i({data:r}):!this.gridOptionsService.is("suppressClipboardApi")&&navigator.clipboard?navigator.clipboard.writeText(r).catch(function(s){f._.doOnce(function(){console.warn(s),console.warn("AG Grid: Unable to use the Clipboard API (navigator.clipboard.writeText()). The reason why it could not be used has been logged in the previous line. For this reason the grid has defaulted to using a workaround which doesn't perform as well. Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API.")},"clipboardApiError"),n.copyDataToClipboardLegacy(r)}):this.copyDataToClipboardLegacy(r)},t.prototype.copyDataToClipboardLegacy=function(r){var n=this;this.executeOnTempElement(function(i){var a=n.gridOptionsService.getDocument(),s=a.activeElement;i.value=r||" ",i.select(),i.focus({preventScroll:!0}),a.execCommand("copy")||console.warn("AG Grid: Browser did not allow document.execCommand('copy'). Ensure api.copySelectedRowsToClipboard() is invoked via a user event, i.e. button click, otherwise the browser will prevent it for security reasons."),null!=s&&null!=s.focus&&s.focus({preventScroll:!0})})},t.prototype.executeOnTempElement=function(r,n){var i=this.gridOptionsService.getDocument(),a=i.createElement("textarea");a.style.width="1px",a.style.height="1px",a.style.top=i.documentElement.scrollTop+"px",a.style.left=i.documentElement.scrollLeft+"px",a.style.position="absolute",a.style.opacity="0";var s=this.gridCtrl.getGui();s.appendChild(a);try{r(a)}catch{console.warn("AG Grid: Browser does not support document.execCommand('copy') for clipboard operations")}n?window.setTimeout(function(){n(a),s.removeChild(a)},100):s.removeChild(a)},t.prototype.getRangeSize=function(){var r=this.rangeService.getCellRanges(),n=0,i=0;return r.length>0&&(n=this.rangeService.getRangeStartRow(r[0]).rowIndex,i=this.rangeService.getRangeEndRow(r[0]).rowIndex),n-i+1},ot([(0,f.Qnc)("csvCreator")],t.prototype,"csvCreator",void 0),ot([(0,f.Qnc)("loggerFactory")],t.prototype,"loggerFactory",void 0),ot([(0,f.Qnc)("selectionService")],t.prototype,"selectionService",void 0),ot([(0,f.T7N)("rangeService")],t.prototype,"rangeService",void 0),ot([(0,f.Qnc)("rowModel")],t.prototype,"rowModel",void 0),ot([(0,f.Qnc)("ctrlsService")],t.prototype,"ctrlsService",void 0),ot([(0,f.Qnc)("valueService")],t.prototype,"valueService",void 0),ot([(0,f.Qnc)("focusService")],t.prototype,"focusService",void 0),ot([(0,f.Qnc)("rowRenderer")],t.prototype,"rowRenderer",void 0),ot([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),ot([(0,f.Qnc)("cellNavigationService")],t.prototype,"cellNavigationService",void 0),ot([(0,f.Qnc)("cellPositionUtils")],t.prototype,"cellPositionUtils",void 0),ot([(0,f.Qnc)("rowPositionUtils")],t.prototype,"rowPositionUtils",void 0),ot([(0,f.Qnc)("valueFormatterService")],t.prototype,"valueFormatterService",void 0),ot([(0,f.Qnc)("valueParserService")],t.prototype,"valueParserService",void 0),ot([f.QhY],t.prototype,"init",null),e=ot([(0,f.ekA)("clipboardService")],t)}(f._QX),Pm={version:"30.2.1",moduleName:f.ekS.ClipboardModule,beans:[Em],dependantModules:[Ue,f.KKM]},Am=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ta=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Br=function(o){return o[o.EXPANDED=0]="EXPANDED",o[o.COLLAPSED=1]="COLLAPSED",o[o.INDETERMINATE=2]="INDETERMINATE",o}(Br||{}),Dm=function(o){function t(){return o.call(this,t.TEMPLATE)||this}return Am(t,o),t.prototype.postConstruct=function(){var e=this;this.createExpandIcons(),this.addManagedListener(this.eExpand,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eExpand,"keydown",function(n){n.key===f.Axe.SPACE&&(n.preventDefault(),e.onExpandClicked())}),this.addManagedListener(this.eSelect.getInputElement(),"click",this.onSelectClicked.bind(this)),this.eFilterTextField.onValueChange(function(){return e.onFilterTextChanged()}),this.addManagedListener(this.eFilterTextField.getInputElement(),"keydown",this.onMiniFilterKeyDown.bind(this)),this.addManagedListener(this.eventService,f.YFc.EVENT_NEW_COLUMNS_LOADED,this.showOrHideOptions.bind(this));var r=this.localeService.getLocaleTextFunc();this.eSelect.setInputAriaLabel(r("ariaColumnSelectAll","Toggle Select All Columns")),this.eFilterTextField.setInputAriaLabel(r("ariaFilterColumnsInput","Filter Columns Input")),this.activateTabIndex([this.eExpand])},t.prototype.init=function(e){this.params=e,this.columnModel.isReady()&&this.showOrHideOptions()},t.prototype.createExpandIcons=function(){this.eExpand.appendChild(this.eExpandChecked=f._.createIconNoSpan("columnSelectOpen",this.gridOptionsService)),this.eExpand.appendChild(this.eExpandUnchecked=f._.createIconNoSpan("columnSelectClosed",this.gridOptionsService)),this.eExpand.appendChild(this.eExpandIndeterminate=f._.createIconNoSpan("columnSelectIndeterminate",this.gridOptionsService)),this.setExpandState(Br.EXPANDED)},t.prototype.showOrHideOptions=function(){var e=!this.params.suppressColumnFilter,r=!this.params.suppressColumnSelectAll,n=!this.params.suppressColumnExpandAll,i=this.columnModel.isPrimaryColumnGroupsPresent(),a=this.localeService.getLocaleTextFunc();this.eFilterTextField.setInputPlaceholder(a("searchOoo","Search...")),f._.setDisplayed(this.eFilterTextField.getGui(),e),f._.setDisplayed(this.eSelect.getGui(),r),f._.setDisplayed(this.eExpand,n&&i)},t.prototype.onFilterTextChanged=function(){var e=this;this.onFilterTextChangedDebounced||(this.onFilterTextChangedDebounced=f._.debounce(function(){var r=e.eFilterTextField.getValue();e.dispatchEvent({type:"filterChanged",filterText:r})},t.DEBOUNCE_DELAY)),this.onFilterTextChangedDebounced()},t.prototype.onMiniFilterKeyDown=function(e){var r=this;e.key===f.Axe.ENTER&&setTimeout(function(){return r.onSelectClicked()},t.DEBOUNCE_DELAY)},t.prototype.onSelectClicked=function(){this.dispatchEvent({type:this.selectState?"unselectAll":"selectAll"})},t.prototype.onExpandClicked=function(){this.dispatchEvent({type:this.expandState===Br.EXPANDED?"collapseAll":"expandAll"})},t.prototype.setExpandState=function(e){this.expandState=e,f._.setDisplayed(this.eExpandChecked,this.expandState===Br.EXPANDED),f._.setDisplayed(this.eExpandUnchecked,this.expandState===Br.COLLAPSED),f._.setDisplayed(this.eExpandIndeterminate,this.expandState===Br.INDETERMINATE)},t.prototype.setSelectionState=function(e){this.selectState=e,this.eSelect.setValue(this.selectState)},t.DEBOUNCE_DELAY=300,t.TEMPLATE='<div class="ag-column-select-header" role="presentation">\n            <div ref="eExpand" class="ag-column-select-header-icon"></div>\n            <ag-checkbox ref="eSelect" class="ag-column-select-header-checkbox"></ag-checkbox>\n            <ag-input-text-field class="ag-column-select-header-filter-wrapper" ref="eFilterTextField"></ag-input-text-field>\n        </div>',ta([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),ta([(0,f.IzG)("eExpand")],t.prototype,"eExpand",void 0),ta([(0,f.IzG)("eSelect")],t.prototype,"eSelect",void 0),ta([(0,f.IzG)("eFilterTextField")],t.prototype,"eFilterTextField",void 0),ta([f.QhY],t.prototype,"postConstruct",null),t}(f.YlN),ra=function(){function o(t,e,r,n,i){void 0===n&&(n=!1),this.eventService=new f.ys,this.displayName=t,this.dept=r,this.group=n,n?(this.columnGroup=e,this.expanded=i,this.children=[]):this.column=e}return o.prototype.isGroup=function(){return this.group},o.prototype.getDisplayName=function(){return this.displayName},o.prototype.getColumnGroup=function(){return this.columnGroup},o.prototype.getColumn=function(){return this.column},o.prototype.getDept=function(){return this.dept},o.prototype.isExpanded=function(){return!!this.expanded},o.prototype.getChildren=function(){return this.children},o.prototype.isPassesFilter=function(){return this.passesFilter},o.prototype.setExpanded=function(t){t!==this.expanded&&(this.expanded=t,this.eventService.dispatchEvent({type:o.EVENT_EXPANDED_CHANGED}))},o.prototype.setPassesFilter=function(t){this.passesFilter=t},o.prototype.addEventListener=function(t,e){this.eventService.addEventListener(t,e)},o.prototype.removeEventListener=function(t,e){this.eventService.removeEventListener(t,e)},o.EVENT_EXPANDED_CHANGED="expandedChanged",o}(),Mm=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ws=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},af=function(o){function t(e,r,n){var i=o.call(this,'<div class="ag-menu"></div>')||this;return i.column=e,i.mouseEvent=r,i.parentEl=n,i.displayName=null,i}return Mm(t,o),t.prototype.postConstruct=function(){this.initializeProperties(this.column),this.buildMenuItemMap(),this.displayName=this.column instanceof f.ouE?this.columnModel.getDisplayNameForColumn(this.column,"columnToolPanel"):this.columnModel.getDisplayNameForProvidedColumnGroup(null,this.column,"columnToolPanel"),this.isActive()&&(this.mouseEvent.preventDefault(),this.displayContextMenu())},t.prototype.initializeProperties=function(e){this.columns=e instanceof f.c$I?e.getLeafColumns():[e],this.allowGrouping=this.columns.some(function(r){return r.isPrimary()&&r.isAllowRowGroup()}),this.allowValues=this.columns.some(function(r){return r.isPrimary()&&r.isAllowValue()}),this.allowPivoting=this.columnModel.isPivotMode()&&this.columns.some(function(r){return r.isPrimary()&&r.isAllowPivot()})},t.prototype.buildMenuItemMap=function(){var e=this,r=this.localeService.getLocaleTextFunc();this.menuItemMap=new Map,this.menuItemMap.set("rowGroup",{allowedFunction:function(n){return n.isPrimary()&&n.isAllowRowGroup()},activeFunction:function(n){return n.isRowGroupActive()},activateLabel:function(){return r("groupBy","Group by")+" "+e.displayName},deactivateLabel:function(){return r("ungroupBy","Un-Group by")+" "+e.displayName},activateFunction:function(){var n=e.columnModel.getRowGroupColumns();e.columnModel.setRowGroupColumns(e.addColumnsToList(n),"toolPanelUi")},deActivateFunction:function(){var n=e.columnModel.getRowGroupColumns();e.columnModel.setRowGroupColumns(e.removeColumnsFromList(n),"toolPanelUi")},addIcon:"menuAddRowGroup",removeIcon:"menuRemoveRowGroup"}),this.menuItemMap.set("value",{allowedFunction:function(n){return n.isPrimary()&&n.isAllowValue()},activeFunction:function(n){return n.isValueActive()},activateLabel:function(){return r("addToValues","Add "+e.displayName+" to values",[e.displayName])},deactivateLabel:function(){return r("removeFromValues","Remove "+e.displayName+" from values",[e.displayName])},activateFunction:function(){var n=e.columnModel.getValueColumns();e.columnModel.setValueColumns(e.addColumnsToList(n),"toolPanelUi")},deActivateFunction:function(){var n=e.columnModel.getValueColumns();e.columnModel.setValueColumns(e.removeColumnsFromList(n),"toolPanelUi")},addIcon:"valuePanel",removeIcon:"valuePanel"}),this.menuItemMap.set("pivot",{allowedFunction:function(n){return e.columnModel.isPivotMode()&&n.isPrimary()&&n.isAllowPivot()},activeFunction:function(n){return n.isPivotActive()},activateLabel:function(){return r("addToLabels","Add "+e.displayName+" to labels",[e.displayName])},deactivateLabel:function(){return r("removeFromLabels","Remove "+e.displayName+" from labels",[e.displayName])},activateFunction:function(){var n=e.columnModel.getPivotColumns();e.columnModel.setPivotColumns(e.addColumnsToList(n),"toolPanelUi")},deActivateFunction:function(){var n=e.columnModel.getPivotColumns();e.columnModel.setPivotColumns(e.removeColumnsFromList(n),"toolPanelUi")},addIcon:"pivotPanel",removeIcon:"pivotPanel"})},t.prototype.addColumnsToList=function(e){return function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o}([],function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i}(e)).concat(this.columns.filter(function(r){return-1===e.indexOf(r)}))},t.prototype.removeColumnsFromList=function(e){var r=this;return e.filter(function(n){return-1===r.columns.indexOf(n)})},t.prototype.displayContextMenu=function(){var e=this,r=this.getGui(),n=this.createBean(new f.gbx),i=this.getMappedMenuItems(),a=this.localeService.getLocaleTextFunc(),s=function(){};r.appendChild(n.getGui()),n.addMenuItems(i),n.addManagedListener(n,f.GUU.EVENT_MENU_ITEM_SELECTED,function(){e.parentEl.focus(),s()});var l=this.popupService.addPopup({modal:!0,eChild:r,closeOnEsc:!0,afterGuiAttached:function(){return e.focusService.focusInto(n.getGui())},ariaLabel:a("ariaLabelContextMenu","Context Menu"),closedCallback:function(u){u instanceof KeyboardEvent&&e.parentEl.focus(),e.destroyBean(n)}});l&&(s=l.hideFunc),this.popupService.positionPopupUnderMouseEvent({type:"columnContextMenu",mouseEvent:this.mouseEvent,ePopup:r})},t.prototype.isActive=function(){return this.allowGrouping||this.allowValues||this.allowPivoting},t.prototype.getMappedMenuItems=function(){var e,r,n=[],i=function(c){var d=a.columns.some(function(p){return c.allowedFunction(p)&&!c.activeFunction(p)}),h=a.columns.some(function(p){return c.allowedFunction(p)&&c.activeFunction(p)});d&&n.push({name:c.activateLabel(a.displayName),icon:f._.createIconNoSpan(c.addIcon,a.gridOptionsService,null),action:function(){return c.activateFunction()}}),h&&n.push({name:c.deactivateLabel(a.displayName),icon:f._.createIconNoSpan(c.removeIcon,a.gridOptionsService,null),action:function(){return c.deActivateFunction()}})},a=this;try{for(var s=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.menuItemMap.values()),l=s.next();!l.done;l=s.next())i(l.value)}catch(c){e={error:c}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return n},ws([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),ws([(0,f.Qnc)("popupService")],t.prototype,"popupService",void 0),ws([(0,f.Qnc)("focusService")],t.prototype,"focusService",void 0),ws([f.QhY],t.prototype,"postConstruct",null),t}(f.YlN),Lm=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),jr=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},sf=function(o){function t(e,r,n,i){var a=o.call(this)||this;return a.modelItem=e,a.allowDragging=r,a.eventType=n,a.focusWrapper=i,a.processingColumnStateChange=!1,a.modelItem=e,a.columnGroup=e.getColumnGroup(),a.columnDept=e.getDept(),a.displayName=e.getDisplayName(),a.allowDragging=r,a}return Lm(t,o),t.prototype.init=function(){var e=this;this.setTemplate(t.TEMPLATE),this.eDragHandle=f._.createIconNoSpan("columnDrag",this.gridOptionsService),this.eDragHandle.classList.add("ag-drag-handle","ag-column-select-column-group-drag-handle");var r=this.cbSelect.getGui(),n=this.cbSelect.getInputElement();r.insertAdjacentElement("afterend",this.eDragHandle),n.setAttribute("tabindex","-1"),this.eLabel.innerHTML=this.displayName?this.displayName:"",this.setupExpandContract(),this.addCssClass("ag-column-select-indent-"+this.columnDept),this.addManagedListener(this.eventService,f.YFc.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.eLabel,"click",this.onLabelClicked.bind(this)),this.addManagedListener(this.cbSelect,f.YFc.EVENT_FIELD_VALUE_CHANGED,this.onCheckboxChanged.bind(this)),this.addManagedListener(this.modelItem,ra.EVENT_EXPANDED_CHANGED,this.onExpandChanged.bind(this)),this.addManagedListener(this.focusWrapper,"keydown",this.handleKeyDown.bind(this)),this.addManagedListener(this.focusWrapper,"contextmenu",this.onContextMenu.bind(this)),this.setOpenClosedIcons(),this.setupDragging(),this.onColumnStateChanged(),this.addVisibilityListenersToAllChildren(),this.refreshAriaExpanded(),this.refreshAriaLabel(),this.setupTooltip(),f.g5g.getToolPanelClassesFromColDef(this.columnGroup.getColGroupDef(),this.gridOptionsService,null,this.columnGroup).forEach(function(a){return e.addOrRemoveCssClass(a,!0)})},t.prototype.getColumns=function(){return this.columnGroup.getLeafColumns()},t.prototype.setupTooltip=function(){var e=this,r=this.columnGroup.getColGroupDef();if(r){var n=function(){e.setTooltip(r.headerTooltip)};n(),this.addManagedListener(this.eventService,f.YFc.EVENT_NEW_COLUMNS_LOADED,n)}},t.prototype.getTooltipParams=function(){var e=o.prototype.getTooltipParams.call(this);return e.location="columnToolPanelColumnGroup",e},t.prototype.handleKeyDown=function(e){switch(e.key){case f.Axe.LEFT:e.preventDefault(),this.modelItem.setExpanded(!1);break;case f.Axe.RIGHT:e.preventDefault(),this.modelItem.setExpanded(!0);break;case f.Axe.SPACE:e.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected())}},t.prototype.onContextMenu=function(e){var r=this,i=this.columnGroup;if(!this.gridOptionsService.is("functionsReadOnly")){var s=this.createBean(new af(i,e,this.focusWrapper));this.addDestroyFunc(function(){s.isAlive()&&r.destroyBean(s)})}},t.prototype.addVisibilityListenersToAllChildren=function(){var e=this;this.columnGroup.getLeafColumns().forEach(function(r){e.addManagedListener(r,f.ouE.EVENT_VISIBLE_CHANGED,e.onColumnStateChanged.bind(e)),e.addManagedListener(r,f.ouE.EVENT_VALUE_CHANGED,e.onColumnStateChanged.bind(e)),e.addManagedListener(r,f.ouE.EVENT_PIVOT_CHANGED,e.onColumnStateChanged.bind(e)),e.addManagedListener(r,f.ouE.EVENT_ROW_GROUP_CHANGED,e.onColumnStateChanged.bind(e))})},t.prototype.setupDragging=function(){var e=this;if(this.allowDragging){var r=!this.gridOptionsService.is("suppressDragLeaveHidesColumns"),n={type:f.gt1.ToolPanel,eElement:this.eDragHandle,dragItemName:this.displayName,getDefaultIconName:function(){return r?f.sZo.ICON_HIDE:f.sZo.ICON_NOT_ALLOWED},getDragItem:function(){return e.createDragItem()},onDragStarted:function(){r=!e.gridOptionsService.is("suppressDragLeaveHidesColumns"),e.eventService.dispatchEvent({type:f.YFc.EVENT_COLUMN_PANEL_ITEM_DRAG_START,column:e.columnGroup})},onDragStopped:function(){e.eventService.dispatchEvent({type:f.YFc.EVENT_COLUMN_PANEL_ITEM_DRAG_END})},onGridEnter:function(i){r&&e.modelItemUtils.updateColumns({columns:e.columnGroup.getLeafColumns(),visibleState:i?.visibleState,pivotState:i?.pivotState,eventType:e.eventType})},onGridExit:function(){r&&e.onChangeCommon(!1)}};this.dragAndDropService.addDragSource(n,!0),this.addDestroyFunc(function(){return e.dragAndDropService.removeDragSource(n)})}else f._.setDisplayed(this.eDragHandle,!1)},t.prototype.createDragItem=function(){var e=this,r=this.columnGroup.getLeafColumns(),n={},i={};return r.forEach(function(a){var s=a.getId();n[s]=a.isVisible(),i[s]=e.modelItemUtils.createPivotState(a)}),{columns:r,visibleState:n,pivotState:i}},t.prototype.setupExpandContract=function(){this.eGroupClosedIcon.appendChild(f._.createIcon("columnSelectClosed",this.gridOptionsService,null)),this.eGroupOpenedIcon.appendChild(f._.createIcon("columnSelectOpen",this.gridOptionsService,null)),this.addManagedListener(this.eGroupClosedIcon,"click",this.onExpandOrContractClicked.bind(this)),this.addManagedListener(this.eGroupOpenedIcon,"click",this.onExpandOrContractClicked.bind(this));var e=new f.cRj(this.eColumnGroupIcons,!0);this.addManagedListener(e,f.cRj.EVENT_TAP,this.onExpandOrContractClicked.bind(this)),this.addDestroyFunc(e.destroy.bind(e))},t.prototype.onLabelClicked=function(){var e=!this.cbSelect.getValue();this.onChangeCommon(e)},t.prototype.onCheckboxChanged=function(e){this.onChangeCommon(e.selected)},t.prototype.getVisibleLeafColumns=function(){var e=[],r=function(n){n.forEach(function(i){i.isPassesFilter()&&(i.isGroup()?r(i.getChildren()):e.push(i.getColumn()))})};return r(this.modelItem.getChildren()),e},t.prototype.onChangeCommon=function(e){this.refreshAriaLabel(),!this.processingColumnStateChange&&this.modelItemUtils.selectAllChildren(this.modelItem.getChildren(),e,this.eventType)},t.prototype.refreshAriaLabel=function(){var e=this.localeService.getLocaleTextFunc(),r=e("ariaColumnGroup","Column Group"),n=this.cbSelect.getValue(),i=void 0===n?e("ariaIndeterminate","indeterminate"):n?e("ariaVisible","visible"):e("ariaHidden","hidden"),a=e("ariaToggleVisibility","Press SPACE to toggle visibility");f._.setAriaLabel(this.focusWrapper,this.displayName+" "+r),this.cbSelect.setInputAriaLabel(a+" ("+i+")"),f._.setAriaDescribedBy(this.focusWrapper,this.cbSelect.getInputElement().id)},t.prototype.onColumnStateChanged=function(){var e=this.workOutSelectedValue(),r=this.workOutReadOnlyValue();this.processingColumnStateChange=!0,this.cbSelect.setValue(e),this.cbSelect.setReadOnly(r),this.addOrRemoveCssClass("ag-column-select-column-group-readonly",r),this.processingColumnStateChange=!1},t.prototype.workOutSelectedValue=function(){var e=this,r=this.columnModel.isPivotMode(),n=this.getVisibleLeafColumns(),i=0,a=0;if(n.forEach(function(s){!r&&s.getColDef().lockVisible||(e.isColumnChecked(s,r)?i++:a++)}),!(i>0&&a>0))return i>0},t.prototype.workOutReadOnlyValue=function(){var e=this.columnModel.isPivotMode(),r=0;return this.columnGroup.getLeafColumns().forEach(function(n){e?n.isAnyFunctionAllowed()&&r++:n.getColDef().lockVisible||r++}),0===r},t.prototype.isColumnChecked=function(e,r){if(r){var n=e.isPivotActive(),i=e.isRowGroupActive(),a=e.isValueActive();return n||i||a}return e.isVisible()},t.prototype.onExpandOrContractClicked=function(){var e=this.modelItem.isExpanded();this.modelItem.setExpanded(!e)},t.prototype.onExpandChanged=function(){this.setOpenClosedIcons(),this.refreshAriaExpanded()},t.prototype.setOpenClosedIcons=function(){var e=this.modelItem.isExpanded();f._.setDisplayed(this.eGroupClosedIcon,!e),f._.setDisplayed(this.eGroupOpenedIcon,e)},t.prototype.refreshAriaExpanded=function(){f._.setAriaExpanded(this.focusWrapper,this.modelItem.isExpanded())},t.prototype.getDisplayName=function(){return this.displayName},t.prototype.onSelectAllChanged=function(e){var r=this.cbSelect.getValue();!this.cbSelect.isReadOnly()&&(e&&!r||!e&&r)&&this.cbSelect.toggle()},t.prototype.isSelected=function(){return this.cbSelect.getValue()},t.prototype.isSelectable=function(){return!this.cbSelect.isReadOnly()},t.prototype.setSelected=function(e){this.cbSelect.setValue(e,!0)},t.TEMPLATE='<div class="ag-column-select-column-group" aria-hidden="true">\n            <span class="ag-column-group-icons" ref="eColumnGroupIcons" >\n                <span class="ag-column-group-closed-icon" ref="eGroupClosedIcon"></span>\n                <span class="ag-column-group-opened-icon" ref="eGroupOpenedIcon"></span>\n            </span>\n            <ag-checkbox ref="cbSelect" class="ag-column-select-checkbox"></ag-checkbox>\n            <span class="ag-column-select-column-label" ref="eLabel"></span>\n        </div>',jr([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),jr([(0,f.Qnc)("dragAndDropService")],t.prototype,"dragAndDropService",void 0),jr([(0,f.Qnc)("modelItemUtils")],t.prototype,"modelItemUtils",void 0),jr([(0,f.IzG)("cbSelect")],t.prototype,"cbSelect",void 0),jr([(0,f.IzG)("eLabel")],t.prototype,"eLabel",void 0),jr([(0,f.IzG)("eGroupOpenedIcon")],t.prototype,"eGroupOpenedIcon",void 0),jr([(0,f.IzG)("eGroupClosedIcon")],t.prototype,"eGroupClosedIcon",void 0),jr([(0,f.IzG)("eColumnGroupIcons")],t.prototype,"eColumnGroupIcons",void 0),jr([f.QhY],t.prototype,"init",null),t}(f.YlN),Nm=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),lf=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},km=function(o){function t(e,r){var n=o.call(this)||this;return n.comp=e,n.virtualList=r,n}return Nm(t,o),t.prototype.postConstruct=function(){var e=this;this.createManagedBean(new f.iWp(this.comp,this.virtualList,{dragSourceType:f.gt1.ToolPanel,listItemDragStartEvent:f.YFc.EVENT_COLUMN_PANEL_ITEM_DRAG_START,listItemDragEndEvent:f.YFc.EVENT_COLUMN_PANEL_ITEM_DRAG_END,eventSource:this.eventService,getCurrentDragValue:function(r){return e.getCurrentDragValue(r)},isMoveBlocked:function(r){return e.isMoveBlocked(r)},getNumRows:function(r){return r.getDisplayedColsList().length},moveItem:function(r,n){return e.moveItem(r,n)}}))},t.prototype.getCurrentDragValue=function(e){return e.column},t.prototype.isMoveBlocked=function(e){return!!this.getCurrentColumns(e).find(function(i){var a=i.getColDef();return!!a.suppressMovable||!!a.lockPosition})},t.prototype.moveItem=function(e,r){var n=this.getTargetIndex(e,r),i=this.getCurrentColumns(e);null!=n&&this.columnModel.moveColumns(i,n,"toolPanelUi")},t.prototype.getMoveDiff=function(e,r){var n=this.columnModel.getAllGridColumns(),i=this.getCurrentColumns(e),s=i.length;return n.indexOf(i[0])<r?s:0},t.prototype.getCurrentColumns=function(e){return e instanceof f.c$I?e.getLeafColumns():[e]},t.prototype.getTargetIndex=function(e,r){if(!r)return null;var a,n=r.component,i="top"===r.position;if(n instanceof sf?(a=n.getColumns()[0],i=!0):a=n.getColumn(),-1!==this.getCurrentColumns(e).indexOf(a))return null;var u=this.columnModel.getAllGridColumns().indexOf(a),c=i?u:u+1;return c-this.getMoveDiff(e,c)},lf([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),lf([f.QhY],t.prototype,"postConstruct",null),t}(f._QX),Gm=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Pi=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Vm=function(o){function t(e,r,n,i){var a=o.call(this)||this;return a.allowDragging=r,a.groupsExist=n,a.focusWrapper=i,a.processingColumnStateChange=!1,a.column=e.getColumn(),a.columnDept=e.getDept(),a.displayName=e.getDisplayName(),a}return Gm(t,o),t.prototype.init=function(){var e=this;this.setTemplate(t.TEMPLATE),this.eDragHandle=f._.createIconNoSpan("columnDrag",this.gridOptionsService),this.eDragHandle.classList.add("ag-drag-handle","ag-column-select-column-drag-handle");var r=this.cbSelect.getGui(),n=this.cbSelect.getInputElement();r.insertAdjacentElement("afterend",this.eDragHandle),n.setAttribute("tabindex","-1");var i=f._.escapeString(this.displayName);this.eLabel.innerHTML=i;var a=this.columnDept;this.groupsExist&&this.addCssClass("ag-column-select-add-group-indent"),this.addCssClass("ag-column-select-indent-"+a),this.setupDragging(),this.addManagedListener(this.eventService,f.YFc.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,f.ouE.EVENT_VALUE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,f.ouE.EVENT_PIVOT_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,f.ouE.EVENT_ROW_GROUP_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,f.ouE.EVENT_VISIBLE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.focusWrapper,"keydown",this.handleKeyDown.bind(this)),this.addManagedListener(this.focusWrapper,"contextmenu",this.onContextMenu.bind(this)),this.addManagedPropertyListener("functionsReadOnly",this.onColumnStateChanged.bind(this)),this.addManagedListener(this.cbSelect,f.YFc.EVENT_FIELD_VALUE_CHANGED,this.onCheckboxChanged.bind(this)),this.addManagedListener(this.eLabel,"click",this.onLabelClicked.bind(this)),this.onColumnStateChanged(),this.refreshAriaLabel(),this.setupTooltip(),f.g5g.getToolPanelClassesFromColDef(this.column.getColDef(),this.gridOptionsService,this.column,null).forEach(function(l){return e.addOrRemoveCssClass(l,!0)})},t.prototype.getColumn=function(){return this.column},t.prototype.setupTooltip=function(){var e=this,r=function(){var n=e.column.getColDef().headerTooltip;e.setTooltip(n)};r(),this.addManagedListener(this.eventService,f.YFc.EVENT_NEW_COLUMNS_LOADED,r)},t.prototype.getTooltipParams=function(){var e=o.prototype.getTooltipParams.call(this);return e.location="columnToolPanelColumn",e.colDef=this.column.getColDef(),e},t.prototype.onContextMenu=function(e){var r=this,i=this.column;if(!this.gridOptionsService.is("functionsReadOnly")){var s=this.createBean(new af(i,e,this.focusWrapper));this.addDestroyFunc(function(){s.isAlive()&&r.destroyBean(s)})}},t.prototype.handleKeyDown=function(e){e.key===f.Axe.SPACE&&(e.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected()))},t.prototype.onLabelClicked=function(){if(!this.gridOptionsService.is("functionsReadOnly")){var e=!this.cbSelect.getValue();this.onChangeCommon(e)}},t.prototype.onCheckboxChanged=function(e){this.onChangeCommon(e.selected)},t.prototype.onChangeCommon=function(e){this.cbSelect.isReadOnly()||(this.refreshAriaLabel(),!this.processingColumnStateChange&&this.modelItemUtils.setColumn(this.column,e,"toolPanelUi"))},t.prototype.refreshAriaLabel=function(){var e=this.localeService.getLocaleTextFunc(),r=e("ariaColumn","Column"),n=this.cbSelect.getValue()?e("ariaVisible","visible"):e("ariaHidden","hidden"),i=e("ariaToggleVisibility","Press SPACE to toggle visibility");f._.setAriaLabel(this.focusWrapper,this.displayName+" "+r),this.cbSelect.setInputAriaLabel(i+" ("+n+")"),f._.setAriaDescribedBy(this.focusWrapper,this.cbSelect.getInputElement().id)},t.prototype.setupDragging=function(){var e=this;if(this.allowDragging){var r=!this.gridOptionsService.is("suppressDragLeaveHidesColumns"),n={type:f.gt1.ToolPanel,eElement:this.eDragHandle,dragItemName:this.displayName,getDefaultIconName:function(){return r?f.sZo.ICON_HIDE:f.sZo.ICON_NOT_ALLOWED},getDragItem:function(){return e.createDragItem()},onDragStarted:function(){r=!e.gridOptionsService.is("suppressDragLeaveHidesColumns"),e.eventService.dispatchEvent({type:f.YFc.EVENT_COLUMN_PANEL_ITEM_DRAG_START,column:e.column})},onDragStopped:function(){e.eventService.dispatchEvent({type:f.YFc.EVENT_COLUMN_PANEL_ITEM_DRAG_END})},onGridEnter:function(i){r&&e.modelItemUtils.updateColumns({columns:[e.column],visibleState:i?.visibleState,pivotState:i?.pivotState,eventType:"toolPanelUi"})},onGridExit:function(){r&&e.onChangeCommon(!1)}};this.dragAndDropService.addDragSource(n,!0),this.addDestroyFunc(function(){return e.dragAndDropService.removeDragSource(n)})}else f._.setDisplayed(this.eDragHandle,!1)},t.prototype.createDragItem=function(){var e,r,n=this.column.getColId(),i=((e={})[n]=this.column.isVisible(),e),a=((r={})[n]=this.modelItemUtils.createPivotState(this.column),r);return{columns:[this.column],visibleState:i,pivotState:a}},t.prototype.onColumnStateChanged=function(){this.processingColumnStateChange=!0;var e=this.columnModel.isPivotMode();if(e){var r=this.column.isAnyFunctionActive();this.cbSelect.setValue(r)}else this.cbSelect.setValue(this.column.isVisible());var n=!0,i=!0;if(e){var a=this.gridOptionsService.is("functionsReadOnly"),s=!this.column.isAnyFunctionAllowed();i=n=!a&&!s}else{var l=this.column.getColDef();n=!l.lockVisible,i=!!l.enableRowGroup||!!l.enableValue||!(l.lockPosition||l.suppressMovable)}this.cbSelect.setReadOnly(!n),this.eDragHandle.classList.toggle("ag-column-select-column-readonly",!i),this.addOrRemoveCssClass("ag-column-select-column-readonly",!i&&!n);var y=e&&this.gridOptionsService.is("functionsPassive");this.cbSelect.setPassive(y),this.processingColumnStateChange=!1},t.prototype.getDisplayName=function(){return this.displayName},t.prototype.onSelectAllChanged=function(e){e!==this.cbSelect.getValue()&&(this.cbSelect.isReadOnly()||this.cbSelect.toggle())},t.prototype.isSelected=function(){return this.cbSelect.getValue()},t.prototype.isSelectable=function(){return!this.cbSelect.isReadOnly()},t.prototype.isExpandable=function(){return!1},t.prototype.setExpanded=function(e){console.warn("AG Grid: can not expand a column item that does not represent a column group header")},t.TEMPLATE='<div class="ag-column-select-column" aria-hidden="true">\n            <ag-checkbox ref="cbSelect" class="ag-column-select-checkbox"></ag-checkbox>\n            <span class="ag-column-select-column-label" ref="eLabel"></span>\n        </div>',Pi([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),Pi([(0,f.Qnc)("dragAndDropService")],t.prototype,"dragAndDropService",void 0),Pi([(0,f.Qnc)("modelItemUtils")],t.prototype,"modelItemUtils",void 0),Pi([(0,f.IzG)("eLabel")],t.prototype,"eLabel",void 0),Pi([(0,f.IzG)("cbSelect")],t.prototype,"cbSelect",void 0),Pi([f.QhY],t.prototype,"init",null),t}(f.YlN),Bm=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),bs=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},jm=function(){function o(t){this.items=t}return o.prototype.getRowCount=function(){return this.items.length},o.prototype.getRow=function(t){return this.items[t]},o}(),Hm=function(o){function t(){var e=o.call(this,t.TEMPLATE)||this;return e.destroyColumnItemFuncs=[],e}return Bm(t,o),t.prototype.destroyColumnTree=function(){this.allColsTree=[],this.destroyColumnItemFuncs.forEach(function(e){return e()}),this.destroyColumnItemFuncs=[]},t.prototype.init=function(e,r,n){var i=this;this.params=e,this.allowDragging=r,this.eventType=n,this.params.suppressSyncLayoutWithGrid||this.addManagedListener(this.eventService,f.YFc.EVENT_COLUMN_MOVED,this.onColumnsChanged.bind(this)),this.addManagedListener(this.eventService,f.YFc.EVENT_NEW_COLUMNS_LOADED,this.onColumnsChanged.bind(this)),[f.YFc.EVENT_COLUMN_PIVOT_CHANGED,f.YFc.EVENT_COLUMN_PIVOT_MODE_CHANGED,f.YFc.EVENT_COLUMN_ROW_GROUP_CHANGED,f.YFc.EVENT_COLUMN_VALUE_CHANGED,f.YFc.EVENT_COLUMN_VISIBLE,f.YFc.EVENT_NEW_COLUMNS_LOADED].forEach(function(u){i.addManagedListener(i.eventService,u,i.fireSelectionChangedEvent.bind(i))}),this.expandGroupsByDefault=!this.params.contractColumnSelection;var l=this.localeService.getLocaleTextFunc()("ariaColumnList","Column List");this.virtualList=this.createManagedBean(new f.aSq({cssIdentifier:"column-select",ariaRole:"tree",listName:l})),this.appendChild(this.virtualList.getGui()),this.virtualList.setComponentCreator(function(u,c){return f._.setAriaLevel(c,u.getDept()+1),i.createComponentFromItem(u,c)}),this.columnModel.isReady()&&this.onColumnsChanged(),!e.suppressColumnMove&&!this.gridOptionsService.is("suppressMovableColumns")&&this.createManagedBean(new km(this,this.virtualList))},t.prototype.createComponentFromItem=function(e,r){if(e.isGroup()){var n=new sf(e,this.allowDragging,this.eventType,r);return this.getContext().createBean(n),n}var i=new Vm(e,this.allowDragging,this.groupsExist,r);return this.getContext().createBean(i),i},t.prototype.onColumnsChanged=function(){var e=this.getExpandedStates(),r=this.columnModel.isPivotMode();this.params.suppressSyncLayoutWithGrid||r?this.buildTreeFromProvidedColumnDefs():this.buildTreeFromWhatGridIsDisplaying(),this.setExpandedStates(e),this.markFilteredColumns(),this.flattenAndFilterModel()},t.prototype.getDisplayedColsList=function(){return this.displayedColsList},t.prototype.getExpandedStates=function(){if(!this.allColsTree)return{};var e={};return this.forEachItem(function(r){if(r.isGroup()){var n=r.getColumnGroup();n&&(e[n.getId()]=r.isExpanded())}}),e},t.prototype.setExpandedStates=function(e){this.allColsTree&&this.forEachItem(function(r){if(r.isGroup()){var n=r.getColumnGroup();if(n){var i=e[n.getId()];null!=i&&r.setExpanded(i)}}})},t.prototype.buildTreeFromWhatGridIsDisplaying=function(){this.colDefService.syncLayoutWithGrid(this.setColumnLayout.bind(this))},t.prototype.setColumnLayout=function(e){var r=this.colDefService.createColumnTree(e);this.buildListModel(r),this.groupsExist=e.some(function(n){return n&&typeof n.children<"u"}),this.markFilteredColumns(),this.flattenAndFilterModel()},t.prototype.buildTreeFromProvidedColumnDefs=function(){this.buildListModel(this.columnModel.getPrimaryColumnTree()),this.groupsExist=this.columnModel.isPrimaryColumnGroupsPresent()},t.prototype.buildListModel=function(e){var r=this,n=this.onColumnExpanded.bind(this),a=function(u,c,d){u.forEach(function(h){h instanceof f.c$I?s(h,c,d):l(h,c,d)})},s=function(u,c,d){var h=u.getColGroupDef();if(!h||!h.suppressColumnsToolPanel){if(u.isPadding())return void a(u.getChildren(),c,d);var v=r.columnModel.getDisplayNameForProvidedColumnGroup(null,u,"columnToolPanel"),g=new ra(v,u,c,!0,r.expandGroupsByDefault);d.push(g),function(u){u.addEventListener(ra.EVENT_EXPANDED_CHANGED,n);var c=u.removeEventListener.bind(u,ra.EVENT_EXPANDED_CHANGED,n);r.destroyColumnItemFuncs.push(c)}(g),a(u.getChildren(),c+1,g.getChildren())}},l=function(u,c,d){if(!u.getColDef()||!u.getColDef().suppressColumnsToolPanel){var p=r.columnModel.getDisplayNameForColumn(u,"columnToolPanel");d.push(new ra(p,u,c))}};this.destroyColumnTree(),a(e,0,this.allColsTree)},t.prototype.onColumnExpanded=function(){this.flattenAndFilterModel()},t.prototype.flattenAndFilterModel=function(){var e=this;this.displayedColsList=[];var r=function(i){i.isPassesFilter()&&(e.displayedColsList.push(i),i.isGroup()&&i.isExpanded()&&i.getChildren().forEach(r))};this.allColsTree.forEach(r),this.virtualList.setModel(new jm(this.displayedColsList));var n=this.virtualList.getLastFocusedRow();this.virtualList.refresh(),null!=n&&this.focusRowIfAlive(n),this.notifyListeners()},t.prototype.focusRowIfAlive=function(e){var r=this;window.setTimeout(function(){r.isAlive()&&r.virtualList.focusRow(e)},0)},t.prototype.forEachItem=function(e){var r=function(n){n.forEach(function(i){e(i),i.isGroup()&&r(i.getChildren())})};r(this.allColsTree)},t.prototype.doSetExpandedAll=function(e){this.forEachItem(function(r){r.isGroup()&&r.setExpanded(e)})},t.prototype.setGroupsExpanded=function(e,r){if(r){var n=[];this.forEachItem(function(a){if(a.isGroup()){var s=a.getColumnGroup().getId();r.indexOf(s)>=0&&(a.setExpanded(e),n.push(s))}});var i=r.filter(function(a){return!f._.includes(n,a)});i.length>0&&console.warn("AG Grid: unable to find group(s) for supplied groupIds:",i)}else this.doSetExpandedAll(e)},t.prototype.getExpandState=function(){var e=0,r=0;return this.forEachItem(function(n){n.isGroup()&&(n.isExpanded()?e++:r++)}),e>0&&r>0?Br.INDETERMINATE:r>0?Br.COLLAPSED:Br.EXPANDED},t.prototype.doSetSelectedAll=function(e){this.modelItemUtils.selectAllChildren(this.allColsTree,e,this.eventType)},t.prototype.getSelectionState=function(){var e=0,r=0,n=this.columnModel.isPivotMode();if(this.forEachItem(function(i){if(!i.isGroup()&&i.isPassesFilter()){var l,a=i.getColumn(),s=a.getColDef();if(n){if(!a.isAllowPivot()&&!a.isAllowRowGroup()&&!a.isAllowValue())return;l=a.isValueActive()||a.isPivotActive()||a.isRowGroupActive()}else{if(s.lockVisible)return;l=a.isVisible()}l?e++:r++}}),!(e>0&&r>0))return!(0===e||r>0)},t.prototype.setFilterText=function(e){this.filterText=f._.exists(e)?e.toLowerCase():null,this.markFilteredColumns(),this.flattenAndFilterModel()},t.prototype.markFilteredColumns=function(){var e=this,r=function(i){if(!f._.exists(e.filterText))return!0;var a=i.getDisplayName();return null==a||-1!==a.toLowerCase().indexOf(e.filterText)},n=function(i,a){var s=!1;if(i.isGroup()){var l=r(i);i.getChildren().forEach(function(c){var d=n(c,l||a);d&&(s=d)})}var u=!(!a&&!s)||r(i);return i.setPassesFilter(u),u};this.allColsTree.forEach(function(i){return n(i,!1)})},t.prototype.notifyListeners=function(){this.fireGroupExpandedEvent(),this.fireSelectionChangedEvent()},t.prototype.fireGroupExpandedEvent=function(){var e=this.getExpandState();this.dispatchEvent({type:"groupExpanded",state:e})},t.prototype.fireSelectionChangedEvent=function(){var e=this.getSelectionState();this.dispatchEvent({type:"selectionChanged",state:e})},t.TEMPLATE='<div class="ag-column-select-list" role="presentation"></div>',bs([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),bs([(0,f.Qnc)("toolPanelColDefService")],t.prototype,"colDefService",void 0),bs([(0,f.Qnc)("modelItemUtils")],t.prototype,"modelItemUtils",void 0),bs([f.sR7],t.prototype,"destroyColumnTree",null),t}(f.YlN),Um=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Mu=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},uf=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return Um(t,o),t.prototype.createTemplate=function(){return'<div class="ag-pivot-mode-panel">\n                <ag-toggle-button ref="cbPivotMode" class="ag-pivot-mode-select"></ag-toggle-button>\n            </div>'},t.prototype.init=function(){this.setTemplate(this.createTemplate()),this.cbPivotMode.setValue(this.columnModel.isPivotMode());var e=this.localeService.getLocaleTextFunc();this.cbPivotMode.setLabel(e("pivotMode","Pivot Mode")),this.addManagedListener(this.cbPivotMode,f.YFc.EVENT_FIELD_VALUE_CHANGED,this.onBtPivotMode.bind(this)),this.addManagedListener(this.eventService,f.YFc.EVENT_NEW_COLUMNS_LOADED,this.onPivotModeChanged.bind(this)),this.addManagedListener(this.eventService,f.YFc.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this))},t.prototype.onBtPivotMode=function(){var e=!!this.cbPivotMode.getValue();if(e!==this.columnModel.isPivotMode()){this.columnModel.setPivotMode(e,"toolPanelUi");var r=this.gridOptionsService.api;r&&r.refreshHeader()}},t.prototype.onPivotModeChanged=function(){var e=this.columnModel.isPivotMode();this.cbPivotMode.setValue(e)},Mu([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),Mu([(0,f.IzG)("cbPivotMode")],t.prototype,"cbPivotMode",void 0),Mu([f.Ydw],t.prototype,"init",null),t}(f.YlN),Wm=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Os=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Km=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return Wm(t,o),t.prototype.execute=function(e){var r=f._.missingOrEmpty(this.columnModel.getValueColumns()),n=!this.gridOptionsService.getCallback("getGroupRowAgg"),i=e.changedPath&&e.changedPath.isActive();if(!(r&&n&&i)){var a=this.createAggDetails(e);this.recursivelyCreateAggData(a)}},t.prototype.createAggDetails=function(e){var r=this.columnModel.isPivotActive(),n=this.columnModel.getValueColumns(),i=r?this.columnModel.getPivotColumns():[];return{alwaysAggregateAtRootLevel:this.gridOptionsService.is("alwaysAggregateAtRootLevel"),groupIncludeTotalFooter:this.gridOptionsService.is("groupIncludeTotalFooter"),changedPath:e.changedPath,valueColumns:n,pivotColumns:i,filteredOnly:!this.isSuppressAggFilteredOnly(),userAggFunc:this.gridOptionsService.getCallback("getGroupRowAgg")}},t.prototype.isSuppressAggFilteredOnly=function(){return void 0!==this.gridOptionsService.getGroupAggFiltering()||this.gridOptionsService.is("suppressAggFilteredOnly")},t.prototype.recursivelyCreateAggData=function(e){var r=this;e.changedPath.forEachChangedNodeDepthFirst(function(i){if(i.hasChildren()){if(-1===i.level&&!e.groupIncludeTotalFooter){var l=!r.columnModel.isPivotMode();if(!e.alwaysAggregateAtRootLevel&&l)return}r.aggregateRowNode(i,e)}else i.aggData&&i.setAggData(null)},!0)},t.prototype.aggregateRowNode=function(e,r){var a,n=0===r.valueColumns.length,i=0===r.pivotColumns.length;a=r.userAggFunc?r.userAggFunc({nodes:e.childrenAfterFilter}):n?null:i?this.aggregateRowNodeUsingValuesOnly(e,r):this.aggregateRowNodeUsingValuesAndPivot(e),e.setAggData(a),e.sibling&&e.sibling.setAggData(a)},t.prototype.aggregateRowNodeUsingValuesAndPivot=function(e){var n,r=this,i={},a=null!==(n=this.columnModel.getSecondaryColumns())&&void 0!==n?n:[];return a.forEach(function(s){var v,l=s.getColDef(),u=l.pivotValueColumn,d=l.colId,h=l.pivotKeys;f._.exists(l.pivotTotalColumnIds)||(v=e.leafGroup?r.getValuesFromMappedSet(e.childrenMapped,h??[],u):r.getValuesPivotNonLeaf(e,d),i[d]=r.aggregateValues(v,u.getAggFunc(),u,e,s))}),a.forEach(function(s){var l=s.getColDef(),u=l.pivotValueColumn,c=l.pivotTotalColumnIds,d=l.colId;if(f._.exists(c)){var h=[];!c||!c.length||(c.forEach(function(p){h.push(i[p])}),i[d]=r.aggregateValues(h,u.getAggFunc(),u,e,s))}}),i},t.prototype.aggregateRowNodeUsingValuesOnly=function(e,r){var n=this,i={},a=r.changedPath.isActive()?r.changedPath.getValueColumnsForNode(e,r.valueColumns):r.valueColumns,s=r.changedPath.isActive()?r.changedPath.getNotValueColumnsForNode(e,r.valueColumns):null,l=this.getValuesNormal(e,a,r.filteredOnly),u=e.aggData;return a.forEach(function(c,d){i[c.getId()]=n.aggregateValues(l[d],c.getAggFunc(),c,e)}),s&&u&&s.forEach(function(c){i[c.getId()]=u[c.getId()]}),i},t.prototype.getValuesPivotNonLeaf=function(e,r){var n=[];return e.childrenAfterFilter.forEach(function(i){n.push(i.aggData[r])}),n},t.prototype.getValuesFromMappedSet=function(e,r,n){var i=this,a=e;if(r.forEach(function(l){return a=a?a[l]:null}),!a)return[];var s=[];return a.forEach(function(l){var u=i.valueService.getValue(n,l);s.push(u)}),s},t.prototype.getValuesNormal=function(e,r,n){var i=[];r.forEach(function(){return i.push([])});for(var a=r.length,s=n?e.childrenAfterFilter:e.childrenAfterGroup,l=s.length,u=0;u<l;u++)for(var c=s[u],d=0;d<a;d++){var p=this.valueService.getValue(r[d],c);i[d].push(p)}return i},t.prototype.aggregateValues=function(e,r,n,i,a){var s="string"==typeof r?this.aggFuncService.getAggFunc(r):r;return"function"!=typeof s?(console.error("AG Grid: unrecognised aggregation function "+r),null):s({values:e,column:n,colDef:n?n.getColDef():void 0,pivotResultColumn:a,rowNode:i,data:i?i.data:void 0,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context})},Os([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),Os([(0,f.Qnc)("valueService")],t.prototype,"valueService",void 0),Os([(0,f.Qnc)("aggFuncService")],t.prototype,"aggFuncService",void 0),Os([(0,f.ekA)("aggregationStage")],t)}(f._QX),Ru=function(){function o(){this.allSets={},this.allParents=[]}return o.prototype.removeFromChildrenAfterGroup=function(t,e){this.getSet(t).removeFromChildrenAfterGroup[e.id]=!0},o.prototype.isRemoveFromAllLeafChildren=function(t,e){return!!this.getSet(t).removeFromAllLeafChildren[e.id]},o.prototype.preventRemoveFromAllLeafChildren=function(t,e){delete this.getSet(t).removeFromAllLeafChildren[e.id]},o.prototype.removeFromAllLeafChildren=function(t,e){this.getSet(t).removeFromAllLeafChildren[e.id]=!0},o.prototype.getSet=function(t){return this.allSets[t.id]||(this.allSets[t.id]={removeFromAllLeafChildren:{},removeFromChildrenAfterGroup:{}},this.allParents.push(t)),this.allSets[t.id]},o.prototype.getAllParents=function(){return this.allParents},o.prototype.flush=function(){var t=this;this.allParents.forEach(function(e){var r=t.allSets[e.id];e.childrenAfterGroup=e.childrenAfterGroup.filter(function(n){return!r.removeFromChildrenAfterGroup[n.id]}),e.allLeafChildren=e.allLeafChildren.filter(function(n){return!r.removeFromAllLeafChildren[n.id]}),e.updateHasChildren(),e.sibling&&(e.sibling.childrenAfterGroup=e.childrenAfterGroup,e.sibling.allLeafChildren=e.allLeafChildren)}),this.allSets={},this.allParents.length=0},o}(),Ym=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ai=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},cf=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},df=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},$m=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.groupIdSequence=new f.Gxi,e}return Ym(t,o),t.prototype.execute=function(e){var r=this.createGroupingDetails(e);r.transactions?this.handleTransaction(r):this.shotgunResetEverything(r,!0===e.afterColumnsChanged),r.usingTreeData||(this.positionLeafsAndGroups(e.changedPath),this.orderGroups(r)),this.selectableService.updateSelectableAfterGrouping(r.rootNode)},t.prototype.positionLeafsAndGroups=function(e){e.forEachChangedNodeDepthFirst(function(r){if(r.childrenAfterGroup){var a,n=[],i=[];r.childrenAfterGroup.forEach(function(s){var l;null!==(l=s.childrenAfterGroup)&&void 0!==l&&l.length?""!==s.key||a?i.push(s):a=s:n.push(s)}),a&&i.push(a),r.childrenAfterGroup=df(df([],cf(n)),cf(i))}},!1)},t.prototype.createGroupingDetails=function(e){var r=e.rowNode,n=e.changedPath,i=e.rowNodeTransactions,a=e.rowNodeOrder,s=this.gridOptionsService.is("treeData"),l=s?null:this.columnModel.getRowGroupColumns();return{includeParents:!this.gridOptionsService.is("suppressParentsInRowNodes"),expandByDefault:this.gridOptionsService.getNum("groupDefaultExpanded"),groupedCols:l,rootNode:r,pivotMode:this.columnModel.isPivotMode(),groupedColCount:s||!l?0:l.length,rowNodeOrder:a,transactions:i,changedPath:n,groupAllowUnbalanced:this.gridOptionsService.is("groupAllowUnbalanced"),isGroupOpenByDefault:this.gridOptionsService.getCallback("isGroupOpenByDefault"),initialGroupOrderComparator:this.gridOptionsService.getCallback("initialGroupOrderComparator"),createGroupFooter:this.gridOptionsService.isGroupIncludeFooterTrueOrCallback(),usingTreeData:s,getDataPath:s?this.gridOptionsService.get("getDataPath"):void 0}},t.prototype.handleTransaction=function(e){var r=this;e.transactions.forEach(function(n){var i=e.usingTreeData?void 0:new Ru;if(f._.existsAndNotEmpty(n.remove)&&r.removeNodes(n.remove,e,i),f._.existsAndNotEmpty(n.update)&&r.moveNodesInWrongPath(n.update,e,i),f._.existsAndNotEmpty(n.add)&&r.insertNodes(n.add,e,!1),i){var a=i.getAllParents().slice();i.flush(),r.removeEmptyGroups(a,e)}}),e.rowNodeOrder&&this.sortChildren(e)},t.prototype.sortChildren=function(e){e.changedPath.forEachChangedNodeDepthFirst(function(r){r.childrenAfterGroup&&f._.sortRowNodesByOrder(r.childrenAfterGroup,e.rowNodeOrder)&&e.changedPath.addParentNode(r)},!1,!0)},t.prototype.orderGroups=function(e){var r=e.initialGroupOrderComparator;f._.exists(r)&&function n(i){f._.exists(i.childrenAfterGroup)&&!i.leafGroup&&(i.childrenAfterGroup.sort(function(s,l){return r({nodeA:s,nodeB:l})}),i.childrenAfterGroup.forEach(function(s){return n(s)}))}(e.rootNode)},t.prototype.getExistingPathForNode=function(e,r){for(var n=[],i=r.usingTreeData?e:e.parent;i&&i!==r.rootNode;)n.push({key:i.key,rowGroupColumn:i.rowGroupColumn,field:i.field}),i=i.parent;return n.reverse(),n},t.prototype.moveNodesInWrongPath=function(e,r,n){var i=this;e.forEach(function(a){r.changedPath.isActive()&&r.changedPath.addParentNode(a.parent);var s=function(d){return d.key},l=i.getExistingPathForNode(a,r).map(s),u=i.getGroupInfo(a,r).map(s);f._.areEqual(l,u)||i.moveNode(a,r,n)})},t.prototype.moveNode=function(e,r,n){this.removeNodesInStages([e],r,n),this.insertOneNode(e,r,!0,n),e.setData(e.data),r.changedPath.isActive()&&r.changedPath.addParentNode(e.parent)},t.prototype.removeNodes=function(e,r,n){this.removeNodesInStages(e,r,n),r.changedPath.isActive()&&e.forEach(function(i){return r.changedPath.addParentNode(i.parent)})},t.prototype.removeNodesInStages=function(e,r,n){if(this.removeNodesFromParents(e,r,n),r.usingTreeData){this.postRemoveCreateFillerNodes(e,r);var i=e.map(function(a){return a.parent});this.removeEmptyGroups(i,r)}},t.prototype.forEachParentGroup=function(e,r,n){for(var i=r;i&&i!==e.rootNode;)n(i),i=i.parent},t.prototype.removeNodesFromParents=function(e,r,n){var i=this,a=null==n,s=n||new Ru;e.forEach(function(l){i.removeFromParent(l,s),i.forEachParentGroup(r,l.parent,function(u){s.removeFromAllLeafChildren(u,l)})}),a&&s.flush()},t.prototype.postRemoveCreateFillerNodes=function(e,r){var n=this;e.forEach(function(i){if(i.hasChildren()){var s=n.getExistingPathForNode(i,r),l=n.findParentForNode(i,s,r);l.expanded=i.expanded,l.allLeafChildren=i.allLeafChildren,l.childrenAfterGroup=i.childrenAfterGroup,l.childrenMapped=i.childrenMapped,l.updateHasChildren(),l.childrenAfterGroup.forEach(function(u){return u.parent=l})}})},t.prototype.removeEmptyGroups=function(e,r){for(var n=this,i=!0,s=function(){i=!1;var l=new Ru;e.forEach(function(u){n.forEachParentGroup(r,u,function(c){(function(l){var u=n.getChildrenMappedKey(l.key,l.rowGroupColumn),c=l.parent;return!!(c&&c.childrenMapped&&c.childrenMapped[u]&&l.isEmptyRowGroupNode())})(c)&&(i=!0,n.removeFromParent(c,l),c.setSelectedParams({newValue:!1,source:"rowGroupChanged"}))})}),l.flush()};i;)s()},t.prototype.removeFromParent=function(e,r){e.parent&&(r?r.removeFromChildrenAfterGroup(e.parent,e):(f._.removeFromArray(e.parent.childrenAfterGroup,e),e.parent.updateHasChildren()));var n=this.getChildrenMappedKey(e.key,e.rowGroupColumn);e.parent&&e.parent.childrenMapped&&(e.parent.childrenMapped[n]=void 0),e.setRowTop(null),e.setRowIndex(null)},t.prototype.addToParent=function(e,r){var n=this.getChildrenMappedKey(e.key,e.rowGroupColumn);r&&(null!=r.childrenMapped&&(r.childrenMapped[n]=e),r.childrenAfterGroup.push(e),r.updateHasChildren())},t.prototype.areGroupColsEqual=function(e,r){return null!=e&&null!=r&&e.pivotMode===r.pivotMode&&f._.areEqual(e.groupedCols,r.groupedCols)},t.prototype.checkAllGroupDataAfterColsChanged=function(e){var r=this,n=function(i){i&&i.forEach(function(a){!e.usingTreeData&&!a.group||(r.setGroupData(a,{field:a.field,key:a.key,rowGroupColumn:a.rowGroupColumn},e),n(a.childrenAfterGroup))})};n(e.rootNode.childrenAfterGroup)},t.prototype.shotgunResetEverything=function(e,r){if(!this.noChangeInGroupingColumns(e,r)){this.selectionService.filterFromSelection(function(s){return s&&!s.group});var n=e.rootNode;n.leafGroup=!e.usingTreeData&&0===e.groupedCols.length,n.childrenAfterGroup=[],n.childrenMapped={},n.updateHasChildren();var a=n.sibling;a&&(a.childrenAfterGroup=n.childrenAfterGroup,a.childrenMapped=n.childrenMapped),this.insertNodes(n.allLeafChildren,e,!1)}},t.prototype.noChangeInGroupingColumns=function(e,r){var n=!1,i=this.columnModel.getGroupDisplayColumns(),a=i?i.map(function(s){return s.getId()}).join("-"):"";return r&&(n=e.usingTreeData||this.areGroupColsEqual(e,this.oldGroupingDetails),this.oldGroupDisplayColIds!==a&&this.checkAllGroupDataAfterColsChanged(e)),this.oldGroupingDetails=e,this.oldGroupDisplayColIds=a,n},t.prototype.insertNodes=function(e,r,n){var i=this;e.forEach(function(a){i.insertOneNode(a,r,n),r.changedPath.isActive()&&r.changedPath.addParentNode(a.parent)})},t.prototype.insertOneNode=function(e,r,n,i){var a=this.getGroupInfo(e,r),s=this.findParentForNode(e,a,r,i);s.group||console.warn("AG Grid: duplicate group keys for row data, keys should be unique",[s.data,e.data]),r.usingTreeData?this.swapGroupWithUserNode(s,e,n):(e.parent=s,e.level=a.length,s.childrenAfterGroup.push(e),s.updateHasChildren())},t.prototype.findParentForNode=function(e,r,n,i){var a=this,s=n.rootNode;return r.forEach(function(l,u){s=a.getOrCreateNextNode(s,l,u,n),i?.isRemoveFromAllLeafChildren(s,e)?i?.preventRemoveFromAllLeafChildren(s,e):s.allLeafChildren.push(e)}),s},t.prototype.swapGroupWithUserNode=function(e,r,n){r.parent=e.parent,r.key=e.key,r.field=e.field,r.groupData=e.groupData,r.level=e.level,n||(r.expanded=e.expanded),r.leafGroup=e.leafGroup,r.rowGroupIndex=e.rowGroupIndex,r.allLeafChildren=e.allLeafChildren,r.childrenAfterGroup=e.childrenAfterGroup,r.childrenMapped=e.childrenMapped,r.sibling=e.sibling,r.updateHasChildren(),this.removeFromParent(e),r.childrenAfterGroup.forEach(function(i){return i.parent=r}),this.addToParent(r,e.parent)},t.prototype.getOrCreateNextNode=function(e,r,n,i){var a=this.getChildrenMappedKey(r.key,r.rowGroupColumn),s=e.childrenMapped?e.childrenMapped[a]:void 0;return s||(s=this.createGroup(r,e,n,i),this.addToParent(s,e)),s},t.prototype.createGroup=function(e,r,n,i){var a=new f.w$i(this.beans);return a.group=!0,a.field=e.field,a.rowGroupColumn=e.rowGroupColumn,this.setGroupData(a,e,i),a.id=f.w$i.ID_PREFIX_ROW_GROUP+this.groupIdSequence.next(),a.key=e.key,a.level=n,a.leafGroup=!i.usingTreeData&&n===i.groupedColCount-1,a.allLeafChildren=[],a.setAllChildrenCount(0),a.rowGroupIndex=i.usingTreeData?null:n,a.childrenAfterGroup=[],a.childrenMapped={},a.updateHasChildren(),a.parent=i.includeParents?r:null,this.setExpandedInitialValue(i,a),a},t.prototype.setGroupData=function(e,r,n){e.groupData={},this.columnModel.getGroupDisplayColumns().forEach(function(a){(n.usingTreeData||e.rowGroupColumn&&a.isRowGroupDisplayed(e.rowGroupColumn.getId()))&&(e.groupData[a.getColId()]=r.key)})},t.prototype.getChildrenMappedKey=function(e,r){return r?r.getId()+"-"+e:e},t.prototype.setExpandedInitialValue=function(e,r){if(e.pivotMode&&r.leafGroup)r.expanded=!1;else{var n=e.isGroupOpenByDefault;r.expanded=n?1==n({rowNode:r,field:r.field,key:r.key,level:r.level,rowGroupColumn:r.rowGroupColumn}):-1===e.expandByDefault||r.level<e.expandByDefault}},t.prototype.getGroupInfo=function(e,r){return r.usingTreeData?this.getGroupInfoFromCallback(e,r):this.getGroupInfoFromGroupColumns(e,r)},t.prototype.getGroupInfoFromCallback=function(e,r){var n=r.getDataPath?r.getDataPath(e.data):null;return(null==n||0===n.length)&&f._.doOnce(function(){return console.warn("AG Grid: getDataPath() should not return an empty path for data",e.data)},"groupStage.getGroupInfoFromCallback"),n?n.map(function(a){return{key:a,field:null,rowGroupColumn:null}}):[]},t.prototype.getGroupInfoFromGroupColumns=function(e,r){var n=this,i=[];return r.groupedCols.forEach(function(a){var s=n.valueService.getKeyForNode(a,e),l=null!=s&&""!==s;if((r.pivotMode||!r.groupAllowUnbalanced)&&!l&&(s="",l=!0),l){var c={key:s,field:a.getColDef().field,rowGroupColumn:a};i.push(c)}}),i},Ai([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),Ai([(0,f.Qnc)("selectableService")],t.prototype,"selectableService",void 0),Ai([(0,f.Qnc)("valueService")],t.prototype,"valueService",void 0),Ai([(0,f.Qnc)("beans")],t.prototype,"beans",void 0),Ai([(0,f.Qnc)("selectionService")],t.prototype,"selectionService",void 0),Ai([(0,f.ekA)("groupStage")],t)}(f._QX),Xm=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Es=function(){return Es=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},Es.apply(this,arguments)},Ts=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Ps=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Di=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},Qm=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}var e;return Xm(t,o),e=t,t.prototype.init=function(){var r=this,n=function(){var a;return null!==(a=r.gos.get("serverSidePivotResultFieldSeparator"))&&void 0!==a?a:"_"};this.fieldSeparator=n(),this.addManagedPropertyListener("serverSidePivotResultFieldSeparator",function(){r.fieldSeparator=n()});var i=function(){var a;return null!==(a=r.gos.getNum("pivotDefaultExpanded"))&&void 0!==a?a:0};this.pivotDefaultExpanded=i(),this.addManagedPropertyListener("pivotDefaultExpanded",function(){r.pivotDefaultExpanded=i()})},t.prototype.createPivotColumnDefs=function(r){var n=this.createPivotColumnsFromUniqueValues(r),a=function i(l,u){return void 0===u&&(u=[]),l.forEach(function(c){void 0!==c.children?i(c.children,u):u.push(c)}),u}(n);return this.addRowGroupTotals(n,a),this.addExpandablePivotGroups(n,a),this.addPivotTotalsToGroups(n,a),{pivotColumnGroupDefs:n,pivotColumnDefs:a.map(function(l){return f._.cloneObject(l)})}},t.prototype.createPivotColumnsFromUniqueValues=function(r){var n=this.columnModel.getPivotColumns();return this.recursivelyBuildGroup(0,r,[],n.length,n)},t.prototype.recursivelyBuildGroup=function(r,n,i,a,s){var l=this,u=this.columnModel.getValueColumns();if(r>=a)return this.buildMeasureCols(i);var c=s[r].getColDef(),d=this.headerNameComparator.bind(this,c.pivotComparator);if(1===u.length&&this.gridOptionsService.is("removePivotHeaderRowWhenSingleValueColumn")&&r===a-1){var h=[];return f._.iterateObject(n,function(v){var g=Di(Di([],Ps(i)),[v]),y=l.createColDef(u[0],v,g);y.columnGroupShow="open",h.push(y)}),h.sort(d),h}var p=[];return f._.iterateObject(n,function(v,g){var y=-1===l.pivotDefaultExpanded||r<l.pivotDefaultExpanded,S=Di(Di([],Ps(i)),[v]);p.push({children:l.recursivelyBuildGroup(r+1,g,S,a,s),headerName:v,pivotKeys:S,columnGroupShow:"open",openByDefault:y,groupId:l.generateColumnGroupId(S)})}),p.sort(d),p},t.prototype.buildMeasureCols=function(r){var n=this,i=this.columnModel.getValueColumns();return 0===i.length?[this.createColDef(null,"-",r)]:i.map(function(a){var s=n.columnModel.getDisplayNameForColumn(a,"header");return Es(Es({},n.createColDef(a,s,r)),{columnGroupShow:"open"})})},t.prototype.addExpandablePivotGroups=function(r,n){var i=this;if(!this.gridOptionsService.is("suppressExpandablePivotGroups")&&!this.gridOptionsService.get("pivotColumnGroupTotals")){var a=function(s,l,u){var c=s;if(c.children){var d=new Map;c.children.forEach(function(y){a(y,l,d)});var h=!c.children.some(function(y){return y.children});i.columnModel.getValueColumns().forEach(function(y){var S=i.columnModel.getDisplayNameForColumn(y,"header"),m=i.createColDef(y,S,s.pivotKeys);m.pivotTotalColumnIds=d.get(y.getColId()),m.columnGroupShow="closed",m.aggFunc=y.getAggFunc(),h||(s.children.push(m),l.push(m))}),i.merge(u,d)}else{var p=s;if(!p.pivotValueColumn)return;var v=p.pivotValueColumn.getColId(),g=u.has(v)?u.get(v):[];g.push(p.colId),u.set(v,g)}};r.forEach(function(s){a(s,n,new Map)})}},t.prototype.addPivotTotalsToGroups=function(r,n){var i=this;if(this.gridOptionsService.get("pivotColumnGroupTotals")){var a="after"===this.gridOptionsService.get("pivotColumnGroupTotals"),s=this.columnModel.getValueColumns(),l=s.map(function(c){return c.getAggFunc()});if(l&&!(l.length<1)&&this.sameAggFuncs(l)){var u=s[0];r.forEach(function(c){i.recursivelyAddPivotTotal(c,n,u,a)})}}},t.prototype.recursivelyAddPivotTotal=function(r,n,i,a){var s=this,l=r;if(!l.children)return r.colId?[r.colId]:null;var c=[];if(l.children.forEach(function(g){var y=s.recursivelyAddPivotTotal(g,n,i,a);y&&(c=c.concat(y))}),l.children.length>1){var h=this.localeService.getLocaleTextFunc()("pivotColumnGroupTotals","Total"),p=this.createColDef(i,h,r.pivotKeys,!0);p.pivotTotalColumnIds=c,p.aggFunc=i.getAggFunc();var v=r.children;a?v.push(p):v.unshift(p),n.push(p)}return c},t.prototype.addRowGroupTotals=function(r,n){var i=this;if(this.gridOptionsService.get("pivotRowTotals"))for(var a="after"===this.gridOptionsService.get("pivotRowTotals"),s=this.columnModel.getValueColumns(),l=a?s.slice():s.slice().reverse(),u=function(h){var p=l[h],v=[];r.forEach(function(y){v=v.concat(i.extractColIdsForValueColumn(y,p))});var g=l.length>1||!c.gridOptionsService.is("removePivotHeaderRowWhenSingleValueColumn");c.createRowGroupTotal(r,n,p,v,a,g)},c=this,d=0;d<l.length;d++)u(d)},t.prototype.extractColIdsForValueColumn=function(r,n){var i=this;if(!r.children)return r.pivotValueColumn===n&&r.colId?[r.colId]:[];var l=[];return r.children.forEach(function(u){i.extractColIdsForValueColumn(u,n);var c=i.extractColIdsForValueColumn(u,n);l=l.concat(c)}),l},t.prototype.createRowGroupTotal=function(r,n,i,a,s,l){var c;if(0===this.columnModel.getValueColumns().length)c=this.createColDef(null,"-",[]);else{var d=this.columnModel.getDisplayNameForColumn(i,"header");(c=this.createColDef(i,d,[])).pivotTotalColumnIds=a}c.colId=e.PIVOT_ROW_TOTAL_PREFIX+c.colId,n.push(c);var h=l?{children:[c],pivotKeys:[],groupId:e.PIVOT_ROW_TOTAL_PREFIX+"_pivotGroup_"+i.getColId()}:c;s?r.push(h):r.unshift(h)},t.prototype.createColDef=function(r,n,i,a){void 0===a&&(a=!1);var s={};if(r){var l=r.getColDef();Object.assign(s,l),s.hide=!1}return s.headerName=n,s.colId=this.generateColumnId(i||[],r&&!a?r.getColId():""),s.field=s.colId,s.valueGetter=function(u){var c;return null===(c=u.data)||void 0===c?void 0:c[u.colDef.field]},s.pivotKeys=i,s.pivotValueColumn=r,!0===s.filter&&(s.filter="agNumberColumnFilter"),s},t.prototype.sameAggFuncs=function(r){if(1==r.length)return!0;for(var n=1;n<r.length;n++)if(r[n]!==r[0])return!1;return!0},t.prototype.headerNameComparator=function(r,n,i){return r?r(n.headerName,i.headerName):n.headerName&&!i.headerName?1:!n.headerName&&i.headerName?-1:n.headerName&&i.headerName?n.headerName<i.headerName?-1:n.headerName>i.headerName?1:0:0},t.prototype.merge=function(r,n){n.forEach(function(i,a,s){var l=r.has(a)?r.get(a):[],u=Di(Di([],Ps(l)),Ps(i));r.set(a,u)})},t.prototype.generateColumnGroupId=function(r){return"pivotGroup_"+this.columnModel.getPivotColumns().map(function(i){return i.getColId()}).join("-")+"_"+r.join("-")},t.prototype.generateColumnId=function(r,n){return"pivot_"+this.columnModel.getPivotColumns().map(function(a){return a.getColId()}).join("-")+"_"+r.join("-")+"_"+n},t.prototype.createColDefsFromFields=function(r){for(var n=this,i={},a=0;a<r.length;a++)for(var l=r[a].split(this.fieldSeparator),u=i,c=0;c<l.length;c++){var d=l[c];null==u[d]&&(u[d]={}),u=u[d]}var h=function(S,m,C,_){var w,x=[];for(var b in C){var T=h(""+S+n.fieldSeparator+b,b,C[b],_+1);x.push(T)}if(0===x.length){var E={colId:S,headerName:m,valueGetter:function(M){var F;return null===(F=M.data)||void 0===F?void 0:F[S]}},P=n.columnModel.getPrimaryColumn(m);return P&&(E.headerName=null!==(w=n.columnModel.getDisplayNameForColumn(P,"header"))&&void 0!==w?w:m,E.aggFunc=P.getAggFunc(),E.pivotValueColumn=P),E}return n.gridOptionsService.is("removePivotHeaderRowWhenSingleValueColumn")&&1===x.length&&"colId"in x[0]?(x[0].headerName=m,x[0]):{openByDefault:-1===n.pivotDefaultExpanded||_<n.pivotDefaultExpanded,groupId:S,headerName:m,children:x}},p=[];for(var v in i){var y=h(v,v,i[v],0);p.push(y)}return p},t.PIVOT_ROW_TOTAL_PREFIX="PivotRowTotal_",Ts([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),Ts([(0,f.Qnc)("gridOptionsService")],t.prototype,"gos",void 0),Ts([f.QhY],t.prototype,"init",null),e=Ts([(0,f.ekA)("pivotColDefService")],t)}(f._QX),Zm=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),As=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},qm=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.uniqueValues={},e}return Zm(t,o),t.prototype.execute=function(e){var r=e.changedPath;this.columnModel.isPivotActive()?this.executePivotOn(r):this.executePivotOff(r)},t.prototype.executePivotOff=function(e){this.aggregationColumnsHashLastTime=null,this.uniqueValues={},this.columnModel.isSecondaryColumnsPresent()&&(this.columnModel.setSecondaryColumns(null,"rowModelUpdated"),e&&e.setInactive())},t.prototype.executePivotOn=function(e){var r=this.bucketUpRowNodes(e),n=this.setUniqueValues(r),i=this.columnModel.getValueColumns(),a=i.map(function(g){return g.getId()+"-"+g.getColDef().headerName}).join("#"),s=i.map(function(g){return g.getAggFunc().toString()}).join("#"),l=this.aggregationColumnsHashLastTime!==a,u=this.aggregationFuncsHashLastTime!==s;this.aggregationColumnsHashLastTime=a,this.aggregationFuncsHashLastTime=s;var c=this.columnModel.getRowGroupColumns().map(function(g){return g.getId()}).join("#"),d=c!==this.groupColumnsHashLastTime;if(this.groupColumnsHashLastTime=c,n||l||d||u){var h=this.pivotColDefService.createPivotColumnDefs(this.uniqueValues),p=h.pivotColumnGroupDefs;this.pivotColumnDefs=h.pivotColumnDefs,this.columnModel.setSecondaryColumns(p,"rowModelUpdated"),e&&e.setInactive()}},t.prototype.setUniqueValues=function(e){return!(JSON.stringify(e)===JSON.stringify(this.uniqueValues)||(this.uniqueValues=e,0))},t.prototype.bucketUpRowNodes=function(e){var r=this,n={};e.forEachChangedNodeDepthFirst(function(a){a.leafGroup&&(a.childrenMapped=null)});var i=function(a){var s;a.leafGroup?r.bucketRowNode(a,n):null===(s=a.childrenAfterFilter)||void 0===s||s.forEach(i)};return e.executeFromRootNode(i),n},t.prototype.bucketRowNode=function(e,r){var n=this.columnModel.getPivotColumns();e.childrenMapped=0===n.length?null:this.bucketChildren(e.childrenAfterFilter,n,0,r),e.sibling&&(e.sibling.childrenMapped=e.childrenMapped)},t.prototype.bucketChildren=function(e,r,n,i){var a=this,s={},l=r[n];if(e.forEach(function(c){var d=a.valueService.getKeyForNode(l,c);f._.missing(d)&&(d=""),i[d]||(i[d]={}),s[d]||(s[d]=[]),s[d].push(c)}),n===r.length-1)return s;var u={};return f._.iterateObject(s,function(c,d){u[c]=a.bucketChildren(d,r,n+1,i[c])}),u},t.prototype.getPivotColumnDefs=function(){return this.pivotColumnDefs},As([(0,f.Qnc)("valueService")],t.prototype,"valueService",void 0),As([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),As([(0,f.Qnc)("pivotColDefService")],t.prototype,"pivotColDefService",void 0),As([(0,f.ekA)("pivotStage")],t)}(f._QX),Jm=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ff=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},yr=typeof BigInt>"u"?null:BigInt,e0=function(o){function t(){var r=null!==o&&o.apply(this,arguments)||this;return r.aggFuncsMap={},r.initialised=!1,r}var e;return Jm(t,o),e=t,t.prototype.init=function(){this.initialised||(this.initialiseWithDefaultAggregations(),this.addAggFuncs(this.gridOptionsService.get("aggFuncs")))},t.prototype.initialiseWithDefaultAggregations=function(){this.aggFuncsMap[e.AGG_SUM]=t0,this.aggFuncsMap[e.AGG_FIRST]=r0,this.aggFuncsMap[e.AGG_LAST]=n0,this.aggFuncsMap[e.AGG_MIN]=i0,this.aggFuncsMap[e.AGG_MAX]=o0,this.aggFuncsMap[e.AGG_COUNT]=a0,this.aggFuncsMap[e.AGG_AVG]=s0,this.initialised=!0},t.prototype.isAggFuncPossible=function(r,n){var i=this.getFuncNames(r),a=f._.includes(i,n),s=f._.exists(this.aggFuncsMap[n]);return a&&s},t.prototype.getDefaultAggFunc=function(r){var n=r.getColDef().defaultAggFunc;if(f._.exists(n)&&this.isAggFuncPossible(r,n))return n;if(this.isAggFuncPossible(r,e.AGG_SUM))return e.AGG_SUM;var i=this.getFuncNames(r);return f._.existsAndNotEmpty(i)?i[0]:null},t.prototype.addAggFuncs=function(r){f._.iterateObject(r,this.addAggFunc.bind(this))},t.prototype.addAggFunc=function(r,n){this.init(),this.aggFuncsMap[r]=n},t.prototype.getAggFunc=function(r){return this.init(),this.aggFuncsMap[r]},t.prototype.getFuncNames=function(r){return r.getColDef().allowedAggFuncs??Object.keys(this.aggFuncsMap).sort()},t.prototype.clear=function(){this.aggFuncsMap={}},t.AGG_SUM="sum",t.AGG_FIRST="first",t.AGG_LAST="last",t.AGG_MIN="min",t.AGG_MAX="max",t.AGG_COUNT="count",t.AGG_AVG="avg",ff([f.QhY],t.prototype,"init",null),e=ff([(0,f.ekA)("aggFuncService")],t)}(f._QX);function t0(o){for(var t=o.values,e=null,r=0;r<t.length;r++){var n=t[r];"number"==typeof n?null===e?e=n:e+=yr?"number"==typeof e?n:yr(n):n:"bigint"==typeof n&&(e=null===e?n:("bigint"==typeof e?e:yr(e))+n)}return e}function r0(o){return o.values.length>0?o.values[0]:null}function n0(o){return o.values.length>0?f._.last(o.values):null}function i0(o){for(var t=o.values,e=null,r=0;r<t.length;r++){var n=t[r];("number"==typeof n||"bigint"==typeof n)&&(null===e||e>n)&&(e=n)}return e}function o0(o){for(var t=o.values,e=null,r=0;r<t.length;r++){var n=t[r];("number"==typeof n||"bigint"==typeof n)&&(null===e||e<n)&&(e=n)}return e}function a0(o){for(var t,e,r=o.values,n=0,i=0;i<r.length;i++){var a=r[i];n+=null!=a&&"number"==typeof a.value?a.value:1}var s=null===(e=null===(t=o.rowNode)||void 0===t?void 0:t.aggData)||void 0===e?void 0:e[o.column.getColId()];return s&&s.value===n?s:{value:n,toString:function(){return this.value.toString()},toNumber:function(){return this.value}}}function s0(o){for(var t,e,r,n=o.values,i=0,a=0,s=0;s<n.length;s++){var l=n[s],u=null;"number"==typeof l||"bigint"==typeof l?(u=l,a++):null!=l&&("number"==typeof l.value||"bigint"==typeof l.value)&&"number"==typeof l.count&&(u=yr?l.value*("number"==typeof l.value?l.count:yr(l.count)):l.value*l.count,a+=l.count),"number"==typeof u?i+=yr?"number"==typeof i?u:yr(u):u:"bigint"==typeof u&&(i=("bigint"==typeof i?i:yr(i))+u)}var c=null;a>0&&(c=yr?i/("number"==typeof i?a:yr(a)):i/a);var d=null===(e=null===(t=o.rowNode)||void 0===t?void 0:t.aggData)||void 0===e?void 0:e[null===(r=o.column)||void 0===r?void 0:r.getColId()];return d&&d.count===a&&d.value===c?d:{count:a,value:c,toString:function(){return"number"==typeof this.value||"bigint"==typeof this.value?this.value.toString():""},toNumber:function(){return this.value}}}var Bs,Fi,ca,da,fa,Nf,js,kf,Yu,hf=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),mr=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},pf=function(o){function t(e,r,n,i,a){var s=o.call(this)||this;return s.column=e,s.dragSourceDropTarget=r,s.ghost=n,s.dropZonePurpose=i,s.horizontal=a,s.popupShowing=!1,s}return hf(t,o),t.prototype.init=function(){var e=this;this.setTemplate(t.TEMPLATE);var r=this.getGui(),n=this.gridOptionsService.is("functionsReadOnly");this.addElementClasses(r),this.addElementClasses(this.eDragHandle,"drag-handle"),this.addElementClasses(this.eText,"text"),this.addElementClasses(this.eButton,"button"),this.eDragHandle.appendChild(f._.createIconNoSpan("columnDrag",this.gridOptionsService)),this.eButton.appendChild(f._.createIconNoSpan("cancel",this.gridOptionsService)),this.setupSort(),this.displayName=this.columnModel.getDisplayNameForColumn(this.column,"columnDrop"),this.setupComponents(),!this.ghost&&!n&&this.addDragSource(),this.setupAria(),this.addManagedListener(this.eventService,f.ouE.EVENT_SORT_CHANGED,function(){e.setupAria()}),this.setupTooltip(),this.activateTabIndex()},t.prototype.setupAria=function(){var e=this.localeService.getLocaleTextFunc(),r=this.getColumnAndAggFuncName(),n=r.name,i=r.aggFuncName,a=e("ariaDropZoneColumnComponentAggFuncSeparator"," of "),s={asc:e("ariaDropZoneColumnComponentSortAscending","ascending"),desc:e("ariaDropZoneColumnComponentSortDescending","descending")},l=this.column.getSort(),u=this.gridOptionsService.is("rowGroupPanelSuppressSort"),c=[[i&&""+i+a,n,this.isGroupingZone()&&!u&&l&&", "+s[l]].filter(function(g){return!!g}).join("")],d=this.gridOptionsService.is("functionsReadOnly");if(this.isAggregationZone()&&!d){var h=e("ariaDropZoneColumnValueItemDescription","Press ENTER to change the aggregation type");c.push(h)}if(this.isGroupingZone()&&this.column.getColDef().sortable&&!u){var p=e("ariaDropZoneColumnGroupItemDescription","Press ENTER to sort");c.push(p)}var v=e("ariaDropZoneColumnComponentDescription","Press DELETE to remove");c.push(v),f._.setAriaLabel(this.getGui(),c.join(". "))},t.prototype.setupTooltip=function(){var e=this,r=function(){var n=e.column.getColDef().headerTooltip;e.setTooltip(n)};r(),this.addManagedListener(this.eventService,f.YFc.EVENT_NEW_COLUMNS_LOADED,r)},t.prototype.setupSort=function(){var e=this,r=this.column.getColDef().sortable,n=this.isGroupingZone();if(r&&n&&!this.gridOptionsService.is("rowGroupPanelSuppressSort")){this.eSortIndicator.setupSort(this.column,!0);var i=function(a){a.preventDefault();var s="ctrl"===e.gridOptionsService.get("multiSortKey");e.sortController.progressSort(e.column,s?a.ctrlKey||a.metaKey:a.shiftKey,"uiColumnSorted")};this.addGuiEventListener("click",i),this.addGuiEventListener("keydown",function(a){a.key===f.Axe.ENTER&&e.isGroupingZone()&&i(a)})}},t.prototype.addDragSource=function(){var e=this,r={type:f.gt1.ToolPanel,eElement:this.eDragHandle,getDefaultIconName:function(){return f.sZo.ICON_HIDE},getDragItem:function(){return e.createDragItem()},dragItemName:this.displayName,dragSourceDropTarget:this.dragSourceDropTarget};this.dragAndDropService.addDragSource(r,!0),this.addDestroyFunc(function(){return e.dragAndDropService.removeDragSource(r)})},t.prototype.createDragItem=function(){var e={};return e[this.column.getId()]=this.column.isVisible(),{columns:[this.column],visibleState:e}},t.prototype.setupComponents=function(){this.setTextValue(),this.setupRemove(),this.ghost&&this.addCssClass("ag-column-drop-cell-ghost"),this.isAggregationZone()&&!this.gridOptionsService.is("functionsReadOnly")&&this.addGuiEventListener("click",this.onShowAggFuncSelection.bind(this))},t.prototype.setupRemove=function(){var e=this;f._.setDisplayed(this.eButton,!this.gridOptionsService.is("functionsReadOnly"));var r={type:t.EVENT_COLUMN_REMOVE};this.addGuiEventListener("keydown",function(i){var a=i.key===f.Axe.ENTER;i.key===f.Axe.DELETE&&(i.preventDefault(),e.dispatchEvent(r)),a&&e.isAggregationZone()&&!e.gridOptionsService.is("functionsReadOnly")&&(i.preventDefault(),e.onShowAggFuncSelection())}),this.addManagedListener(this.eButton,"click",function(i){e.dispatchEvent(r),i.stopPropagation()});var n=new f.cRj(this.eButton);this.addManagedListener(n,f.cRj.EVENT_TAP,function(){e.dispatchEvent(r)}),this.addDestroyFunc(n.destroy.bind(n))},t.prototype.getColumnAndAggFuncName=function(){var e=this.displayName,r="";if(this.isAggregationZone()){var n=this.column.getAggFunc(),i="string"==typeof n?n:"agg";r=this.localeService.getLocaleTextFunc()(i,i)}return{name:e,aggFuncName:r}},t.prototype.setTextValue=function(){var e=this.getColumnAndAggFuncName(),r=e.name,n=e.aggFuncName,i=this.isAggregationZone()?n+"("+r+")":r,a=f._.escapeString(i);this.eText.innerHTML=a},t.prototype.onShowAggFuncSelection=function(){var e=this;if(!this.popupShowing){this.popupShowing=!0;var r=new f.aSq({cssIdentifier:"select-agg-func"}),n=this.aggFuncService.getFuncNames(this.column),i=this.getGui(),a=r.getGui();r.setModel({getRow:function(p){return n[p]},getRowCount:function(){return n.length}}),this.getContext().createBean(r);var s=f._.loadTemplate('<div class="ag-select-agg-func-popup"></div>');s.style.top="0px",s.style.left="0px",s.appendChild(a),s.style.width=i.clientWidth+"px";var l=this.addManagedListener(s,"focusout",function(p){!s.contains(p.relatedTarget)&&d&&d.hideFunc()}),c=this.localeService.getLocaleTextFunc(),d=this.popupService.addPopup({modal:!0,eChild:s,closeOnEsc:!0,closedCallback:function(p){e.destroyBean(r),e.popupShowing=!1,"Escape"===p?.key&&i.focus(),l&&l()},ariaLabel:c("ariaLabelAggregationFunction","Aggregation Function")});d&&r.setComponentCreator(this.createAggSelect.bind(this,d.hideFunc)),r.addGuiEventListener("keydown",function(p){if(p.key===f.Axe.ENTER||p.key===f.Axe.SPACE){var v=r.getLastFocusedRow();if(null==v)return;var g=r.getComponentAt(v);g&&g.selectItem()}}),this.popupService.positionPopupByComponent({type:"aggFuncSelect",eventSource:i,ePopup:s,keepWithinBounds:!0,column:this.column,position:"under"}),r.refresh();var h=n.findIndex(function(p){return p===e.column.getAggFunc()});-1===h&&(h=0),r.focusRow(h)}},t.prototype.createAggSelect=function(e,r){var n=this,a=this.localeService.getLocaleTextFunc(),s=r.toString(),l=a(s,s);return new l0(function(){e(),n.gridOptionsService.is("functionsPassive")?n.eventService.dispatchEvent({type:f.YFc.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST,columns:[n.column],aggFunc:r}):n.columnModel.setColumnAggFunc(n.column,r,"toolPanelDragAndDrop")},l)},t.prototype.addElementClasses=function(e,r){e.classList.add("ag-column-drop-cell"+(r=r?"-"+r:""),"ag-column-drop-"+(this.horizontal?"horizontal":"vertical")+"-cell"+r)},t.prototype.isAggregationZone=function(){return"aggregation"===this.dropZonePurpose},t.prototype.isGroupingZone=function(){return"rowGroup"===this.dropZonePurpose},t.EVENT_COLUMN_REMOVE="columnRemove",t.TEMPLATE='<span role="option">\n          <span ref="eDragHandle" class="ag-drag-handle ag-column-drop-cell-drag-handle" role="presentation"></span>\n          <span ref="eText" class="ag-column-drop-cell-text" aria-hidden="true"></span>\n          <ag-sort-indicator ref="eSortIndicator"></ag-sort-indicator>\n          <span ref="eButton" class="ag-column-drop-cell-button" role="presentation"></span>\n        </span>',mr([(0,f.Qnc)("dragAndDropService")],t.prototype,"dragAndDropService",void 0),mr([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),mr([(0,f.Qnc)("popupService")],t.prototype,"popupService",void 0),mr([(0,f.T7N)("aggFuncService")],t.prototype,"aggFuncService",void 0),mr([(0,f.Qnc)("sortController")],t.prototype,"sortController",void 0),mr([(0,f.IzG)("eText")],t.prototype,"eText",void 0),mr([(0,f.IzG)("eDragHandle")],t.prototype,"eDragHandle",void 0),mr([(0,f.IzG)("eButton")],t.prototype,"eButton",void 0),mr([(0,f.IzG)("eSortIndicator")],t.prototype,"eSortIndicator",void 0),mr([f.QhY],t.prototype,"init",null),t}(f.YlN),l0=function(o){function t(e,r){var n=o.call(this,'<div class="ag-select-agg-func-item"/>')||this;return n.selectItem=e,n.getGui().innerText=r,n.addGuiEventListener("click",n.selectItem),n}return hf(t,o),t}(f.YlN),u0=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),vf=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},gf=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},yf=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},Fu=function(o){function t(e,r){var n=o.call(this,'<div class="ag-unselectable" role="presentation"></div>')||this;return n.horizontal=e,n.dropZonePurpose=r,n.state=t.STATE_NOT_DRAGGING,n.guiDestroyFunctions=[],n.childColumnComponents=[],n.resizeEnabled=!1,n.addElementClasses(n.getGui()),n.eColumnDropList=document.createElement("div"),n.addElementClasses(n.eColumnDropList,"list"),f._.setAriaRole(n.eColumnDropList,"listbox"),n}return u0(t,o),t.prototype.isHorizontal=function(){return this.horizontal},t.prototype.toggleResizable=function(e){this.positionableFeature.setResizable(!!e&&{bottom:!0}),this.resizeEnabled=e},t.prototype.setBeans=function(e){this.beans=e},t.prototype.destroy=function(){this.destroyGui(),o.prototype.destroy.call(this)},t.prototype.destroyGui=function(){this.guiDestroyFunctions.forEach(function(e){return e()}),this.guiDestroyFunctions.length=0,this.childColumnComponents.length=0,f._.clearElement(this.getGui()),f._.clearElement(this.eColumnDropList)},t.prototype.init=function(e){this.params=e,this.createManagedBean(new f.MZQ(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.addManagedListener(this.beans.eventService,f.YFc.EVENT_NEW_COLUMNS_LOADED,this.refreshGui.bind(this)),this.addManagedPropertyListener("functionsReadOnly",this.refreshGui.bind(this)),this.setupDropTarget(),this.positionableFeature=new f.c9K(this.getGui(),{minHeight:100}),this.createManagedBean(this.positionableFeature),this.refreshGui(),f._.setAriaLabel(this.eColumnDropList,this.getAriaLabel())},t.prototype.handleKeyDown=function(e){var n=e.key===f.Axe.DOWN,i=e.key===f.Axe.UP;if(this.horizontal){var a=this.gridOptionsService.is("enableRtl");n=!a&&e.key===f.Axe.RIGHT||a&&e.key===f.Axe.LEFT,i=!a&&e.key===f.Axe.LEFT||a&&e.key===f.Axe.RIGHT}if(n||i){var s=this.focusService.findNextFocusableElement(this.getFocusableElement(),!1,i);s&&(e.preventDefault(),s.focus())}},t.prototype.addElementClasses=function(e,r){e.classList.add("ag-column-drop"+(r=r?"-"+r:""),"ag-column-drop-"+(this.horizontal?"horizontal":"vertical")+r)},t.prototype.setupDropTarget=function(){this.dropTarget={getContainer:this.getGui.bind(this),getIconName:this.getIconName.bind(this),onDragging:this.onDragging.bind(this),onDragEnter:this.onDragEnter.bind(this),onDragLeave:this.onDragLeave.bind(this),onDragStop:this.onDragStop.bind(this),isInterestedIn:this.isInterestedIn.bind(this)},this.beans.dragAndDropService.addDropTarget(this.dropTarget)},t.prototype.isInterestedIn=function(e){return e===f.gt1.HeaderCell||e===f.gt1.ToolPanel},t.prototype.checkInsertIndex=function(e){var r=this.getNewInsertIndex(e);if(r<0)return!1;var n=r!==this.insertIndex;return n&&(this.insertIndex=r),n},t.prototype.getNewInsertIndex=function(e){var r=this,n=e.event,i=this.horizontal?n.clientX:n.clientY,a=this.childColumnComponents.map(function(d){return d.getGui().getBoundingClientRect()}),s=a.findIndex(function(d){return r.horizontal?d.right>i&&d.left<i:d.top<i&&d.bottom>i});if(-1===s){var l=this.beans.gridOptionsService.is("enableRtl");return a.every(function(d){return i>(r.horizontal?d.right:d.bottom)})?l&&this.horizontal?0:this.childColumnComponents.length:a.every(function(d){return i<(r.horizontal?d.left:d.top)})?l&&this.horizontal?this.childColumnComponents.length:0:this.insertIndex}return this.insertIndex<=s?s+1:s},t.prototype.checkDragStartedBySelf=function(e){this.state===t.STATE_NOT_DRAGGING&&(this.state=t.STATE_REARRANGE_COLUMNS,this.potentialDndColumns=e.dragSource.getDragItem().columns||[],this.refreshGui(),this.checkInsertIndex(e),this.refreshGui())},t.prototype.onDragging=function(e){this.checkDragStartedBySelf(e),this.checkInsertIndex(e)&&this.refreshGui()},t.prototype.onDragEnter=function(e){var r=e.dragSource.getDragItem().columns||[];this.state=t.STATE_NEW_COLUMNS_IN;var n=r.filter(this.isColumnDroppable.bind(this));if(n.length>0){if(this.isRowGroupPanel()&&!this.gridOptionsService.is("suppressRowGroupHidesColumns")&&!e.fromNudge){var a=e.dragSource.getDragItem();this.setColumnsVisible(a.columns,!1,"uiColumnDragged")}this.potentialDndColumns=n,this.checkInsertIndex(e),this.refreshGui()}},t.prototype.setColumnsVisible=function(e,r,n){if(void 0===n&&(n="api"),e){var i=e.filter(function(a){return!a.getColDef().lockVisible});this.colModel.setColumnsVisible(i,r,n)}},t.prototype.isPotentialDndColumns=function(){return f._.existsAndNotEmpty(this.potentialDndColumns)},t.prototype.isRowGroupPanel=function(){return"rowGroup"===this.dropZonePurpose},t.prototype.onDragLeave=function(e){if(this.state===t.STATE_REARRANGE_COLUMNS){var r=e.dragSource.getDragItem().columns||[];this.removeColumns(r)}if(this.isPotentialDndColumns()){if(this.isRowGroupPanel()&&!this.gridOptionsService.is("suppressMakeColumnVisibleAfterUnGroup")&&!e.fromNudge){var i=e.dragSource.getDragItem();this.setColumnsVisible(i.columns,!0,"uiColumnDragged")}this.potentialDndColumns=[],this.refreshGui()}this.state=t.STATE_NOT_DRAGGING},t.prototype.onDragStop=function(){if(this.isPotentialDndColumns()){var e=!1;this.state===t.STATE_NEW_COLUMNS_IN?(this.addColumns(this.potentialDndColumns),e=!0):e=this.rearrangeColumns(this.potentialDndColumns),this.potentialDndColumns=[],(!this.beans.gridOptionsService.is("functionsPassive")||!e)&&this.refreshGui()}this.state=t.STATE_NOT_DRAGGING},t.prototype.removeColumns=function(e){var r=this.getExistingColumns().filter(function(n){return!f._.includes(e,n)});this.updateColumns(r)},t.prototype.addColumns=function(e){if(e){var r=this.getExistingColumns().slice(),n=e.filter(function(i){return r.indexOf(i)<0});f._.insertArrayIntoArray(r,n,this.insertIndex),this.updateColumns(r)}},t.prototype.rearrangeColumns=function(e){var r=this.getNonGhostColumns().slice();return f._.insertArrayIntoArray(r,e,this.insertIndex),!f._.areEqual(r,this.getExistingColumns())&&(this.updateColumns(r),!0)},t.prototype.refreshGui=function(){var e=this.eColumnDropList.scrollTop,r=this.resizeEnabled,n=this.getFocusedItem(),i=this.focusService.findNextFocusableElement();i||(i=this.focusService.findNextFocusableElement(void 0,!1,!0)),this.toggleResizable(!1),this.destroyGui(),this.addIconAndTitleToGui(),this.addEmptyMessageToGui(),this.addColumnsToGui(),this.isHorizontal()||(this.eColumnDropList.scrollTop=e),r&&this.toggleResizable(r),this.focusService.isKeyboardMode()&&this.restoreFocus(n,i)},t.prototype.getFocusedItem=function(){var e=this.getGui(),r=this.gridOptionsService.getDocument().activeElement;return e.contains(r)?Array.from(e.querySelectorAll(".ag-column-drop-cell")).indexOf(r):-1},t.prototype.restoreFocus=function(e,r){var n=this.getGui(),i=Array.from(n.querySelectorAll(".ag-column-drop-cell"));if(-1!==e){0===i.length&&r.focus();var s=i[Math.min(i.length-1,e)];s&&s.focus()}},t.prototype.getNonGhostColumns=function(){var e=this,r=this.getExistingColumns();return this.isPotentialDndColumns()?r.filter(function(n){return!f._.includes(e.potentialDndColumns,n)}):r},t.prototype.addColumnsToGui=function(){var e=this,n=this.getNonGhostColumns().map(function(a){return e.createColumnComponent(a,!1)});if(this.isPotentialDndColumns()){var i=this.potentialDndColumns.map(function(a){return e.createColumnComponent(a,!0)});this.insertIndex>=n.length?n.push.apply(n,yf([],gf(i))):n.splice.apply(n,yf([this.insertIndex,0],gf(i)))}this.appendChild(this.eColumnDropList),n.forEach(function(a,s){s>0&&e.addArrow(e.eColumnDropList),e.eColumnDropList.appendChild(a.getGui())}),this.addAriaLabelsToComponents()},t.prototype.addAriaLabelsToComponents=function(){var e=this;this.childColumnComponents.forEach(function(r,n){var i=r.getGui();f._.setAriaPosInSet(i,n+1),f._.setAriaSetSize(i,e.childColumnComponents.length)})},t.prototype.createColumnComponent=function(e,r){var n=this,i=new pf(e,this.dropTarget,r,this.dropZonePurpose,this.horizontal);return i.addEventListener(pf.EVENT_COLUMN_REMOVE,this.removeColumns.bind(this,[e])),this.beans.context.createBean(i),this.guiDestroyFunctions.push(function(){return n.destroyBean(i)}),r||this.childColumnComponents.push(i),i},t.prototype.addIconAndTitleToGui=function(){var e=this.params.icon,r=document.createElement("div");if(f._.setAriaHidden(r,!0),this.addElementClasses(r,"title-bar"),this.addElementClasses(e,"icon"),this.addOrRemoveCssClass("ag-column-drop-empty",this.isExistingColumnsEmpty()),r.appendChild(e),!this.horizontal){var n=document.createElement("span");this.addElementClasses(n,"title"),n.innerHTML=this.params.title,r.appendChild(n)}this.appendChild(r)},t.prototype.isExistingColumnsEmpty=function(){return 0===this.getExistingColumns().length},t.prototype.addEmptyMessageToGui=function(){if(this.isExistingColumnsEmpty()&&!this.isPotentialDndColumns()){var e=document.createElement("span");e.innerHTML=this.params.emptyMessage,this.addElementClasses(e,"empty-message"),this.eColumnDropList.appendChild(e)}},t.prototype.addArrow=function(e){if(this.horizontal){var r=this.beans.gridOptionsService.is("enableRtl"),n=f._.createIconNoSpan(r?"smallLeft":"smallRight",this.beans.gridOptionsService);this.addElementClasses(n,"cell-separator"),e.appendChild(n)}},t.STATE_NOT_DRAGGING="notDragging",t.STATE_NEW_COLUMNS_IN="newColumnsIn",t.STATE_REARRANGE_COLUMNS="rearrangeColumns",vf([(0,f.Qnc)("columnModel")],t.prototype,"colModel",void 0),vf([(0,f.Qnc)("focusService")],t.prototype,"focusService",void 0),t}(f.YlN),c0=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ds=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Iu=function(o){function t(e){return o.call(this,e,"rowGroup")||this}return c0(t,o),t.prototype.passBeansUp=function(){o.prototype.setBeans.call(this,{gridOptionsService:this.gridOptionsService,eventService:this.eventService,context:this.getContext(),loggerFactory:this.loggerFactory,dragAndDropService:this.dragAndDropService});var e=this.localeService.getLocaleTextFunc(),r=e("rowGroupColumnsEmptyMessage","Drag here to set row groups"),n=e("groups","Row Groups");o.prototype.init.call(this,{dragAndDropIcon:f.sZo.ICON_GROUP,icon:f._.createIconNoSpan("rowGroupPanel",this.gridOptionsService,null),emptyMessage:r,title:n}),this.addManagedListener(this.eventService,f.YFc.EVENT_COLUMN_ROW_GROUP_CHANGED,this.refreshGui.bind(this))},t.prototype.getAriaLabel=function(){return this.localeService.getLocaleTextFunc()("ariaRowGroupDropZonePanelLabel","Row Groups")},t.prototype.getTooltipParams=function(){var e=o.prototype.getTooltipParams.call(this);return e.location="rowGroupColumnsList",e},t.prototype.isColumnDroppable=function(e){return!(this.gridOptionsService.is("functionsReadOnly")||!e.isPrimary())&&e.isAllowRowGroup()&&!e.isRowGroupActive()},t.prototype.updateColumns=function(e){this.gridOptionsService.is("functionsPassive")?this.eventService.dispatchEvent({type:f.YFc.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST,columns:e}):this.columnModel.setRowGroupColumns(e,"toolPanelUi")},t.prototype.getIconName=function(){return this.isPotentialDndColumns()?f.sZo.ICON_GROUP:f.sZo.ICON_NOT_ALLOWED},t.prototype.getExistingColumns=function(){return this.columnModel.getRowGroupColumns()},Ds([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),Ds([(0,f.Qnc)("loggerFactory")],t.prototype,"loggerFactory",void 0),Ds([(0,f.Qnc)("dragAndDropService")],t.prototype,"dragAndDropService",void 0),Ds([f.QhY],t.prototype,"passBeansUp",null),t}(Fu),d0=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ms=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Lu=function(o){function t(e){return o.call(this,e,"pivot")||this}return d0(t,o),t.prototype.passBeansUp=function(){o.prototype.setBeans.call(this,{gridOptionsService:this.gridOptionsService,eventService:this.eventService,context:this.getContext(),loggerFactory:this.loggerFactory,dragAndDropService:this.dragAndDropService});var e=this.localeService.getLocaleTextFunc(),r=e("pivotColumnsEmptyMessage","Drag here to set column labels"),n=e("pivots","Column Labels");o.prototype.init.call(this,{dragAndDropIcon:f.sZo.ICON_GROUP,icon:f._.createIconNoSpan("pivotPanel",this.gridOptionsService,null),emptyMessage:r,title:n}),this.addManagedListener(this.eventService,f.YFc.EVENT_NEW_COLUMNS_LOADED,this.refresh.bind(this)),this.addManagedListener(this.eventService,f.YFc.EVENT_COLUMN_PIVOT_CHANGED,this.refresh.bind(this)),this.addManagedListener(this.eventService,f.YFc.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.checkVisibility.bind(this)),this.refresh()},t.prototype.getAriaLabel=function(){return this.localeService.getLocaleTextFunc()("ariaPivotDropZonePanelLabel","Column Labels")},t.prototype.getTooltipParams=function(){var e=o.prototype.getTooltipParams.call(this);return e.location="pivotColumnsList",e},t.prototype.refresh=function(){this.checkVisibility(),this.refreshGui()},t.prototype.checkVisibility=function(){var e=this.columnModel.isPivotMode();if(this.isHorizontal())switch(this.gridOptionsService.get("pivotPanelShow")){case"always":this.setDisplayed(e);break;case"onlyWhenPivoting":var r=this.columnModel.isPivotActive();this.setDisplayed(e&&r);break;default:this.setDisplayed(!1)}else this.setDisplayed(e)},t.prototype.isColumnDroppable=function(e){return!(this.gridOptionsService.is("functionsReadOnly")||!e.isPrimary())&&e.isAllowPivot()&&!e.isPivotActive()},t.prototype.updateColumns=function(e){this.gridOptionsService.is("functionsPassive")?this.eventService.dispatchEvent({type:f.YFc.EVENT_COLUMN_PIVOT_CHANGE_REQUEST,columns:e}):this.columnModel.setPivotColumns(e,"toolPanelUi")},t.prototype.getIconName=function(){return this.isPotentialDndColumns()?f.sZo.ICON_PIVOT:f.sZo.ICON_NOT_ALLOWED},t.prototype.getExistingColumns=function(){return this.columnModel.getPivotColumns()},Ms([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),Ms([(0,f.Qnc)("loggerFactory")],t.prototype,"loggerFactory",void 0),Ms([(0,f.Qnc)("dragAndDropService")],t.prototype,"dragAndDropService",void 0),Ms([f.QhY],t.prototype,"passBeansUp",null),t}(Fu),f0=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),mf=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},h0=function(o){function t(){return o.call(this)||this}return f0(t,o),t.prototype.postConstruct=function(){this.setGui(this.createNorthPanel()),this.addManagedListener(this.eventService,f.YFc.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,f.YFc.EVENT_NEW_COLUMNS_LOADED,this.onRowGroupChanged.bind(this)),this.addManagedPropertyListener("rowGroupPanelShow",this.onRowGroupChanged.bind(this)),this.onRowGroupChanged()},t.prototype.createNorthPanel=function(){var e=document.createElement("div"),r=this.onDropPanelVisible.bind(this);return e.classList.add("ag-column-drop-wrapper"),f._.setAriaRole(e,"presentation"),this.rowGroupComp=new Iu(!0),this.createManagedBean(this.rowGroupComp),this.pivotComp=new Lu(!0),this.createManagedBean(this.pivotComp),e.appendChild(this.rowGroupComp.getGui()),e.appendChild(this.pivotComp.getGui()),this.addManagedListener(this.rowGroupComp,f.YlN.EVENT_DISPLAYED_CHANGED,r),this.addManagedListener(this.pivotComp,f.YlN.EVENT_DISPLAYED_CHANGED,r),this.onDropPanelVisible(),e},t.prototype.onDropPanelVisible=function(){var e=this.rowGroupComp.isDisplayed()&&this.pivotComp.isDisplayed();this.rowGroupComp.addOrRemoveCssClass("ag-column-drop-horizontal-half-width",e),this.pivotComp.addOrRemoveCssClass("ag-column-drop-horizontal-half-width",e)},t.prototype.onRowGroupChanged=function(){if(this.rowGroupComp){var e=this.gridOptionsService.get("rowGroupPanelShow");if("always"===e)this.rowGroupComp.setDisplayed(!0);else if("onlyWhenGrouping"===e){var r=!this.columnModel.isRowGroupEmpty();this.rowGroupComp.setDisplayed(r)}else this.rowGroupComp.setDisplayed(!1)}},mf([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),mf([f.QhY],t.prototype,"postConstruct",null),t}(f.YlN),p0=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Nu=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},v0=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return p0(t,o),t.prototype.execute=function(e){var r=this,n=this.columnModel.isPivotMode(),i=this.filterManager.isAggregateFilterPresent()||this.filterManager.isAggregateQuickFilterPresent(),l=this.gridOptionsService.getGroupAggFiltering()||(n?function(h){return h.node.leafGroup}:function(h){return!h.node.group}),c=function(h,p){void 0===p&&(p=!1),h.childrenAfterFilter&&(h.childrenAfterAggFilter=h.childrenAfterFilter,p&&h.childrenAfterAggFilter.forEach(function(v){return c(v,p)}),r.setAllChildrenCount(h)),h.sibling&&(h.sibling.childrenAfterAggFilter=h.childrenAfterAggFilter)};e.changedPath.forEachChangedNodeDepthFirst(i?function(h){var p;h.childrenAfterAggFilter=(null===(p=h.childrenAfterFilter)||void 0===p?void 0:p.filter(function(v){var g;return l({node:v})&&r.filterManager.doesRowPassAggregateFilters({rowNode:v})?(c(v,!0),!0):null===(g=v.childrenAfterAggFilter)||void 0===g?void 0:g.length}))||null,r.setAllChildrenCount(h),h.sibling&&(h.sibling.childrenAfterAggFilter=h.childrenAfterAggFilter)}:c,!0)},t.prototype.setAllChildrenCountTreeData=function(e){var r=0;e.childrenAfterAggFilter.forEach(function(n){r++,r+=n.allChildrenCount}),e.setAllChildrenCount(r)},t.prototype.setAllChildrenCountGridGrouping=function(e){var r=0;e.childrenAfterAggFilter.forEach(function(n){n.group?r+=n.allChildrenCount:r++}),e.setAllChildrenCount(r)},t.prototype.setAllChildrenCount=function(e){e.hasChildren()?this.gridOptionsService.is("treeData")?this.setAllChildrenCountTreeData(e):this.setAllChildrenCountGridGrouping(e):e.setAllChildrenCount(null)},Nu([(0,f.Qnc)("filterManager")],t.prototype,"filterManager",void 0),Nu([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),Nu([(0,f.ekA)("filterAggregatesStage")],t)}(f._QX),y0=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),na=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},ku=function(o){function t(){return o.call(this,'\n            <div class="ag-group-filter">\n                <div ref="eGroupField"></div>\n                <div ref="eUnderlyingFilter"></div>\n            </div>\n        ')||this}return y0(t,o),t.prototype.postConstruct=function(){this.initialiseTabGuard({})},t.prototype.init=function(e){var r=this;return this.params=e,this.validateParams(),this.updateGroups().then(function(){r.addManagedListener(r.eventService,f.YFc.EVENT_COLUMN_ROW_GROUP_CHANGED,function(){return r.onColumnRowGroupChanged()})})},t.prototype.validateParams=function(){var e=this.params.colDef;e.field&&f._.doOnce(function(){return console.warn('AG Grid: Group Column Filter does not work with the colDef property "field". This property will be ignored.')},"groupFilterFieldParam"),e.filterValueGetter&&f._.doOnce(function(){return console.warn('AG Grid: Group Column Filter does not work with the colDef property "filterValueGetter". This property will be ignored.')},"groupFilterFilterValueGetterParam"),e.filterParams&&f._.doOnce(function(){return console.warn('AG Grid: Group Column Filter does not work with the colDef property "filterParams". This property will be ignored.')},"groupFilterFilterParams")},t.prototype.updateGroups=function(){var e=this.updateGroupField();return this.getUnderlyingFilters(e)},t.prototype.getSourceColumns=function(){return this.groupColumn=this.params.column,this.gridOptionsService.is("treeData")?(f._.doOnce(function(){return console.warn("AG Grid: Group Column Filter does not work with Tree Data enabled. Please disable Tree Data, or use a different filter.")},"groupFilterTreeData"),[]):this.columnModel.getSourceColumnsForGroupColumn(this.groupColumn)||(f._.doOnce(function(){return console.warn("AG Grid: Group Column Filter only works on group columns. Please use a different filter.")},"groupFilterNotGroupColumn"),[])},t.prototype.updateGroupField=function(){var e=this;f._.clearElement(this.eGroupField),this.eGroupFieldSelect&&this.destroyBean(this.eGroupFieldSelect);var r=this.getSourceColumns(),n=r.filter(function(i){return i.isFilterAllowed()});return n.length?(1===r.length?(this.selectedColumn=n[0],f._.setDisplayed(this.eGroupField,!1)):((!this.selectedColumn||!n.some(function(i){return i.getId()===e.selectedColumn.getId()}))&&(this.selectedColumn=n[0]),this.createGroupFieldSelectElement(n),this.eGroupField.appendChild(this.eGroupFieldSelect.getGui()),this.eGroupField.appendChild(f._.loadTemplate('<div class="ag-filter-separator"></div>')),f._.setDisplayed(this.eGroupField,!0)),n):(this.selectedColumn=void 0,f._.setDisplayed(this.eGroupField,!1),null)},t.prototype.createGroupFieldSelectElement=function(e){var r=this;this.eGroupFieldSelect=this.createManagedBean(new f.Upw);var n=this.localeService.getLocaleTextFunc();this.eGroupFieldSelect.setLabel(n("groupFilterSelect","Select field:")),this.eGroupFieldSelect.setLabelAlignment("top"),this.eGroupFieldSelect.addOptions(e.map(function(i){var a;return{value:i.getId(),text:null!==(a=r.columnModel.getDisplayNameForColumn(i,"groupFilter",!1))&&void 0!==a?a:void 0}})),this.eGroupFieldSelect.setValue(this.selectedColumn.getId()),this.eGroupFieldSelect.onValueChange(function(i){return r.updateSelectedColumn(i)}),this.eGroupFieldSelect.addCssClass("ag-group-filter-field-select-wrapper"),1===e.length&&this.eGroupFieldSelect.setDisabled(!0)},t.prototype.getUnderlyingFilters=function(e){var r=this;if(!e)return this.filterColumnPairs=void 0,this.selectedFilter=void 0,this.groupColumn.setFilterActive(!1,"columnRowGroupChanged"),f.VVN.resolve();var n=[],i=[];return e.forEach(function(a){var s=r.filterManager.getOrCreateFilterWrapper(a,"COLUMN_MENU");s?.filterPromise&&n.push(s.filterPromise.then(function(l){return l&&i.push({filter:l,column:a}),a.getId()===r.selectedColumn.getId()&&(r.selectedFilter=l??void 0),l}))}),f.VVN.all(n).then(function(){r.filterColumnPairs=i,r.groupColumn.setFilterActive(r.isFilterActive(),"columnRowGroupChanged")})},t.prototype.addUnderlyingFilterElement=function(){var e=this;if(f._.clearElement(this.eUnderlyingFilter),!this.selectedColumn)return f.VVN.resolve();var r=this.filterManager.getOrCreateFilterWrapper(this.selectedColumn,"COLUMN_MENU");return r?r.guiPromise.then(function(n){var i;e.eUnderlyingFilter.appendChild(n),null===(i=r.filterPromise)||void 0===i||i.then(function(a){var s,l;null===(s=a?.afterGuiAttached)||void 0===s||s.call(a,e.afterGuiAttachedParams),(null===(l=e.afterGuiAttachedParams)||void 0===l||!l.suppressFocus)&&e.eGroupFieldSelect&&!e.eGroupFieldSelect.isDisabled()&&e.eGroupFieldSelect.getFocusableElement().focus()})}):f.VVN.resolve()},t.prototype.updateSelectedColumn=function(e){var r,n;if(e){null===(n=null===(r=this.selectedFilter)||void 0===r?void 0:r.afterGuiDetached)||void 0===n||n.call(r);var i=this.getFilterColumnPair(e);this.selectedColumn=i?.column,this.selectedFilter=i?.filter,this.dispatchEvent({type:t.EVENT_SELECTED_COLUMN_CHANGED}),this.addUnderlyingFilterElement()}},t.prototype.isFilterActive=function(){var e;return!(null===(e=this.filterColumnPairs)||void 0===e||!e.some(function(r){return r.filter.isFilterActive()}))},t.prototype.doesFilterPass=function(){return!0},t.prototype.getModel=function(){return null},t.prototype.setModel=function(){return f.VVN.resolve()},t.prototype.afterGuiAttached=function(e){this.afterGuiAttachedParams=e,this.addUnderlyingFilterElement()},t.prototype.afterGuiDetached=function(){var e,r;f._.clearElement(this.eUnderlyingFilter),null===(r=null===(e=this.selectedFilter)||void 0===e?void 0:e.afterGuiDetached)||void 0===r||r.call(e)},t.prototype.onColumnRowGroupChanged=function(){var e=this;this.updateGroups().then(function(){e.dispatchEvent({type:t.EVENT_COLUMN_ROW_GROUP_CHANGED}),e.eventService.dispatchEvent({type:"filterAllowedUpdated"})})},t.prototype.getFilterColumnPair=function(e){var r;if(e)return null===(r=this.filterColumnPairs)||void 0===r?void 0:r.find(function(n){return n.column.getId()===e})},t.prototype.getSelectedFilter=function(){return this.selectedFilter},t.prototype.getSelectedColumn=function(){return this.selectedColumn},t.prototype.isFilterAllowed=function(){return!!this.selectedColumn},t.prototype.destroy=function(){o.prototype.destroy.call(this)},t.EVENT_COLUMN_ROW_GROUP_CHANGED="columnRowGroupChanged",t.EVENT_SELECTED_COLUMN_CHANGED="selectedColumnChanged",na([(0,f.Qnc)("filterManager")],t.prototype,"filterManager",void 0),na([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),na([(0,f.IzG)("eGroupField")],t.prototype,"eGroupField",void 0),na([(0,f.IzG)("eUnderlyingFilter")],t.prototype,"eUnderlyingFilter",void 0),na([f.QhY],t.prototype,"postConstruct",null),t}(f._0_),m0=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Gu=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},S0=function(o){function t(){var e=o.call(this,'\n            <div ref="eFloatingFilter" class="ag-group-floating-filter ag-floating-filter-input" role="presentation"></div>\n        ')||this;return e.haveAddedColumnListeners=!1,e}return m0(t,o),t.prototype.init=function(e){var r=this;this.params=e;var n="multipleColumns"===this.gridOptionsService.get("groupDisplayType");return new f.VVN(function(i){r.params.parentFilterInstance(function(a){r.parentFilterInstance=a,n?r.setupUnderlyingFloatingFilterElement().then(function(){return i()}):(r.setupReadOnlyFloatingFilterElement(),i())})}).then(function(){r.addManagedListener(r.parentFilterInstance,ku.EVENT_SELECTED_COLUMN_CHANGED,function(){return r.onSelectedColumnChanged()}),r.addManagedListener(r.parentFilterInstance,ku.EVENT_COLUMN_ROW_GROUP_CHANGED,function(){return r.onColumnRowGroupChanged()})})},t.prototype.onParamsUpdated=function(e){this.params=e,this.setParams()},t.prototype.setParams=function(){var e,r=this.columnModel.getDisplayNameForColumn(this.params.column,"header",!0),n=this.localeService.getLocaleTextFunc();null===(e=this.eFloatingFilterText)||void 0===e||e.setInputAriaLabel(r+" "+n("ariaFilterInput","Filter Input"))},t.prototype.setupReadOnlyFloatingFilterElement=function(){var e=this;this.eFloatingFilterText||(this.eFloatingFilterText=this.createManagedBean(new f.KCZ),this.eFloatingFilterText.setDisabled(!0).addGuiEventListener("click",function(){return e.params.showParentFilter()}),this.setParams()),this.updateDisplayedValue(),this.eFloatingFilter.appendChild(this.eFloatingFilterText.getGui())},t.prototype.setupUnderlyingFloatingFilterElement=function(){var e=this;this.showingUnderlyingFloatingFilter=!1,this.underlyingFloatingFilter=void 0,f._.clearElement(this.eFloatingFilter);var r=this.parentFilterInstance.getSelectedColumn();if(r&&!r.isVisible()){var n=this.filterManager.getFloatingFilterCompDetails(r,this.params.showParentFilter);if(n)return this.compDetails=n,this.haveAddedColumnListeners||(this.haveAddedColumnListeners=!0,this.addManagedListener(r,f.ouE.EVENT_VISIBLE_CHANGED,this.onColumnVisibleChanged.bind(this)),this.addManagedListener(r,f.ouE.EVENT_COL_DEF_CHANGED,this.onColDefChanged.bind(this))),n.newAgStackInstance().then(function(i){var a,s;e.underlyingFloatingFilter=i,null===(a=e.underlyingFloatingFilter)||void 0===a||a.onParentModelChanged(null===(s=e.parentFilterInstance.getSelectedFilter())||void 0===s?void 0:s.getModel()),e.appendChild(i.getGui()),e.showingUnderlyingFloatingFilter=!0})}return this.setupReadOnlyFloatingFilterElement(),f.VVN.resolve()},t.prototype.onColumnVisibleChanged=function(){this.setupUnderlyingFloatingFilterElement()},t.prototype.onColDefChanged=function(e){var r,n;if(e.column){var i=this.filterManager.getFloatingFilterCompDetails(e.column,this.params.showParentFilter);i&&(null===(n=null===(r=this.underlyingFloatingFilter)||void 0===r?void 0:r.onParamsUpdated)||void 0===n||n.call(r,i.params))}},t.prototype.onParentModelChanged=function(e,r){var n,i;this.showingUnderlyingFloatingFilter?null===(n=this.underlyingFloatingFilter)||void 0===n||n.onParentModelChanged(null===(i=this.parentFilterInstance.getSelectedFilter())||void 0===i?void 0:i.getModel(),r):this.updateDisplayedValue()},t.prototype.updateDisplayedValue=function(){if(this.parentFilterInstance&&this.eFloatingFilterText){var e=this.parentFilterInstance.getSelectedFilter();if(!e)return this.eFloatingFilterText.setValue(""),void this.eFloatingFilterText.setDisplayed(!1);if(this.eFloatingFilterText.setDisplayed(!0),e.getModelAsString){var r=e.getModel();this.eFloatingFilterText.setValue(null==r?"":e.getModelAsString(r))}else this.eFloatingFilterText.setValue("")}},t.prototype.onSelectedColumnChanged=function(){this.showingUnderlyingFloatingFilter||this.updateDisplayedValue()},t.prototype.onColumnRowGroupChanged=function(){this.showingUnderlyingFloatingFilter||this.updateDisplayedValue()},t.prototype.destroy=function(){o.prototype.destroy.call(this)},Gu([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),Gu([(0,f.Qnc)("filterManager")],t.prototype,"filterManager",void 0),Gu([(0,f.IzG)("eFloatingFilter")],t.prototype,"eFloatingFilter",void 0),t}(f.YlN),Sf={version:"30.2.1",moduleName:f.ekS.RowGroupingModule,beans:[Km,v0,$m,Qm,qm,e0],agStackComponents:[{componentName:"AgGridHeaderDropZones",componentClass:h0}],userComponents:[{componentName:"agGroupColumnFilter",componentClass:ku},{componentName:"agGroupColumnFloatingFilter",componentClass:S0}],dependantModules:[Ue]},C0=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Rs=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Cf=function(o){function t(e){return o.call(this,e,"aggregation")||this}return C0(t,o),t.prototype.passBeansUp=function(){o.prototype.setBeans.call(this,{gridOptionsService:this.gridOptionsService,eventService:this.eventService,context:this.getContext(),loggerFactory:this.loggerFactory,dragAndDropService:this.dragAndDropService});var e=this.localeService.getLocaleTextFunc(),r=e("valueColumnsEmptyMessage","Drag here to aggregate"),n=e("values","Values");o.prototype.init.call(this,{dragAndDropIcon:f.sZo.ICON_AGGREGATE,icon:f._.createIconNoSpan("valuePanel",this.gridOptionsService,null),emptyMessage:r,title:n}),this.addManagedListener(this.eventService,f.YFc.EVENT_COLUMN_VALUE_CHANGED,this.refreshGui.bind(this))},t.prototype.getAriaLabel=function(){return this.localeService.getLocaleTextFunc()("ariaValuesDropZonePanelLabel","Values")},t.prototype.getTooltipParams=function(){var e=o.prototype.getTooltipParams.call(this);return e.location="valueColumnsList",e},t.prototype.getIconName=function(){return this.isPotentialDndColumns()?f.sZo.ICON_AGGREGATE:f.sZo.ICON_NOT_ALLOWED},t.prototype.isColumnDroppable=function(e){return!(this.gridOptionsService.is("functionsReadOnly")||!e.isPrimary())&&e.isAllowValue()&&!e.isValueActive()},t.prototype.updateColumns=function(e){this.gridOptionsService.is("functionsPassive")?this.eventService.dispatchEvent({type:f.YFc.EVENT_COLUMN_VALUE_CHANGE_REQUEST,columns:e}):this.columnModel.setValueColumns(e,"toolPanelUi")},t.prototype.getExistingColumns=function(){return this.columnModel.getValueColumns()},Rs([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),Rs([(0,f.Qnc)("loggerFactory")],t.prototype,"loggerFactory",void 0),Rs([(0,f.Qnc)("dragAndDropService")],t.prototype,"dragAndDropService",void 0),Rs([f.QhY],t.prototype,"passBeansUp",null),t}(Fu),_0=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),_f=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Vu=function(o){function t(){return o.call(this,t.TEMPLATE)||this}return _0(t,o),t.prototype.init=function(e,r,n){this.allowDragging=e,this.params=r,this.eventType=n,this.primaryColsHeaderPanel.init(this.params),this.params.suppressColumnExpandAll&&this.params.suppressColumnFilter&&this.params.suppressColumnSelectAll&&this.primaryColsHeaderPanel.setDisplayed(!1),this.addManagedListener(this.primaryColsListPanel,"groupExpanded",this.onGroupExpanded.bind(this)),this.addManagedListener(this.primaryColsListPanel,"selectionChanged",this.onSelectionChange.bind(this)),this.primaryColsListPanel.init(this.params,this.allowDragging,this.eventType),this.addManagedListener(this.primaryColsHeaderPanel,"expandAll",this.onExpandAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"collapseAll",this.onCollapseAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"selectAll",this.onSelectAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"unselectAll",this.onUnselectAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"filterChanged",this.onFilterChanged.bind(this)),this.positionableFeature=new f.c9K(this.getGui(),{minHeight:100}),this.createManagedBean(this.positionableFeature)},t.prototype.toggleResizable=function(e){this.positionableFeature.setResizable(!!e&&{bottom:!0})},t.prototype.onExpandAll=function(){this.primaryColsListPanel.doSetExpandedAll(!0)},t.prototype.onCollapseAll=function(){this.primaryColsListPanel.doSetExpandedAll(!1)},t.prototype.expandGroups=function(e){this.primaryColsListPanel.setGroupsExpanded(!0,e)},t.prototype.collapseGroups=function(e){this.primaryColsListPanel.setGroupsExpanded(!1,e)},t.prototype.setColumnLayout=function(e){this.primaryColsListPanel.setColumnLayout(e)},t.prototype.onFilterChanged=function(e){this.primaryColsListPanel.setFilterText(e.filterText)},t.prototype.syncLayoutWithGrid=function(){this.primaryColsListPanel.onColumnsChanged()},t.prototype.onSelectAll=function(){this.primaryColsListPanel.doSetSelectedAll(!0)},t.prototype.onUnselectAll=function(){this.primaryColsListPanel.doSetSelectedAll(!1)},t.prototype.onGroupExpanded=function(e){this.primaryColsHeaderPanel.setExpandState(e.state)},t.prototype.onSelectionChange=function(e){this.primaryColsHeaderPanel.setSelectionState(e.state)},t.TEMPLATE='<div class="ag-column-select">\n            <ag-primary-cols-header ref="primaryColsHeaderPanel"></ag-primary-cols-header>\n            <ag-primary-cols-list ref="primaryColsListPanel"></ag-primary-cols-list>\n        </div>',_f([(0,f.IzG)("primaryColsHeaderPanel")],t.prototype,"primaryColsHeaderPanel",void 0),_f([(0,f.IzG)("primaryColsListPanel")],t.prototype,"primaryColsListPanel",void 0),t}(f.YlN),x0=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ia=function(){return ia=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},ia.apply(this,arguments)},xf=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},w0=function(o){function t(){var e=o.call(this,t.TEMPLATE)||this;return e.initialised=!1,e.childDestroyFuncs=[],e}return x0(t,o),t.prototype.setVisible=function(e){o.prototype.setDisplayed.call(this,e),e&&!this.initialised&&this.init(this.params)},t.prototype.init=function(e){var r=this;if(this.params=ia(ia(ia({},{suppressColumnMove:!1,suppressColumnSelectAll:!1,suppressColumnFilter:!1,suppressColumnExpandAll:!1,contractColumnSelection:!1,suppressPivotMode:!1,suppressRowGroups:!1,suppressValues:!1,suppressPivots:!1,suppressSyncLayoutWithGrid:!1,api:this.gridApi,columnApi:this.columnApi}),e),{context:this.gridOptionsService.context}),this.isRowGroupingModuleLoaded()&&!this.params.suppressPivotMode&&(this.pivotModePanel=this.createBean(new uf),this.childDestroyFuncs.push(function(){return r.destroyBean(r.pivotModePanel)}),this.appendChild(this.pivotModePanel)),this.primaryColsPanel=this.createBean(new Vu),this.childDestroyFuncs.push(function(){return r.destroyBean(r.primaryColsPanel)}),this.primaryColsPanel.init(!0,this.params,"toolPanelUi"),this.primaryColsPanel.addCssClass("ag-column-panel-column-select"),this.appendChild(this.primaryColsPanel),this.isRowGroupingModuleLoaded()){this.params.suppressRowGroups||(this.rowGroupDropZonePanel=this.createBean(new Iu(!1)),this.childDestroyFuncs.push(function(){return r.destroyBean(r.rowGroupDropZonePanel)}),this.appendChild(this.rowGroupDropZonePanel)),this.params.suppressValues||(this.valuesDropZonePanel=this.createBean(new Cf(!1)),this.childDestroyFuncs.push(function(){return r.destroyBean(r.valuesDropZonePanel)}),this.appendChild(this.valuesDropZonePanel)),this.params.suppressPivots||(this.pivotDropZonePanel=this.createBean(new Lu(!1)),this.childDestroyFuncs.push(function(){return r.destroyBean(r.pivotDropZonePanel)}),this.appendChild(this.pivotDropZonePanel)),this.setLastVisible();var i=this.addManagedListener(this.eventService,f.YFc.EVENT_COLUMN_PIVOT_MODE_CHANGED,function(){r.resetChildrenHeight(),r.setLastVisible()});this.childDestroyFuncs.push(function(){return i()})}this.initialised=!0},t.prototype.setPivotModeSectionVisible=function(e){var r=this;this.isRowGroupingModuleLoaded()&&(this.pivotModePanel?this.pivotModePanel.setDisplayed(e):e&&(this.pivotModePanel=this.createBean(new uf),this.getGui().insertBefore(this.pivotModePanel.getGui(),this.getGui().firstChild),this.childDestroyFuncs.push(function(){return r.destroyBean(r.pivotModePanel)})),this.setLastVisible())},t.prototype.setRowGroupsSectionVisible=function(e){this.isRowGroupingModuleLoaded()&&(this.rowGroupDropZonePanel?this.rowGroupDropZonePanel.setDisplayed(e):e&&(this.rowGroupDropZonePanel=this.createManagedBean(new Iu(!1)),this.appendChild(this.rowGroupDropZonePanel)),this.setLastVisible())},t.prototype.setValuesSectionVisible=function(e){this.isRowGroupingModuleLoaded()&&(this.valuesDropZonePanel?this.valuesDropZonePanel.setDisplayed(e):e&&(this.valuesDropZonePanel=this.createManagedBean(new Cf(!1)),this.appendChild(this.valuesDropZonePanel)),this.setLastVisible())},t.prototype.setPivotSectionVisible=function(e){this.isRowGroupingModuleLoaded()&&(this.pivotDropZonePanel?this.pivotDropZonePanel.setDisplayed(e):e&&(this.pivotDropZonePanel=this.createManagedBean(new Lu(!1)),this.appendChild(this.pivotDropZonePanel),this.pivotDropZonePanel.setDisplayed(e)),this.setLastVisible())},t.prototype.setResizers=function(){[this.primaryColsPanel,this.rowGroupDropZonePanel,this.valuesDropZonePanel,this.pivotDropZonePanel].forEach(function(e){if(e){var r=e.getGui();e.toggleResizable(!r.classList.contains("ag-last-column-drop")&&!r.classList.contains("ag-hidden"))}})},t.prototype.setLastVisible=function(){var e=this.getGui();Array.prototype.slice.call(e.querySelectorAll(".ag-column-drop")).forEach(function(a){return a.classList.remove("ag-last-column-drop")});var n=e.querySelectorAll(".ag-column-drop:not(.ag-hidden)"),i=f._.last(n);i&&i.classList.add("ag-last-column-drop"),this.setResizers()},t.prototype.resetChildrenHeight=function(){for(var r=this.getGui().children,n=0;n<r.length;n++){var i=r[n];i.style.removeProperty("height"),i.style.removeProperty("flex")}},t.prototype.isRowGroupingModuleLoaded=function(){return f.Y5$.__assertRegistered(f.ekS.RowGroupingModule,"Row Grouping",this.context.getGridId())},t.prototype.expandColumnGroups=function(e){this.primaryColsPanel.expandGroups(e)},t.prototype.collapseColumnGroups=function(e){this.primaryColsPanel.collapseGroups(e)},t.prototype.setColumnLayout=function(e){this.primaryColsPanel.setColumnLayout(e)},t.prototype.syncLayoutWithGrid=function(){this.primaryColsPanel.syncLayoutWithGrid()},t.prototype.destroyChildren=function(){this.childDestroyFuncs.forEach(function(e){return e()}),this.childDestroyFuncs.length=0,f._.clearElement(this.getGui())},t.prototype.refresh=function(){this.destroyChildren(),this.init(this.params)},t.prototype.destroy=function(){this.destroyChildren(),o.prototype.destroy.call(this)},t.TEMPLATE='<div class="ag-column-panel"></div>',xf([(0,f.Qnc)("gridApi")],t.prototype,"gridApi",void 0),xf([(0,f.Qnc)("columnApi")],t.prototype,"columnApi",void 0),t}(f.YlN),b0=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),wf=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},bf=function(o){function t(){var e=o.call(this,'<div class="ag-tool-panel-horizontal-resize"></div>')||this;return e.minWidth=100,e.maxWidth=null,e}return b0(t,o),t.prototype.setElementToResize=function(e){this.elementToResize=e},t.prototype.postConstruct=function(){var e=this.horizontalResizeService.addResizeBar({eResizeBar:this.getGui(),dragStartPixels:1,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this),onResizeEnd:this.onResizeEnd.bind(this)});this.addDestroyFunc(e),this.setInverted(this.gridOptionsService.is("enableRtl"))},t.prototype.dispatchResizeEvent=function(e,r,n){this.eventService.dispatchEvent({type:f.YFc.EVENT_TOOL_PANEL_SIZE_CHANGED,width:n,started:e,ended:r})},t.prototype.onResizeStart=function(){this.startingWidth=this.elementToResize.offsetWidth,this.dispatchResizeEvent(!0,!1,this.startingWidth)},t.prototype.onResizeEnd=function(e){return this.onResizing(e,!0)},t.prototype.onResizing=function(e,r){void 0===r&&(r=!1);var i=Math.max(this.minWidth,Math.floor(this.startingWidth-e*(this.inverted?-1:1)));null!=this.maxWidth&&(i=Math.min(this.maxWidth,i)),this.elementToResize.style.width=i+"px",this.dispatchResizeEvent(!1,r,i)},t.prototype.setInverted=function(e){this.inverted=e},t.prototype.setMaxWidth=function(e){this.maxWidth=e},t.prototype.setMinWidth=function(e){this.minWidth=null!=e?e:100},wf([(0,f.Qnc)("horizontalResizeService")],t.prototype,"horizontalResizeService",void 0),wf([f.QhY],t.prototype,"postConstruct",null),t}(f.YlN),O0=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Fs=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Of=function(o){function t(e){var r=o.call(this)||this;return r.toolPanelDef=e,r}return O0(t,o),t.prototype.getToolPanelId=function(){return this.toolPanelDef.id},t.prototype.postConstruct=function(){var e=this.createTemplate();this.setTemplate(e),this.setLabel(),this.setIcon(),this.addManagedListener(this.eToggleButton,"click",this.onButtonPressed.bind(this)),this.eToggleButton.setAttribute("id","ag-"+this.getCompId()+"-button")},t.prototype.createTemplate=function(){return'<div class="ag-side-button" role="presentation">\n                <button type="button" ref="eToggleButton" tabindex="-1" role="tab" aria-expanded="false" class="ag-button ag-side-button-button">\n                    <div ref="eIconWrapper" class="ag-side-button-icon-wrapper" aria-hidden="true"></div>\n                    <span ref ="eLabel" class="ag-side-button-label"></span>\n                </button>\n            </div>'},t.prototype.setLabel=function(){var e=this.localeService.getLocaleTextFunc(),r=this.toolPanelDef,n=e(r.labelKey,r.labelDefault);this.eLabel.innerText=n},t.prototype.setIcon=function(){this.eIconWrapper.insertAdjacentElement("afterbegin",f._.createIconNoSpan(this.toolPanelDef.iconKey,this.gridOptionsService))},t.prototype.onButtonPressed=function(){this.dispatchEvent({type:t.EVENT_TOGGLE_BUTTON_CLICKED})},t.prototype.setSelected=function(e){this.addOrRemoveCssClass("ag-selected",e),f._.setAriaExpanded(this.eToggleButton,e)},t.prototype.getButtonElement=function(){return this.eToggleButton},t.EVENT_TOGGLE_BUTTON_CLICKED="toggleButtonClicked",Fs([(0,f.IzG)("eToggleButton")],t.prototype,"eToggleButton",void 0),Fs([(0,f.IzG)("eIconWrapper")],t.prototype,"eIconWrapper",void 0),Fs([(0,f.IzG)("eLabel")],t.prototype,"eLabel",void 0),Fs([f.QhY],t.prototype,"postConstruct",null),t}(f.YlN),E0=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Is=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Ef=function(o){function t(){var e=o.call(this,t.TEMPLATE)||this;return e.buttonComps=[],e}return E0(t,o),t.prototype.postConstruct=function(){this.addManagedListener(this.getFocusableElement(),"keydown",this.handleKeyDown.bind(this))},t.prototype.handleKeyDown=function(e){if(e.key===f.Axe.TAB&&e.shiftKey){var r=f._.last(this.columnModel.getAllDisplayedColumns());this.focusService.focusGridView(r,!0)&&e.preventDefault()}},t.prototype.setActiveButton=function(e){this.buttonComps.forEach(function(r){r.setSelected(e===r.getToolPanelId())})},t.prototype.addButtonComp=function(e){var r=this,n=this.createBean(new Of(e));return this.buttonComps.push(n),this.appendChild(n),n.addEventListener(Of.EVENT_TOGGLE_BUTTON_CLICKED,function(){r.dispatchEvent({type:t.EVENT_SIDE_BAR_BUTTON_CLICKED,toolPanelId:e.id})}),n},t.prototype.clearButtons=function(){this.buttonComps=this.destroyBeans(this.buttonComps),f._.clearElement(this.getGui())},t.EVENT_SIDE_BAR_BUTTON_CLICKED="sideBarButtonClicked",t.TEMPLATE='<div class="ag-side-buttons" role="tablist"></div>',Is([(0,f.Qnc)("focusService")],t.prototype,"focusService",void 0),Is([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),Is([f.QhY],t.prototype,"postConstruct",null),Is([f.sR7],t.prototype,"clearButtons",null),t}(f.YlN),T0=function(){function o(){}return o.parse=function(t){if(t){if(!0===t)return{toolPanels:[o.DEFAULT_COLUMN_COMP,o.DEFAULT_FILTER_COMP],defaultToolPanel:"columns"};if("string"==typeof t)return o.parse([t]);if(Array.isArray(t)){var e=[];return t.forEach(function(n){var i=o.DEFAULT_BY_KEY[n];i?e.push(i):console.warn("AG Grid: the key "+n+" is not a valid key for specifying a tool panel, valid keys are: "+Object.keys(o.DEFAULT_BY_KEY).join(","))}),0===e.length?void 0:{toolPanels:e,defaultToolPanel:e[0].id}}return{toolPanels:o.parseComponents(t.toolPanels),defaultToolPanel:t.defaultToolPanel,hiddenByDefault:t.hiddenByDefault,position:t.position}}},o.parseComponents=function(t){var e=[];return t&&t.forEach(function(r){var n=null;if("string"==typeof r){var i=o.DEFAULT_BY_KEY[r];if(!i)return void console.warn("AG Grid: the key "+r+" is not a valid key for specifying a tool panel, valid keys are: "+Object.keys(o.DEFAULT_BY_KEY).join(","));n=i}else n=r;e.push(n)}),e},o.DEFAULT_BY_KEY={columns:o.DEFAULT_COLUMN_COMP={id:"columns",labelDefault:"Columns",labelKey:"columns",iconKey:"columns",toolPanel:"agColumnsToolPanel"},filters:o.DEFAULT_FILTER_COMP={id:"filters",labelDefault:"Filters",labelKey:"filters",iconKey:"filter",toolPanel:"agFiltersToolPanel"}},o}(),P0=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Tf=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},A0=function(o){function t(){return o.call(this,t.TEMPLATE)||this}return P0(t,o),t.prototype.setupResize=function(){var e=this.getGui(),r=this.resizeBar=this.createManagedBean(new bf);e.setAttribute("id","ag-"+this.getCompId()),r.setElementToResize(e),this.appendChild(r)},t.prototype.getToolPanelId=function(){return this.toolPanelId},t.prototype.setToolPanelDef=function(e){var r=e.id,n=e.minWidth,i=e.maxWidth,a=e.width;this.toolPanelId=r,this.width=a;var u=this.userComponentFactory.getToolPanelCompDetails(e,{}).newAgStackInstance();null!=u?(u.then(this.setToolPanelComponent.bind(this)),null!=n&&this.resizeBar.setMinWidth(n),null!=i&&this.resizeBar.setMaxWidth(i)):console.warn("AG Grid: error processing tool panel component "+r+". You need to specify 'toolPanel'")},t.prototype.setToolPanelComponent=function(e){var r=this;this.toolPanelCompInstance=e,this.appendChild(e.getGui()),this.addDestroyFunc(function(){r.destroyBean(e)}),this.width&&(this.getGui().style.width=this.width+"px")},t.prototype.getToolPanelInstance=function(){return this.toolPanelCompInstance},t.prototype.setResizerSizerSide=function(e){var r=this.gridOptionsService.is("enableRtl"),n="left"===e;this.resizeBar.setInverted(r?n:!n)},t.prototype.refresh=function(){this.toolPanelCompInstance.refresh()},t.TEMPLATE='<div class="ag-tool-panel-wrapper" role="tabpanel"/>',Tf([(0,f.Qnc)("userComponentFactory")],t.prototype,"userComponentFactory",void 0),Tf([f.QhY],t.prototype,"setupResize",null),t}(f.YlN),D0=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),oa=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},R0=function(o){function t(){var e=o.call(this,t.TEMPLATE)||this;return e.toolPanelWrappers=[],e}return D0(t,o),t.prototype.postConstruct=function(){var e=this;this.sideBarButtonsComp.addEventListener(Ef.EVENT_SIDE_BAR_BUTTON_CLICKED,this.onToolPanelButtonClicked.bind(this)),this.setSideBarDef(),this.addManagedPropertyListener("sideBar",function(){e.clearDownUi(),e.setSideBarDef()}),this.gridApi.registerSideBarComp(this),this.createManagedBean(new f.MZQ(this.getFocusableElement(),{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this)}))},t.prototype.onTabKeyDown=function(e){if(!e.defaultPrevented){var n=this.focusService,i=this.sideBarButtonsComp,a=this.getGui(),s=i.getGui(),u=this.gridOptionsService.getDocument().activeElement,c=a.querySelector(".ag-tool-panel-wrapper:not(.ag-hidden)"),d=e.target;if(c){if(s.contains(u))return void(n.focusInto(c,e.shiftKey)&&e.preventDefault());if(e.shiftKey){var h=null;c.contains(u)?h=this.focusService.findNextFocusableElement(c,void 0,!0):n.isTargetUnderManagedComponent(c,d)&&e.shiftKey&&(h=this.focusService.findFocusableElementBeforeTabGuard(c,d)),h||(h=s.querySelector(".ag-selected button")),h&&(e.preventDefault(),h.focus())}}}},t.prototype.handleKeyDown=function(e){var r=this.gridOptionsService.getDocument();if(this.sideBarButtonsComp.getGui().contains(r.activeElement)){var n=this.sideBarButtonsComp.getGui(),i=Array.prototype.slice.call(n.querySelectorAll(".ag-side-button")),a=r.activeElement,s=i.findIndex(function(c){return c.contains(a)}),l=null;switch(e.key){case f.Axe.LEFT:case f.Axe.UP:l=Math.max(0,s-1);break;case f.Axe.RIGHT:case f.Axe.DOWN:l=Math.min(s+1,i.length-1)}if(null!==l){var u=i[l].querySelector("button");u&&(u.focus(),e.preventDefault())}}},t.prototype.onToolPanelButtonClicked=function(e){var r=e.toolPanelId,n=this.openedItem();this.openToolPanel(n===r?void 0:r,"sideBarButtonClicked")},t.prototype.clearDownUi=function(){this.sideBarButtonsComp.clearButtons(),this.destroyToolPanelWrappers()},t.prototype.setSideBarDef=function(){this.setDisplayed(!1);var e=this.gridOptionsService.get("sideBar");if(this.sideBar=T0.parse(e),this.sideBar&&this.sideBar.toolPanels){if(this.createToolPanelsAndSideButtons(this.sideBar.toolPanels),!this.toolPanelWrappers.length)return;this.setDisplayed(!this.sideBar.hiddenByDefault),this.setSideBarPosition(this.sideBar.position),this.sideBar.hiddenByDefault||this.openToolPanel(this.sideBar.defaultToolPanel,"sideBarInitializing")}},t.prototype.getDef=function(){return this.sideBar},t.prototype.setSideBarPosition=function(e){e||(e="right");var r="left"===e,n=r?"right":"left";return this.addOrRemoveCssClass("ag-side-bar-left",r),this.addOrRemoveCssClass("ag-side-bar-right",!r),this.toolPanelWrappers.forEach(function(i){i.setResizerSizerSide(n)}),this},t.prototype.createToolPanelsAndSideButtons=function(e){var r,n;try{for(var i=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),a=i.next();!a.done;a=i.next())this.createToolPanelAndSideButton(a.value)}catch(l){r={error:l}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},t.prototype.validateDef=function(e){if(null==e.id)return console.warn("AG Grid: please review all your toolPanel components, it seems like at least one of them doesn't have an id"),!1;if("agColumnsToolPanel"===e.toolPanel&&!f.Y5$.__assertRegistered(f.ekS.ColumnsToolPanelModule,"Column Tool Panel",this.context.getGridId()))return!1;if("agFiltersToolPanel"===e.toolPanel){if(!f.Y5$.__assertRegistered(f.ekS.FiltersToolPanelModule,"Filters Tool Panel",this.context.getGridId()))return!1;if(this.filterManager.isAdvancedFilterEnabled())return f._.doOnce(function(){console.warn("AG Grid: Advanced Filter does not work with Filters Tool Panel. Filters Tool Panel has been disabled.")},"advancedFilterToolPanel"),!1}return!0},t.prototype.createToolPanelAndSideButton=function(e){if(this.validateDef(e)){var r=this.sideBarButtonsComp.addButtonComp(e),n=this.getContext().createBean(new A0);n.setToolPanelDef(e),n.setDisplayed(!1);var i=n.getGui();this.appendChild(i),this.toolPanelWrappers.push(n),f._.setAriaControls(r.getButtonElement(),i)}},t.prototype.refresh=function(){this.toolPanelWrappers.forEach(function(e){return e.refresh()})},t.prototype.openToolPanel=function(e,r){void 0===r&&(r="api");var n=this.openedItem();n!==e&&(this.toolPanelWrappers.forEach(function(s){var l=e===s.getToolPanelId();s.setDisplayed(l)}),n!==this.openedItem()&&(this.sideBarButtonsComp.setActiveButton(e),this.raiseToolPanelVisibleEvent(e,n??void 0,r)))},t.prototype.getToolPanelInstance=function(e){var r=this.toolPanelWrappers.filter(function(n){return n.getToolPanelId()===e})[0];if(r)return r.getToolPanelInstance();console.warn("AG Grid: unable to lookup Tool Panel as invalid key supplied: "+e)},t.prototype.raiseToolPanelVisibleEvent=function(e,r,n){var i=!!e&&!!r;r&&this.eventService.dispatchEvent({type:f.YFc.EVENT_TOOL_PANEL_VISIBLE_CHANGED,source:n,key:r,visible:!1,switchingToolPanel:i}),e&&this.eventService.dispatchEvent({type:f.YFc.EVENT_TOOL_PANEL_VISIBLE_CHANGED,source:n,key:e,visible:!0,switchingToolPanel:i})},t.prototype.close=function(e){void 0===e&&(e="api"),this.openToolPanel(void 0,e)},t.prototype.isToolPanelShowing=function(){return!!this.openedItem()},t.prototype.openedItem=function(){var e=null;return this.toolPanelWrappers.forEach(function(r){r.isDisplayed()&&(e=r.getToolPanelId())}),e},t.prototype.destroyToolPanelWrappers=function(){var e=this;this.toolPanelWrappers.forEach(function(r){f._.removeFromParent(r.getGui()),e.destroyBean(r)}),this.toolPanelWrappers.length=0},t.prototype.destroy=function(){this.destroyToolPanelWrappers(),o.prototype.destroy.call(this)},t.TEMPLATE='<div class="ag-side-bar ag-unselectable">\n            <ag-side-bar-buttons ref="sideBarButtons"></ag-side-bar-buttons>\n        </div>',oa([(0,f.Qnc)("gridApi")],t.prototype,"gridApi",void 0),oa([(0,f.Qnc)("focusService")],t.prototype,"focusService",void 0),oa([(0,f.Qnc)("filterManager")],t.prototype,"filterManager",void 0),oa([(0,f.IzG)("sideBarButtons")],t.prototype,"sideBarButtonsComp",void 0),oa([f.QhY],t.prototype,"postConstruct",null),t}(f.YlN),F0=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Pf=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},I0=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.isColGroupDef=function(r){return r&&typeof r.children<"u"},e.getId=function(r){return e.isColGroupDef(r)?r.groupId:r.colId},e}return F0(t,o),t.prototype.createColumnTree=function(e){var r=this,n=[],i=function(s,l){if(r.isColGroupDef(s)){var u=s,d=new f.c$I(u,typeof u.groupId<"u"?u.groupId:u.headerName,!1,l),h=[];return u.children.forEach(function(y){var S=i(y,l+1);S&&h.push(S)}),d.setChildren(h),d}var p=s,g=r.columnModel.getPrimaryColumn(p.colId?p.colId:p.field);return g||n.push(p),g},a=[];return e.forEach(function(s){var l=i(s,0);l&&a.push(l)}),n.length>0&&console.warn("AG Grid: unable to find grid columns for the supplied colDef(s):",n),a},t.prototype.syncLayoutWithGrid=function(e){var r=this.getLeafPathTrees();e(this.mergeLeafPathTrees(r))},t.prototype.getLeafPathTrees=function(){var e=function(i,a){var s;if(i instanceof f.c$I)if(i.isPadding())s=a;else{var l=Object.assign({},i.getColGroupDef());l.groupId=i.getGroupId(),l.children=[a],s=l}else{var u=Object.assign({},i.getColDef());u.colId=i.getColId(),s=u}var c=i.getOriginalParent();return c?e(c,s):s};return this.columnModel.getAllGridColumns().filter(function(i){var a=i.getColDef();return i.isPrimary()&&!a.showRowGroup}).map(function(i){return e(i,i.getColDef())})},t.prototype.mergeLeafPathTrees=function(e){for(var r=this,i=function(c,d){if(!r.isColGroupDef(d))return c;var h=c,p=d;return p.children&&p.groupId&&r.addChildrenToGroup(h,p.groupId,p.children[0])||p.children.forEach(function(g){return i(h,g)}),h},a=[],s=1;s<=e.length;s++){var l=e[s-1],u=e[s];d=u,r.isColGroupDef(c=l)&&r.isColGroupDef(d)&&r.getId(c)===r.getId(d)?e[s]=i(l,u):a.push(l)}var c,d;return a},t.prototype.addChildrenToGroup=function(e,r,n){var i=this;if(!this.isColGroupDef(e))return!0;var d,h,p,v,g,y,s=e,l=n;if(h=l,p=(d=s).children.map(i.getId),v=f._.includes(p,i.getId(h)),y=(g=f._.last(d.children))&&i.getId(g)!==i.getId(h),v&&y)return s.children.push(l),!0;if(s.groupId===r){var u=s.children.map(this.getId);if(!f._.includes(u,this.getId(l)))return s.children.push(l),!0}return s.children.forEach(function(d){return i.addChildrenToGroup(d,r,n)}),!1},Pf([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),Pf([(0,f.ekA)("toolPanelColDefService")],t)}(f._QX),Bu={version:"30.2.1",moduleName:f.ekS.SideBarModule,beans:[I0],agStackComponents:[{componentName:"AgHorizontalResize",componentClass:bf},{componentName:"AgSideBar",componentClass:R0},{componentName:"AgSideBarButtons",componentClass:Ef}],dependantModules:[Ue]},aa=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},N0=function(){function o(){}return o.prototype.selectAllChildren=function(t,e,r){var n=this.extractAllLeafColumns(t);this.setAllColumns(n,e,r)},o.prototype.setColumn=function(t,e,r){this.setAllColumns([t],e,r)},o.prototype.setAllColumns=function(t,e,r){this.columnModel.isPivotMode()?this.setAllPivot(t,e,r):this.setAllVisible(t,e,r)},o.prototype.extractAllLeafColumns=function(t){var e=[],r=function(n){n.forEach(function(i){i.isPassesFilter()&&(i.isGroup()?r(i.getChildren()):e.push(i.getColumn()))})};return r(t),e},o.prototype.setAllVisible=function(t,e,r){var n=[];t.forEach(function(i){i.getColDef().lockVisible||i.isVisible()!=e&&n.push({colId:i.getId(),hide:!e})}),n.length>0&&this.columnModel.applyColumnState({state:n},r)},o.prototype.setAllPivot=function(t,e,r){this.gridOptionsService.is("functionsPassive")?this.setAllPivotPassive(t,e):this.setAllPivotActive(t,e,r)},o.prototype.setAllPivotPassive=function(t,e){var r=this.columnModel.getPivotColumns().slice(),n=this.columnModel.getValueColumns().slice(),i=this.columnModel.getRowGroupColumns().slice(),a=!1,s=!1,l=!1;t.forEach(e?function(g){g.isAnyFunctionActive()||(g.isAllowValue()?(n.push(g),s=!0):g.isAllowRowGroup()?(i.push(g),a=!0):g.isAllowPivot()&&(r.push(g),l=!0))}:function(g){g.isAnyFunctionActive()&&(r.indexOf(g)>=0&&(f._.removeFromArray(r,g),a=!0),n.indexOf(g)>=0&&(f._.removeFromArray(n,g),s=!0),i.indexOf(g)>=0&&(f._.removeFromArray(i,g),l=!0))}),a&&this.eventService.dispatchEvent({type:f.YFc.EVENT_COLUMN_PIVOT_CHANGE_REQUEST,columns:r}),l&&this.eventService.dispatchEvent({type:f.YFc.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST,columns:i}),s&&this.eventService.dispatchEvent({type:f.YFc.EVENT_COLUMN_VALUE_CHANGE_REQUEST,columns:i})},o.prototype.setAllPivotActive=function(t,e,r){var n=this,i=[];t.forEach(e?function(u){if(!u.isAnyFunctionActive())if(u.isAllowValue()){var c="string"==typeof u.getAggFunc()?u.getAggFunc():n.aggFuncService.getDefaultAggFunc(u);i.push({colId:u.getId(),aggFunc:c})}else u.isAllowRowGroup()?i.push({colId:u.getId(),rowGroup:!0}):u.isAllowPivot()&&i.push({colId:u.getId(),pivot:!0})}:function(u){(u.isPivotActive()||u.isRowGroupActive()||u.isValueActive())&&i.push({colId:u.getId(),pivot:!1,rowGroup:!1,aggFunc:null})}),i.length>0&&this.columnModel.applyColumnState({state:i},r)},o.prototype.updateColumns=function(t){var e=this,n=t.visibleState,i=t.pivotState,a=t.eventType,s=t.columns.map(function(l){var u=l.getColId();if(e.columnModel.isPivotMode()){var c=i?.[u];return{colId:u,pivot:c?.pivot,rowGroup:c?.rowGroup,aggFunc:c?.aggFunc}}return{colId:u,hide:!n?.[u]}});this.columnModel.applyColumnState({state:s},a)},o.prototype.createPivotState=function(t){return{pivot:t.isPivotActive(),rowGroup:t.isRowGroupActive(),aggFunc:t.isValueActive()?t.getAggFunc():void 0}},aa([(0,f.Qnc)("aggFuncService")],o.prototype,"aggFuncService",void 0),aa([(0,f.Qnc)("columnModel")],o.prototype,"columnModel",void 0),aa([(0,f.Qnc)("gridOptionsService")],o.prototype,"gridOptionsService",void 0),aa([(0,f.Qnc)("eventService")],o.prototype,"eventService",void 0),aa([(0,f.ekA)("modelItemUtils")],o)}(),G0={version:"30.2.1",moduleName:f.ekS.ColumnsToolPanelModule,beans:[N0],agStackComponents:[{componentName:"AgPrimaryColsHeader",componentClass:Dm},{componentName:"AgPrimaryColsList",componentClass:Hm},{componentName:"AgPrimaryCols",componentClass:Vu}],userComponents:[{componentName:"agColumnsToolPanel",componentClass:w0}],dependantModules:[Ue,Sf,Bu]},K0={getTemplate:function(o){var t=o.alignment;return{name:"Alignment",properties:{prefixedAttributes:[{prefix:"ss:",map:{Vertical:t.vertical,Horizontal:t.horizontal,Indent:t.indent,ReadingOrder:t.readingOrder,Rotate:t.rotate,ShrinkToFit:t.shrinkToFit,VerticalText:t.verticalText,WrapText:t.wrapText}}]}}}},Y0={getTemplate:function(o){var t=o.borders;return{name:"Borders",children:[t.borderBottom,t.borderLeft,t.borderRight,t.borderTop].map(function(a,s){return{name:"Border",properties:{prefixedAttributes:[{prefix:"ss:",map:{Position:0==s?"Bottom":1==s?"Left":2==s?"Right":"Top",LineStyle:a.lineStyle,Weight:a.weight,Color:a.color}}]}}})}}},$0={getTemplate:function(o){var t=o.font;return{name:"Font",properties:{prefixedAttributes:[{prefix:"ss:",map:{Bold:t.bold,FontName:t.fontName,Italic:t.italic,Color:t.color,Outline:t.outline,Shadow:t.shadow,Size:t.size,StrikeThrough:t.strikeThrough,Underline:t.underline,VerticalAlign:t.verticalAlign}},{prefix:"x:",map:{CharSet:t.charSet,Family:t.family}}]}}}},X0={getTemplate:function(o){var t=o.interior;return{name:"Interior",properties:{prefixedAttributes:[{prefix:"ss:",map:{Color:t.color,Pattern:t.pattern,PatternColor:t.patternColor}}]}}}},Q0={getTemplate:function(o){return{name:"Protection",properties:{prefixedAttributes:[{prefix:"ss:",map:{Protected:o.protection.protected,HideFormula:o.protection.hideFormula}}]}}}},Z0={getTemplate:function(o){return{name:"NumberFormat",properties:{prefixedAttributes:[{prefix:"ss:",map:{Format:o.numberFormat.format}}]}}}},ju=function(){function o(){}return o.createExcel=function(t,e){var r=this.excelXmlHeader(),a=this.workbook({name:"DocumentProperties",properties:{rawMap:{xmlns:"urn:schemas-microsoft-com:office:office"}},children:[{name:"Version",textNode:"12.00"}]},{name:"ExcelWorkbook",properties:{rawMap:{xmlns:"urn:schemas-microsoft-com:office:excel"}},children:[{name:"WindowHeight",textNode:"8130"},{name:"WindowWidth",textNode:"15135"},{name:"WindowHeight",textNode:"8130"},{name:"WindowTopX",textNode:"120"},{name:"WindowTopY",textNode:"45"},{name:"ProtectStructure",textNode:"False"},{name:"ProtectWindow",textNode:"False"}]},t,e);return""+r+f.Syl.createXml(a,function(s){return s?"1":"0"})},o.workbook=function(t,e,r,n){var i=[t,e,this.stylesXmlElement(r)].concat(function(o){var t=o.table,e=o.name,n=t.rows,i=t.columns.map(function(s){return function(o){return{name:"Column",properties:{prefixedAttributes:[{prefix:"ss:",map:{Width:o.width}}]}}}(s)}),a=n.map(function(s){return function(o){return{name:"Row",children:o.cells.map(function(e){return function(o){var t=o.mergeAcross,e=o.styleId,r=o.data,n={};return t&&(n.MergeAcross=t),e&&(n.StyleID=e),{name:"Cell",properties:{prefixedAttributes:[{prefix:"ss:",map:n}]},children:[{name:"Data",properties:{prefixedAttributes:[{prefix:"ss:",map:{Type:r?.type}}]},textNode:r?.value}]}}(e)})}}(s)});return{name:"Worksheet",children:[{name:"Table",children:i.concat(a)}],properties:{prefixedAttributes:[{prefix:"ss:",map:{Name:e}}]}}}(n));return Object.assign({},{name:"Workbook",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",html:"http://www.w3.org/TR/REC-html40"}}],rawMap:{xmlns:"urn:schemas-microsoft-com:office:spreadsheet"}}},{children:i})},o.excelXmlHeader=function(){return'<?xml version="1.0" ?>\n        <?mso-application progid="Excel.Sheet" ?>\n        '},o.stylesXmlElement=function(t){var e=this;return{name:"Styles",children:t?t.map(function(r){return e.styleXmlElement(r)}):[]}},o.styleXmlElement=function(t){var e=f._.compose(this.addProperty("alignment",t),this.addProperty("borders",t),this.addProperty("font",t),this.addProperty("interior",t),this.addProperty("protection",t),this.addProperty("numberFormat",t))([]);return Object.assign({},function(o){var t=o.id;return{name:"Style",properties:{prefixedAttributes:[{prefix:"ss:",map:{ID:t,Name:o.name||t}}]}}}(t),{children:e})},o.addProperty=function(t,e){return function(r){return e[t]?r.concat({alignment:K0,borders:Y0,font:$0,interior:X0,numberFormat:Z0,protection:Q0}[t].getTemplate(e)):r}},o.factoryMode=f.WKI.SINGLE_SHEET,o}(),Af={0:1,"0.00":2,"#,##0":3,"#,##0.00":4,"0%":9,"0.00%":10,"0.00E+00":11,"# ?/?":12,"# ??/??":13,"mm-dd-yy":14,"d-mmm-yy":15,"d-mmm":16,"mmm-yy":17,"h:mm AM/PM":18,"h:mm:ss AM/PM":19,"h:mm":20,"h:mm:ss":21,"m/d/yy h:mm":22,"#,##0 ;(#,##0)":37,"#,##0 ;[Red](#,##0)":38,"#,##0.00;(#,##0.00)":39,"#,##0.00;[Red](#,##0.00)":40,"mm:ss":45,"[h]:mm:ss":46,"mmss.0":47,"##0.0E+0":48,"@":49},tS=function(o){return Math.round(96*o/72)},Mi=function(o){return Math.ceil(9525*o)},Ls=function(o,t){if(t)return function(o){return Math.round(72*o/96)}("number"==typeof t?t:t({rowIndex:o}))},Wt=function(o){return""+f.Syl.createHeader({encoding:"UTF-8",standalone:"yes"})+f.Syl.createXml(o)},sa=function(o){var r=String.fromCharCode,n=Math.floor(o/26),i=o%26;return n&&26!==o?i?n<26?r(65+n-1)+r(65+i-1):sa(n)+r(65+i-1):sa(n-1)+"Z":r(65+o-1)},oS=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ns=function(){return Ns=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},Ns.apply(this,arguments)},Df=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Mf=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},Rf=function(o){function t(e){var r=o.call(this,e)||this;return r.mixedStyles={},r.mixedStyleCounter=0,r.rows=[],r.config=Object.assign({},e),r.stylesByIds={},r.config.baseExcelStyles.forEach(function(n){r.stylesByIds[n.id]=n}),r.excelStyles=Mf([],Df(r.config.baseExcelStyles)),r}return oS(t,o),t.prototype.addCustomContent=function(e){var r=this;e.forEach(function(n){var a,i=r.rows.length+1;!r.config.suppressRowOutline&&null!=n.outlineLevel&&(a=n.outlineLevel);var s={height:Ls(i,n.height||r.config.rowHeight),cells:(n.cells||[]).map(function(l,u){var c,d,h,p=r.addImage(i,r.columnsToExport[u],null===(c=l.data)||void 0===c?void 0:c.value),v=null;l.styleId&&(v="string"==typeof l.styleId?[l.styleId]:l.styleId);var g=r.getStyleId(v);if(p)return r.createCell(g,r.getDataTypeForValue(p.value),null==p.value?"":p.value);var y=null!==(h=null===(d=l.data)||void 0===d?void 0:d.value)&&void 0!==h?h:"",S=r.getDataTypeForValue(y);return l.mergeAcross?r.createMergedCell(g,S,y,l.mergeAcross):r.createCell(g,S,y)}),outlineLevel:a};null!=n.collapsed&&(s.collapsed=n.collapsed),null!=n.hidden&&(s.hidden=n.hidden),r.rows.push(s)})},t.prototype.onNewHeaderGroupingRow=function(){var e=this,r=[];return this.rows.push({cells:r,height:Ls(this.rows.length+1,this.config.headerRowHeight)}),{onColumn:function(n,i,a,s,l){var u=e.config.styleLinker({rowType:f.HIZ.HEADER_GROUPING,rowIndex:1,value:"grouping-"+i,columnGroup:n});r.push(Ns(Ns({},e.createMergedCell(e.getStyleId(u),e.getDataTypeForValue("string"),i,s)),{collapsibleRanges:l}))}}},t.prototype.onNewHeaderRow=function(){return this.onNewRow(this.onNewHeaderColumn,this.config.headerRowHeight)},t.prototype.onNewBodyRow=function(e){var r=this.onNewRow(this.onNewBodyColumn,this.config.rowHeight);return e&&this.addRowOutlineIfNecessary(e),r},t.prototype.addRowOutlineIfNecessary=function(e){var r=this.config,i=r.suppressRowOutline,a=r.rowGroupExpandState,s=void 0===a?"expanded":a;if(!r.gridOptionsService.is("groupHideOpenParents")&&!i&&null!=e.level){var u=e.footer?1:0,c=f._.last(this.rows);if(c.outlineLevel=e.level+u,"expanded"!==s){var d="collapsed"===s;e.isExpandable()&&(c.collapsed=!(!d&&e.expanded)),c.hidden=!!e.parent&&-1!==e.parent.level&&(d||this.isAnyParentCollapsed(e.parent))}}},t.prototype.isAnyParentCollapsed=function(e){for(;e&&-1!==e.level;){if(!e.expanded)return!0;e=e.parent}return!1},t.prototype.prepare=function(e){var r=this;o.prototype.prepare.call(this,e),this.columnsToExport=Mf([],Df(e)),this.cols=e.map(function(n,i){return r.convertColumnToExcel(n,i)})},t.prototype.parse=function(){for(var e=this.rows.reduce(function(n,i){return Math.max(n,i.cells.length)},0);this.cols.length<e;)this.cols.push(this.convertColumnToExcel(null,this.cols.length+1));return this.createExcel({name:this.config.sheetName,table:{columns:this.cols,rows:this.rows}})},t.prototype.isFormula=function(e){return null!=e&&this.config.autoConvertFormulas&&e.toString().startsWith("=")},t.prototype.isNumerical=function(e){return"bigint"==typeof e||isFinite(e)&&""!==e&&!isNaN(parseFloat(e))},t.prototype.getStyleById=function(e){return null==e?null:this.stylesByIds[e]||null},t.prototype.convertColumnToExcel=function(e,r){var n=this.config.columnWidth;return n?"number"==typeof n?{width:n}:{width:n({column:e,index:r})}:e?{width:Math.max(e.getActualWidth(),75)}:{}},t.prototype.onNewHeaderColumn=function(e,r){var n=this;return function(i,a){var s=n.extractHeaderValue(i),l=n.config.styleLinker({rowType:f.HIZ.HEADER,rowIndex:e,value:s,column:i});r.push(n.createCell(n.getStyleId(l),n.getDataTypeForValue("string"),s))}},t.prototype.onNewRow=function(e,r){var n=[];return this.rows.push({cells:n,height:Ls(this.rows.length+1,r)}),{onColumn:e.bind(this,this.rows.length,n)()}},t.prototype.onNewBodyColumn=function(e,r){var n=this,i=0;return function(a,s,l){if(i>0)i-=1;else{var u=n.extractRowCellValue(a,s,e,"excel",l),c=u.value,d=u.valueFormatted,h=n.config.styleLinker({rowType:f.HIZ.BODY,rowIndex:e,value:c,column:a,node:l}),p=n.getStyleId(h),v=a.getColSpan(l),g=n.addImage(e,a,c);g?r.push(n.createCell(p,n.getDataTypeForValue(g.value),null==g.value?"":g.value)):v>1?(i=v-1,r.push(n.createMergedCell(p,n.getDataTypeForValue(c),c,v-1))):r.push(n.createCell(p,n.getDataTypeForValue(c),c,d))}}},t.prototype.getStyleId=function(e){if(!e||!e.length)return null;if(1===e.length)return e[0];var r=e.join("-");return this.mixedStyles[r]||this.addNewMixedStyle(e),this.mixedStyles[r].excelID},t.prototype.addNewMixedStyle=function(e){var r=this;this.mixedStyleCounter+=1;var n="mixedStyle"+this.mixedStyleCounter,i={};e.forEach(function(s){r.excelStyles.forEach(function(l){l.id===s&&f._.mergeDeep(i,f._.deepCloneObject(l))})}),i.id=n,i.name=n;var a=e.join("-");this.mixedStyles[a]={excelID:n,key:a,result:i},this.excelStyles.push(i),this.stylesByIds[n]=i},t}(f.AVx),aS=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),sS=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return aS(t,o),t.prototype.createExcel=function(e){return ju.createExcel(this.excelStyles,e)},t.prototype.getDataTypeForValue=function(e){return this.isNumerical(e)?"Number":"String"},t.prototype.getType=function(e,r,n){if(this.isFormula(n))return"Formula";if(r&&r.dataType)switch(r.dataType.toLocaleLowerCase()){case"string":return"Formula";case"number":return"Number";case"datetime":return"DateTime";case"error":return"Error";case"boolean":return"Boolean";default:console.warn("AG Grid: Unrecognized data type for excel export ["+r.id+".dataType="+r.dataType+"]")}return e},t.prototype.addImage=function(){},t.prototype.createCell=function(e,r,n,i){var a=this.getStyleById(e);!a?.dataType&&"String"===r&&i&&(n=i);var s=this.getType(r,a,n)||r;return{styleId:a?e:void 0,data:{type:s,value:this.getValueTransformed(s,n)}}},t.prototype.getValueTransformed=function(e,r){var s,n=this;switch(e){case"String":return function(s){if(n.config.suppressTextAsCDATA)return f._.escapeString(s);var l="<![CDATA[",u="]]>",c=new RegExp(u,"g");return l+String(s).replace(c,"]]"+u+l+">")+u}(r);case"Number":return Number(r).valueOf()+"";case"Boolean":return(s=r)&&"0"!==s&&"false"!==s?"1":"0";default:return r}},t.prototype.createMergedCell=function(e,r,n,i){return{styleId:this.getStyleById(e)?e:void 0,data:{type:r,value:n},mergeAcross:i}},t}(Rf),zu=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Ri=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},Ff=function(o,t){return{name:"xdr:"+o,children:[{name:"xdr:col",textNode:t.col.toString()},{name:"xdr:colOff",textNode:t.offsetX.toString()},{name:"xdr:row",textNode:t.row.toString()},{name:"xdr:rowOff",textNode:t.offsetY.toString()}]}},dS=function(o){var t=[{name:"a:ext",properties:{rawMap:{uri:"{FF2B5EF4-FFF2-40B4-BE49-F238E27FC236}"}},children:[{name:"a16:creationId",properties:{rawMap:{id:"{822E6D20-D7BC-2841-A643-D49A6EF008A2}","xmlns:a16":"http://schemas.microsoft.com/office/drawing/2014/main"}}}]}];switch(o.recolor&&o.recolor.toLowerCase()){case"grayscale":case"sepia":case"washout":t.push({name:"a:ext",properties:{rawMap:{uri:"{C183D7F6-B498-43B3-948B-1728B52AA6E4}"}},children:[{name:"adec:decorative",properties:{rawMap:{val:"0","xmlns:adec":"http://schemas.microsoft.com/office/drawing/2017/decorative"}}}]})}return{name:"a:extLst",children:t}},fS=function(o,t){return{name:"xdr:nvPicPr",children:[{name:"xdr:cNvPr",properties:{rawMap:{id:t,name:o.id,descr:null!=o.altText?o.altText:void 0}},children:[dS(o)]},{name:"xdr:cNvPicPr",properties:{rawMap:{preferRelativeResize:"0"}},children:[{name:"a:picLocks"}]}]}},If=function(o){if(o.saturation||o.tint){var t=[];return o.saturation&&t.push({name:"a:satMod",properties:{rawMap:{val:1e3*o.saturation}}}),o.tint&&t.push({name:"a:tint",properties:{rawMap:{val:1e3*o.tint}}}),t}},pS=function(o,t){var e;if(o.transparency){var r=Math.min(Math.max(o.transparency,0),100);e=[{name:"a:alphaModFix",properties:{rawMap:{amt:1e5-Math.round(1e3*r)}}}]}if(o.recolor)switch(e||(e=[]),o.recolor.toLocaleLowerCase()){case"grayscale":e.push({name:"a:grayscl"});break;case"sepia":e.push(function(o,t){return{name:"a:duotone",children:[{name:"a:prstClr",properties:{rawMap:{val:o.color}},children:If(o)},{name:"a:srgbClr",properties:{rawMap:{val:t.color}},children:If(t)}]}}({color:"black"},{color:"D9C3A5",tint:50,saturation:180}));break;case"washout":e.push({name:"a:lum",properties:{rawMap:{bright:"70000",contrast:"-70000"}}})}return{name:"xdr:blipFill",children:[{name:"a:blip",properties:{rawMap:{cstate:"print","r:embed":"rId"+t,"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}},children:e},{name:"a:stretch",children:[{name:"a:fillRect"}]}]}},vS=function(o,t){var e={name:"a:xfrm",children:[{name:"a:off",properties:{rawMap:{x:0,y:0}}},{name:"a:ext",properties:{rawMap:{cx:t.width,cy:t.height}}}]};return o.rotation&&(e.properties={rawMap:{rot:6e4*Math.min(Math.max(o.rotation,0),360)}}),{name:"xdr:spPr",children:[e,{name:"a:prstGeom",properties:{rawMap:{prst:"rect"}},children:[{name:"a:avLst"}]}]}},yS=function(o,t,e,r){return{name:"xdr:pic",children:[fS(o,t+1),pS(o,e+1),vS(o,r)]}},Kt=function(o){var t=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i}(o,4);return{name:"a:"+t[0],children:[{name:"a:"+t[1],properties:{rawMap:{val:t[2],lastClr:t[3]}}}]}},W=function(o){var t=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i}(o,4);return{name:"a:"+t[0],properties:{rawMap:{script:t[2],typeface:t[1],panose:t[3]}}}},la=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Sr=function(o,t,e){return{name:"a:"+o,properties:{rawMap:{val:t}},children:e}},Hu=function(o){var t=la(o,6),e=t[0],r=t[1],i=t[3],a=t[4],s=t[5],l=[];return l.push(Sr("satMod",t[2])),i&&l.push(Sr("lumMod",i)),a&&l.push(Sr("tint",a)),s&&l.push(Sr("shade",s)),{name:"a:gs",properties:{rawMap:{pos:e}},children:[{name:"a:schemeClr",properties:{rawMap:{val:r}},children:l}]}},ks=function(o,t){return{name:"a:solidFill",children:[Sr("schemeClr",o,t)]}},Uu=function(o){var t=la(o,5),e=t[0],r=t[1],n=t[2],i=t[3],s=la(t[4],2),l=s[0],u=s[1];return{name:"a:gradFill",properties:{rawMap:{rotWithShape:e}},children:[{name:"a:gsLst",children:[Hu(r),Hu(n),Hu(i)]},{name:"a:lin",properties:{rawMap:{ang:l,scaled:u}}}]}},Wu=function(o){var t=la(o,4);return{name:"a:ln",properties:{rawMap:{w:t[0],cap:t[1],cmpd:t[2],algn:t[3]}},children:[ks("phClr"),Sr("prstDash","solid"),{name:"a:miter",properties:{rawMap:{lim:"800000"}}}]}},Ku=function(o){var t=[];if(o){var e=la(o,5);t.push({name:"a:outerShdw",properties:{rawMap:{blurRad:e[0],dist:e[1],dir:e[2],algn:e[3],rotWithShape:e[4]}},children:[Sr("srgbClr","000000",[Sr("alpha","63000")])]})}return{name:"a:effectStyle",children:[Object.assign({},{name:"a:effectLst"},t.length?{children:t}:{})]}},DS=function(o){var t=[];return o.forEach(function(e,r){var n=r.toString(),i={name:"t",textNode:f._.utf8_encode(f._.escapeString(n))};n.trim().length!==n.length&&(i.properties={rawMap:{"xml:space":"preserve"}}),t.push({name:"si",children:[i]})}),t},IS_getTemplate=function(o){return{name:"numFmts",properties:{rawMap:{count:o.length}},children:o.map(function(t){return function(o){var t=o.formatCode,e=o.numFmtId;return t.length&&(t=function RS(o){for(var t=o.split(/(\[[^\]]*\])/),e=0;e<t.length;e++){var r=t[e];r.length&&(r.startsWith("[")||(r=r.replace(/\$/g,'"$"')),t[e]=f._.escapeString(r))}return t.join("")}(t)),{name:"numFmt",properties:{rawMap:{formatCode:t,numFmtId:e}}}}(t)})}},BS={None:"None",Dot:"Dotted",Dash:"Dashed",Double:"Double",DashDot:"DashDot",DashDotDot:"DashDotDot",SlantDashDot:"SlantDashDot"},jS=["Dashed","DashDot","DashDotDot"],zS={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinDiagStripe:"lightUp",ThinHorzCross:"lightGrid",ThinDiagCross:"lightTrellis",Gray125:"gray125",Gray0625:"gray0625"},HS={Automatic:"general",Left:"left",Center:"center",Right:"right",Fill:"fill",Justify:"justify",CenterAcrossSelection:"centerContinuous",Distributed:"distributed",JustifyDistributed:"justify"},US={Automatic:void 0,Top:"top",Bottom:"bottom",Center:"center",Justify:"justify",Distributed:"distributed",JustifyDistributed:"justify"},hn=function(o){return null==o?o:("#"===o.charAt(0)&&(o=o.substr(1)),6===o.length?"FF"+o:o)},Gs=function(o,t){if(!o)return"thin";var e=function(o){switch(o){case 1:return"thin";case 2:return"medium";case 3:return"thick";default:return"hair"}}(t),r=BS[o];return"Continuous"===o?e:"medium"===e&&-1!==jS.indexOf(r)?"medium"+r:r.charAt(0).toLowerCase()+r.substr(1)},KS=function(o){return HS[o]||"general"},YS=function(o){return US[o]||void 0},ua=function(o){return{name:"color",properties:{rawMap:{rgb:hn(o||"#000000")}}}},XS_getTemplate=function(o){return{name:"borders",properties:{rawMap:{count:o.length}},children:o.map(function(t){return function(o){var t=o.left,e=o.right,r=o.top,n=o.bottom,i=o.diagonal,a=t?[ua(t.color)]:void 0,s=e?[ua(e.color)]:void 0,l=r?[ua(r.color)]:void 0,u=n?[ua(n.color)]:void 0,c=i?[ua(i.color)]:void 0;return{name:"border",children:[{name:"left",properties:{rawMap:{style:t&&t.style}},children:a},{name:"right",properties:{rawMap:{style:e&&e.style}},children:s},{name:"top",properties:{rawMap:{style:r&&r.style}},children:l},{name:"bottom",properties:{rawMap:{style:n&&n.style}},children:u},{name:"diagonal",properties:{rawMap:{style:i&&i.style}},children:c}]}}(t)})}},QS=function(o){var e=["Context","LeftToRight","RightToLeft"].indexOf(o);return Math.max(e,0)},Lf_getTemplate=function(o){var t=o.alignment,e=o.borderId,r=o.fillId,n=o.fontId,i=o.numFmtId,a=o.protection,s=o.xfId,l=[];return t&&l.push(function(o){var t=o.horizontal,e=o.indent,r=o.readingOrder,n=o.rotate,i=o.shrinkToFit,a=o.vertical,s=o.wrapText;return{name:"alignment",properties:{rawMap:{horizontal:t&&KS(t),indent:e,readingOrder:r&&QS(r),textRotation:n,shrinkToFit:i,vertical:a&&YS(a),wrapText:s}}}}(t)),a&&l.push(function(o){return{name:"protection",properties:{rawMap:{hidden:!0===o.hideFormula?1:0,locked:!1===o.protected?0:1}}}}(a)),{name:"xf",properties:{rawMap:{applyAlignment:t?1:void 0,applyProtection:a?1:void 0,applyBorder:e?1:void 0,applyFill:r?1:void 0,borderId:e,fillId:r,applyFont:n?1:void 0,fontId:n,applyNumberFormat:i?1:void 0,numFmtId:i,xfId:s}},children:l.length?l:void 0}},Vs=function(){return Vs=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},Vs.apply(this,arguments)},Gf=function(o,t){return-1!==o.indexOf("mixedStyle")&&t>1&&(o+="_"+t),o},Vf=function(){Bs={base:0},Fi=[],ca=[{fontName:"Calibri",colorTheme:"1",family:"2",scheme:"minor"}],da=[{patternType:"none"},{patternType:"gray125"}],fa=[{left:void 0,right:void 0,top:void 0,bottom:void 0,diagonal:void 0}],Nf=[{borderId:0,fillId:0,fontId:0,numFmtId:0}],js=[{borderId:0,fillId:0,fontId:0,numFmtId:0,xfId:0}],kf=[{builtinId:0,name:"Normal",xfId:0}]},sC=function(o){var t=o.alignment,e=o.borders,r=o.font,n=o.interior,i=o.numberFormat,a=o.protection,s=o.id,l=0,u=0,c=0,d=0;s&&(s=Gf(s,Yu),null==Bs[s]&&(n&&(l=function(o){var t=function(o){return o?zS[o]||o:"none"}(o.pattern),e=hn(o.color),r=hn(o.patternColor),n=da.findIndex(function(i){return!(i.patternType!=t||i.fgRgb!=e||i.bgRgb!=r)});return-1===n&&(n=da.length,da.push({patternType:t,fgRgb:e,bgRgb:r})),n}(n)),e&&(u=function(o){var i,a,s,l,u,c,d,h,t=o.borderBottom,e=o.borderTop,r=o.borderLeft,n=o.borderRight;r&&(s=Gs(r.lineStyle,r.weight),d=hn(r.color)),n&&(l=Gs(n.lineStyle,n.weight),h=hn(n.color)),t&&(i=Gs(t.lineStyle,t.weight),u=hn(t.color)),e&&(a=Gs(e.lineStyle,e.weight),c=hn(e.color));var p=fa.findIndex(function(v){var g=v.left,y=v.right,S=v.top,m=v.bottom;if(!g&&(s||d)||!y&&(l||h)||!S&&(a||c)||!m&&(i||u))return!1;var C=g||{},x=y||{},T=S||{},D=m||{};return!(C.style!=s||C.color!=d||x.style!=l||x.color!=h||T.style!=a||T.color!=c||D.style!=i||D.color!=u)});return-1===p&&(p=fa.length,fa.push({left:{style:s,color:d},right:{style:l,color:h},top:{style:a,color:c},bottom:{style:i,color:u},diagonal:{style:void 0,color:void 0}})),p}(e)),r&&(c=function(o){var t=o.fontName,e=void 0===t?"Calibri":t,r=o.color,n=o.size,i=o.bold,a=o.italic,s=o.outline,l=o.shadow,u=o.strikeThrough,c=o.underline,d=o.family,h=o.verticalAlign,p=e&&f._.utf8_encode(e),v=hn(r),g=function(o){if(void 0!==o){var e=["Automatic","Roman","Swiss","Modern","Script","Decorative"].indexOf(o||"Automatic");return Math.max(e,0)}}(d),y=c?c.toLocaleLowerCase():void 0,S=h?h.toLocaleLowerCase():void 0,m=ca.findIndex(function(C){return!(C.fontName!=p||C.color!=v||C.size!=n||C.bold!=i||C.italic!=a||C.outline!=s||C.shadow!=l||C.strikeThrough!=u||C.underline!=y||C.verticalAlign!=S||C.family!=g)});return-1===m&&(m=ca.length,ca.push({fontName:p,color:v,size:n,bold:i,italic:a,outline:s,shadow:l,strikeThrough:u,underline:y,verticalAlign:S,family:g?.toString()})),m}(r)),i&&(d=function(o){if(o=f._.utf8_encode(o),Af[o])return Af[o];var t=Fi.findIndex(function(e){return e.formatCode===o});return-1===t?Fi.push({formatCode:o,numFmtId:t=Fi.length+164}):t=Fi[t].numFmtId,t}(i.format)),Bs[s]=js.length,js.push({alignment:t,borderId:u||0,fillId:l||0,fontId:c||0,numFmtId:d||0,protection:a,xfId:0})))},lC_getTemplate=function(o){var t=IS_getTemplate(Fi),e=function(o){return{name:"fonts",properties:{rawMap:{count:o.length}},children:o.map(function(t){return function(o){var r=o.color,i=o.fontName,s=o.family,l=o.scheme,u=o.italic,c=o.bold,d=o.strikeThrough,h=o.outline,p=o.shadow,v=o.underline,g=o.verticalAlign,y=[{name:"sz",properties:{rawMap:{val:o.size}}},{name:"color",properties:{rawMap:{theme:o.colorTheme,rgb:void 0===r?"FF000000":r}}},{name:"name",properties:{rawMap:{val:void 0===i?"Calibri":i}}}];return s&&y.push({name:"family",properties:{rawMap:{val:s}}}),l&&y.push({name:"scheme",properties:{rawMap:{val:l}}}),u&&y.push({name:"i"}),c&&y.push({name:"b"}),d&&y.push({name:"strike"}),h&&y.push({name:"outline"}),p&&y.push({name:"shadow"}),v&&y.push({name:"u",properties:{rawMap:{val:v}}}),g&&y.push({name:"vertAlign",properties:{rawMap:{val:g}}}),{name:"font",children:y}}(t)})}}(ca.map(function(l){return Vs(Vs({},l),{size:null!=l.size?l.size:o})})),r=function(o){return{name:"fills",properties:{rawMap:{count:o.length}},children:o.map(function(t){return function(o){var e=o.fgTheme,r=o.fgTint,n=o.fgRgb,i=o.bgRgb,a=o.bgIndexed,s={name:"patternFill",properties:{rawMap:{patternType:o.patternType}}};return(e||r||n)&&(s.children=[{name:"fgColor",properties:{rawMap:{theme:e,tint:r,rgb:n}}}]),(a||i)&&(s.children||(s.children=[]),s.children.push({name:"bgColor",properties:{rawMap:{indexed:a,rgb:i}}})),{name:"fill",children:[s]}}(t)})}}(da),n=XS_getTemplate(fa),i=function(o){return{name:"cellStyleXfs",properties:{rawMap:{count:o.length}},children:o.map(function(t){return Lf_getTemplate(t)})}}(Nf),a=function(o){return{name:"cellXfs",properties:{rawMap:{count:o.length}},children:o.map(function(t){return Lf_getTemplate(t)})}}(js),s=function(o){return{name:"cellStyles",properties:{rawMap:{count:o.length}},children:o.map(function(t){return function(o){return{name:"cellStyle",properties:{rawMap:{builtinId:o.builtinId,name:o.name,xfId:o.xfId}}}}(t)})}}(kf);return Vf(),{name:"styleSheet",properties:{rawMap:{"mc:Ignorable":"x14ac x16r2 xr",xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac","xmlns:x16r2":"http://schemas.microsoft.com/office/spreadsheetml/2015/02/main","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision"}},children:[t,e,r,n,i,a,s,{name:"tableStyles",properties:{rawMap:{count:0,defaultPivotStyle:"PivotStyleLight16",defaultTableStyle:"TableStyleMedium2"}}}]}},uC=function(o,t){return Bs[Gf(o,t)]||0},fC_getTemplate=function(o){return{name:"sheets",children:o.map(function(t,e){return function(o,t){var e=(t+1).toString();return{name:"sheet",properties:{rawMap:{name:o,sheetId:e,"r:id":"rId"+e}}}}(t,e)})}},mC=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},SC=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},_C=function(o){var t;return""!==(null===(t=o.data)||void 0===t?void 0:t.value)||void 0!==o.styleId},xC_getTemplate=function(o,t,e){var r=o.collapsed,n=o.hidden,i=o.height,a=o.outlineLevel,s=o.cells,l=void 0===s?[]:s;return function(o,t){for(var e=[],r=0,n=0;n<o.length;n++)(i=o[n]).mergeAcross&&(e.push({pos:n,excelPos:r}),r+=i.mergeAcross),r++;if(e.length)for(n=e.length-1;n>=0;n--){for(var a=[],i=o[e[n].pos],s=1;s<=i.mergeAcross;s++)a.push({ref:""+sa(e[n].excelPos+1+s)+(t+1),styleId:i.styleId,data:{type:"empty",value:null}});a.length&&o.splice.apply(o,SC([e[n].pos+1,0],mC(a)))}}(l,t),{name:"row",properties:{rawMap:{r:t+1,collapsed:r?"1":"0",hidden:n?"1":"0",ht:i,customHeight:null!=i?"1":"0",spans:"1:1",outlineLevel:a||void 0}},children:l.filter(_C).map(function(c,d){return function(o,t,e){var r=o.ref,i=o.styleId,a=o.data||{type:"empty",value:null},s=a.type,l=a.value,u=s;"f"===s?u="str":s.charAt(0)===s.charAt(0).toUpperCase()&&(u=function(o){var t=o.charAt(0).toLowerCase();return"s"===t?"inlineStr":t}(s));var d,c={name:"c",properties:{rawMap:{r,t:"empty"===u?void 0:u,s:i?uC(i,e):void 0}}};return"empty"===u?c:(d="str"===u&&"f"===s?[{name:"f",textNode:f._.escapeString(f._.utf8_encode(l))}]:"inlineStr"===u?[{name:"is",children:[{name:"t",textNode:f._.escapeString(f._.utf8_encode(l))}]}]:[{name:"v",textNode:l}],Object.assign({},c,{children:d}))}(c,0,e)})}},OC=function(o){return!o||"Portrait"!==o&&"Landscape"!==o?"portrait":o.toLocaleLowerCase()},EC=function(o){if(null==o)return 1;var e=["Letter","Letter Small","Tabloid","Ledger","Legal","Statement","Executive","A3","A4","A4 Small","A5","A6","B4","B5","Folio","Envelope","Envelope DL","Envelope C5","Envelope B5","Envelope C3","Envelope C4","Envelope C6","Envelope Monarch","Japanese Postcard","Japanese Double Postcard"].indexOf(o);return-1===e?1:e+1},LC=function(o){return o.reduce(function(t,e){var r=function(o){return"Center"===o?"C":"Right"===o?"R":"L"}(e.position),n=function(o,t){return t&&(o+="&amp;&quot;",o+=t.fontName||"Calibri",o+=t.bold!==t.italic?t.bold?",Bold":",Italic":t.bold?",Bold Italic":",Regular",o+="&quot;",t.size&&(o+="&amp;"+t.size),t.strikeThrough&&(o+="&amp;S"),t.underline&&(o+="&amp;"+("Double"===t.underline?"E":"U")),t.color&&(o+="&amp;K"+t.color.replace("#","").toUpperCase())),o}(t+"&amp;"+r,e.font);return""+n+f._.escapeString(f._.utf8_encode(function(o){return f._.iterateObject({"&[Page]":"&P","&[Pages]":"&N","&[Date]":"&D","&[Time]":"&T","&[Tab]":"&A","&[Path]":"&Z","&[File]":"&F"},function(e,r){o=o.replace(e,r)}),o}(e.value)))},"")},NC=function(o){var e=[];return["all","first","even"].forEach(function(r){var n=o[r],i="all"===r?"odd":r;!n||!n.header&&!n.footer||f._.iterateObject(n,function(a,s){var l=""+a.charAt(0).toUpperCase()+a.slice(1);s&&e.push({name:""+i+l,properties:{rawMap:{"xml:space":"preserve"}},textNode:LC(s)})})}),e},jC_getTemplate=function(o){var e=o.currentSheet,r=o.config,n=r.margins,i=void 0===n?{}:n,a=r.pageSetup,s=r.headerFooterConfig,u=o.worksheet.table,c=u.rows,d=u.columns,h=d&&d.length?function(o,t,e){var r=[],n=[];o.forEach(function(s,l){var d,c=0;s.cells.forEach(function(h,p){var v=p+c+1,g=sa(v),y=l+1;if(h.mergeAcross){var S=sa(p+(c+=h.mergeAcross)+1);r.push(""+g+y+":"+S+y)}t[v-1]||(t[v-1]={});var m=h.collapsibleRanges;m&&m.forEach(function(C){n.push([v+C[0],v+C[1]])}),(d=t[v-1]).min=v,d.max=v,h.ref=""+g+y})}),n.sort(function(s,l){return s[0]!==l[0]?s[0]-l[0]:l[1]-s[1]});var i=new Map,a=new Map;return n.filter(function(s){var l=s.toString();return!i.get(l)&&(i.set(l,!0),!0)}).forEach(function(s){var l=t.find(function(c){return c.min==s[0]&&c.max==s[1]}),u=a.get(s[0]);t.push({min:s[0],max:s[1],outlineLevel:e?void 0:u||1,width:(l||{width:100}).width}),a.set(s[0],(u||0)+1)}),r}(c,d,!!r.suppressColumnOutline):[],p=f._.compose(function(o){return o.push({name:"sheetPr",children:[{name:"outlinePr",properties:{rawMap:{summaryBelow:0}}}]}),o},function(o){return function(t){var e=o.reduce(function(r,n){return n.outlineLevel&&n.outlineLevel>r?n.outlineLevel:r},0);return t.push({name:"sheetFormatPr",properties:{rawMap:{baseColWidth:10,defaultRowHeight:16,outlineLevelRow:e||void 0}}}),t}}(c),function(o){return function(t){return o.length&&t.push({name:"cols",children:o.map(function(e){return function(o){var t=o.min,e=o.max,r=o.outlineLevel,n=o.s,i=o.width,a=o.hidden,s=o.bestFit,l=1,u="0";return i>1&&(l=function(o){return Math.ceil((o-12)/7+1)}(i),u="1"),{name:"col",properties:{rawMap:{min:t,max:e,outlineLevel:r??void 0,width:l,style:n,hidden:a?"1":"0",bestFit:s?"1":"0",customWidth:u}}}}(e)})}),t}}(d),function(o,t){return function(e){return o.length&&e.push({name:"sheetData",children:o.map(function(r,n){return xC_getTemplate(r,n,t)})}),e}}(c,e+1),function(o){return function(t){return o.length&&t.push({name:"mergeCells",properties:{rawMap:{count:o.length}},children:o.map(function(e){return function(o){return{name:"mergeCell",properties:{rawMap:{ref:o}}}}(e)})}),t}}(h),function(o){return function(t){var e=o.top,n=o.right,a=o.bottom,l=o.left,c=o.header,h=o.footer;return t.push({name:"pageMargins",properties:{rawMap:{bottom:void 0===a?.75:a,footer:void 0===h?.3:h,header:void 0===c?.3:c,left:void 0===l?.7:l,right:void 0===n?.7:n,top:void 0===e?.75:e}}}),t}}(i),function(o){return function(t){return o&&t.push({name:"pageSetup",properties:{rawMap:{horizontalDpi:0,verticalDpi:0,orientation:OC(o.orientation),paperSize:EC(o.pageSize)}}}),t}}(a),function(o){return function(t){return o?(t.push({name:"headerFooter",properties:{rawMap:{differentFirst:null!=o.first?1:0,differentOddEven:null!=o.even?1:0}},children:NC(o)}),t):t}}(s),function(o){return function(t){return Oe.worksheetImages.get(o)&&t.push({name:"drawing",properties:{rawMap:{"r:id":"rId1"}}}),t}}(e));return{name:"worksheet",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}}],rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},children:p([])}},zs_getTemplate=function(o){return{name:"Relationships",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}},children:o.map(function(e){return function(o){return{name:"Relationship",properties:{rawMap:{Id:o.Id,Type:o.Type,Target:o.Target}}}}(e)})}},Bf=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},Oe=function(){function o(){}return o.createExcel=function(t,e,r){return this.addSheetName(e),function(o,t){1===(Yu=t)&&Vf(),o.forEach(sC)}(t,this.sheetNames.length),this.createWorksheet(e,r)},o.buildImageMap=function(t,e,r,n,i){var a=this.sheetNames.length,s=this.images.get(t.id);(!t.position||!t.position.row||!t.position.column)&&(t.position||(t.position={}),t.position=Object.assign({},t.position,{row:e,column:n.indexOf(r)+1}));var l=t;if(function(o,t){var e=o.position,r=e.colSpan,n=e.column;if(o.width)if(r)for(var i=t.slice(n-1,n+r-1),a=0,s=0;s<i.length;s++){var l=i[s].getActualWidth();if(o.width<a+l){o.position.colSpan=s+1,o.totalWidth=o.width,o.width=o.totalWidth-a;break}a+=l}else o.totalWidth=o.width}(l,n),function(o,t){var e=o.position,r=e.rowSpan,n=e.row;if(o.height)if(r)for(var i=0,a=0,s=n;s<n+r;s++){var l=tS(Ls(s,t)||20);if(o.height<i+l){o.position.rowSpan=a+1,o.totalHeight=o.height,o.height=o.totalHeight-i;break}i+=l,a++}else o.totalHeight=o.height}(l,i),s){var u=s.find(function(c){return c.sheetId===a});u?u.image.push(l):s.push({sheetId:a,image:[l]})}else this.images.set(l.id,[{sheetId:a,image:[l]}]),this.workbookImageIds.set(l.id,{type:l.imageType,index:this.workbookImageIds.size});this.buildSheetImageMap(a,l)},o.buildSheetImageMap=function(t,e){var r=this.worksheetImageIds.get(t);r||this.worksheetImageIds.set(t,r=new Map);var n=this.worksheetImages.get(t);n?(n.push(e),r.get(e.id)||r.set(e.id,{index:r.size,type:e.imageType})):(this.worksheetImages.set(t,[e]),r.set(e.id,{index:0,type:e.imageType}))},o.addSheetName=function(t){for(var e=f._.escapeString(t.name)||"",r="";-1!==this.sheetNames.indexOf(""+e+r);)if(""===r)r="_1";else{var n=parseInt(r.slice(1),10);r="_"+(n+1)}t.name=""+e+r,this.sheetNames.push(t.name)},o.getStringPosition=function(t){return this.sharedStrings.has(t)?this.sharedStrings.get(t):(this.sharedStrings.set(t,this.sharedStrings.size),this.sharedStrings.size-1)},o.resetFactory=function(){this.sharedStrings=new Map,this.images=new Map,this.worksheetImages=new Map,this.workbookImageIds=new Map,this.worksheetImageIds=new Map,this.sheetNames=[],this.factoryMode=f.WKI.SINGLE_SHEET},o.createWorkbook=function(){return Wt(function(o){return{name:"workbook",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}}],rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},children:[fC_getTemplate(o)]}}(this.sheetNames))},o.createStylesheet=function(t){return Wt(lC_getTemplate(t))},o.createSharedStrings=function(){return Wt(function(o){return{name:"sst",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main",count:o.size,uniqueCount:o.size}},children:DS(o)}}(this.sharedStrings))},o.createCore=function(t){return Wt(function(o){var e=(new Date).toJSON();return{name:"cp:coreProperties",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{cp:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",xsi:"http://www.w3.org/2001/XMLSchema-instance"}}]},children:[{name:"dc:creator",textNode:o},{name:"dc:title",textNode:"Workbook"},{name:"dcterms:created",properties:{rawMap:{"xsi:type":"dcterms:W3CDTF"}},textNode:e},{name:"dcterms:modified",properties:{rawMap:{"xsi:type":"dcterms:W3CDTF"}},textNode:e}]}}(t))},o.createContentTypes=function(t){return Wt(function(o){var t=new Array(o).fill(void 0).map(function(s,l){return{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",PartName:"/xl/worksheets/sheet"+(l+1)+".xml"}}),e=Oe.worksheetImages.size,r={};Oe.workbookImageIds.forEach(function(s){r[s.type]=!0});var n=new Array(e).fill(void 0).map(function(s,l){return{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.drawing+xml",PartName:"/xl/drawings/drawing"+(l+1)+".xml"}}),i=Object.keys(r).map(function(s){return{name:"Default",ContentType:"image/"+s,Extension:s}});return{name:"Types",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"}},children:Ri(Ri(Ri(Ri(Ri(Ri([],zu(i)),[{name:"Default",Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"},{name:"Default",ContentType:"application/xml",Extension:"xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",PartName:"/xl/workbook.xml"}]),zu(t)),[{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.theme+xml",PartName:"/xl/theme/theme1.xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",PartName:"/xl/styles.xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",PartName:"/xl/sharedStrings.xml"}]),zu(n)),[{name:"Override",ContentType:"application/vnd.openxmlformats-package.core-properties+xml",PartName:"/docProps/core.xml"}]).map(function(s){return function(o){return{name:o.name,properties:{rawMap:{Extension:o.Extension,PartName:o.PartName,ContentType:o.ContentType}}}}(s)})}}(t))},o.createRels=function(){var t=zs_getTemplate([{Id:"rId1",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",Target:"xl/workbook.xml"},{Id:"rId2",Type:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",Target:"docProps/core.xml"}]);return Wt(t)},o.createTheme=function(){return Wt(function(){return{name:"a:theme",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{a:"http://schemas.openxmlformats.org/drawingml/2006/main"}}],rawMap:{name:"Office Theme"}},children:[{name:"a:themeElements",children:[{name:"a:clrScheme",properties:{rawMap:{name:"Office"}},children:[Kt(["dk1","sysClr","windowText","000000"]),Kt(["lt1","sysClr","window","FFFFFF"]),Kt(["dk2","srgbClr","44546A"]),Kt(["lt2","srgbClr","E7E6E6"]),Kt(["accent1","srgbClr","4472C4"]),Kt(["accent2","srgbClr","ED7D31"]),Kt(["accent3","srgbClr","A5A5A5"]),Kt(["accent4","srgbClr","FFC000"]),Kt(["accent5","srgbClr","5B9BD5"]),Kt(["accent6","srgbClr","70AD47"]),Kt(["hlink","srgbClr","0563C1"]),Kt(["folHlink","srgbClr","954F72"])]},(o=f._.utf8_encode,{name:"a:fontScheme",properties:{rawMap:{name:"Office"}},children:[{name:"a:majorFont",children:[W(["latin","Calibri Light",void 0,"020F0302020204030204"]),W(["ea",""]),W(["cs",""]),W(["font",o("\u6e38\u30b4\u30b7\u30c3\u30af Light"),"Jpan"]),W(["font",o("\ub9d1\uc740 \uace0\ub515"),"Hang"]),W(["font",o("\u7b49\u7ebf Light"),"Hans"]),W(["font",o("\u65b0\u7d30\u660e\u9ad4"),"Hant"]),W(["font","Times New Roman","Arab"]),W(["font","Times New Roman","Hebr"]),W(["font","Tahoma","Thai"]),W(["font","Nyala","Ethi"]),W(["font","Vrinda","Beng"]),W(["font","Shruti","Gujr"]),W(["font","MoolBoran","Khmr"]),W(["font","Tunga","Knda"]),W(["font","Raavi","Guru"]),W(["font","Euphemia","Cans"]),W(["font","Plantagenet Cherokee","Cher"]),W(["font","Microsoft Yi Baiti","Yiii"]),W(["font","Microsoft Himalaya","Tibt"]),W(["font","MV Boli","Thaa"]),W(["font","Mangal","Deva"]),W(["font","Gautami","Telu"]),W(["font","Latha","Taml"]),W(["font","Estrangelo Edessa","Syrc"]),W(["font","Kalinga","Orya"]),W(["font","Kartika","Mlym"]),W(["font","DokChampa","Laoo"]),W(["font","Iskoola Pota","Sinh"]),W(["font","Mongolian Baiti","Mong"]),W(["font","Times New Roman","Viet"]),W(["font","Microsoft Uighur","Uigh"]),W(["font","Sylfaen","Geor"]),W(["font","Arial","Armn"]),W(["font","Leelawadee UI","Bugi"]),W(["font","Microsoft JhengHei","Bopo"]),W(["font","Javanese Text","Java"]),W(["font","Segoe UI","Lisu"]),W(["font","Myanmar Text","Mymr"]),W(["font","Ebrima","Nkoo"]),W(["font","Nirmala UI","Olck"]),W(["font","Ebrima","Osma"]),W(["font","Phagspa","Phag"]),W(["font","Estrangelo Edessa","Syrn"]),W(["font","Estrangelo Edessa","Syrj"]),W(["font","Estrangelo Edessa","Syre"]),W(["font","Nirmala UI","Sora"]),W(["font","Microsoft Tai Le","Tale"]),W(["font","Microsoft New Tai Lue","Talu"]),W(["font","Ebrima","Tfng"])]},{name:"a:minorFont",children:[W(["latin","Calibri",void 0,"020F0502020204030204"]),W(["ea",""]),W(["cs",""]),W(["font",o("\u6e38\u30b4\u30b7\u30c3\u30af"),"Jpan"]),W(["font",o("\ub9d1\uc740 \uace0\ub515"),"Hang"]),W(["font",o("\u7b49\u7ebf"),"Hans"]),W(["font",o("\u65b0\u7d30\u660e\u9ad4"),"Hant"]),W(["font","Arial","Arab"]),W(["font","Arial","Hebr"]),W(["font","Tahoma","Thai"]),W(["font","Nyala","Ethi"]),W(["font","Vrinda","Beng"]),W(["font","Shruti","Gujr"]),W(["font","DaunPenh","Khmr"]),W(["font","Tunga","Knda"]),W(["font","Raavi","Guru"]),W(["font","Euphemia","Cans"]),W(["font","Plantagenet Cherokee","Cher"]),W(["font","Microsoft Yi Baiti","Yiii"]),W(["font","Microsoft Himalaya","Tibt"]),W(["font","MV Boli","Thaa"]),W(["font","Mangal","Deva"]),W(["font","Gautami","Telu"]),W(["font","Latha","Taml"]),W(["font","Estrangelo Edessa","Syrc"]),W(["font","Kalinga","Orya"]),W(["font","Kartika","Mlym"]),W(["font","DokChampa","Laoo"]),W(["font","Iskoola Pota","Sinh"]),W(["font","Mongolian Baiti","Mong"]),W(["font","Arial","Viet"]),W(["font","Microsoft Uighur","Uigh"]),W(["font","Sylfaen","Geor"]),W(["font","Arial","Armn"]),W(["font","Leelawadee UI","Bugi"]),W(["font","Microsoft JhengHei","Bopo"]),W(["font","Javanese Text","Java"]),W(["font","Segoe UI","Lisu"]),W(["font","Myanmar Text","Mymr"]),W(["font","Ebrima","Nkoo"]),W(["font","Nirmala UI","Olck"]),W(["font","Ebrima","Osma"]),W(["font","Phagspa","Phag"]),W(["font","Estrangelo Edessa","Syrn"]),W(["font","Estrangelo Edessa","Syrj"]),W(["font","Estrangelo Edessa","Syre"]),W(["font","Nirmala UI","Sora"]),W(["font","Microsoft Tai Le","Tale"]),W(["font","Microsoft New Tai Lue","Talu"]),W(["font","Ebrima","Tfng"])]}]}),{name:"a:fmtScheme",properties:{rawMap:{name:"Office"}},children:[{name:"a:fillStyleLst",children:[ks("phClr"),Uu(["1",["0","phClr","105000","110000","67000"],["50000","phClr","103000","105000","73000"],["100000","phClr","109000","105000","81000"],["5400000","0"]]),Uu(["1",["0","phClr","103000","102000","94000"],["50000","phClr","110000","100000",void 0,"100000"],["100000","phClr","120000","99000",void 0,"78000"],["5400000","0"]])]},{name:"a:lnStyleLst",children:[Wu(["6350","flat","sng","ctr"]),Wu(["12700","flat","sng","ctr"]),Wu(["19050","flat","sng","ctr"])]},{name:"a:effectStyleLst",children:[Ku(),Ku(),Ku(["57150","19050","5400000","ctr","0"])]},{name:"a:bgFillStyleLst",children:[ks("phClr"),ks("phClr",[Sr("tint","95000"),Sr("satMod","170000")]),Uu(["1",["0","phClr","150000","102000","93000","98000"],["50000","phClr","130000","103000","98000","90000"],["100000","phClr","120000",void 0,void 0,"63000"],["5400000","0"]])]}]}]},{name:"a:objectDefaults"},{name:"a:extraClrSchemeLst"}]};var o}())},o.createWorkbookRels=function(t){var e=new Array(t).fill(void 0).map(function(n,i){return{Id:"rId"+(i+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",Target:"worksheets/sheet"+(i+1)+".xml"}}),r=zs_getTemplate(Bf(Bf([],function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i}(e)),[{Id:"rId"+(t+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",Target:"theme/theme1.xml"},{Id:"rId"+(t+2),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Target:"styles.xml"},{Id:"rId"+(t+3),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Target:"sharedStrings.xml"}]));return Wt(r)},o.createDrawing=function(t){return Wt(function(o){var t=o.sheetIndex,e=Oe.worksheetImages.get(t),r=Oe.worksheetImageIds.get(t),n=e.map(function(i,a){var s=function(o){o.fitCell=!!o.fitCell||!o.width||!o.height;var t=o.position,e=void 0===t?{}:t,r=o.fitCell,n=o.width,i=void 0===n?0:n,a=o.height,s=void 0===a?0:a,l=o.totalHeight,u=o.totalWidth,c=e.offsetX,d=void 0===c?0:c,h=e.offsetY,p=void 0===h?0:h,v=e.row,g=void 0===v?1:v,y=e.rowSpan,S=void 0===y?1:y,m=e.column,C=void 0===m?1:m,_=e.colSpan,w=void 0===_?1:_;return{from:{row:g-1,col:C-1,offsetX:Mi(d),offsetY:Mi(p)},to:{row:g-1+(r?1:S-1),col:C-1+(r?1:w-1),offsetX:Mi(i+d),offsetY:Mi(s+p)},height:Mi(l||s),width:Mi(u||i)}}(i);return{name:"xdr:twoCellAnchor",properties:{rawMap:{editAs:"absolute"}},children:[Ff("from",s.from),Ff("to",s.to),yS(i,a,r.get(i.id).index,s),{name:"xdr:clientData"}]}});return{name:"xdr:wsDr",properties:{rawMap:{"xmlns:a":"http://schemas.openxmlformats.org/drawingml/2006/main","xmlns:xdr":"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing"}},children:n}}({sheetIndex:t}))},o.createDrawingRel=function(t){var e=this,r=this.worksheetImageIds.get(t),n=[];return r.forEach(function(i,a){n.push({Id:"rId"+(i.index+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:"../media/image"+(e.workbookImageIds.get(a).index+1)+"."+i.type})}),Wt(zs_getTemplate(n))},o.createWorksheetDrawingRel=function(t){var e=zs_getTemplate([{Id:"rId1",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",Target:"../drawings/drawing"+(t+1)+".xml"}]);return Wt(e)},o.createWorksheet=function(t,e){return Wt(jC_getTemplate({worksheet:t,currentSheet:this.sheetNames.length-1,config:e}))},o.sharedStrings=new Map,o.sheetNames=[],o.images=new Map,o.worksheetImages=new Map,o.workbookImageIds=new Map,o.worksheetImageIds=new Map,o.factoryMode=f.WKI.SINGLE_SHEET,o}(),UC=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),WC=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return UC(t,o),t.prototype.createExcel=function(e){return Oe.createExcel(this.excelStyles,e,this.config)},t.prototype.getDataTypeForValue=function(e){return void 0===e?"empty":this.isNumerical(e)?"n":"s"},t.prototype.getType=function(e,r,n){if(this.isFormula(n))return"f";if(r&&r.dataType)switch(r.dataType.toLocaleLowerCase()){case"formula":return"f";case"string":return"s";case"number":return"n";case"datetime":return"d";case"error":return"e";case"boolean":return"b";default:console.warn("AG Grid: Unrecognized data type for excel export ["+r.id+".dataType="+r.dataType+"]")}return e},t.prototype.addImage=function(e,r,n){if(this.config.addImageToCell){var i=this.config.addImageToCell(e,r,n);if(i)return Oe.buildImageMap(i.image,e,r,this.columnsToExport,this.config.rowHeight),i}},t.prototype.createCell=function(e,r,n,i){var a=this.getStyleById(e);!a?.dataType&&"s"===r&&i&&(n=i);var s=this.getType(r,a,n)||r;return{styleId:a?e:void 0,data:{type:s,value:this.getCellValue(s,n)}}},t.prototype.createMergedCell=function(e,r,n,i){var a=n??"";return{styleId:this.getStyleById(e)?e:void 0,data:{type:r,value:"s"===r?Oe.getStringPosition(a).toString():n},mergeAcross:i}},t.prototype.getCellValue=function(e,r){if(null==r)return Oe.getStringPosition("").toString();switch(e){case"s":return""===r?"":Oe.getStringPosition(r).toString();case"f":return r.slice(1);case"n":return Number(r).toString();default:return r}},t}(Rf),KC=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Hs=function(){return Hs=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},Hs.apply(this,arguments)},zr=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},$u=function(o){var t=o.data,e=o.fontSize,r=void 0===e?11:e,n=o.author,i=void 0===n?"AG Grid":n,a=Oe.images.size>0;if(f.YeD.addFolders(["_rels/","docProps/","xl/","xl/theme/","xl/_rels/","xl/worksheets/"]),a){f.YeD.addFolders(["xl/worksheets/_rels","xl/drawings/","xl/drawings/_rels","xl/media/"]);var s=0;Oe.images.forEach(function(d){var h=d[0].image[0];f.YeD.addFile("xl/media/image"+ ++s+"."+h.imageType,h.base64,!0)})}if(!t||0===t.length)return console.warn("AG Grid: Invalid params supplied to getMultipleSheetsAsExcel() - `ExcelExportParams.data` is empty."),void Oe.resetFactory();var l=t.length,u=0;return t.forEach(function(d,h){f.YeD.addFile("xl/worksheets/sheet"+(h+1)+".xml",d),a&&Oe.worksheetImages.get(h)&&$C(h,u++)}),f.YeD.addFile("xl/workbook.xml",Oe.createWorkbook()),f.YeD.addFile("xl/styles.xml",Oe.createStylesheet(r)),f.YeD.addFile("xl/sharedStrings.xml",Oe.createSharedStrings()),f.YeD.addFile("xl/theme/theme1.xml",Oe.createTheme()),f.YeD.addFile("xl/_rels/workbook.xml.rels",Oe.createWorkbookRels(l)),f.YeD.addFile("docProps/core.xml",Oe.createCore(i)),f.YeD.addFile("[Content_Types].xml",Oe.createContentTypes(l)),f.YeD.addFile("_rels/.rels",Oe.createRels()),Oe.resetFactory(),f.YeD.getContent(o.mimeType||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet")},$C=function(o,t){var e="xl/drawings",r=e+"/drawing"+(t+1)+".xml",i="xl/worksheets/_rels/sheet"+(o+1)+".xml.rels";f.YeD.addFile(e+"/_rels/drawing"+(t+1)+".xml.rels",Oe.createDrawingRel(o)),f.YeD.addFile(r,Oe.createDrawing(o)),f.YeD.addFile(i,Oe.createWorksheetDrawingRel(t))},XC=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.exportMode="xlsx",e}return KC(t,o),t.prototype.postConstruct=function(){this.setBeans({gridSerializer:this.gridSerializer,gridOptionsService:this.gridOptionsService})},t.prototype.getMergedParams=function(e){var r=this.gridOptionsService.get("defaultExcelExportParams");return Object.assign({},r,e)},t.prototype.getData=function(e){return this.setExportMode(e.exportMode||"xlsx"),o.prototype.getData.call(this,e)},t.prototype.export=function(e){if(this.isExportSuppressed())return console.warn("AG Grid: Export cancelled. Export is not allowed as per your configuration."),"";var r=this.getMergedParams(e),n=this.getData(r),a=this.packageFile({data:[n],fontSize:r.fontSize,author:r.author,mimeType:r.mimeType});return a&&f.UpU.download(this.getFileName(r.fileName),a),n},t.prototype.exportDataAsExcel=function(e){return this.export(e)},t.prototype.getDataAsExcel=function(e){var r=this.getMergedParams(e),n=this.getData(r);return e&&"xml"===e.exportMode?n:this.packageFile({data:[n],fontSize:r.fontSize,author:r.author,mimeType:r.mimeType})},t.prototype.setFactoryMode=function(e,r){void 0===r&&(r="xlsx"),("xlsx"===r?Oe:ju).factoryMode=e},t.prototype.getFactoryMode=function(e){return("xlsx"===e?Oe:ju).factoryMode},t.prototype.getSheetDataForExcel=function(e){var r=this.getMergedParams(e);return this.getData(r)},t.prototype.getMultipleSheetsAsExcel=function(e){return $u(e)},t.prototype.exportMultipleSheetsAsExcel=function(e){return function(o){var t=o.fileName,e=void 0===t?"export.xlsx":t,r=$u(o);r&&f.UpU.download(e,r)}(e)},t.prototype.getDefaultFileName=function(){return"export."+this.getExportMode()},t.prototype.getDefaultFileExtension=function(){return this.getExportMode()},t.prototype.createSerializingSession=function(e){var r=this,n=r.columnModel,i=r.valueService,a=r.gridOptionsService,s=r.valueFormatterService,l=r.valueParserService,u="xlsx"===this.getExportMode(),c="ag-grid";null!=e.sheetName&&(c=f._.utf8_encode(e.sheetName.toString().substr(0,31)));var d=Hs(Hs({},e),{sheetName:c,columnModel:n,valueService:i,gridOptionsService:a,valueFormatterService:s,valueParserService:l,headerRowHeight:e.headerRowHeight||e.rowHeight,baseExcelStyles:this.gridOptionsService.get("excelStyles")||[],styleLinker:this.styleLinker.bind(this)});return new(u?WC:sS)(d)},t.prototype.styleLinker=function(e){var r=e.rowType,n=e.rowIndex,i=e.value,a=e.column,s=e.columnGroup,l=e.node,u=r===f.HIZ.HEADER,c=r===f.HIZ.HEADER_GROUPING,d=u?a:s,h=[];if(u||c)return h.push("header"),c&&h.push("headerGroup"),d&&(h=h.concat(f.g5g.getHeaderClassesFromColDef(d.getDefinition(),this.gridOptionsService,a||null,s||null))),h;var p=this.gridOptionsService.get("excelStyles"),v=["cell"];if(!p||!p.length)return v;var g=p.map(function(y){return y.id});return this.stylingService.processAllCellClasses(a.getDefinition(),{value:i,data:l.data,node:l,colDef:a.getDefinition(),column:a,rowIndex:n,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context},function(y){g.indexOf(y)>-1&&v.push(y)}),v.sort(function(y,S){return g.indexOf(y)<g.indexOf(S)?-1:1})},t.prototype.isExportSuppressed=function(){return this.gridOptionsService.is("suppressExcelExport")},t.prototype.setExportMode=function(e){this.exportMode=e},t.prototype.getExportMode=function(){return this.exportMode},t.prototype.packageFile=function(e){return"xml"===this.getExportMode()?new Blob(["\ufeff",e.data[0]],{type:e.mimeType||"application/vnd.ms-excel"}):$u(e)},zr([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),zr([(0,f.Qnc)("valueService")],t.prototype,"valueService",void 0),zr([(0,f.Qnc)("stylingService")],t.prototype,"stylingService",void 0),zr([(0,f.Qnc)("gridSerializer")],t.prototype,"gridSerializer",void 0),zr([(0,f.Qnc)("gridOptionsService")],t.prototype,"gridOptionsService",void 0),zr([(0,f.Qnc)("valueFormatterService")],t.prototype,"valueFormatterService",void 0),zr([(0,f.Qnc)("valueParserService")],t.prototype,"valueParserService",void 0),zr([f.QhY],t.prototype,"postConstruct",null),zr([(0,f.ekA)("excelCreator")],t)}(f.gE6),ZC={version:"30.2.1",moduleName:f.ekS.ExcelExportModule,beans:[XC,f.WT2,f.c9$],dependantModules:[f.KKM,Ue]},qC=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ha=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Hr=function(o){return o[o.EXPANDED=0]="EXPANDED",o[o.COLLAPSED=1]="COLLAPSED",o[o.INDETERMINATE=2]="INDETERMINATE",o}(Hr||{}),JC=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return qC(t,o),t.prototype.preConstruct=function(){this.setTemplate('<div class="ag-filter-toolpanel-search" role="presentation">\n                <div ref="eExpand" class="ag-filter-toolpanel-expand"></div>\n                <ag-input-text-field ref="eFilterTextField" class="ag-filter-toolpanel-search-input"></ag-input-text-field>\n            </div>')},t.prototype.postConstruct=function(){var e=this.localeService.getLocaleTextFunc();this.eFilterTextField.onValueChange(this.onSearchTextChanged.bind(this)),this.eFilterTextField.setInputAriaLabel(e("ariaFilterColumnsInput","Filter Columns Input")),this.createExpandIcons(),this.setExpandState(Hr.EXPANDED),this.addManagedListener(this.eExpand,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eventService,f.YFc.EVENT_NEW_COLUMNS_LOADED,this.showOrHideOptions.bind(this))},t.prototype.init=function(e){this.params=e,this.columnModel.isReady()&&this.showOrHideOptions()},t.prototype.createExpandIcons=function(){this.eExpand.appendChild(this.eExpandChecked=f._.createIconNoSpan("columnSelectOpen",this.gridOptionsService)),this.eExpand.appendChild(this.eExpandUnchecked=f._.createIconNoSpan("columnSelectClosed",this.gridOptionsService)),this.eExpand.appendChild(this.eExpandIndeterminate=f._.createIconNoSpan("columnSelectIndeterminate",this.gridOptionsService))},t.prototype.showOrHideOptions=function(){var e=!this.params.suppressFilterSearch,r=!this.params.suppressExpandAll,n=this.localeService.getLocaleTextFunc();this.eFilterTextField.setInputPlaceholder(n("searchOoo","Search..."));var a=this.columnModel.getAllGridColumns().some(function(s){return s.getOriginalParent()&&s.isFilterAllowed()});f._.setDisplayed(this.eFilterTextField.getGui(),e),f._.setDisplayed(this.eExpand,r&&a)},t.prototype.onSearchTextChanged=function(){var e=this;this.onSearchTextChangedDebounced||(this.onSearchTextChangedDebounced=f._.debounce(function(){e.dispatchEvent({type:"searchChanged",searchText:e.eFilterTextField.getValue()})},300)),this.onSearchTextChangedDebounced()},t.prototype.onExpandClicked=function(){this.dispatchEvent(this.currentExpandState===Hr.EXPANDED?{type:"collapseAll"}:{type:"expandAll"})},t.prototype.setExpandState=function(e){this.currentExpandState=e,f._.setDisplayed(this.eExpandChecked,this.currentExpandState===Hr.EXPANDED),f._.setDisplayed(this.eExpandUnchecked,this.currentExpandState===Hr.COLLAPSED),f._.setDisplayed(this.eExpandIndeterminate,this.currentExpandState===Hr.INDETERMINATE)},ha([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),ha([(0,f.IzG)("eExpand")],t.prototype,"eExpand",void 0),ha([(0,f.IzG)("eFilterTextField")],t.prototype,"eFilterTextField",void 0),ha([f.Ydw],t.prototype,"preConstruct",null),ha([f.QhY],t.prototype,"postConstruct",null),t}(f.YlN),e_=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),pn=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},jf=function(o){function t(e){void 0===e&&(e=!1);var r=o.call(this,t.TEMPLATE)||this;return r.expanded=!1,r.hideHeader=e,r}return e_(t,o),t.prototype.postConstruct=function(){this.eExpandChecked=f._.createIconNoSpan("columnSelectOpen",this.gridOptionsService),this.eExpandUnchecked=f._.createIconNoSpan("columnSelectClosed",this.gridOptionsService),this.eExpand.appendChild(this.eExpandChecked),this.eExpand.appendChild(this.eExpandUnchecked)},t.prototype.setColumn=function(e){var r=this;this.column=e,this.eFilterName.innerText=this.columnModel.getDisplayNameForColumn(this.column,"filterToolPanel",!1)||"",this.addManagedListener(this.eFilterToolPanelHeader,"click",this.toggleExpanded.bind(this)),this.addManagedListener(this.eFilterToolPanelHeader,"keydown",function(n){(n.key===f.Axe.ENTER||n.key===f.Axe.SPACE)&&(n.preventDefault(),r.toggleExpanded())}),this.addManagedListener(this.eventService,f.YFc.EVENT_FILTER_OPENED,this.onFilterOpened.bind(this)),this.addInIcon("filter",this.eFilterIcon,this.column),f._.setDisplayed(this.eFilterIcon,this.isFilterActive(),{skipAriaHidden:!0}),f._.setDisplayed(this.eExpandChecked,!1),this.hideHeader?(f._.setDisplayed(this.eFilterToolPanelHeader,!1),this.eFilterToolPanelHeader.removeAttribute("tabindex")):this.eFilterToolPanelHeader.setAttribute("tabindex","0"),this.addManagedListener(this.column,f.ouE.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,f.YFc.EVENT_FILTER_DESTROYED,this.onFilterDestroyed.bind(this))},t.prototype.getColumn=function(){return this.column},t.prototype.getColumnFilterName=function(){return this.columnModel.getDisplayNameForColumn(this.column,"filterToolPanel",!1)},t.prototype.addCssClassToTitleBar=function(e){this.eFilterToolPanelHeader.classList.add(e)},t.prototype.addInIcon=function(e,r,n){if(null!=r){var i=f._.createIconNoSpan(e,this.gridOptionsService,n);r.appendChild(i)}},t.prototype.isFilterActive=function(){return this.filterManager.isFilterActive(this.column)},t.prototype.onFilterChanged=function(){f._.setDisplayed(this.eFilterIcon,this.isFilterActive(),{skipAriaHidden:!0}),this.dispatchEvent({type:f.ouE.EVENT_FILTER_CHANGED})},t.prototype.onFilterDestroyed=function(e){this.expanded&&"api"===e.source&&e.column.getId()===this.column.getId()&&this.columnModel.getPrimaryColumn(this.column)&&(this.removeFilterElement(),this.addFilterElement())},t.prototype.toggleExpanded=function(){this.expanded?this.collapse():this.expand()},t.prototype.expand=function(){this.expanded||(this.expanded=!0,f._.setAriaExpanded(this.eFilterToolPanelHeader,!0),f._.setDisplayed(this.eExpandChecked,!0),f._.setDisplayed(this.eExpandUnchecked,!1),this.addFilterElement())},t.prototype.addFilterElement=function(){var e=this,r=f._.loadTemplate('<div class="ag-filter-toolpanel-instance-filter"></div>'),n=this.filterManager.getOrCreateFilterWrapper(this.column,"TOOLBAR");if(n){var i=n.filterPromise,a=n.guiPromise;i?.then(function(s){e.underlyingFilter=s,s&&a.then(function(l){l&&r.appendChild(l),e.agFilterToolPanelBody.appendChild(r),s.afterGuiAttached&&s.afterGuiAttached({container:"toolPanel"})})})}},t.prototype.collapse=function(){var e,r;this.expanded&&(this.expanded=!1,f._.setAriaExpanded(this.eFilterToolPanelHeader,!1),this.removeFilterElement(),f._.setDisplayed(this.eExpandChecked,!1),f._.setDisplayed(this.eExpandUnchecked,!0),null===(r=null===(e=this.underlyingFilter)||void 0===e?void 0:e.afterGuiDetached)||void 0===r||r.call(e))},t.prototype.removeFilterElement=function(){f._.clearElement(this.agFilterToolPanelBody)},t.prototype.isExpanded=function(){return this.expanded},t.prototype.refreshFilter=function(e){var r;if(this.expanded){var n=this.underlyingFilter;n&&(e?"function"==typeof n.refreshVirtualList&&n.refreshVirtualList():null===(r=n.afterGuiDetached)||void 0===r||r.call(n))}},t.prototype.onFilterOpened=function(e){"COLUMN_MENU"===e.source&&e.column===this.column&&this.expanded&&this.collapse()},t.TEMPLATE='\n        <div class="ag-filter-toolpanel-instance">\n            <div class="ag-filter-toolpanel-header ag-filter-toolpanel-instance-header" ref="eFilterToolPanelHeader" role="button" aria-expanded="false">\n                <div ref="eExpand" class="ag-filter-toolpanel-expand"></div>\n                <span ref="eFilterName" class="ag-header-cell-text"></span>\n                <span ref="eFilterIcon" class="ag-header-icon ag-filter-icon ag-filter-toolpanel-instance-header-icon" aria-hidden="true"></span>\n            </div>\n            <div class="ag-filter-toolpanel-instance-body ag-filter" ref="agFilterToolPanelBody"></div>\n        </div>',pn([(0,f.IzG)("eFilterToolPanelHeader")],t.prototype,"eFilterToolPanelHeader",void 0),pn([(0,f.IzG)("eFilterName")],t.prototype,"eFilterName",void 0),pn([(0,f.IzG)("agFilterToolPanelBody")],t.prototype,"agFilterToolPanelBody",void 0),pn([(0,f.IzG)("eFilterIcon")],t.prototype,"eFilterIcon",void 0),pn([(0,f.IzG)("eExpand")],t.prototype,"eExpand",void 0),pn([(0,f.Qnc)("filterManager")],t.prototype,"filterManager",void 0),pn([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),pn([f.QhY],t.prototype,"postConstruct",null),t}(f.YlN),t_=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Us=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},zn=function(o){function t(e,r,n,i,a){var s=o.call(this)||this;return s.columnGroup=e,s.childFilterComps=r,s.depth=i,s.expandedCallback=n,s.showingColumn=a,s}return t_(t,o),t.prototype.preConstruct=function(){this.setTemplate(t.TEMPLATE,{filterGroupComp:{cssIdentifier:"filter-toolpanel",direction:"vertical"}})},t.prototype.init=function(){var e=this;this.setGroupTitle(),this.filterGroupComp.setAlignItems("stretch"),this.filterGroupComp.addCssClass("ag-filter-toolpanel-group-level-"+this.depth),this.filterGroupComp.addCssClassToTitleBar("ag-filter-toolpanel-group-level-"+this.depth+"-header"),this.childFilterComps.forEach(function(r){e.filterGroupComp.addItem(r),r.addCssClassToTitleBar("ag-filter-toolpanel-group-level-"+(e.depth+1)+"-header")}),this.refreshFilterClass(),this.addExpandCollapseListeners(),this.addFilterChangedListeners(),this.setupTooltip()},t.prototype.setupTooltip=function(){var e=this;if(this.showingColumn){var r=function(){var n=e.columnGroup.getColDef().headerTooltip;e.setTooltip(n)};r(),this.addManagedListener(this.eventService,f.YFc.EVENT_NEW_COLUMNS_LOADED,r)}},t.prototype.getTooltipParams=function(){var e=o.prototype.getTooltipParams.call(this);return e.location="filterToolPanelColumnGroup",e},t.prototype.addCssClassToTitleBar=function(e){this.filterGroupComp.addCssClassToTitleBar(e)},t.prototype.refreshFilters=function(e){this.childFilterComps.forEach(function(r){r instanceof t?r.refreshFilters(e):r.refreshFilter(e)})},t.prototype.isColumnGroup=function(){return this.columnGroup instanceof f.c$I},t.prototype.isExpanded=function(){return this.filterGroupComp.isExpanded()},t.prototype.getChildren=function(){return this.childFilterComps},t.prototype.getFilterGroupName=function(){return this.filterGroupName?this.filterGroupName:""},t.prototype.getFilterGroupId=function(){return this.columnGroup.getId()},t.prototype.hideGroupItem=function(e,r){this.filterGroupComp.hideItem(e,r)},t.prototype.hideGroup=function(e){this.setDisplayed(!e)},t.prototype.forEachToolPanelFilterChild=function(e){this.childFilterComps.forEach(function(r){r instanceof jf&&e(r)})},t.prototype.addExpandCollapseListeners=function(){var e=this,r=this.isColumnGroup()?function(){return e.expandedCallback()}:function(){return e.forEachToolPanelFilterChild(function(i){return i.expand()})},n=this.isColumnGroup()?function(){return e.expandedCallback()}:function(){return e.forEachToolPanelFilterChild(function(i){return i.collapse()})};this.addManagedListener(this.filterGroupComp,f.SKM.EVENT_EXPANDED,r),this.addManagedListener(this.filterGroupComp,f.SKM.EVENT_COLLAPSED,n)},t.prototype.getColumns=function(){return this.columnGroup instanceof f.c$I?this.columnGroup.getLeafColumns():[this.columnGroup]},t.prototype.addFilterChangedListeners=function(){var e=this;this.getColumns().forEach(function(r){e.addManagedListener(r,f.ouE.EVENT_FILTER_CHANGED,function(){return e.refreshFilterClass()})}),this.columnGroup instanceof f.c$I||this.addManagedListener(this.eventService,f.YFc.EVENT_FILTER_OPENED,this.onFilterOpened.bind(this))},t.prototype.refreshFilterClass=function(){var e=this.getColumns();this.filterGroupComp.addOrRemoveCssClass("ag-has-filter",e.some(function(n){return n.isFilterActive()}))},t.prototype.onFilterOpened=function(e){"COLUMN_MENU"===e.source&&e.column===this.columnGroup&&this.isExpanded()&&this.collapse()},t.prototype.expand=function(){this.filterGroupComp.toggleGroupExpand(!0)},t.prototype.collapse=function(){this.filterGroupComp.toggleGroupExpand(!1)},t.prototype.setGroupTitle=function(){this.filterGroupName=this.columnGroup instanceof f.c$I?this.getColumnGroupName(this.columnGroup):this.getColumnName(this.columnGroup),this.filterGroupComp.setTitle(this.filterGroupName||"")},t.prototype.getColumnGroupName=function(e){return this.columnModel.getDisplayNameForProvidedColumnGroup(null,e,"filterToolPanel")},t.prototype.getColumnName=function(e){return this.columnModel.getDisplayNameForColumn(e,"filterToolPanel",!1)},t.prototype.destroyFilters=function(){this.childFilterComps=this.destroyBeans(this.childFilterComps),f._.clearElement(this.getGui())},t.prototype.destroy=function(){this.destroyFilters(),o.prototype.destroy.call(this)},t.TEMPLATE='<div class="ag-filter-toolpanel-group-wrapper">\n            <ag-group-component ref="filterGroupComp"></ag-group-component>\n        </div>',Us([(0,f.IzG)("filterGroupComp")],t.prototype,"filterGroupComp",void 0),Us([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),Us([f.Ydw],t.prototype,"preConstruct",null),Us([f.QhY],t.prototype,"init",null),t}(f.YlN),r_=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ws=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},n_=function(o){function t(){var e=o.call(this,t.TEMPLATE)||this;return e.initialised=!1,e.filterGroupComps=[],e}return r_(t,o),t.prototype.init=function(e){var r=this;this.initialised=!0;var n={suppressExpandAll:!1,suppressFilterSearch:!1,suppressSyncLayoutWithGrid:!1,api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsService.context};f._.mergeDeep(n,e),this.params=n,this.params.suppressSyncLayoutWithGrid||this.addManagedListener(this.eventService,f.YFc.EVENT_COLUMN_MOVED,function(){return r.onColumnsChanged()}),this.addManagedListener(this.eventService,f.YFc.EVENT_NEW_COLUMNS_LOADED,function(){return r.onColumnsChanged()}),this.addManagedListener(this.eventService,f.YFc.EVENT_TOOL_PANEL_VISIBLE_CHANGED,function(i){"filters"===i.key&&r.refreshFilters(i.visible)}),this.columnModel.isReady()&&this.onColumnsChanged()},t.prototype.onColumnsChanged=function(){var e=this.columnModel.isPivotMode();this.params.suppressSyncLayoutWithGrid||e?this.buildTreeFromProvidedColumnDefs():this.syncFilterLayout()},t.prototype.syncFilterLayout=function(){this.toolPanelColDefService.syncLayoutWithGrid(this.setFiltersLayout.bind(this))},t.prototype.buildTreeFromProvidedColumnDefs=function(){var e=this.columnModel.getPrimaryColumnTree();this.recreateFilters(e)},t.prototype.setFiltersLayout=function(e){var r=this.toolPanelColDefService.createColumnTree(e);this.recreateFilters(r)},t.prototype.recreateFilters=function(e){var r=this,n=this.gridOptionsService.getDocument().activeElement,i=this.getExpansionState();this.destroyFilters(),this.filterGroupComps=this.recursivelyAddComps(e,0,i);var a=this.filterGroupComps.length;a&&(this.filterGroupComps.forEach(function(s){return r.appendChild(s)}),this.setFirstAndLastVisible(0,a-1)),f._.exists(this.searchFilterText)&&this.searchFilters(this.searchFilterText),this.fireExpandedEvent(),this.getGui().contains(n)&&n.focus()},t.prototype.recursivelyAddComps=function(e,r,n){var i=this;return f._.flatten(e.map(function(a){if(a instanceof f.c$I)return f._.flatten(i.recursivelyAddFilterGroupComps(a,r,n));var s=a;if(!i.shouldDisplayFilter(s))return[];var u=new jf(0===r);if(i.createBean(u),u.setColumn(s),n.get(s.getId())&&u.expand(),r>0)return u;var c=i.createBean(new zn(s,[u],i.onGroupExpanded.bind(i),r,!0));return c.addCssClassToTitleBar("ag-filter-toolpanel-header"),n.get(c.getFilterGroupId())||c.collapse(),c}))},t.prototype.recursivelyAddFilterGroupComps=function(e,r,n){if(this.filtersExistInChildren(e.getChildren())){var i=e.getColGroupDef();if(i&&i.suppressFiltersToolPanel)return[];var a=e.isPadding()?r:r+1,s=f._.flatten(this.recursivelyAddComps(e.getChildren(),a,n));if(e.isPadding())return s;var l=new zn(e,s,this.onGroupExpanded.bind(this),r,!1);return this.createBean(l),l.addCssClassToTitleBar("ag-filter-toolpanel-header"),!1===n.get(l.getFilterGroupId())&&l.collapse(),[l]}},t.prototype.filtersExistInChildren=function(e){var r=this;return e.some(function(n){return n instanceof f.c$I?r.filtersExistInChildren(n.getChildren()):r.shouldDisplayFilter(n)})},t.prototype.shouldDisplayFilter=function(e){var r=e.getColDef()&&e.getColDef().suppressFiltersToolPanel;return e.isFilterAllowed()&&!r},t.prototype.getExpansionState=function(){var e=new Map,r=function(n){e.set(n.getFilterGroupId(),n.isExpanded()),n.getChildren().forEach(function(i){i instanceof zn?r(i):e.set(i.getColumn().getId(),i.isExpanded())})};return this.filterGroupComps.forEach(r),e},t.prototype.refresh=function(){},t.prototype.setVisible=function(e){o.prototype.setDisplayed.call(this,e),e&&!this.initialised&&this.init(this.params)},t.prototype.expandFilterGroups=function(e,r){var n=[],i=function(s){var l=s.getFilterGroupId();(!r||f._.includes(r,l))&&(e&&s.isColumnGroup()?s.expand():s.collapse(),n.push(l)),s.getChildren().forEach(function(c){c instanceof zn&&i(c)})};if(this.filterGroupComps.forEach(i),this.onGroupExpanded(),r){var a=r.filter(function(s){return n.indexOf(s)<0});a.length>0&&console.warn("AG Grid: unable to find groups for these supplied groupIds:",a)}},t.prototype.expandFilters=function(e,r){var n=[],i=function(s){if(s instanceof zn){var l=!1;return s.getChildren().forEach(function(d){i(d)&&(e?(s.expand(),l=!0):s.isColumnGroup()||s.collapse())}),l}var u=s.getColumn().getColId(),c=!r||f._.includes(r,u);return c&&(e?s.expand():s.collapse(),n.push(u)),c};if(this.filterGroupComps.forEach(i),this.onGroupExpanded(),r){var a=r.filter(function(s){return n.indexOf(s)<0});a.length>0&&console.warn("AG Grid: unable to find columns for these supplied colIds:",a)}},t.prototype.onGroupExpanded=function(){this.fireExpandedEvent()},t.prototype.fireExpandedEvent=function(){var e=0,r=0,n=function(a){a.isColumnGroup()&&(a.isExpanded()?e++:r++,a.getChildren().forEach(function(s){s instanceof zn&&n(s)}))};this.filterGroupComps.forEach(n),this.dispatchEvent({type:"groupExpanded",state:e>0&&r>0?Hr.INDETERMINATE:r>0?Hr.COLLAPSED:Hr.EXPANDED})},t.prototype.performFilterSearch=function(e){this.searchFilterText=f._.exists(e)?e.toLowerCase():null,this.searchFilters(this.searchFilterText)},t.prototype.searchFilters=function(e){var i,a,r=function(s){return!f._.exists(e)||-1!==s.toLowerCase().indexOf(e)},n=function(s,l){if(!(s instanceof zn))return r(s.getColumnFilterName()||"");var u=s.getChildren(),c=r(s.getFilterGroupName()),d=l||c;if(d){s.hideGroup(!1);for(var h=0;h<u.length;h++)n(u[h],d),s.hideGroupItem(!1,h);return!0}var p=!1;return u.forEach(function(v,g){var y=n(v,l);s.hideGroupItem(!y,g),y&&(p=!0)}),s.hideGroup(!p),p};this.filterGroupComps.forEach(function(s,l){n(s,!1),void 0===i?s.containsCssClass("ag-hidden")||(i=l,a=l):!s.containsCssClass("ag-hidden")&&a!==l&&(a=l)}),this.setFirstAndLastVisible(i,a)},t.prototype.setFirstAndLastVisible=function(e,r){this.filterGroupComps.forEach(function(n,i){n.removeCssClass("ag-first-group-visible"),n.removeCssClass("ag-last-group-visible"),i===e&&n.addCssClass("ag-first-group-visible"),i===r&&n.addCssClass("ag-last-group-visible")})},t.prototype.refreshFilters=function(e){this.filterGroupComps.forEach(function(r){return r.refreshFilters(e)})},t.prototype.destroyFilters=function(){this.filterGroupComps=this.destroyBeans(this.filterGroupComps),f._.clearElement(this.getGui())},t.prototype.destroy=function(){this.destroyFilters(),o.prototype.destroy.call(this)},t.TEMPLATE='<div class="ag-filter-list-panel"></div>',Ws([(0,f.Qnc)("gridApi")],t.prototype,"gridApi",void 0),Ws([(0,f.Qnc)("columnApi")],t.prototype,"columnApi",void 0),Ws([(0,f.Qnc)("toolPanelColDefService")],t.prototype,"toolPanelColDefService",void 0),Ws([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),t}(f.YlN),i_=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),pa=function(){return pa=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},pa.apply(this,arguments)},Ks=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},o_=function(o){function t(){var e=o.call(this,t.TEMPLATE)||this;return e.initialised=!1,e.listenerDestroyFuncs=[],e}return i_(t,o),t.prototype.init=function(e){this.initialised&&(this.listenerDestroyFuncs.forEach(function(a){return a()}),this.listenerDestroyFuncs=[]),this.initialised=!0,this.params=pa(pa(pa({},{suppressExpandAll:!1,suppressFilterSearch:!1,suppressSyncLayoutWithGrid:!1,api:this.gridApi,columnApi:this.columnApi}),e),{context:this.gridOptionsService.context}),this.filtersToolPanelHeaderPanel.init(this.params),this.filtersToolPanelListPanel.init(this.params),this.params.suppressExpandAll&&this.params.suppressFilterSearch&&this.filtersToolPanelHeaderPanel.setDisplayed(!1),this.listenerDestroyFuncs.push(this.addManagedListener(this.filtersToolPanelHeaderPanel,"expandAll",this.onExpandAll.bind(this)),this.addManagedListener(this.filtersToolPanelHeaderPanel,"collapseAll",this.onCollapseAll.bind(this)),this.addManagedListener(this.filtersToolPanelHeaderPanel,"searchChanged",this.onSearchChanged.bind(this)),this.addManagedListener(this.filtersToolPanelListPanel,"groupExpanded",this.onGroupExpanded.bind(this)))},t.prototype.setVisible=function(e){o.prototype.setDisplayed.call(this,e),e&&!this.initialised&&this.init(this.params)},t.prototype.onExpandAll=function(){this.filtersToolPanelListPanel.expandFilterGroups(!0)},t.prototype.onCollapseAll=function(){this.filtersToolPanelListPanel.expandFilterGroups(!1)},t.prototype.onSearchChanged=function(e){this.filtersToolPanelListPanel.performFilterSearch(e.searchText)},t.prototype.setFilterLayout=function(e){this.filtersToolPanelListPanel.setFiltersLayout(e)},t.prototype.onGroupExpanded=function(e){this.filtersToolPanelHeaderPanel.setExpandState(e.state)},t.prototype.expandFilterGroups=function(e){this.filtersToolPanelListPanel.expandFilterGroups(!0,e)},t.prototype.collapseFilterGroups=function(e){this.filtersToolPanelListPanel.expandFilterGroups(!1,e)},t.prototype.expandFilters=function(e){this.filtersToolPanelListPanel.expandFilters(!0,e)},t.prototype.collapseFilters=function(e){this.filtersToolPanelListPanel.expandFilters(!1,e)},t.prototype.syncLayoutWithGrid=function(){this.filtersToolPanelListPanel.syncFilterLayout()},t.prototype.refresh=function(){this.init(this.params)},t.prototype.destroy=function(){o.prototype.destroy.call(this)},t.TEMPLATE='<div class="ag-filter-toolpanel">\n            <ag-filters-tool-panel-header ref="filtersToolPanelHeaderPanel"></ag-filters-tool-panel-header>\n            <ag-filters-tool-panel-list ref="filtersToolPanelListPanel"></ag-filters-tool-panel-list>\n         </div>',Ks([(0,f.IzG)("filtersToolPanelHeaderPanel")],t.prototype,"filtersToolPanelHeaderPanel",void 0),Ks([(0,f.IzG)("filtersToolPanelListPanel")],t.prototype,"filtersToolPanelListPanel",void 0),Ks([(0,f.Qnc)("gridApi")],t.prototype,"gridApi",void 0),Ks([(0,f.Qnc)("columnApi")],t.prototype,"columnApi",void 0),t}(f.YlN),s_={version:"30.2.1",moduleName:f.ekS.FiltersToolPanelModule,beans:[],agStackComponents:[{componentName:"AgFiltersToolPanelHeader",componentClass:JC},{componentName:"AgFiltersToolPanelList",componentClass:n_}],userComponents:[{componentName:"agFiltersToolPanel",componentClass:o_}],dependantModules:[Bu,Ue]},l_=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ii=function(){function o(t,e,r){this._encode=t,this._decode=e,this._rangeCallback=r}return o.prototype.floor=function(t){var e=new Date(t),r=this._encode(e);return this._decode(r)},o.prototype.ceil=function(t){var e=new Date(Number(t)-1),r=this._encode(e);return this._decode(r+1)},o.prototype.range=function(t,e,r){var n,i=null===(n=this._rangeCallback)||void 0===n?void 0:n.call(this,t,e),a=this._encode(r?this.floor(t):this.ceil(t)),s=this._encode(r?this.ceil(e):this.floor(e));if(s<a)return[];for(var l=[],u=a;u<=s;u++){var c=this._decode(u);l.push(c)}return i?.(),l},o}(),Rt=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return l_(t,o),t.prototype.getOffset=function(e,r){var n="number"==typeof e||e instanceof Date?this._encode(new Date(e)):0;return Math.floor(n)%r},t.prototype.every=function(e,r){var a,n=this,i=0,s=(r??{}).snapTo,l=void 0===s?"start":s;if("string"==typeof l){var u=i;a=function(p,v){return i=n.getOffset("start"===l?p:v,e),function(){return i=u}}}else"number"==typeof l?i=this.getOffset(new Date(l),e):l instanceof Date&&(i=this.getOffset(l,e));return new Ii(function(p){var v=n._encode(p);return Math.floor((v-i)/e)},function(p){return n._decode(p*e+i)},a)},t}(Ii),zf=new Rt(function u_(o){return o.getTime()},function c_(o){return new Date(o)});new Date(0).getFullYear();var Ft=6e4,Cr=60*Ft,vn=24*Cr,va=7*vn,ga=30*vn,Ys=365*vn,Hf=(new Date).getTimezoneOffset()*Ft,Uf=new Rt(function d_(o){return Math.floor((o.getTime()-Hf)/1e3)},function f_(o){return new Date(Hf+1e3*o)}),Wf=(new Date).getTimezoneOffset()*Ft,Kf=new Rt(function h_(o){return Math.floor((o.getTime()-Wf)/Ft)},function p_(o){return new Date(Wf+o*Ft)}),Yf=(new Date).getTimezoneOffset()*Ft,$f=new Rt(function v_(o){return Math.floor((o.getTime()-Yf)/Cr)},function g_(o){return new Date(Yf+o*Cr)}),Xf=new Rt(function y_(o){var t=6e4*o.getTimezoneOffset();return Math.floor((o.getTime()-t)/vn)},function m_(o){var t=new Date(1970,0,1);return t.setDate(t.getDate()+o),t});function Un(o){var t=new Date(2023,0,1+o).getTime();return new Rt(function e(n){var i=n.getTime();return Math.floor((i-t)/va)},function r(n){var i=new Date(t);return i.setDate(i.getDate()+7*n),i})}var Qf=Un(0);Un(1),Un(2),Un(3),Un(4),Un(5),Un(6);var Zf=new Rt(function O_(o){return 12*o.getFullYear()+o.getMonth()},function E_(o){var t=Math.floor(o/12);return new Date(t,o-12*t,1)}),qf=new Rt(function T_(o){return o.getFullYear()},function P_(o){var t=new Date;return t.setFullYear(o),t.setMonth(0,1),t.setHours(0,0,0,0),t});new Rt(function A_(o){return Math.floor(o.getTime()/Ft)},function D_(o){return new Date(o*Ft)}),new Rt(function R_(o){return Math.floor(o.getTime()/Cr)},function F_(o){return new Date(o*Cr)}),new Rt(function L_(o){return Math.floor(o.getTime()/vn)},function N_(o){var t=new Date(0);return t.setUTCDate(t.getUTCDate()+o),t.setUTCHours(0,0,0,0),t}),new Rt(function G_(o){return 12*o.getUTCFullYear()+o.getUTCMonth()},function V_(o){var t=Math.floor(o/12);return new Date(Date.UTC(t,o-12*t,1))}),new Rt(function j_(o){return o.getUTCFullYear()},function z_(o){var t=new Date;return t.setUTCFullYear(o),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0),t});var W_=[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i];function Jf(){var o=navigator.userAgent;return!W_.some(function(t){return t.test(o)})}var Ve=function(){function o(t){var e=t.document,r=void 0===e?window.document:e,n=t.width,i=void 0===n?600:n,a=t.height,s=void 0===a?300:a,l=t.domLayer,u=void 0!==l&&l,c=t.zIndex,d=void 0===c?0:c,h=t.name,p=void 0===h?void 0:h,v=t.overrideDevicePixelRatio,g=void 0===v?void 0:v;this._container=void 0,this._enabled=!0,this._pixelRatio=NaN,this._width=0,this._height=0,this.document=r,this.element=r.createElement("canvas"),this.element.width=i,this.element.height=s,this.context=this.element.getContext("2d"),this.imageSource=this.context.canvas;var y=this.element.style;y.userSelect="none",y.display="block",u&&(y.position="absolute",y.zIndex=String(d),y.top="0",y.left="0",y.pointerEvents="none",y.opacity="1",p&&(this.element.id=p)),this.setPixelRatio(g),this.resize(i,s)}return Object.defineProperty(o.prototype,"container",{get:function(){return this._container},set:function(t){this._container!==t&&(this.remove(),t&&t.appendChild(this.element),this._container=t)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this.element.style.display=t?"block":"none",this._enabled=!!t},enumerable:!1,configurable:!0}),o.prototype.remove=function(){var t=this.element.parentNode;t?.removeChild(this.element)},o.prototype.destroy=function(){this.element.remove(),this.element.width=0,this.element.height=0,this.context.clearRect(0,0,0,0),Object.freeze(this)},o.prototype.snapshot=function(){},o.prototype.clear=function(){this.context.save(),this.context.resetTransform(),this.context.clearRect(0,0,this.width,this.height),this.context.restore()},o.prototype.toImage=function(){var t=this.document.createElement("img");return t.src=this.getDataURL(),t},o.prototype.getDataURL=function(t){return this.element.toDataURL(t)},o.prototype.download=function(t,e){void 0===e&&(e="image/png"),t=(t??"").trim()||"image";var r=this.getDataURL(e),n=this.document,i=n.createElement("a");i.href=r,i.download=t,i.style.display="none",n.body.appendChild(i),i.click(),n.body.removeChild(i)},Object.defineProperty(o.prototype,"pixelRatio",{get:function(){return this._pixelRatio},enumerable:!1,configurable:!0}),o.prototype.setPixelRatio=function(t){var e=t??window.devicePixelRatio;Jf()||(e=1),o.overrideScale(this.context,e),this._pixelRatio=e},Object.defineProperty(o.prototype,"pixelated",{get:function(){return"pixelated"===this.element.style.imageRendering},set:function(t){this.element.style.imageRendering=t?"pixelated":"auto"},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),o.prototype.resize=function(t,e){if(t>0&&e>0){var r=this,n=r.element,i=r.context,a=r.pixelRatio;n.width=Math.round(t*a),n.height=Math.round(e*a),n.style.width=t+"px",n.style.height=e+"px",i.resetTransform(),this._width=t,this._height=e}},Object.defineProperty(o,"textMeasuringContext",{get:function(){if(this._textMeasuringContext)return this._textMeasuringContext;var t=document.createElement("canvas");return this._textMeasuringContext=t.getContext("2d"),this._textMeasuringContext},enumerable:!1,configurable:!0}),Object.defineProperty(o,"svgText",{get:function(){if(this._svgText)return this._svgText;var t="http://www.w3.org/2000/svg",e=document.createElementNS(t,"svg");e.setAttribute("width","100"),e.setAttribute("height","100"),e.classList?e.classList.add("text-measuring-svg"):e.setAttribute("class","text-measuring-svg"),e.style.position="absolute",e.style.top="-1000px",e.style.visibility="hidden";var r=document.createElementNS(t,"text");return r.setAttribute("x","0"),r.setAttribute("y","30"),r.setAttribute("text","black"),e.appendChild(r),document.body.appendChild(e),this._svgText=r,r},enumerable:!1,configurable:!0}),Object.defineProperty(o,"has",{get:function(){if(this._has)return this._has;var t=navigator.userAgent.indexOf("Chrome")>-1,e=navigator.userAgent.indexOf("Firefox")>-1,r=!t&&navigator.userAgent.indexOf("Safari")>-1;return this._has=Object.freeze({textMetrics:void 0!==this.textMeasuringContext.measureText("test").actualBoundingBoxDescent&&!e&&!r,getTransform:void 0!==this.textMeasuringContext.getTransform}),this._has},enumerable:!1,configurable:!0}),o.measureText=function(t,e,r,n){var i=this.textMeasuringContext;return i.font=e,i.textBaseline=r,i.textAlign=n,i.measureText(t)},o.getTextSize=function(t,e){if(this.has.textMetrics){var r=this.textMeasuringContext;r.font=e;var n=r.measureText(t);return{width:n.width,height:n.actualBoundingBoxAscent+n.actualBoundingBoxDescent}}return this.measureSvgText(t,e)},o.measureSvgText=function(t,e){var r=this.textSizeCache,n=r[e];if(n){var i=n[t];if(i)return i}else r[e]={};var a=this.svgText;a.style.font=e,a.textContent=t;var s=a.getBBox(),l={width:s.width,height:s.height};return r[e][t]=l,l},o.overrideScale=function(t,e){var r=0,n={save:function(){this.$save(),r++},restore:function(){if(!(r>0))throw new Error("AG Charts - Unable to restore() past depth 0");this.$restore(),r--},setTransform:function(a,s,l,u,c,d){"object"==typeof a?this.$setTransform(a):this.$setTransform(a*e,s*e,l*e,u*e,c*e,d*e)},resetTransform:function(){this.$setTransform(e,0,0,e,0,0)},verifyDepthZero:function(){if(0!==r)throw new Error("AG Charts - Save/restore depth is non-zero: "+r)}};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t["$"+i]||(t["$"+i]=t[i]),t[i]=n[i])},o.textSizeCache={},o}(),Xu=function(){return Xu=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},Xu.apply(this,arguments)},me=function(){function o(t,e,r,n){this.x=t,this.y=e,this.width=r,this.height=n}return o.prototype.clone=function(){var t=this;return new o(t.x,t.y,t.width,t.height)},o.prototype.equals=function(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},o.prototype.containsPoint=function(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height},o.prototype.collidesBBox=function(t){return this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.y+this.height>t.y},o.prototype.isInfinite=function(){return Math.abs(this.x)===1/0||Math.abs(this.y)===1/0||Math.abs(this.width)===1/0||Math.abs(this.height)===1/0},o.prototype.shrink=function(t,e){var r=this,n=function(i,a){switch(i){case"top":r.y+=a;case"bottom":r.height-=a;break;case"left":r.x+=a;case"right":r.width-=a;break;case"vertical":r.y+=a,r.height-=2*a;break;case"horizontal":r.x+=a,r.width-=2*a;break;default:r.x+=a,r.width-=2*a,r.y+=a,r.height-=2*a}};return"number"==typeof t?n(e,t):Object.entries(t).forEach(function(i){var a=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i}(i,2);return n(a[0],a[1])}),this},o.prototype.grow=function(t,e){if("number"==typeof t)this.shrink(-t,e);else{var r=Xu({},t);for(var n in r)r[n]*=-1;this.shrink(r)}return this},o.merge=function(t){var e=1/0,r=1/0,n=-1/0,i=-1/0;return t.forEach(function(a){a.x<e&&(e=a.x),a.y<r&&(r=a.y),a.x+a.width>n&&(n=a.x+a.width),a.y+a.height>i&&(i=a.y+a.height)}),new o(e,r,n-e,i-r)},o}(),eh=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Wn=function(){function o(t){void 0===t&&(t=[1,0,0,1,0,0]),this.elements=t}return Object.defineProperty(o.prototype,"e",{get:function(){return function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o}([],eh(this.elements))},enumerable:!1,configurable:!0}),o.prototype.setElements=function(t){var e=this.elements;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],this},Object.defineProperty(o.prototype,"identity",{get:function(){var t=this.elements;return 1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5]},enumerable:!1,configurable:!0}),o.prototype.AxB=function(t,e,r){var i=t[1]*e[0]+t[3]*e[1],a=t[0]*e[2]+t[2]*e[3],s=t[1]*e[2]+t[3]*e[3],l=t[0]*e[4]+t[2]*e[5]+t[4],u=t[1]*e[4]+t[3]*e[5]+t[5];(r=r??t)[0]=t[0]*e[0]+t[2]*e[1],r[1]=i,r[2]=a,r[3]=s,r[4]=l,r[5]=u},o.prototype.multiplySelf=function(t){return this.AxB(this.elements,t.elements),this},o.prototype.multiply=function(t){var e=new Array(6);return this.AxB(this.elements,t.elements,e),new o(e)},o.prototype.preMultiplySelf=function(t){return this.AxB(t.elements,this.elements,this.elements),this},o.prototype.inverse=function(){var t=this.elements,e=t[0],r=t[1],n=t[2],i=t[3],a=t[4],s=t[5],l=1/(e*i-r*n);return new o([i*=l,-(r*=l),-(n*=l),e*=l,n*s-i*a,r*a-e*s])},o.prototype.inverseTo=function(t){var e=this.elements,r=e[0],n=e[1],i=e[2],a=e[3],s=e[4],l=e[5],u=1/(r*a-n*i);return t.setElements([a*=u,-(n*=u),-(i*=u),r*=u,i*l-a*s,n*s-r*l]),this},o.prototype.invertSelf=function(){var t=this.elements,e=t[0],r=t[1],n=t[2],i=t[3],a=t[4],s=t[5],l=1/(e*i-r*n);return e*=l,r*=l,n*=l,t[0]=i*=l,t[1]=-r,t[2]=-n,t[3]=e,t[4]=n*s-i*a,t[5]=r*a-e*s,this},o.prototype.transformPoint=function(t,e){var r=this.elements;return{x:t*r[0]+e*r[2]+r[4],y:t*r[1]+e*r[3]+r[5]}},o.prototype.transformBBox=function(t,e){var r=this.elements,n=r[0],i=r[1],a=r[2],s=r[3],l=.5*t.width,u=.5*t.height,c=t.x+l,d=t.y+u,h=Math.abs(l*n)+Math.abs(u*a),p=Math.abs(l*i)+Math.abs(u*s);return e||(e=new me(0,0,0,0)),e.x=c*n+d*a+r[4]-h,e.y=c*i+d*s+r[5]-p,e.width=h+h,e.height=p+p,e},o.prototype.toContext=function(t){if(!this.identity){var e=this.elements;t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}},o.flyweight=function(t){return o.instance.setElements(t.elements)},o.updateTransformMatrix=function(t,e,r,n,i,a,s){var p,v,l=eh([0,0],2),u=l[0],c=l[1],d=e,h=r;1===d&&1===h?(p=0,v=0):(p=null==s?.scalingCenterX?u:s?.scalingCenterX,v=null==s?.scalingCenterY?c:s?.scalingCenterY);var m,C,g=n,y=Math.cos(g),S=Math.sin(g);0===g?(m=0,C=0):(m=null==s?.rotationCenterX?u:s?.rotationCenterX,C=null==s?.rotationCenterY?c:s?.rotationCenterY);var x=p*(1-d)-m,b=v*(1-h)-C;return t.setElements([y*d,S*d,-S*h,y*h,y*x-S*b+m+i,S*x+y*b+C+a]),t},o.fromContext=function(t){var e=t.getTransform();return new o([e.a,e.b,e.c,e.d,e.e,e.f])},o.instance=new o,o}(),th={};function Ur(o){var t,e=o.constructor,r=Object.prototype.hasOwnProperty.call(e,"className")?e.className:e.name;if(!r)throw new Error("The "+e+" is missing the 'className' property.");var n=(null!==(t=th[r])&&void 0!==t?t:0)+1;return th[r]=n,r+"-"+n}var $=function(o){return o[o.NONE=0]="NONE",o[o.TRIVIAL=1]="TRIVIAL",o[o.MINOR=2]="MINOR",o[o.MAJOR=3]="MAJOR",o}($||{}),X_=function $_(){try{return new Function("return true"),!0}catch{return!1}}();function ee(o){var t=o??{},e=t.changeCb,r=t.convertor;return function(n,i){var a="__"+i;n[i]||(X_&&null==e&&null==r?function Q_(o,t,e,r){var n=r??{},i=n.redraw,a=void 0===i?$.TRIVIAL:i,s=n.type,l=void 0===s?"normal":s,u=n.checkDirtyOnAssignment,d=new Function("value","\n        const oldValue = this."+e+";\n        if (value !== oldValue) {\n            this."+e+" = value;\n            "+("normal"===l?"this.markDirty(this, "+a+");":"")+"\n            "+("transform"===l?"this.markDirtyTransform("+a+");":"")+"\n            "+("path"===l?"if (!this._dirtyPath) { this._dirtyPath = true; this.markDirty(this, "+a+"); }":"")+"\n            "+("font"===l?"if (!this._dirtyFont) { this._dirtyFont = true; this.markDirty(this, "+a+"); }":"")+"\n        }\n        "+(void 0!==u&&u?"if (value != null && value._dirty > "+$.NONE+") { this.markDirty(value, value._dirty); }":"")+"\n"),h=new Function("return this."+e+";");Object.defineProperty(o,t,{set:d,get:h,enumerable:!0,configurable:!0})}(n,i,a,o):function Z_(o,t,e,r){var n=r??{},i=n.redraw,a=void 0===i?$.TRIVIAL:i,s=n.type,l=void 0===s?"normal":s,u=n.changeCb,c=n.convertor,d=n.checkDirtyOnAssignment,h=void 0!==d&&d;Object.defineProperty(o,t,{set:function(g){var y=this[e];(g=c?c(g):g)!==y&&(this[e]=g,"normal"===l&&this.markDirty(this,a),"transform"===l&&this.markDirtyTransform(a),"path"===l&&!this._dirtyPath&&(this._dirtyPath=!0,this.markDirty(this,a)),"font"===l&&!this._dirtyFont&&(this._dirtyFont=!0,this.markDirty(this,a)),u&&u(this)),h&&null!=g&&g._dirty>$.NONE&&this.markDirty(g,g._dirty)},get:function(){return this[e]},enumerable:!0,configurable:!0})}(n,i,a,o))}}var Qu=function(){function o(){this._dirty=$.MAJOR}return o.prototype.markDirty=function(t,e){void 0===e&&(e=$.TRIVIAL),!(this._dirty>e)&&(this._dirty=e)},o.prototype.markClean=function(t){this._dirty=$.NONE},o.prototype.isDirty=function(){return this._dirty>$.NONE},o}(),q_=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Yt=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Wr=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Zu=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},qu=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},Ct=function(o){return o[o.All=0]="All",o[o.None=1]="None",o}(Ct||{}),rh=function(o){o.parent&&(o.parent.dirtyZIndex=!0),o.zIndexChanged()},$s=function(o){function t(e){var n=(void 0===e?{}:e).isVirtual,i=o.call(this)||this;return i.serialNumber=t._nextSerialNumber++,i.id=Ur(i),i.tag=NaN,i.isContainerNode=!1,i._virtualChildren=[],i._children=[],i.childSet={},i.matrix=new Wn,i.inverseMatrix=new Wn,i.dirtyTransform=!1,i.scalingX=1,i.scalingY=1,i.scalingCenterX=null,i.scalingCenterY=null,i.rotationCenterX=null,i.rotationCenterY=null,i.rotation=0,i.translationX=0,i.translationY=0,i.visible=!0,i.dirtyZIndex=!1,i.zIndex=0,i.zIndexSubOrder=void 0,i.pointerEvents=Ct.All,i.isVirtual=n??!1,i}return q_(t,o),Object.defineProperty(t.prototype,"datum",{get:function(){var e;return void 0!==this._datum?this._datum:null===(e=this._parent)||void 0===e?void 0:e.datum},set:function(e){this._datum=e},enumerable:!1,configurable:!0}),t.prototype._setLayerManager=function(e){var r,n,i,a;this._layerManager=e,this._debug=e?.debug;try{for(var s=Wr(this._children),l=s.next();!l.done;l=s.next())l.value._setLayerManager(e)}catch(h){r={error:h}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}try{for(var c=Wr(this._virtualChildren),d=c.next();!d.done;d=c.next())d.value._setLayerManager(e)}catch(h){i={error:h}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}},Object.defineProperty(t.prototype,"layerManager",{get:function(){return this._layerManager},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){var e,r;if(0===this._virtualChildren.length)return this._children;var n=qu([],Zu(this._children));try{for(var i=Wr(this._virtualChildren),a=i.next();!a.done;a=i.next())n.push.apply(n,qu([],Zu(a.value.children)))}catch(l){e={error:l}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"virtualChildren",{get:function(){return this._virtualChildren},enumerable:!1,configurable:!0}),t.prototype.hasVirtualChildren=function(){return this._virtualChildren.length>0},t.prototype.append=function(e){var r,n;Array.isArray(e)||(e=[e]);try{for(var i=Wr(e),a=i.next();!a.done;a=i.next()){var s=a.value;if(s.parent)throw new Error(s+" already belongs to another parent: "+s.parent+".");if(s.layerManager)throw new Error(s+" already belongs to a scene: "+s.layerManager+".");if(this.childSet[s.id])throw new Error("Duplicate "+s.constructor.name+" node: "+s);s.isVirtual?this._virtualChildren.push(s):this._children.push(s),this.childSet[s.id]=!0,s._parent=this,s._setLayerManager(this.layerManager)}}catch(l){r={error:l}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}this.dirtyZIndex=!0,this.markDirty(this,$.MAJOR)},t.prototype.appendChild=function(e){return this.append(e),e},t.prototype.removeChild=function(e){var n,r=function(){throw new Error("The node to be removed is not a child of this node.")};return e.parent!==this&&r(),e.isVirtual?((n=this._virtualChildren.indexOf(e))<0&&r(),this._virtualChildren.splice(n,1)):((n=this._children.indexOf(e))<0&&r(),this._children.splice(n,1)),delete this.childSet[e.id],e._parent=void 0,e._setLayerManager(),this.dirtyZIndex=!0,this.markDirty(e,$.MAJOR),e},t.prototype.calculateCumulativeMatrix=function(){this.computeTransformMatrix();for(var e=Wn.flyweight(this.matrix),r=this.parent;r;)r.computeTransformMatrix(),e.preMultiplySelf(r.matrix),r=r.parent;return e},t.prototype.transformPoint=function(e,r){return this.calculateCumulativeMatrix().invertSelf().transformPoint(e,r)},t.prototype.inverseTransformPoint=function(e,r){return this.calculateCumulativeMatrix().transformPoint(e,r)},t.prototype.transformBBox=function(e){return this.calculateCumulativeMatrix().invertSelf().transformBBox(e)},t.prototype.inverseTransformBBox=function(e){return this.calculateCumulativeMatrix().transformBBox(e)},t.prototype.markDirtyTransform=function(){this.dirtyTransform=!0,this.markDirty(this,$.MAJOR)},t.prototype.containsPoint=function(e,r){return!1},t.prototype.pickNode=function(e,r){var n;if(this.visible&&this.pointerEvents!==Ct.None&&this.containsPoint(e,r)){var i=this.children;if(i.length>1e3)for(var a=i.length-1;a>=0;a--){var s=i[a];if(u=(null===(n=s.computeTransformedBBox())||void 0===n?void 0:n.containsPoint(e,r))?s.pickNode(e,r):void 0)return u}else if(i.length)for(a=i.length-1;a>=0;a--){var u;if(u=i[a].pickNode(e,r))return u}else if(!this.isContainerNode)return this}},t.prototype.findNodes=function(e){var r,n,i=e(this)?[this]:[];try{for(var a=Wr(this.children),s=a.next();!s.done;s=a.next()){var u=s.value.findNodes(e);u&&i.push.apply(i,qu([],Zu(u)))}}catch(c){r={error:c}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i},t.prototype.computeBBox=function(){},t.prototype.computeTransformedBBox=function(){var e=this.computeBBox();if(e){this.computeTransformMatrix();for(var r=Wn.flyweight(this.matrix),n=this.parent;n;)n.computeTransformMatrix(),r.preMultiplySelf(n.matrix),n=n.parent;return r.transformBBox(e,e),e}},t.prototype.computeTransformMatrix=function(){if(this.dirtyTransform){var e=this,r=e.matrix;Wn.updateTransformMatrix(r,e.scalingX,e.scalingY,e.rotation,e.translationX,e.translationY,{scalingCenterX:e.scalingCenterX,scalingCenterY:e.scalingCenterY,rotationCenterX:e.rotationCenterX,rotationCenterY:e.rotationCenterY}),r.inverseTo(this.inverseMatrix),this.dirtyTransform=!1}},t.prototype.render=function(e){var r=e.stats;this._dirty=$.NONE,r&&r.nodesRendered++},t.prototype.clearBBox=function(e){var r=this.computeBBox();if(null!=r){var n=r.x,i=r.y,a=r.width,s=r.height,l=this.transformPoint(n,i),u=this.transformPoint(n+a,i+s);e.clearRect(l.x,l.y,u.x-l.x,u.y-l.y)}},t.prototype.markDirty=function(e,r,n){void 0===r&&(r=$.TRIVIAL),void 0===n&&(n=r),!(this._dirty>r)&&(this._dirty===r&&r===n||(this._dirty=r,this.parent?this.parent.markDirty(this,n):this.layerManager&&this.layerManager.markDirty()))},Object.defineProperty(t.prototype,"dirty",{get:function(){return this._dirty},enumerable:!1,configurable:!0}),t.prototype.markClean=function(e){var r,n,i,a,s=e??{},l=s.force,u=void 0!==l&&l,c=s.recursive,d=void 0===c||c;if(this._dirty!==$.NONE||u){if(this._dirty=$.NONE,!1!==d)try{for(var h=Wr(this._virtualChildren),p=h.next();!p.done;p=h.next())p.value.markClean({force:u})}catch(S){r={error:S}}finally{try{p&&!p.done&&(n=h.return)&&n.call(h)}finally{if(r)throw r.error}}if(!0===d)try{for(var g=Wr(this._children),y=g.next();!y.done;y=g.next())y.value.markClean({force:u})}catch(S){i={error:S}}finally{try{y&&!y.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}}},t.prototype.visibilityChanged=function(){},Object.defineProperty(t.prototype,"nodeCount",{get:function(){var e,r,n,i,a=1,s=this._dirty>=$.NONE||this.dirtyTransform?1:0,l=this.visible?1:0,u=function(g){var y=g.nodeCount;a+=y.count,l+=y.visibleCount,s+=y.dirtyCount};try{for(var c=Wr(this._children),d=c.next();!d.done;d=c.next())u(d.value)}catch(g){e={error:g}}finally{try{d&&!d.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}try{for(var p=Wr(this._virtualChildren),v=p.next();!v.done;v=p.next())u(v.value)}catch(g){n={error:g}}finally{try{v&&!v.done&&(i=p.return)&&i.call(p)}finally{if(n)throw n.error}}return{count:a,visibleCount:l,dirtyCount:s}},enumerable:!1,configurable:!0}),t.prototype.zIndexChanged=function(){},t._nextSerialNumber=0,Yt([ee({type:"transform"})],t.prototype,"scalingX",void 0),Yt([ee({type:"transform"})],t.prototype,"scalingY",void 0),Yt([ee({type:"transform"})],t.prototype,"scalingCenterX",void 0),Yt([ee({type:"transform"})],t.prototype,"scalingCenterY",void 0),Yt([ee({type:"transform"})],t.prototype,"rotationCenterX",void 0),Yt([ee({type:"transform"})],t.prototype,"rotationCenterY",void 0),Yt([ee({type:"transform"})],t.prototype,"rotation",void 0),Yt([ee({type:"transform"})],t.prototype,"translationX",void 0),Yt([ee({type:"transform"})],t.prototype,"translationY",void 0),Yt([ee({redraw:$.MAJOR,changeCb:function(e){return e.visibilityChanged()}})],t.prototype,"visible",void 0),Yt([ee({redraw:$.TRIVIAL,changeCb:rh})],t.prototype,"zIndex",void 0),Yt([ee({redraw:$.TRIVIAL,changeCb:rh})],t.prototype,"zIndexSubOrder",void 0),t}(Qu);function nh(o,t){var e=0;return"number"==typeof o&&"number"==typeof t?e=o-t:"string"==typeof o&&"string"==typeof t?e=o.localeCompare(t):null==o&&null==t||(e=null==o?-1:null==t?1:String(o).localeCompare(String(t))),e}function ih(o,t,e){var r=function(a){return"function"==typeof a?a():a};for(var n in o){var i=e(r(o[n]),r(t[n]));if(0!==i)return i}return 0}var oh={};function ah(o,t){oh[t]||(o(),oh[t]=!0)}var Li=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Ni=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},q={debug:function(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];console.log.apply(console,Ni([],Li(o)))},warn:function(o){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];console.warn.apply(console,Ni(["AG Charts - "+o],Li(t)))},error:function(o){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];"object"==typeof o?console.error.apply(console,Ni(["AG Charts error",o],Li(t))):console.error.apply(console,Ni(["AG Charts - "+o],Li(t)))},warnOnce:function(o){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];ah(function(){return q.warn.apply(q,Ni([o],Li(t)))},"Logger.warn: "+o)},errorOnce:function(o){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];ah(function(){return q.error.apply(q,Ni([o],Li(t)))},"Logger.warn: "+o)}},J_=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Xs=function(){return Xs=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},Xs.apply(this,arguments)},Ju=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},sh=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Qs=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},re=function(o){function t(e){var r,n=o.call(this,{isVirtual:e?.isVirtual})||this;n.opts=e,n.opacity=1,n.lastBBox=void 0;var i=e??{},a=i.zIndex,s=i.zIndexSubOrder;return n.isContainerNode=!0,void 0!==a&&(n.zIndex=a),void 0!==s&&(n.zIndexSubOrder=s),n.name=null===(r=n.opts)||void 0===r?void 0:r.name,n}return J_(t,o),t.prototype.zIndexChanged=function(){var e;this.layer&&(null===(e=this._layerManager)||void 0===e||e.moveLayer(this.layer,this.zIndex,this.zIndexSubOrder))},t.prototype.isLayer=function(){return null!=this.layer},t.prototype._setLayerManager=function(e){var n,i,r=this;if(this._layerManager&&this.layer&&(this._layerManager.removeLayer(this.layer),this.layer=void 0),this.layer)throw new Error("AG Charts - unable to deregister scene rendering layer!");if(o.prototype._setLayerManager.call(this,e),e&&null!==(n=this.opts)&&void 0!==n&&n.layer){var a=null!==(i=this.opts)&&void 0!==i?i:{};this.layer=e.addLayer({zIndex:a.zIndex,zIndexSubOrder:a.zIndexSubOrder,name:a.name,getComputedOpacity:function(){return r.getComputedOpacity()},getVisibility:function(){return r.getVisibility()}})}},t.prototype.getComputedOpacity=function(){var e=1,r=this;do{r instanceof t&&(e*=r.opacity)}while(r=r.parent);return e},t.prototype.getVisibility=function(){for(var e=this,r=this.visible;e=e.parent;)e.visible||(r=e.visible);return r},t.prototype.visibilityChanged=function(){this.layer&&(this.layer.enabled=this.visible)},t.prototype.markDirty=function(e,r){if(void 0===r&&(r=$.TRIVIAL),this.isVirtual)o.prototype.markDirty.call(this,e,r);else{var n=r;(r<$.MINOR||null!=this.layer)&&(n=$.TRIVIAL),o.prototype.markDirty.call(this,e,r,n)}},t.prototype.containsPoint=function(e,r){return!0},t.prototype.computeBBox=function(){return this.computeTransformMatrix(),t.computeBBox(this.children)},t.prototype.computeTransformedBBox=function(){return this.computeBBox()},t.prototype.render=function(e){var r,n,i,a,s,l,u,c,d=this.opts,p=(void 0===d?{}:d).name,v=void 0===p?void 0:p,g=this._debug,S=(void 0===g?{}:g).consoleLog,m=void 0!==S&&S,C=this,_=C.dirty,w=C.dirtyZIndex,x=C.layer,b=C.children,O=C.clipRect,T=C.dirtyTransform,E=e.ctx,P=e.forceRender,D=e.clipBBox,R=e.resized,M=e.stats,F=E.getTransform(),I=_>=$.MINOR||w||R,L=I,N=!1;try{for(var k=Ju(b),U=k.next();!U.done;U=k.next()){var G=U.value;if(L||(L=null==G.layerManager&&G.dirty>=$.TRIVIAL),N||(N=null!=G.layerManager&&G.dirty>=$.TRIVIAL),L)break}}catch(ue){r={error:ue}}finally{try{U&&!U.done&&(n=k.return)&&n.call(k)}finally{if(r)throw r.error}}if(v&&m&&q.debug({name:v,group:this,isDirty:I,isChildDirty:L,dirtyTransform:T,renderCtx:e,forceRender:P}),T)P="dirtyTransform";else if(x){var B=this.computeBBox();(void 0===this.lastBBox||!this.lastBBox.equals(B))&&(P="dirtyTransform",this.lastBBox=B)}if(!(I||L||N||P))return v&&m&&M&&q.debug({name:v,result:"skipping",renderCtx:e,counts:this.nodeCount,group:this}),x&&M&&(M.layersSkipped++,M.nodesSkipped+=this.nodeCount.count),void this.markClean({recursive:!1});var K=this.visible;if(x){if((E=x.context).save(),E.resetTransform(),"dirtyTransform"!==P&&(P=L||w),P&&x.clear(),D){var V=D.width,H=D.height,Y=D.x,Q=D.y;m&&q.debug({name:v,clipBBox:D,ctxTransform:E.getTransform(),renderCtx:e,group:this}),this.clipCtx(E,Y,Q,V,H)}E.setTransform(F)}else E.globalAlpha*=this.opacity;this.computeTransformMatrix(),this.matrix.toContext(E),O&&(Y=O.x,Q=O.y,V=O.width,H=O.height,E.save(),m&&q.debug({name:v,clipRect:O,ctxTransform:E.getTransform(),renderCtx:e,group:this}),this.clipCtx(E,Y,Q,V,H),D=this.matrix.transformBBox(O));var ie=this.hasVirtualChildren();w?(this.sortChildren(b),"dirtyTransform"!==P&&(P=!0)):ie&&this.sortChildren(b);var ve=P!==e.forceRender||D!==e.clipBBox||E!==e.ctx?Xs(Xs({},e),{ctx:E,forceRender:P,clipBBox:D}):e,ye=0;try{for(var de=Ju(b),fe=de.next();!fe.done;fe=de.next())(G=fe.value).visible&&K?P||G.dirty!==$.NONE?(E.save(),G.render(ve),E.restore()):M&&(ye+=G.nodeCount.count):(G.markClean(),M&&(ye+=G.nodeCount.count))}catch(ue){i={error:ue}}finally{try{fe&&!fe.done&&(a=de.return)&&a.call(de)}finally{if(i)throw i.error}}if(M&&(M.nodesSkipped+=ye),o.prototype.render.call(this,e),O&&E.restore(),ie)try{for(var z=Ju(this.virtualChildren),J=z.next();!J.done;J=z.next())(G=J.value).markClean({recursive:"virtual"})}catch(ue){s={error:ue}}finally{try{J&&!J.done&&(l=z.return)&&l.call(z)}finally{if(s)throw s.error}}x&&(M&&M.layersRendered++,E.restore(),P&&x.snapshot(),null===(c=(u=x.context).verifyDepthZero)||void 0===c||c.call(u)),v&&m&&M&&q.debug({name:v,result:"rendered",skipped:ye,renderCtx:e,counts:this.nodeCount,group:this})},t.prototype.sortChildren=function(e){this.dirtyZIndex=!1,e.sort(function(r,n){var i,a;return ih(Qs(Qs([r.zIndex],sh(null!==(i=r.zIndexSubOrder)&&void 0!==i?i:[void 0,void 0])),[r.serialNumber]),Qs(Qs([n.zIndex],sh(null!==(a=n.zIndexSubOrder)&&void 0!==a?a:[void 0,void 0])),[n.serialNumber]),nh)})},t.prototype.clipCtx=function(e,r,n,i,a){e.beginPath(),e.moveTo(r,n),e.lineTo(r+i,n),e.lineTo(r+i,n+a),e.lineTo(r,n+a),e.closePath(),e.clip()},t.computeBBox=function(e){var r=1/0,n=-1/0,i=1/0,a=-1/0;return e.forEach(function(s){if(s.visible){var l=s.computeTransformedBBox();if(l){var u=l.x,c=l.y;u<r&&(r=u),c<i&&(i=c),u+l.width>n&&(n=u+l.width),c+l.height>a&&(a=c+l.height)}}}),new me(r,i,n-r,a-i)},t.prototype.setClipRectInGroupCoordinateSpace=function(e){this.clipRect=e?this.transformBBox(e):void 0},t.className="Group",function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);n>3&&i&&Object.defineProperty(t,e,i)}([ee({redraw:$.MAJOR,convertor:function(e){return Math.min(1,Math.max(0,e))}})],t.prototype,"opacity",void 0),t}($s),lh=function(){function o(t){var e=t.width,r=void 0===e?600:e,n=t.height,i=void 0===n?300:n,a=t.overrideDevicePixelRatio,s=void 0===a?void 0:a;this.enabled=!0,this._pixelRatio=NaN,this._width=0,this._height=0,this.canvas=new OffscreenCanvas(r,i),this.context=this.canvas.getContext("2d"),this.imageSource=this.canvas.transferToImageBitmap(),this.setPixelRatio(s),this.resize(r,i)}return o.isSupported=function(){return null!=window.OffscreenCanvas},o.prototype.snapshot=function(){this.imageSource.close(),this.imageSource=this.canvas.transferToImageBitmap()},o.prototype.destroy=function(){this.imageSource.close(),this.canvas.width=0,this.canvas.height=0,this.context.clearRect(0,0,0,0)},o.prototype.clear=function(){this.context.save(),this.context.resetTransform(),this.context.clearRect(0,0,this.width,this.height),this.context.restore()},Object.defineProperty(o.prototype,"pixelRatio",{get:function(){return this._pixelRatio},enumerable:!1,configurable:!0}),o.prototype.setPixelRatio=function(t){var e=t??window.devicePixelRatio;Jf()||(e=1),Ve.overrideScale(this.context,e),this._pixelRatio=e},Object.defineProperty(o.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),o.prototype.resize=function(t,e){if(t>0&&e>0){var r=this,n=r.canvas,i=r.context,a=r.pixelRatio;n.width=Math.round(t*a),n.height=Math.round(e*a),i.resetTransform(),this._width=t,this._height=e}},o}();function or(o){var t=typeof window<"u"?window:void 0;return t?.[o]}var ya=function(o){return o[o.SUMMARY=0]="SUMMARY",o[o.DETAILED=1]="DETAILED",o}(ya||{}),Kn=function(){return Kn=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},Kn.apply(this,arguments)},$t=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Kr=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},ma=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ec=function(){function o(t){var e,r,n;this.id=Ur(this),this.layers=[],this._nextZIndex=0,this._nextLayerId=0,this._dirty=!1,this._root=null,this.debug={dirtyTree:!1,stats:!1,renderBoundingBoxes:!1,consoleLog:!1,level:ya.SUMMARY,sceneNodeHighlight:[]};var i=t.document,a=void 0===i?window.document:i,s=t.mode,l=void 0===s?null!==(e=or("agChartsSceneRenderModel"))&&void 0!==e?e:"adv-composite":s,u=t.width,c=t.height,d=t.overrideDevicePixelRatio,h=void 0===d?void 0:d;this.overrideDevicePixelRatio=h,this.opts={document:a,mode:l},this.debug.consoleLog=[!0,"scene"].includes(or("agChartsDebug")),this.debug.level=["scene"].includes(or("agChartsDebug"))?ya.DETAILED:ya.SUMMARY,this.debug.stats=null!==(r=or("agChartsSceneStats"))&&void 0!==r&&r,this.debug.dirtyTree=null!==(n=or("agChartsSceneDirtyTree"))&&void 0!==n&&n,this.debug.sceneNodeHighlight=function nx(){var o,t=null!==(o=or("agChartsSceneDebug"))&&void 0!==o?o:[];"string"==typeof t&&(t=[t]);var e=[];return t.forEach(function(r){"layout"===r?e.push("seriesRoot","legend","root",/.*Axis-\d+-axis.*/):e.push(r)}),e}(),this.canvas=new Ve({document:a,width:u,height:c,overrideDevicePixelRatio:h})}return Object.defineProperty(o.prototype,"container",{get:function(){return this.canvas.container},set:function(t){this.canvas.container=t},enumerable:!1,configurable:!0}),o.prototype.download=function(t,e){this.canvas.download(t,e)},o.prototype.getDataURL=function(t){return this.canvas.getDataURL(t)},Object.defineProperty(o.prototype,"width",{get:function(){return this.pendingSize?this.pendingSize[0]:this.canvas.width},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"height",{get:function(){return this.pendingSize?this.pendingSize[1]:this.canvas.height},enumerable:!1,configurable:!0}),o.prototype.resize=function(t,e){t=Math.round(t),e=Math.round(e);var r=t<=0||e<=0,n=isNaN(t)||isNaN(e);return!(t===this.width&&e===this.height||n||r||(this.pendingSize=[t,e],this.markDirty(),0))},o.prototype.addLayer=function(t){var e,r=this.opts.mode;if(["composite","dom-composite","adv-composite"].includes(r)){var i=t.zIndex,a=void 0===i?this._nextZIndex++:i,s=t.name,l=t.zIndexSubOrder,u=t.getComputedOpacity,c=t.getVisibility,d=this,h=d.width,p=d.height,v=d.overrideDevicePixelRatio,g="dom-composite"===r,S="adv-composite"===r&&lh.isSupported()?new lh({width:h,height:p,overrideDevicePixelRatio:v}):new Ve({document:this.opts.document,width:h,height:p,domLayer:g,zIndex:a,name:s,overrideDevicePixelRatio:v}),m={id:this._nextLayerId++,name:s,zIndex:a,zIndexSubOrder:l,canvas:S,getComputedOpacity:u,getVisibility:c};if(a>=this._nextZIndex&&(this._nextZIndex=a+1),this.layers.push(m),this.sortLayers(),g){var C=this.layers.map(function(x){return x.canvas}).filter(function(x){return x instanceof Ve}),_=C.findIndex(function(x){return x===S});(null!==(e=C[_-1])&&void 0!==e?e:this.canvas).element.insertAdjacentElement("afterend",S.element)}return this.debug.consoleLog&&q.debug("Scene.addLayer() - layers",this.layers),m.canvas}},o.prototype.removeLayer=function(t){var e=this.layers.findIndex(function(r){return r.canvas===t});e>=0&&(this.layers.splice(e,1),t.destroy(),this.markDirty(),this.debug.consoleLog&&q.debug("Scene.removeLayer() -  layers",this.layers))},o.prototype.moveLayer=function(t,e,r){var n=this.layers.find(function(i){return i.canvas===t});n&&(n.zIndex=e,n.zIndexSubOrder=r,this.sortLayers(),this.markDirty(),this.debug.consoleLog&&q.debug("Scene.moveLayer() -  layers",this.layers))},o.prototype.sortLayers=function(){this.layers.sort(function(t,e){var r,n;return ih(Kr(Kr([t.zIndex],$t(null!==(r=t.zIndexSubOrder)&&void 0!==r?r:[void 0,void 0])),[t.id]),Kr(Kr([e.zIndex],$t(null!==(n=e.zIndexSubOrder)&&void 0!==n?n:[void 0,void 0])),[e.id]),nh)})},o.prototype.markDirty=function(){this._dirty=!0},Object.defineProperty(o.prototype,"dirty",{get:function(){return this._dirty},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"root",{get:function(){return this._root},set:function(t){var e=this;t!==this._root&&(this._root&&this._root._setLayerManager(),this._root=t,t&&(null===t.parent&&t.layerManager&&t.layerManager!==this&&(t.layerManager.root=null),t._setLayerManager({addLayer:function(r){return e.addLayer(r)},moveLayer:function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e.moveLayer.apply(e,Kr([],$t(r)))},removeLayer:function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e.removeLayer.apply(e,Kr([],$t(r)))},markDirty:function(){return e.markDirty()},canvas:this.canvas,debug:Kn(Kn({},this.debug),{consoleLog:this.debug.level>=ya.DETAILED})})),this.markDirty())},enumerable:!1,configurable:!0}),o.prototype.strip=function(){var t,e,r=this.layers;try{for(var n=ma(r),i=n.next();!i.done;i=n.next()){var a=i.value;a.canvas.destroy(),delete a.canvas}}catch(s){t={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}r.splice(0,r.length),this.root=null,this._dirty=!1,this.canvas.context.resetTransform()},o.prototype.destroy=function(){this.container=void 0,this.strip(),this.canvas.destroy(),Object.assign(this,{canvas:void 0,ctx:void 0})},o.prototype.render=function(t){var e;return function(o,t,e,r){return new(e||(e=Promise))(function(i,a){function s(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):function n(i){return i instanceof e?i:new e(function(a){a(i)})}(c.value).then(s,l)}u((r=r.apply(o,t||[])).next())})}(this,void 0,void 0,function(){var r,n,i,a,s,l,u,c,d,h,p,v,g,y,S,_;return function(o,t){var r,n,i,a,e={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(!(i=(i=e.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){e=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){e.label=u[1];break}if(6===u[0]&&e.label<i[1]){e.label=i[1],i=u;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(u);break}i[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(o,e)}catch(c){u=[6,c],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}(this,function(w){return i=void 0===(n=(r=t??{}).debugSplitTimes)?[performance.now()]:n,s=void 0===(a=r.extraDebugStats)?{}:a,u=(l=this).canvas,c=l.canvas.context,d=l.root,h=l.layers,v=l.opts.mode,(p=l.pendingSize)&&((_=this.canvas).resize.apply(_,Kr([],$t(p))),this.layers.forEach(function(x){var b;return(b=x.canvas).resize.apply(b,Kr([],$t(p)))}),this.pendingSize=void 0),d&&!d.visible?(this._dirty=!1,[2]):d&&!this.dirty?(this.debug.consoleLog&&q.debug("Scene.render() - no-op",{redrawType:$[d.dirty],tree:this.buildTree(d)}),this.debugStats(i,c,void 0,s),[2]):(g={ctx:c,forceRender:!0,resized:!!p,debugNodes:{}},"detailed"===this.debug.stats&&(g.stats={layersRendered:0,layersSkipped:0,nodesRendered:0,nodesSkipped:0}),y=!1,(!d||d.dirty>=$.TRIVIAL)&&(y=!0,u.clear()),d&&this.debug.dirtyTree&&(S=this.buildDirtyTree(d),q.debug("Scene.render() - dirtyTree",{dirtyTree:S.dirtyTree,paths:S.paths})),d&&y&&(this.debug.consoleLog&&q.debug("Scene.render() - before",{redrawType:$[d.dirty],canvasCleared:y,tree:this.buildTree(d)}),d.visible&&(c.save(),d.render(g),c.restore())),"dom-composite"!==v&&h.length>0&&y&&(this.sortLayers(),c.save(),c.setTransform(1/u.pixelRatio,0,0,1/u.pixelRatio,0,0),h.forEach(function(x){var b=x.canvas,O=b.imageSource,E=x.getComputedOpacity;!b.enabled||!(0,x.getVisibility)()||(c.globalAlpha=E(),c.drawImage(O,0,0))}),c.restore()),null===(e=c.verifyDepthZero)||void 0===e||e.call(c),this._dirty=!1,this.debugStats(i,c,g.stats,s),this.debugSceneNodeHighlight(c,this.debug.sceneNodeHighlight,g.debugNodes),d&&this.debug.consoleLog&&q.debug("Scene.render() - after",{redrawType:$[d.dirty],canvasCleared:y,tree:this.buildTree(d)}),[2])})})},o.prototype.debugStats=function(t,e,r,n){var i,a;void 0===n&&(n={});var s=performance.now();if(this.debug.stats){var l=t[0];t.push(s);var u=function(I,L){var N=I+L;return I+" / "+N+" ("+Math.round(100*I/N)+"%)"},c=function(I,L){return Math.round(100*(L-I))/100+"ms"},d=r??{},h=d.layersRendered,p=void 0===h?0:h,v=d.layersSkipped,g=void 0===v?0:v,y=d.nodesRendered,S=void 0===y?0:y,m=d.nodesSkipped,C=void 0===m?0:m,_=t.map(function(I,L){return L>0?c(t[L-1],I):null}).filter(function(I){return null!=I}).join(" + "),w=Object.entries(n).map(function(I){var L=$t(I,2);return L[0]+": "+L[1]}).join(" ; "),b=[c(l,s)+" ("+_+")",""+w,"detailed"===this.debug.stats?"Layers: "+u(p,g):null,"detailed"===this.debug.stats?"Nodes: "+u(S,C):null].filter(function(I){return null!=I}).map(function(I){return[I,Ve.getTextSize(I,e.font)]}),O=Math.max.apply(Math,Kr([],$t(b.map(function(I){return $t(I,2)[1].width})))),T=b.reduce(function(I,L){return I+$t(L,2)[1].height},0);e.save(),e.fillStyle="white",e.fillRect(0,0,O,T),e.fillStyle="black";var E=0;try{for(var P=ma(b),D=P.next();!D.done;D=P.next()){var R=$t(D.value,2);e.fillText(R[0],2,E+=R[1].height)}}catch(I){i={error:I}}finally{try{D&&!D.done&&(a=P.return)&&a.call(P)}finally{if(i)throw i.error}}e.restore()}},o.prototype.debugSceneNodeHighlight=function(t,e,r){var n,i,a,s,l,u,c,d=function(E){return function(P){return!!E.test(P.id)||P instanceof re&&null!=P.name&&E.test(P.name)}},h=function(E){return function(P){return E===P.id||P instanceof re&&null!=P.name&&E===P.name}};try{for(var p=ma(e),v=p.next();!v.done;v=p.next()){var g=v.value;if("string"!=typeof g||null==r[g]){var y="string"==typeof g?h(g):d(g),S=null===(c=this.root)||void 0===c?void 0:c.findNodes(y);if(!S||0===S.length){q.debug("Scene.render() - no debugging node with id ["+g+"] in scene graph.");continue}try{for(var m=(a=void 0,ma(S)),C=m.next();!C.done;C=m.next())(_=C.value)instanceof re&&_.name?r[_.name]=_:r[_.id]=_}catch(E){a={error:E}}finally{try{C&&!C.done&&(s=m.return)&&s.call(m)}finally{if(a)throw a.error}}}}}catch(E){n={error:E}}finally{try{v&&!v.done&&(i=p.return)&&i.call(p)}finally{if(n)throw n.error}}t.save();try{for(var w=ma(Object.entries(r)),x=w.next();!x.done;x=w.next()){var _,b=$t(x.value,2),O=b[0],T=(_=b[1]).computeTransformedBBox();T?(t.globalAlpha=.8,t.strokeStyle="red",t.lineWidth=1,t.strokeRect(T.x,T.y,T.width,T.height),t.fillStyle="red",t.strokeStyle="white",t.font="16px sans-serif",t.textBaseline="top",t.textAlign="left",t.lineWidth=2,t.strokeText(O,T.x,T.y,T.width),t.fillText(O,T.x,T.y,T.width)):q.debug("Scene.render() - no bbox for debugged node ["+O+"].")}}catch(E){l={error:E}}finally{try{x&&!x.done&&(u=w.return)&&u.call(w)}finally{if(l)throw l.error}}t.restore()},o.prototype.buildTree=function(t){var r,n,e=this,i=null!==(r=t instanceof re?t.name:null)&&void 0!==r?r:t.id;return Kn(Kn({name:i,node:t,dirty:$[t.dirty]},null!==(n=t.parent)&&void 0!==n&&n.isVirtual?{virtualParentDirty:$[t.parent.dirty],virtualParent:t.parent}:{}),t.children.map(function(a){return e.buildTree(a)}).reduce(function(a,s){var l=s.name,u=s.node,h=u.zIndex,p=u.zIndexSubOrder,v=s.node,g=s.virtualParent;(!u.visible||u.opacity<=0)&&(l="("+l+")"),v instanceof re&&v.isLayer()&&(l="*"+l+"*");for(var y=[""+(l??"<unknown>"),"z: "+h,p&&"zo: "+p.map(function(C){return"function"==typeof C?C()+" (fn)":C}).join(" / "),g&&"(virtual parent)"].filter(function(C){return!!C}).join(" "),S=y,m=1;null!=a[S]&&m<100;)S=y+" ("+m+++")";return a[S]=s,a},{}))},o.prototype.buildDirtyTree=function(t){var r,e=this;if(t.dirty===$.NONE)return{dirtyTree:{},paths:[]};var n=t.children.map(function(s){return e.buildDirtyTree(s)}).filter(function(s){return s.paths.length>0}),i=null!==(r=t instanceof re?t.name:null)&&void 0!==r?r:t.id,a=0===n.length?[i]:n.map(function(s){return s.paths}).reduce(function(s,l){return s.concat(l)},[]).map(function(s){return i+"."+s});return{dirtyTree:Kn({name:i,node:t,dirty:$[t.dirty]},n.map(function(s){return s.dirtyTree}).filter(function(s){return void 0!==s.dirty}).reduce(function(s,l){var u;return s[null!==(u=l.name)&&void 0!==u?u:"<unknown>"]=l,s},{})),paths:a}},o.className="Scene",o}(),ix=function(){return function o(){this.stops=[]}}(),ki=2*Math.PI;function _t(o){return o%=ki,(o+=ki)%ki}function Xt(o){return o/180*Math.PI}var ax=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),sx=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.angle=0,e}return ax(t,o),t.prototype.createGradient=function(e,r){var a=this.stops,l=_t(Xt(this.angle+90)),u=Math.cos(l),c=Math.sin(l),d=r.width,h=r.height,p=r.x+.5*d,v=r.y+.5*h;if(d>0&&h>0){var S,g=Math.sqrt(h*h+d*d)/2,y=Math.atan2(h,d);S=l<Math.PI/2?l:l<Math.PI?Math.PI-l:l<3*Math.PI/2?l-Math.PI:2*Math.PI-l;var m=g*Math.abs(Math.cos(S-y)),C=e.createLinearGradient(p+u*m,v+c*m,p-u*m,v-c*m);return a.forEach(function(_){C.addColorStop(_.offset,_.color)}),C}return"black"},t}(ix),lx=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ar=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},ux=/^linear-gradient\((.*?)deg,\s*(.*?)\s*\)$/i,_r=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.lastInstanceId=0,e.fillOpacity=1,e.strokeOpacity=1,e.fill=t.defaultStyles.fill,e.stroke=t.defaultStyles.stroke,e.strokeWidth=t.defaultStyles.strokeWidth,e.lineDash=t.defaultStyles.lineDash,e.lineDashOffset=t.defaultStyles.lineDashOffset,e.lineCap=t.defaultStyles.lineCap,e.lineJoin=t.defaultStyles.lineJoin,e.opacity=t.defaultStyles.opacity,e.fillShadow=t.defaultStyles.fillShadow,e}return lx(t,o),t.createInstance=function(e){var r=Object.create(e);return r._setParent(void 0),r.id=e.id+"-Instance-"+String(++e.lastInstanceId),r},t.prototype.restoreOwnStyles=function(){for(var e=this.constructor.defaultStyles,r=Object.getOwnPropertyNames(e),n=0,i=r.length;n<i;n++){var a=r[n];this[a]=e[a]}},t.prototype.restoreAllStyles=function(){var e=this.constructor.defaultStyles;for(var r in e)this[r]=e[r]},t.prototype.restoreOverriddenStyles=function(){var e=this.constructor.defaultStyles,r=Object.getPrototypeOf(e);for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&Object.prototype.hasOwnProperty.call(r,n)&&(this[n]=e[n])},t.prototype.updateGradient=function(){var r,e=this.fill;if(e?.startsWith("linear-gradient")&&(r=ux.exec(e))){for(var n=parseFloat(r[1]),i=[],a=r[2],s=/(#[0-9a-f]+)|(rgba?\(.+?\))|([a-z]+)/gi,l=void 0;l=s.exec(a);)i.push(l[0]);this.gradient=new sx,this.gradient.angle=n,this.gradient.stops=i.map(function(u,c){return{offset:c/(i.length-1),color:u}})}else this.gradient=void 0},t.prototype.align=function(e,r){var n,i,a,s=null!==(a=null===(i=null===(n=this.layerManager)||void 0===n?void 0:n.canvas)||void 0===i?void 0:i.pixelRatio)&&void 0!==a?a:1,l=Math.round(e*s)/s;return null==r?l:0===r?0:r<1?Math.ceil(r*s)/s:Math.round((r+e)*s)/s-l},t.prototype.fillStroke=function(e){this.renderFill(e),this.renderStroke(e)},t.prototype.renderFill=function(e){if(this.fill){var r=e.globalAlpha;this.applyFill(e),this.applyFillAlpha(e),this.applyShadow(e),e.fill(),e.globalAlpha=r}e.shadowColor="rgba(0, 0, 0, 0)"},t.prototype.applyFill=function(e){e.fillStyle=this.gradient?this.gradient.createGradient(e,this.computeBBox()):this.fill},t.prototype.applyFillAlpha=function(e){e.globalAlpha=e.globalAlpha*this.opacity*this.fillOpacity},t.prototype.applyShadow=function(e){var r,n,i=null!==(n=null===(r=this.layerManager)||void 0===r?void 0:r.canvas.pixelRatio)&&void 0!==n?n:1,a=this.fillShadow;a?.enabled&&(e.shadowColor=a.color,e.shadowOffsetX=a.xOffset*i,e.shadowOffsetY=a.yOffset*i,e.shadowBlur=a.blur*i)},t.prototype.renderStroke=function(e){if(this.stroke&&this.strokeWidth){var r=e.globalAlpha;e.strokeStyle=this.stroke,e.globalAlpha=r*this.opacity*this.strokeOpacity,e.lineWidth=this.strokeWidth,this.lineDash&&e.setLineDash(this.lineDash),this.lineDashOffset&&(e.lineDashOffset=this.lineDashOffset),this.lineCap&&(e.lineCap=this.lineCap),this.lineJoin&&(e.lineJoin=this.lineJoin),e.stroke(),e.globalAlpha=r}},t.prototype.containsPoint=function(e,r){return this.isPointInPath(e,r)},t.defaultStyles=Object.assign({},{fill:"black",stroke:void 0,strokeWidth:0,lineDash:void 0,lineDashOffset:0,lineCap:void 0,lineJoin:void 0,opacity:1,fillShadow:void 0}),ar([ee({redraw:$.MINOR})],t.prototype,"fillOpacity",void 0),ar([ee({redraw:$.MINOR})],t.prototype,"strokeOpacity",void 0),ar([ee({redraw:$.MINOR,changeCb:function(e){return e.updateGradient()}})],t.prototype,"fill",void 0),ar([ee({redraw:$.MINOR})],t.prototype,"stroke",void 0),ar([ee({redraw:$.MINOR})],t.prototype,"strokeWidth",void 0),ar([ee({redraw:$.MINOR})],t.prototype,"lineDash",void 0),ar([ee({redraw:$.MINOR})],t.prototype,"lineDashOffset",void 0),ar([ee({redraw:$.MINOR})],t.prototype,"lineCap",void 0),ar([ee({redraw:$.MINOR})],t.prototype,"lineJoin",void 0),ar([ee({redraw:$.MINOR,convertor:function(e){return Math.min(1,Math.max(0,e))}})],t.prototype,"opacity",void 0),ar([ee({redraw:$.MINOR,checkDirtyOnAssignment:!0})],t.prototype,"fillShadow",void 0),t}($s),cx=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),xr=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},tc=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function Zs(o){var t=o??{},e=t.redraw;return ee({redraw:void 0===e?$.MAJOR:e,type:"font",changeCb:t.changeCb})}var Ee=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.x=0,e.y=0,e.lines=[],e.text=void 0,e._dirtyFont=!0,e.fontSize=10,e.fontFamily="sans-serif",e.textAlign=t.defaultStyles.textAlign,e.textBaseline=t.defaultStyles.textBaseline,e.lineHeight=void 0,e}return cx(t,o),t.prototype._setLines=function(){this.lines=fh(this.text)},Object.defineProperty(t.prototype,"font",{get:function(){return(null==this._font||this._dirtyFont)&&(this._dirtyFont=!1,this._font=Yn(this)),this._font},enumerable:!1,configurable:!0}),t.prototype.computeBBox=function(){return Ve.has.textMetrics?uh(this.lines,this.x,this.y,this):ch(this.lines,this.x,this.y,this)},t.prototype.getLineHeight=function(e){var r,n;if(this.lineHeight)return this.lineHeight;if(Ve.has.textMetrics){var i=Ve.measureText(e,this.font,this.textBaseline,this.textAlign);return(null!==(r=i.fontBoundingBoxAscent)&&void 0!==r?r:i.emHeightAscent)+(null!==(n=i.fontBoundingBoxDescent)&&void 0!==n?n:i.emHeightDescent)}return Ve.getTextSize(e,this.font).height},t.prototype.isPointInPath=function(e,r){var n=this.transformPoint(e,r),i=this.computeBBox();return!!i&&i.containsPoint(n.x,n.y)},t.prototype.render=function(e){var r=e.ctx,i=e.stats;if(this.dirty!==$.NONE||e.forceRender)if(this.lines.length&&this.layerManager){this.computeTransformMatrix(),this.matrix.toContext(r);var a=this,s=a.fill,l=a.stroke,u=a.strokeWidth;r.font=this.font,r.textAlign=this.textAlign,r.textBaseline=this.textBaseline;var c=this.layerManager.canvas.pixelRatio||1,d=r.globalAlpha;if(s){r.fillStyle=s,r.globalAlpha=d*this.opacity*this.fillOpacity;var h=this.fillShadow;h?.enabled&&(r.shadowColor=h.color,r.shadowOffsetX=h.xOffset*c,r.shadowOffsetY=h.yOffset*c,r.shadowBlur=h.blur*c),this.renderLines(function(m,C,_){return r.fillText(m,C,_)})}if(l&&u){r.strokeStyle=l,r.lineWidth=u,r.globalAlpha=d*this.opacity*this.strokeOpacity;var p=this,v=p.lineDash,g=p.lineDashOffset,y=p.lineCap,S=p.lineJoin;v&&r.setLineDash(v),g&&(r.lineDashOffset=g),y&&(r.lineCap=y),S&&(r.lineJoin=S),this.renderLines(function(m,C,_){return r.strokeText(m,C,_)})}o.prototype.render.call(this,e)}else i&&(i.nodesSkipped+=this.nodeCount.count);else i&&(i.nodesSkipped+=this.nodeCount.count)},t.prototype.renderLines=function(e){for(var r=this,n=this,i=n.lines,a=n.x,s=n.y,l=this.lines.map(function(h){return r.getLineHeight(h)}),c=-(l.reduce(function(h,p){return h+p},0)-l[0])*dh(this.textBaseline),d=0;d<i.length;d++)e(i[d],a,s+c),c+=l[d]},t.wrap=function(e,r,n,i,a){var s,l,c=function dx(o){var t=new Map,e=function(n){return Ve.getTextSize(n,o)};return{size:e,width:function(n){if(t.has(n))return t.get(n);var i=e(n).width;return t.set(n,i),i}}}(Yn(i)),d=e.split(/\r?\n/g);if(0===d.length)return"";if("never"===a)return t.truncateLine(d[0],r,c,!1);var h=[],p=0;try{for(var v=tc(d),g=v.next();!g.done;g=v.next()){var S=t.wrapLine(g.value,r,n,c,i,a,p);if(h.push(S.result),p=S.cumulativeHeight,S.truncated)break}}catch(m){s={error:m}}finally{try{g&&!g.done&&(l=v.return)&&l.call(v)}finally{if(s)throw s.error}}return h.join("\n").trim()},t.wrapLine=function(e,r,n,i,a,s,l){if(!(e=e.trim()))return{result:"",truncated:!1,cumulativeHeight:l};var u=i.size(e);if(u.width<=r)return{result:e,truncated:!1,cumulativeHeight:l+u.height};if(u.height>n||i.width("W")>r)return{result:"",truncated:!0,cumulativeHeight:l};var c=e.split(/\s+/g),d=t.wrapLineSequentially(c,r,n,i,a,s,l);l=d.cumulativeHeight;var h=d.lines;if(!d.wordsBrokenOrTruncated&&!d.linesTruncated){var v=t.wrapLineBalanced(c,r,i,d.lines.length);v.length===h.length&&(h=v)}return{result:h.map(function(y){return y.join(" ")}).join("\n"),truncated:d.linesTruncated,cumulativeHeight:l}},t.breakWord=function(e,r,n,i,a){for(var s,l,u=function(O){return t.punctuationMarks.includes(e[O])},c=i?a.width("-"):0,d=[],h=0,p=0,v=0;v<e.length;v++){var y=a.width(e[v]);h+y+c>(0===p?r:n)&&(d.push(v),h=0,p++),h+=y}var m=[],C=0;try{for(var _=tc(d),w=_.next();!w.done;w=_.next()){var x=w.value,b=e.substring(C,x);i&&b.length>0&&!u(x-1)&&!u(x)&&(b+="-"),m.push(b),C=x}}catch(O){s={error:O}}finally{try{w&&!w.done&&(l=_.return)&&l.call(_)}finally{if(s)throw s.error}}return m.push(e.substring(C)),m},t.truncateLine=function(e,r,n,i){var a=n.width(e);if(a<r&&!i)return e;var s=n.width("\u2026");if(a+s<=r)return e+"\u2026";var u,c,l=Math.floor(e.length*r/a)+1;do{u=e.substring(0,l),c=n.width(u)}while(--l>=0&&c+s>r);return u+"\u2026"},t.wrapLineSequentially=function(e,r,n,i,a,s,l){var c=a.lineHeight,d=void 0===c?a.fontSize*t.defaultLineHeightRatio:c,h="always"===s||"hyphenate"===s,p="hyphenate"===s,v=i.width(" "),g=!1,y=!1,S=[],m=[],C=0,_=function(){var I=l+d;if(I>=n){var L=m.join(" "),N=t.truncateLine(L,r,i,!0);return m.splice(0,m.length,N),y=!0,!1}return C=0,l=I,S.push(m=[]),!0};if(!_())return{lines:S,linesTruncated:!0,wordsBrokenOrTruncated:g,cumulativeHeight:l};for(var w=0;w<e.length;w++){var x=e[w],b=i.width(x),O=0===m.length?0:v,T=C+O+b;if(T<=r)m.push(x),C=T;else if(b<=r){if(!_())break;m.push(x),C=b}else{if(g=!0,!h){if(!_())break;var F=t.truncateLine(x,r,i,!0);m.push(F),w<e.length-1&&(y=!0);break}for(var P=t.breakWord(x,r-C-O,r,p,i),D=!1,R=0;R<P.length;R++){var M=P[R];if(M&&m.push(M),R===P.length-1)C=i.width(M);else if(!_()){D=!0;break}}if(D)break}}return{lines:S,linesTruncated:y,wordsBrokenOrTruncated:g,cumulativeHeight:l}},t.wrapLineBalanced=function(e,r,n,i){var a,s,l=e.reduce(function(w,x){return w+n.width(x)},0),u=n.width(" "),d=(l+u*(e.length-i-2))/i,h=[],p=[],v=n.width(e[0]),g=!0;try{for(var y=tc(e),S=y.next();!S.done;S=y.next()){var m=S.value,C=n.width(m);if(g)(p=[]).push(m),v=C,g=!1,h.push(p);else{var _=v+u+C;_<=d?(p.push(m),v=_):_<=r?(p.push(m),g=!0):(v=C,h.push(p=[m]))}}}catch(w){a={error:w}}finally{try{S&&!S.done&&(s=y.return)&&s.call(y)}finally{if(a)throw a.error}}return h},t.prototype.setFont=function(e){this.fontFamily=e.fontFamily,this.fontSize=e.fontSize,this.fontStyle=e.fontStyle,this.fontWeight=e.fontWeight},t.prototype.setAlign=function(e){this.textAlign=e.textAlign,this.textBaseline=e.textBaseline},t.className="Text",t.defaultLineHeightRatio=1.15,t.defaultStyles=Object.assign({},_r.defaultStyles,{textAlign:"start",fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:"sans-serif",textBaseline:"alphabetic"}),t.punctuationMarks=[".",",","-",":",";","!","?","'",'"',"(",")"],xr([ee({redraw:$.MAJOR})],t.prototype,"x",void 0),xr([ee({redraw:$.MAJOR})],t.prototype,"y",void 0),xr([ee({redraw:$.MAJOR,changeCb:function(e){return e._setLines()}})],t.prototype,"text",void 0),xr([Zs()],t.prototype,"fontStyle",void 0),xr([Zs()],t.prototype,"fontWeight",void 0),xr([Zs()],t.prototype,"fontSize",void 0),xr([Zs()],t.prototype,"fontFamily",void 0),xr([ee({redraw:$.MAJOR})],t.prototype,"textAlign",void 0),xr([ee({redraw:$.MAJOR})],t.prototype,"textBaseline",void 0),xr([ee({redraw:$.MAJOR})],t.prototype,"lineHeight",void 0),t}(_r);function Yn(o){return[o.fontStyle??"",o.fontWeight??"",o.fontSize+"px",o.fontFamily].join(" ").trim()}function fx(o,t,e,r){return Ve.has.textMetrics?uh(o,t,e,r):ch(o,t,e,r)}function uh(o,t,e,r){for(var n,i,a=0,s=0,l=0,u=0,c=0,d=Yn(r),h=r.lineHeight,p=r.textBaseline,v=void 0===p?Ee.defaultStyles.textBaseline:p,g=r.textAlign,y=void 0===g?Ee.defaultStyles.textAlign:g,S=0;S<o.length;S++){var m=Ve.measureText(o[S],d,v,y);a=Math.max(a,m.actualBoundingBoxLeft),l=Math.max(l,m.width),0==S?(s+=m.actualBoundingBoxAscent,u+=m.actualBoundingBoxAscent):c+=null!==(n=m.fontBoundingBoxAscent)&&void 0!==n?n:m.emHeightAscent,S==o.length-1?u+=m.actualBoundingBoxDescent:c+=null!==(i=m.fontBoundingBoxDescent)&&void 0!==i?i:m.emHeightDescent}return void 0!==h&&(c=(o.length-1)*h),u+=c,s+=c*dh(v),new me(t-a,e-s,l,u)}function ch(o,t,e,r){var n=0,i=0,a=0,s=Yn(r),l=r.lineHeight,u=r.textBaseline,c=void 0===u?Ee.defaultStyles.textBaseline:u,d=r.textAlign,h=void 0===d?Ee.defaultStyles.textAlign:d;o.length>0&&(n=(p=Ve.getTextSize(o[0],s)).width,i=p.height);for(var v=1;v<o.length;v++){var p=Ve.getTextSize(o[v],s);n=Math.max(n,p.width),a+=l??p.height}switch(h){case"end":case"right":t-=n;break;case"center":t-=n/2}switch(c){case"alphabetic":e-=.7*i+.5*a;break;case"middle":e-=.45*i+.5*a;break;case"ideographic":case"bottom":e-=i+a;break;case"hanging":e-=.2*i+.5*a}return new me(t,e,n,i+a)}function dh(o){switch(o){case"top":case"hanging":return 0;case"bottom":case"alphabetic":case"ideographic":return 1;case"middle":return.5}}function fh(o){return"string"==typeof o?o.split(/\r?\n/g):[]}var hh=function(){function o(){this.allEventListeners=new Map}return o.prototype.addEventListener=function(t,e){if("function"!=typeof e)throw new Error("AG Charts - listener must be a Function");var r=this.allEventListeners,n=r.get(t);n||r.set(t,n=new Set),n.has(e)||n.add(e)},o.prototype.removeEventListener=function(t,e){var r=this.allEventListeners,n=r.get(t);n&&(n.delete(e),0===n.size&&r.delete(t))},o.prototype.hasEventListener=function(t){return this.allEventListeners.has(t)},o.prototype.clearEventListeners=function(){this.allEventListeners.clear()},o.prototype.fireEvent=function(t){var e=this.allEventListeners.get(t.type);e?.forEach(function(r){return r(t)})},o}(),nc=function(o){return"string"==typeof o},ph=function(o){return!!o&&Object.prototype.hasOwnProperty.call(o,"toString")&&nc(o.toString())};function ic(o){return nc(o)||ph(o)}function qs(o){var r;return gt(o)||!!(r=o)&&Object.prototype.hasOwnProperty.call(r,"valueOf")&&gt(r.valueOf())||function(r){return r instanceof Date&&!isNaN(+r)}(o)}function Js(o,t){return t&&qs(o)?o:t?void 0:ic(o)?o:String(o)}var gt=function(o){return"number"==typeof o&&Number.isFinite(o)},vh=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Xe=function(){function o(t,e,r,n){void 0===n&&(n=1),this.r=Math.min(1,Math.max(0,t||0)),this.g=Math.min(1,Math.max(0,e||0)),this.b=Math.min(1,Math.max(0,r||0)),this.a=Math.min(1,Math.max(0,n||0))}return o.validColorString=function(t){return t.indexOf("#")>=0?!!o.parseHex(t):t.indexOf("rgb")>=0?!!o.stringToRgba(t):!!o.nameToHex[t.toLowerCase()]},o.fromString=function(t){if(t.indexOf("#")>=0)return o.fromHexString(t);var e=o.nameToHex[t.toLowerCase()];if(e)return o.fromHexString(e);if(t.indexOf("rgb")>=0)return o.fromRgbaString(t);throw new Error("Invalid color string: '"+t+"'")},o.tryParseFromString=function(t){try{return o.fromString(t)}catch{return q.warnOnce("invalid color string: '"+t+"'."),o.fromArray([0,0,0])}},o.parseHex=function(t){var e;switch((t=t.replace(/ /g,"").slice(1)).length){case 6:case 8:e=[];for(var r=0;r<t.length;r+=2)e.push(parseInt(""+t[r]+t[r+1],16));break;case 3:case 4:e=t.split("").map(function(n){return parseInt(n,16)}).map(function(n){return n+16*n})}if(e?.length>=3&&e.every(function(n){return n>=0}))return 3===e.length&&e.push(255),e},o.fromHexString=function(t){var e=o.parseHex(t);if(e){var r=vh(e,4);return new o(r[0]/255,r[1]/255,r[2]/255,r[3]/255)}throw new Error("Malformed hexadecimal color string: '"+t+"'")},o.stringToRgba=function(t){for(var e=vh([NaN,NaN],2),r=e[0],n=e[1],i=0;i<t.length;i++){var a=t[i];if(r||"("!==a){if(")"===a){n=i;break}}else r=i}var s=r&&n&&t.substring(r+1,n);if(s){var l=s.split(","),u=[];for(i=0;i<l.length;i++){var c=l[i],d=parseFloat(c);if(isNaN(d))return;c.indexOf("%")>=0?(d=Math.max(0,Math.min(100,d)),d/=100):3===i?d=Math.max(0,Math.min(1,d)):(d=Math.max(0,Math.min(255,d)),d/=255),u.push(d)}return u}},o.fromRgbaString=function(t){var e=o.stringToRgba(t);if(e){if(3===e.length)return new o(e[0],e[1],e[2]);if(4===e.length)return new o(e[0],e[1],e[2],e[3])}throw new Error("Malformed rgb/rgba color string: '"+t+"'")},o.fromArray=function(t){if(4===t.length)return new o(t[0],t[1],t[2],t[3]);if(3===t.length)return new o(t[0],t[1],t[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")},o.fromHSB=function(t,e,r,n){void 0===n&&(n=1);var i=o.HSBtoRGB(t,e,r);return new o(i[0],i[1],i[2],n)},o.padHex=function(t){return 1===t.length?"0"+t:t},o.prototype.toHexString=function(){var t="#"+o.padHex(Math.round(255*this.r).toString(16))+o.padHex(Math.round(255*this.g).toString(16))+o.padHex(Math.round(255*this.b).toString(16));return this.a<1&&(t+=o.padHex(Math.round(255*this.a).toString(16))),t},o.prototype.toRgbaString=function(t){void 0===t&&(t=3);var e=[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b)],r=Math.pow(10,t);return 1!==this.a?(e.push(Math.round(this.a*r)/r),"rgba("+e.join(", ")+")"):"rgb("+e.join(", ")+")"},o.prototype.toString=function(){return 1===this.a?this.toHexString():this.toRgbaString()},o.prototype.toHSB=function(){return o.RGBtoHSB(this.r,this.g,this.b)},o.RGBtoHSB=function(t,e,r){var n=Math.min(t,e,r),i=Math.max(t,e,r),s=NaN;if(n!==i){var l=i-n,u=(i-t)/l,c=(i-e)/l,d=(i-r)/l;s=t===i?d-c:e===i?2+u-d:4+c-u,(s/=6)<0&&(s+=1)}return[360*s,0!==i?(i-n)/i:0,i]},o.HSBtoRGB=function(t,e,r){isNaN(t)&&(t=0),t=(t%360+360)%360/360;var n=0,i=0,a=0;if(0===e)n=i=a=r;else{var s=6*(t-Math.floor(t)),l=s-Math.floor(s),u=r*(1-e),c=r*(1-e*l),d=r*(1-e*(1-l));switch(s>>0){case 0:n=r,i=d,a=u;break;case 1:n=c,i=r,a=u;break;case 2:n=u,i=r,a=d;break;case 3:n=u,i=c,a=r;break;case 4:n=d,i=u,a=r;break;case 5:n=r,i=u,a=c}}return[n,i,a]},o.prototype.derive=function(t,e,r,n){var i=o.RGBtoHSB(this.r,this.g,this.b),a=i[2];0==a&&r>1&&(a=.05);var s=((i[0]+t)%360+360)%360,l=Math.max(Math.min(i[1]*e,1),0);a=Math.max(Math.min(a*r,1),0);var u=Math.max(Math.min(this.a*n,1),0),c=o.HSBtoRGB(s,l,a);return c.push(u),o.fromArray(c)},o.prototype.brighter=function(){return this.derive(0,1,1/.7,1)},o.prototype.darker=function(){return this.derive(0,1,.7,1)},o.interpolate=function(t,e){var r=o.tryParseFromString(t),n=o.tryParseFromString(e);return function(i){var a=function(l,u){return l*(1-i)+u*i};return new o(a(r.r,n.r),a(r.g,n.g),a(r.b,n.b),a(r.a,n.a)).toString()}},o.nameToHex=Object.freeze({aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",transparent:"#00000000",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"}),o}(),gh=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},el=Symbol("BREAK"),oc="__decorator_config";function Gi(o,t){return function(e,r){var n=r.toString(),a=function px(o,t,e,r){null==Object.getOwnPropertyDescriptor(o,oc)&&Object.defineProperty(o,oc,{value:{}});var n=o[oc];if(null!=n[e])return n[e];n[e]={setters:[],getters:[]};var i=Object.getOwnPropertyDescriptor(o,t),a=i?.set,s=i?.get;return Object.defineProperty(o,t,{set:function(c){var d,h,p,v,y,g=null!==(v=null===(p=n[e])||void 0===p?void 0:p.setters)&&void 0!==v?v:[];g.some(function(_){return _.length>2})&&(y=s?s.call(this):this[r]);try{for(var S=gh(g),m=S.next();!m.done;m=S.next())if((c=(0,m.value)(this,t,c,y))===el)return}catch(_){d={error:_}}finally{try{m&&!m.done&&(h=S.return)&&h.call(S)}finally{if(d)throw d.error}}a?a.call(this,c):this[r]=c},get:function(){var c,d,h,p,v=s?s.call(this):this[r];try{for(var g=gh(null!==(p=null===(h=n[e])||void 0===h?void 0:h.getters)&&void 0!==p?p:[]),y=g.next();!y.done;y=g.next())if((v=(0,y.value)(this,t,v))===el)return}catch(m){c={error:m}}finally{try{y&&!y.done&&(d=g.return)&&d.call(g)}finally{if(c)throw c.error}}return v},enumerable:!0,configurable:!1}),n[e]}(e,r,n,"__"+n),s=a.getters;a.setters.push(o),t&&s.splice(0,0,t)}}function A(o){return Gi(function(t,e,r){var n,i,a;if(o(r,{target:t}))return r;var s=e.toString().replace(/^_*/,""),l=null!==(i=null===(n=t.constructor)||void 0===n?void 0:n.className)&&void 0!==i?i:null===(a=t.constructor)||void 0===a?void 0:a.name;l?.length<3&&(l=null);var u=l?"of ["+l+"] ":"";return q.warn(o.message?"Property ["+s+"] "+u+"cannot be set to ["+JSON.stringify(r)+"]; "+o.message+", ignoring.":"Property ["+s+"] "+u+"cannot be set to ["+JSON.stringify(r)+"], ignoring."),el})}function ne(o,t){return o.message=t,o}var Ne=function(o,t,e){return void 0===o||e(o,t)},gn=function(o,t){return ne(function(e,r){return Array.isArray(e)&&(!o||e.length===o)&&(!t||e.every(function(n){return t(n,r)}))},"expecting an Array")},ac=function(o){return ne(function(t,e){return Ne(t,e,gn(o))},"expecting an optional Array")},Yr=function(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];return ne(function(e,r){return o.every(function(n){return n(e,r)})},o.map(function(e){return e.message}).filter(function(e){return null!=e}).join(" AND "))},tl=function(o){return null!=o&&!isNaN(o)},rl=function(o){return ne(function(t,e){return!tl(t)||!tl(e.target[o])||t<e.target[o]},"expected to be less than "+o)},Sa=function(o){return ne(function(t,e){return!tl(t)||!tl(e.target[o])||t>e.target[o]},"expected to be greater than "+o)},gx=ne(function(o){return"function"==typeof o},"expecting a Function"),ke=ne(function(o,t){return Ne(o,t,gx)},"expecting an optional Function"),Te=ne(function(o){return!0===o||!1===o},"expecting a Boolean"),wr=ne(function(o,t){return Ne(o,t,Te)},"expecting an optional Boolean"),at=ne(function(o){return"string"==typeof o},"expecting a String"),oe=ne(function(o,t){return Ne(o,t,at)},"expecting an optional String"),yh=ne(function(o){return o instanceof Date&&!isNaN(+o)},"expecting a Date object"),yx=ne(function(o,t){return Ne(o,t,yh)},"expecting an optional Date");ne(gn(void 0,yh),"expecting an Array of Date objects");var mx=X(0),mh=function(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];return ne(function(e,r){return o.some(function(n){return n(e,r)})},o.map(function(e){return e.message}).filter(function(e){return null!=e}).join(" OR "))}(yx,ne(function(o,t){return Ne(o,t,mx)},"expecting an optional number")),nl="A color string can be in one of the following formats to be valid: #rgb, #rrggbb, rgb(r, g, b), rgba(r, g, b, a) or a CSS color name such as 'white', 'orange', 'cyan', etc",It=ne(function(o){return"string"==typeof o&&Xe.validColorString(o)},"expecting a color String. "+nl),De=ne(function(o,t){return Ne(o,t,It)},"expecting an optional color String. "+nl),Ca=ne(gn(void 0,It),"expecting an Array of color strings. "+nl),Cx=ne(function(o,t){return Ne(o,t,Ca)},"expecting an optional Array of color strings. "+nl);function X(o,t){return ne(function(r){return"number"==typeof r&&Number.isFinite(r)&&(void 0===o||r>=o)&&(void 0===t||r<=t)},"expecting a finite Number"+(void 0!==o?", more than or equal to "+o:"")+(void 0!==t?", less than or equal to "+t:""))}function _e(o,t){return ne(function(r,n){return Ne(r,n,X(o,t))},"expecting an optional finite Number"+(void 0!==o?", more than or equal to "+o:"")+(void 0!==t?", less than or equal to "+t:""))}function yn(o,t){return ne(function(r){return"number"==typeof r&&(isNaN(r)||Number.isFinite(r)&&(void 0===o||r>=o)&&(void 0===t||r<=t))},"expecting a finite Number"+(void 0!==o?", more than or equal to "+o:"")+(void 0!==t?", less than or equal to "+t:""))}var Sh=ne(gn(void 0,X()),"expecting an Array of numbers"),Ch=ne(function(o,t){return Ne(o,t,Sh)},"expecting an optional Array of numbers"),_h=ne(gn(void 0,at),"expecting an Array of strings");function xh(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];return ne(function(r){return"string"==typeof r&&o.indexOf(r)>=0},"expecting one of: "+o.join(", "))}ne(function(o,t){return Ne(o,t,_h)},"expecting an optional Array of strings");var _x=ne(gn(void 0,Te),"expecting an Array of boolean values");ne(function(o,t){return Ne(o,t,_x)},"expecting an optional Array of boolean values");var xx=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"],wx=ne(function(o){return"normal"===o||"italic"===o||"oblique"===o},"expecting a font style keyword such as 'normal', 'italic' or 'oblique'"),$n=ne(function(o,t){return Ne(o,t,wx)},"expecting an optional font style keyword such as 'normal', 'italic' or 'oblique'"),bx=ne(function(o){return xx.includes(o)},"expecting a font weight keyword such as 'normal', 'bold' or 'bolder' or a numeric value such as 100, 300 or 600"),Xn=ne(function(o,t){return Ne(o,t,bx)},"expecting an optional font weight keyword such as 'normal', 'bold' or 'bolder' or a numeric value such as 100, 300 or 600"),Ox=ne(gn(void 0,X(0)),"expecting an Array of numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),Vi=ne(function(o,t){return Ne(o,t,Ox)},"expecting an optional Array of numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),Ex=["butt","round","square"],sc=ne(function(o){return Ex.includes(o)},"expecting a line cap keyword such as 'butt', 'round' or 'square'");ne(function(o,t){return Ne(o,t,sc)},"expecting an optional line cap keyword such as 'butt', 'round' or 'square'");var Tx=["round","bevel","miter"],Px=ne(function(o){return Tx.includes(o)},"expecting a line join keyword such as 'round', 'bevel' or 'miter'");ne(function(o,t){return Ne(o,t,Px)},"expecting an optional line join keyword such as 'round', 'bevel' or 'miter'");var Ax=["top","right","bottom","left"],wh=ne(function(o){return Ax.includes(o)},"expecting a position keyword such as 'top', 'right', 'bottom' or 'left"),Dx=["exact","nearest"],bh=ne(function(o){return"number"==typeof o&&Number.isFinite(o)||Dx.includes(o)},"expecting an interaction range of 'exact', 'nearest' or a number"),Mx=["never","always","hyphenate","on-space"],lc=ne(function(o){return Mx.includes(o)},"expecting a text wrap strategy keyword such as 'never', 'always', 'hyphenate', 'on-space'"),We=function(o){return o[o.SERIES_BACKGROUND_ZINDEX=-10]="SERIES_BACKGROUND_ZINDEX",o[o.AXIS_GRID_ZINDEX=0]="AXIS_GRID_ZINDEX",o[o.AXIS_ZINDEX=20]="AXIS_ZINDEX",o[o.SERIES_CROSSLINE_RANGE_ZINDEX=30]="SERIES_CROSSLINE_RANGE_ZINDEX",o[o.SERIES_LAYER_ZINDEX=500]="SERIES_LAYER_ZINDEX",o[o.SERIES_CROSSHAIR_ZINDEX=1e3]="SERIES_CROSSHAIR_ZINDEX",o[o.SERIES_LABEL_ZINDEX=1500]="SERIES_LABEL_ZINDEX",o[o.SERIES_CROSSLINE_LINE_ZINDEX=2500]="SERIES_CROSSLINE_LINE_ZINDEX",o[o.LEGEND_ZINDEX=3e3]="LEGEND_ZINDEX",o}(We||{}),Z=function(o){return o.X="x",o.Y="y",o}(Z||{}),uc=function(){function o(t){this.type=t,this.continuousDomain=[1/0,-1/0],this.discreteDomain=new Set}return o.prototype.extend=function(t){"discrete"===this.type?this.discreteDomain.add(t):"continuous"===this.type&&(this.continuousDomain[0]>t&&(this.continuousDomain[0]=t),this.continuousDomain[1]<t&&(this.continuousDomain[1]=t))},o.prototype.getDomain=function(){if("discrete"===this.type)return this.discreteDomain;if("continuous"===this.type)return this.continuousDomain;throw new Error("AG Charts - Unsupported data domain type: "+this.type)},o}();function il(o,t){var e,r;void 0===t&&(t=[1/0,-1/0]);try{for(var n=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(o),i=n.next();!i.done;i=n.next()){var a=i.value;"number"==typeof a&&(a<t[0]&&(t[0]=a),a>t[1]&&(t[1]=a))}}catch(s){e={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return t}var ze=function(){return ze=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},ze.apply(this,arguments)},Ge=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Se=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ke=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o};function Fx(o){return o.map(function(t){return null==t||"number"==typeof t||"string"==typeof t||"boolean"==typeof t?t:"object"==typeof t?JSON.stringify(t):t}).join("-")}function Ix(o){var t=1e4;return Number.isInteger(o)?o:Math.abs(o)>t?Math.trunc(o):Math.round(o*t)/t}function ol(o){if(void 0===o)return[];var t=Ge(o,2),e=t[0],r=t[1];return r=+r,0==(e=+e)&&0===r?[0,1]:e===1/0&&r===-1/0?[]:(e===1/0&&(e=0),r===-1/0&&(r=0),gt(e)&&gt(r)?[e,r]:[])}var Bi=Symbol("invalid"),Lx=function(){function o(t){var e,r,n,i,a,s,l=this,u=t.props,c=!0;try{for(var d=Se(u),h=d.next();!h.done;h=d.next()){var p=h.value;if("key"===p.type&&!c)throw new Error("AG Charts - internal config error: keys must come before values.");"value"===p.type&&c&&(c=!1)}}catch(x){e={error:x}}finally{try{h&&!h.done&&(r=d.return)&&r.call(d)}finally{if(e)throw e.error}}this.opts=ze({dataVisible:!0},t),this.keys=u.filter(function(x){return"key"===x.type}).map(function(x,b){return ze(ze({},x),{index:b,missing:0})}),this.values=u.filter(function(x){return"value"===x.type}).map(function(x,b){return ze(ze({},x),{index:b,missing:0})}),this.aggregates=u.filter(function(x){return"aggregate"===x.type}).map(function(x,b){return ze(ze({},x),{index:b})}),this.groupProcessors=u.filter(function(x){return"group-value-processor"===x.type}).map(function(x,b){return ze(ze({},x),{index:b})}),this.propertyProcessors=u.filter(function(x){return"property-value-processor"===x.type}).map(function(x,b){return ze(ze({},x),{index:b})}),this.reducers=u.filter(function(x){return"reducer"===x.type}).map(function(x,b){return ze(ze({},x),{index:b})}),this.processors=u.filter(function(x){return"processor"===x.type}).map(function(x,b){return ze(ze({},x),{index:b})});try{for(var v=Se(this.values),g=v.next();!g.done;g=v.next())if(null==(y=g.value).property)throw new Error("AG Charts - internal config error: no properties specified for value definitions: "+JSON.stringify(y))}catch(x){n={error:x}}finally{try{g&&!g.done&&(i=v.return)&&i.call(v)}finally{if(n)throw n.error}}var S=function(x){var b,O,T=x.matchGroupIds,E=function(M){if(!l.values.some(function(F){return F.groupId===M}))throw new Error("AG Charts - internal config error: matchGroupIds properties must match defined groups ("+M+").")};try{for(var P=Se(T??[]),D=P.next();!D.done;D=P.next())E(D.value)}catch(M){b={error:M}}finally{try{D&&!D.done&&(O=P.return)&&O.call(P)}finally{if(b)throw b.error}}},m=function(x){var b,O,T=x.matchScopes,E=function(M){if(!l.values.some(function(F){var I;return null===(I=F.scopes)||void 0===I?void 0:I.includes(M)}))throw new Error("AG Charts - internal config error: matchGroupIds properties must match defined groups ("+M+").")};try{for(var P=Se(T??[]),D=P.next();!D.done;D=P.next())E(D.value)}catch(M){b={error:M}}finally{try{D&&!D.done&&(O=P.return)&&O.call(P)}finally{if(b)throw b.error}}},C=function(x){var b,O,T=x.matchIds,E=function(M){if(!l.values.some(function(F){return F.id===M}))throw new Error("AG Charts - internal config error: matchGroupIds properties must match defined groups ("+M+").")};try{for(var P=Se(T??[]),D=P.next();!D.done;D=P.next())E(D.value)}catch(M){b={error:M}}finally{try{D&&!D.done&&(O=P.return)&&O.call(P)}finally{if(b)throw b.error}}};try{for(var _=Se(Ke(Ke([],Ge(this.groupProcessors)),Ge(this.aggregates))),w=_.next();!w.done;w=_.next()){var y;C(y=w.value),S(y),m(y)}}catch(x){a={error:x}}finally{try{w&&!w.done&&(s=_.return)&&s.call(_)}finally{if(a)throw a.error}}}return o.prototype.resolveProcessedDataIndexById=function(t,e,r){var n;void 0===r&&(r="value");var i=null!==(n=this.resolveProcessedDataDefById(t,e,r))&&void 0!==n?n:{};return{type:r,index:i.index,def:i.def}},o.prototype.resolveProcessedDataIndicesById=function(t,e,r){return void 0===r&&(r="value"),this.resolveProcessedDataDefsById(t,e,r).map(function(n){return{type:r,index:n.index,def:n.def}})},o.prototype.resolveProcessedDataDefById=function(t,e,r){return void 0===r&&(r="value"),this.resolveProcessedDataDefsById(t,e,r)[0]},o.prototype.resolveProcessedDataDefsById=function(t,e,r){var n,i;void 0===r&&(r="value");var a=this,h=function(m){var C=m.id,_=m.scopes;return!(null==C||null!=t&&!_?.includes(t.id))&&("string"==typeof e?C===e:e.test(C))},p=[a.keys,a.values,a.aggregates,a.groupProcessors,a.reducers],v=[];try{for(var g=Se(p),y=g.next();!y.done;y=g.next())v.push.apply(v,Ke([],Ge(y.value.filter(h).map(function(m){return{index:m.index,def:m}}))))}catch(m){n={error:m}}finally{try{y&&!y.done&&(i=g.return)&&i.call(g)}finally{if(n)throw n.error}}if(v.length>0)return v;throw new Error("AG Charts - didn't find property definition for ["+e+", "+t.id+", "+r+"]")},o.prototype.getDomain=function(t,e,r,n){var i,a,s,l,u,c,d,h;void 0===r&&(r="value");try{d=this.resolveProcessedDataIndicesById(t,e,r)}catch(m){if("string"!=typeof e&&/didn't find property definition/.test(m.message))return[];throw m}switch(r){case"key":h="keys";break;case"value":h="values";break;case"aggregate":h="aggValues";break;case"group-value-processor":h="groups";break;default:return[]}var p=null!==(l=null===(s=n.domain[h])||void 0===s?void 0:s[d[0].index])&&void 0!==l?l:[];if(1===d.length)return p;var v=Ke([],Ge(p));try{for(var g=Se(d.slice(1)),y=g.next();!y.done;y=g.next())il(null!==(c=null===(u=n.domain[h])||void 0===u?void 0:u[y.value.index])&&void 0!==c?c:[],v)}catch(m){i={error:m}}finally{try{y&&!y.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}return v},o.prototype.processData=function(t){var e,r,n,i,a=this,s=a.opts,l=s.groupByKeys,u=s.groupByFn,c=a.aggregates,d=a.groupProcessors,h=a.reducers,p=a.processors,v=a.propertyProcessors,g=performance.now();try{for(var y=Se(Ke(Ke([],Ge(this.keys)),Ge(this.values))),S=y.next();!S.done;S=y.next())(m=S.value).missing=0}catch(b){e={error:b}}finally{try{S&&!S.done&&(r=y.return)&&r.call(y)}finally{if(e)throw e.error}}if(!l||0!==this.keys.length){var C=this.extractData(t);l?C=this.groupData(C):u&&(C=this.groupData(C,u(C))),d.length>0&&this.postProcessGroups(C),c.length>0&&this.aggregateData(C),v.length>0&&this.postProcessProperties(C),h.length>0&&this.reduceData(C),p.length>0&&this.postProcessData(C);try{for(var _=Se(Ke(Ke([],Ge(this.keys)),Ge(this.values))),w=_.next();!w.done;w=_.next()){var m=w.value;t.length>0&&m.missing>=t.length&&q.warnOnce("the key '"+m.property+"' was not found in any data element.")}}catch(b){n={error:b}}finally{try{w&&!w.done&&(i=_.return)&&i.call(_)}finally{if(n)throw n.error}}var x=performance.now();return C.time=x-g,o.DEBUG()&&function Nx(o){var t,e,r=function(i,a){a.length>0&&(console.log("DataModel.processData() - "+i),console.table(a))};if(console.log("DataModel.processData() - processedData",o),r("Key Domains",o.domain.keys),r("Group Domains",null!==(t=o.domain.groups)&&void 0!==t?t:[]),r("Value Domains",o.domain.values),r("Aggregate Domains",null!==(e=o.domain.aggValues)&&void 0!==e?e:[]),"grouped"===o.type){var n=o.data.reduce(function(i,a){var s,l,u=null!==(s=a.keys)&&void 0!==s?s:[],c=null!==(l=a.aggValues)&&void 0!==l?l:[],d=a.keys.map(function(){}),h=c?.map(function(){});return i.push.apply(i,Ke([],Ge(a.values.map(function(p,v){return Ke(Ke(Ke([],Ge(0===v?u:d)),Ge(p??[])),Ge(0==v?c:h))})))),i},[]);r("Values",n)}else n=o.data.reduce(function(a,s){var l,u=null!==(l=s.aggValues)&&void 0!==l?l:[];return a.push(Ke(Ke(Ke([],Ge(s.keys)),Ge(s.values)),Ge(u))),a},[]),r("Values",n)}(C),C}},o.prototype.valueGroupIdxLookup=function(t){var e=t.matchGroupIds,r=t.matchIds,n=t.matchScopes;return this.values.map(function(i,a){return{def:i,index:a}}).filter(function(i){var a=i.def;return!(e&&(null==a.groupId||!e.includes(a.groupId))||r&&(null==a.id||!r.includes(a.id))||n&&(null==a.scopes||!n.some(function(s){var l;return null===(l=a.scopes)||void 0===l?void 0:l.includes(s)})))}).map(function(i){return i.index})},o.prototype.valueIdxLookup=function(t,e){var r,n=null==t||0===t.length,i=function(a){return null==a||n===(null==a||0===a.length)||a?.some(function(u){return t.includes(u)})};if((r=this.values.findIndex("string"==typeof e?function(a){return i(a.scopes)&&a.property===e}:function(a){return i(a.scopes)&&a.id===e.id}))>=0)return r;throw new Error("AG Charts - configuration error, unknown property "+JSON.stringify(e)+" in scope(s) "+JSON.stringify(t))},o.prototype.extractData=function(t){var e,r,n,i,a,s,l,u,c,d=this,h=d.keys,p=d.values,v=d.opts.dataVisible,g=this.initDataDomainProcessor(),y=g.dataDomain,S=g.processValue,m=g.scopes,C=g.allScopesHaveSameDefs,_=new Array(v?t.length:0),w=0,x=0;try{for(var b=Se(t),O=b.next();!O.done;O=b.next()){var T=O.value,E=m.size>0?new Set(m):void 0,P=v?new Array(h.length):void 0,D=0,R=void 0;try{for(var M=(n=void 0,Se(h)),F=M.next();!F.done&&(R=S(I=F.value,T,R))!==Bi;F=M.next())P&&(P[D++]=R)}catch(Y){n={error:Y}}finally{try{F&&!F.done&&(i=M.return)&&i.call(M)}finally{if(n)throw n.error}}if(R!==Bi){var L=v&&p.length>0?new Array(p.length):void 0,N=0,k=void 0;try{for(var U=(a=void 0,Se(p)),G=U.next();!G.done;G=U.next()){var I;if((k=S(I=G.value,T,k))===Bi){if(C)break;try{for(var B=(l=void 0,Se(null!==(c=I.scopes)&&void 0!==c?c:m)),j=B.next();!j.done;j=B.next()){var K=j.value;E?.delete(K)}}catch(Q){l={error:Q}}finally{try{j&&!j.done&&(u=B.return)&&u.call(B)}finally{if(l)throw l.error}}if(N++,0===E?.size)break}else L&&(L[N++]=k)}}catch(Y){a={error:Y}}finally{try{G&&!G.done&&(s=U.return)&&s.call(U)}finally{if(a)throw a.error}}if((k!==Bi||!C)&&0!==E?.size&&v){var V={datum:T,keys:P,values:L};!C&&E&&E.size<m.size&&(x++,V.validScopes=Ke([],Ge(E))),_[w++]=V}}}}catch(Y){e={error:Y}}finally{try{O&&!O.done&&(r=b.return)&&r.call(b)}finally{if(e)throw e.error}}_.length=w;var H=function(Y){var Q=y.get(Y).getDomain();return Array.isArray(Q)&&Q[0]>Q[1]?[]:Ke([],Ge(Q))};return{type:"ungrouped",data:_,domain:{keys:h.map(function(Y){return H(Y)}),values:p.map(function(Y){return H(Y)})},defs:{allScopesHaveSameDefs:C,keys:h,values:p},partialValidDataCount:x,time:0}},o.prototype.groupData=function(t,e){var r,n,i,a,s,l,u,c,d=new Map;try{for(var h=Se(t.data),p=h.next();!p.done;p=h.next()){var v=p.value,g=v.keys,y=v.values,S=v.datum,m=v.validScopes,C=e?e(v):g,_=Fx(C);if(d.has(_)){var w=d.get(_);if(w.values.push(y),w.datum.push(S),null!=m)for(var x=function(F){var I=null===(u=w.validScopes)||void 0===u?void 0:u[F];if(m.some(function(L){return L===I}))return"continue";null===(c=w.validScopes)||void 0===c||c.splice(F,1)},b=0;b<(null!==(l=null===(s=w.validScopes)||void 0===s?void 0:s.length)&&void 0!==l?l:0);b++)x(b)}else d.set(_,{keys:C,values:[y],datum:[S],validScopes:m})}}catch(F){r={error:F}}finally{try{p&&!p.done&&(n=h.return)&&n.call(h)}finally{if(r)throw r.error}}var O=new Array(d.size),T=new Array(d.size),E=0;try{for(var P=Se(d.entries()),D=P.next();!D.done;D=P.next()){var M=Ge(D.value,2)[1];g=M.keys,y=M.values,S=M.datum,m=M.validScopes,0!==m?.length&&(T[E]=g,O[E++]={keys:g,values:y,datum:S,validScopes:m})}}catch(F){i={error:F}}finally{try{D&&!D.done&&(a=P.return)&&a.call(P)}finally{if(i)throw i.error}}return ze(ze({},t),{type:"grouped",data:O,domain:ze(ze({},t.domain),{groups:T})})},o.prototype.aggregateData=function(t){var e,r,i,a,s,l,u,c,d,h,n=this,p=this.aggregates;if(p){var v=p.map(function(){return[1/0,-1/0]}),g=p.map(function(b){return n.valueGroupIdxLookup(b)}),y=p.map(function(b){return b.aggregateFunction}),S=p.map(function(b){return b.groupAggregateFunction}),m=p.map(function(b){return b.finalFunction}),C=function(b){var O,T,E,P,D=b.values,R=b.validScopes;null!==(i=b.aggValues)&&void 0!==i||(b.aggValues=new Array(g.length)),"ungrouped"===t.type&&(D=[D]);var M=0;try{for(var F=(O=void 0,Se(g)),I=F.next();!I.done;I=F.next()){var L=I.value;if(null===(a=R?.some(function(V){var H;return null===(H=p[M].matchScopes)||void 0===H?void 0:H.some(function(Y){return V===Y})}))||void 0===a||a){var k=null!==(l=null===(s=S[M])||void 0===s?void 0:s.call(S))&&void 0!==l?l:il([]),U=function(V){var H=L.map(function(Q){return V[Q]}),Y=y[M](H,b.keys);Y&&(k=null!==(c=null===(u=S[M])||void 0===u?void 0:u.call(S,Y,k))&&void 0!==c?c:il(Y,k))};try{for(var G=(E=void 0,Se(D)),B=G.next();!B.done;B=G.next())U(B.value)}catch(V){E={error:V}}finally{try{B&&!B.done&&(P=G.return)&&P.call(G)}finally{if(E)throw E.error}}var K=(null!==(h=null===(d=m[M])||void 0===d?void 0:d.call(m,k))&&void 0!==h?h:k).map(function(V){return Ix(V)});il(K,v[M]),b.aggValues[M++]=K}else M++}}catch(V){O={error:V}}finally{try{I&&!I.done&&(T=F.return)&&T.call(F)}finally{if(O)throw O.error}}};try{for(var _=Se(t.data),w=_.next();!w.done;w=_.next())C(w.value)}catch(b){e={error:b}}finally{try{w&&!w.done&&(r=_.return)&&r.call(_)}finally{if(e)throw e.error}}t.domain.aggValues=v}},o.prototype.postProcessGroups=function(t){var e,r,n,i,a,s,l,u,c,d,h,p,v,g,y,S,m,C=this.groupProcessors;if(C){var _=new Set,w=new Map,x=new Map,b=new Map;try{for(var O=Se(C),T=O.next();!T.done;T=O.next()){var P=this.valueGroupIdxLookup(E=T.value);x.set(E,P),b.set(E,E.adjust());try{for(var D=(n=void 0,Se(P)),R=D.next();!R.done;R=D.next()){var F=this.values[M=R.value];_.add(M),w.set(M,new uc("category"===F.valueType?"discrete":"continuous"))}}catch(te){n={error:te}}finally{try{R&&!R.done&&(i=D.return)&&i.call(D)}finally{if(n)throw n.error}}}}catch(te){e={error:te}}finally{try{T&&!T.done&&(r=O.return)&&r.call(O)}finally{if(e)throw e.error}}var I=function(te){var ve,ye,de;try{for(var fe=Se(_),z=fe.next();!z.done;z=fe.next()){var J=z.value;null===(de=w.get(J))||void 0===de||de.extend(te[J])}}catch(ue){ve={error:ue}}finally{try{z&&!z.done&&(ye=fe.return)&&ye.call(fe)}finally{if(ve)throw ve.error}}};try{for(var L=Se(t.data),N=L.next();!N.done;N=L.next()){var k=N.value,U=function(te){var ve,ye;if(null!==(g=null===(v=k.validScopes)||void 0===v?void 0:v.some(function(je){var vt;return null===(vt=te.matchScopes)||void 0===vt?void 0:vt.some(function(vr){return je===vr})}))&&void 0!==g&&!g)return"continue";var fe=null!==(y=x.get(te))&&void 0!==y?y:[],z=null!==(m=null===(S=b.get(te))||void 0===S?void 0:S())&&void 0!==m?m:function(){};if("grouped"===t.type){try{for(var J=(ve=void 0,Se(k.values)),ue=J.next();!ue.done;ue=J.next()){var he=ue.value;he&&z(he,fe)}}catch(je){ve={error:je}}finally{try{ue&&!ue.done&&(ye=J.return)&&ye.call(J)}finally{if(ve)throw ve.error}}return"continue"}k.values&&z(k.values,fe)};try{for(var G=(l=void 0,Se(C)),B=G.next();!B.done;B=G.next()){var E;U(E=B.value)}}catch(te){l={error:te}}finally{try{B&&!B.done&&(u=G.return)&&u.call(G)}finally{if(l)throw l.error}}if("grouped"===t.type)try{for(var j=(c=void 0,Se(k.values)),K=j.next();!K.done;K=j.next())I(K.value)}catch(te){c={error:te}}finally{try{K&&!K.done&&(d=j.return)&&d.call(j)}finally{if(c)throw c.error}}else I(k.values)}}catch(te){a={error:te}}finally{try{N&&!N.done&&(s=L.return)&&s.call(L)}finally{if(a)throw a.error}}try{for(var H=Se(w),Y=H.next();!Y.done;Y=H.next()){var M,Q=Ge(Y.value,2);t.domain.values[M=Q[0]]=Ke([],Ge(Q[1].getDomain()))}}catch(te){h={error:te}}finally{try{Y&&!Y.done&&(p=H.return)&&p.call(H)}finally{if(h)throw h.error}}}},o.prototype.postProcessProperties=function(t){var e,r,n=this.propertyProcessors;if(n)try{for(var i=Se(n),a=i.next();!a.done;a=i.next()){var s=a.value,u=s.property,c=s.scopes;(0,s.adjust)()(t,this.valueIdxLookup(c??[],u))}}catch(d){e={error:d}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},o.prototype.reduceData=function(t){var e,r,n,i,a,s=this.reducers,l=s.map(function(y){return y.scopes}),u=s.map(function(y){return y.reducer()}),c=s.map(function(y){return y.initialValue}),d=function(y){var S,m,C=0;try{for(var _=(S=void 0,Se(u)),w=_.next();!w.done;w=_.next()){var x=w.value;null===(i=null===(n=y.validScopes)||void 0===n?void 0:n.some(function(O){var T;return null===(T=l[C])||void 0===T?void 0:T.some(function(E){return O===E})}))||void 0===i||i?(c[C]=x(c[C],y),C++):C++}}catch(O){S={error:O}}finally{try{w&&!w.done&&(m=_.return)&&m.call(_)}finally{if(S)throw S.error}}};try{for(var h=Se(t.data),p=h.next();!p.done;p=h.next())d(p.value)}catch(y){e={error:y}}finally{try{p&&!p.done&&(r=h.return)&&r.call(h)}finally{if(e)throw e.error}}for(var g=0;g<c.length;g++)null!==(a=t.reduced)&&void 0!==a||(t.reduced={}),t.reduced[s[g].property]=c[g]},o.prototype.postProcessData=function(t){var e,r,n,i=this.processors;try{for(var a=Se(i),s=a.next();!s.done;s=a.next()){var l=s.value;null!==(n=t.reduced)&&void 0!==n||(t.reduced={}),t.reduced[l.property]=l.calculate(t)}}catch(u){e={error:u}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}},o.prototype.initDataDomainProcessor=function(){var t,e,r,n,i,s=this.keys,l=this.values,u=new Set;try{for(var c=Se(l),d=c.next();!d.done;d=c.next()){var h=d.value;try{for(var p=(r=void 0,Se(null!==(i=h.scopes)&&void 0!==i?i:[])),v=p.next();!v.done;v=p.next())u.add(v.value)}catch(O){r={error:O}}finally{try{v&&!v.done&&(n=p.return)&&n.call(p)}finally{if(r)throw r.error}}}}catch(O){t={error:O}}finally{try{d&&!d.done&&(e=c.return)&&e.call(c)}finally{if(t)throw t.error}}var y=u.size,S=new Map,m=new Map,C=!0,_=function(O,T,E){var P;void 0===E&&(E=S),"category"===T?E.set(O,new uc("discrete")):(E.set(O,new uc("continuous")),C&&(C=(null!==(P=O.scopes)&&void 0!==P?P:[]).length===y))},w=function(){s.forEach(function(O){return _(O,O.valueType)}),l.forEach(function(O){return _(O,O.valueType)})};w();var x=this.buildAccessors.apply(this,Ke(Ke([],Ge(s)),Ge(l)));return{dataDomain:S,processValue:function(O,T,E){var P,D,R,M,L,I=!1;if(O.property in x){try{L=x[O.property](T)}catch{}I=void 0!==L}else L=(I=O.property in T)?T[O.property]:O.missingValue;if(!I&&!("missingValue"in O)&&O.missing++,S.has(O)||w(),I&&null!==(D=null===(P=O.validation)||void 0===P?void 0:P.call(O,L,T))&&void 0!==D&&!D){if(!("invalidValue"in O))return Bi;L=O.invalidValue}return O.processor&&(m.has(O)||m.set(O,O.processor()),L=null===(R=m.get(O))||void 0===R?void 0:R(L,E!==Bi?E:void 0)),null===(M=S.get(O))||void 0===M||M.extend(L),L},initDataDomain:w,scopes:u,allScopesHaveSameDefs:C}},o.prototype.buildAccessors=function(){for(var t,e,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i={};try{for(var a=Se(r),s=a.next();!s.done;s=a.next()){var l=s.value;if(l.property.indexOf(".")>=0||l.property.indexOf("[")>=0){var c;c=l.property.startsWith("[")?"return datum"+l.property+";":"return datum."+l.property+";",i[l.property]=new Function("datum",c)}}}catch(d){t={error:d}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}return i},o.DEBUG=function(){var t;return null!==(t=[!0,"data-model"].includes(or("agChartsDebug")))&&void 0!==t&&t},o}();function Oh(){return function(o,t){var e=["Property ["+o+"] is deprecated.",t].filter(function(r){return null!=r}).join(" ");q.warnOnce(e)}}function kx(o,t){var e=t?.default,r=Oh();return Gi(function(n,i,a){return a!==e&&r(i.toString(),o),a})}function Gx(o,t){var e=Oh();return Gi(function(r,n,i){return i!==r[o]&&(e(n.toString(),"Use ["+o+"] instead."),r[o]=t?t(i):i),el},function(r,n){return e(n.toString(),"Use ["+o+"] instead."),r[o]})}var $r=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},xt="ag-chart-tooltip",Bx="\n."+xt+" {\n    transition: transform 0.1s ease;\n    display: table;\n    position: fixed;\n    left: 0px;\n    top: 0px;\n    white-space: nowrap;\n    z-index: 99999;\n    font: 12px Verdana, sans-serif;\n    color: black;\n    background: rgb(244, 244, 244);\n    border-radius: 5px;\n    box-shadow: 0 0 1px rgba(3, 3, 3, 0.7), 0.5vh 0.5vh 1vh rgba(3, 3, 3, 0.25);\n}\n\n."+xt+"-no-interaction {\n    pointer-events: none;\n    user-select: none;\n}\n\n."+xt+"-no-animation {\n    transition: none !important;\n}\n\n."+xt+"-hidden {\n    visibility: hidden;\n}\n\n."+xt+"-title {\n    font-weight: bold;\n    padding: 7px;\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n    color: white;\n    background-color: #888888;\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n}\n\n."+xt+"-content {\n    padding: 7px;\n    line-height: 1.7em;\n    border-bottom-left-radius: 5px;\n    border-bottom-right-radius: 5px;\n    overflow: hidden;\n}\n\n."+xt+"-content:empty {\n    padding: 0;\n    height: 7px;\n}\n\n."+xt+'-arrow::before {\n    content: "";\n\n    position: absolute;\n    top: 100%;\n    left: 50%;\n    transform: translateX(-50%);\n\n    border: 6px solid #989898;\n\n    border-left-color: transparent;\n    border-right-color: transparent;\n    border-top-color: #989898;\n    border-bottom-color: transparent;\n\n    width: 0;\n    height: 0;\n\n    margin: 0 auto;\n}\n\n.'+xt+'-arrow::after {\n    content: "";\n\n    position: absolute;\n    top: 100%;\n    left: 50%;\n    transform: translateX(-50%);\n\n    border: 5px solid black;\n\n    border-left-color: transparent;\n    border-right-color: transparent;\n    border-top-color: rgb(244, 244, 244);\n    border-bottom-color: transparent;\n\n    width: 0;\n    height: 0;\n\n    margin: 0 auto;\n}\n\n.ag-chart-wrapper {\n    box-sizing: border-box;\n    overflow: hidden;\n}\n';function st(o,t){var e,r,n,i;if("string"==typeof o)return o;t=t??{};var a=o.content,s=void 0===a?null!==(e=t.content)&&void 0!==e?e:"":a,l=o.title,u=void 0===l?null!==(r=t.title)&&void 0!==r?r:void 0:l,c=o.color,d=void 0===c?null!==(n=t.color)&&void 0!==n?n:"white":c,h=o.backgroundColor,p=void 0===h?null!==(i=t.backgroundColor)&&void 0!==i?i:"#888":h;return(u?'<div class="'+xt+'-title"\n        style="color: '+d+"; background-color: "+p+'">'+u+"</div>":"")+'<div class="'+xt+'-content">'+s+"</div>"}var jx=["pointer","node"],zx=ne(function(o){return jx.includes(o)},"expecting a position type keyword such as 'pointer' or 'node'"),Eh=function(){function o(){this.type="pointer",this.xOffset=0,this.yOffset=0}return $r([A(zx)],o.prototype,"type",void 0),$r([A(X())],o.prototype,"xOffset",void 0),$r([A(X())],o.prototype,"yOffset",void 0),o}(),Hx=function(){function o(t,e,r){var n=this;this.enableInteraction=!1,this.enabled=!0,this.showArrow=void 0,this.class=void 0,this.lastClass=void 0,this.delay=0,this.range="nearest",this.position=new Eh,this.showTimeout=0,this._showArrow=!0,this.tooltipRoot=r;var i=e.createElement("div");if(this.element=this.tooltipRoot.appendChild(i),this.element.classList.add(xt),this.canvasElement=t,window.IntersectionObserver){var a=new IntersectionObserver(function(l){var u,c;try{for(var d=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(l),h=d.next();!h.done;h=d.next()){var p=h.value;p.target===n.canvasElement&&0===p.intersectionRatio&&n.toggle(!1)}}catch(v){u={error:v}}finally{try{h&&!h.done&&(c=d.return)&&c.call(d)}finally{if(u)throw u.error}}},{root:this.tooltipRoot});a.observe(this.canvasElement),this.observer=a}if(o.tooltipDocuments.indexOf(e)<0){var s=e.createElement("style");s.innerHTML=Bx,e.head.insertBefore(s,e.head.querySelector("style")),o.tooltipDocuments.push(e)}}return o.prototype.destroy=function(){var t=this.element.parentNode;t&&t.removeChild(this.element),this.observer&&this.observer.unobserve(this.canvasElement)},o.prototype.isVisible=function(){return!this.element.classList.contains(xt+"-hidden")},o.prototype.updateClass=function(t,e){var r=this,n=r.element,i=r.class,a=r.lastClass,s=r.enableInteraction,u=function(c,d){var h=xt+"-"+c;d?n.classList.add(h):n.classList.remove(h)};u("no-animation",!this.isVisible()&&!!t),u("no-interaction",!s),u("hidden",!t),u("arrow",!!e),i!==a&&(a&&n.classList.remove(a),i&&n.classList.add(i),this.lastClass=i)},o.prototype.show=function(t,e,r){var i,a,s,l,u,c,d,n=this;void 0===r&&(r=!1);var p=this.element,v=this.canvasElement;if(void 0!==e)p.innerHTML=e;else if(!p.innerHTML)return void this.toggle(!1);var g=function(R,M,F){return Math.max(Math.min(M,F),R)},y=null!==(a=null===(i=t.position)||void 0===i?void 0:i.xOffset)&&void 0!==a?a:0,S=null!==(l=null===(s=t.position)||void 0===s?void 0:s.yOffset)&&void 0!==l?l:0,m=v.getBoundingClientRect(),C=m.left+t.offsetX-p.clientWidth/2+y,_=m.top+t.offsetY-p.clientHeight-8+S,w=this.getWindowBoundingBox(),b=w.y+w.height-p.clientHeight,O=g(w.x,C,w.x+w.width-p.clientWidth-1),T=g(w.y,_,b),D=null!==(c=null!==(u=t.showArrow)&&void 0!==u?u:this.showArrow)&&void 0!==c?c:!(O!==C||T!==_||y||S);if(this.updateShowArrow(D),p.style.transform="translate("+Math.round(O)+"px, "+Math.round(T)+"px)",this.enableInteraction=null!==(d=t.enableInteraction)&&void 0!==d&&d,this.delay>0&&!r)return this.toggle(!1),void(this.showTimeout=window.setTimeout(function(){n.toggle(!0)},this.delay));this.toggle(!0)},o.prototype.getWindowBoundingBox=function(){return new me(0,0,window.innerWidth,window.innerHeight)},o.prototype.toggle=function(t){t||window.clearTimeout(this.showTimeout),this.updateClass(t,this._showArrow)},o.prototype.pointerLeftOntoTooltip=function(t){var e;if(!this.enableInteraction)return!1;var r=null===(e=t.sourceEvent.relatedTarget)||void 0===e?void 0:e.classList,i=!!["","-title","-content"].filter(function(a){return r?.contains(""+xt+a)});return void 0!==r&&i},o.prototype.updateShowArrow=function(t){this._showArrow=t},o.tooltipDocuments=[],$r([A(Te)],o.prototype,"enabled",void 0),$r([A(wr)],o.prototype,"showArrow",void 0),$r([A(oe)],o.prototype,"class",void 0),$r([A(X(0))],o.prototype,"delay",void 0),$r([Gx("range",function(t){return t?"nearest":"exact"})],o.prototype,"tracking",void 0),$r([A(bh)],o.prototype,"range",void 0),o}();function Th(o,t){var e,r;void 0===t&&(t=[0,0]);try{for(var n=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(o),i=n.next();!i.done;i=n.next()){var a=i.value;"number"==typeof a&&(a<0&&(t[0]+=a),a>0&&(t[1]+=a))}}catch(s){e={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return t}function Ph(o,t){return{id:t,scopes:[o.id],type:"aggregate",aggregateFunction:function(){return[0,1]},groupAggregateFunction:function(e,r){var n,i;return void 0===r&&(r=[0,0]),r[0]+=null!==(n=e?.[0])&&void 0!==n?n:0,r[1]+=null!==(i=e?.[1])&&void 0!==i?i:0,r}}}function Ah(o,t,e,r){var n={id:t,scopes:[o.id],matchGroupIds:r?[r]:void 0,type:"aggregate",aggregateFunction:function(i,a){void 0===a&&(a=[]);var s=a[1]-a[0];return e.aggregateFunction(i).map(function(l){return l/s})}};return e.groupAggregateFunction&&(n.groupAggregateFunction=e.groupAggregateFunction),n}var _a=new Map;function al(o,t){var e,r,n,i=JSON.stringify(o,null,0);return _a.has(t)||_a.set(t,new Map),!(null===(e=_a.get(t))||void 0===e)&&e.has(i)||null===(r=_a.get(t))||void 0===r||r.set(i,t(o)),null===(n=_a.get(t))||void 0===n?void 0:n.get(i)}var Dh=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},ji=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},cc={type:"reducer",property:"smallestKeyInterval",initialValue:1/0,reducer:function(){var o=NaN;return function(t,e){var r=e.keys[0],n=Math.abs(r-o);return o=r,!isNaN(n)&&n>0&&n<t?n:t}}},Xx={type:"processor",property:"sortedGroupDomain",calculate:function(o){var t=o.domain.groups;if(null!=t)return function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o}([],Dh(t)).sort(function(e,r){for(var n=0;n<e.length;n++){var i=e[n]-r[n];if(0!==i)return i}return 0})}};function Qx(o){var t=o.normaliseTo,e=o.mode,r=function(n,i){var a=n*t/i;return a>=0?Math.min(t,a):Math.max(-t,a)};return function(){return function(){return function(n,i){var a,s,l,u,c=[0,0];try{for(var d=ji(i),h=d.next();!h.done;h=d.next()){var v=n[p=h.value],g=v<0?0:1;"sum"===e?c[g]+=v:c[g]=0===g?Math.min(c[g],v):Math.max(c[g],v)}}catch(C){a={error:C}}finally{try{h&&!h.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}var y=Math.max(Math.abs(c[0]),c[1]);try{for(var S=ji(i),m=S.next();!m.done;m=S.next()){var p;n[p=m.value]=r(n[p],y)}}catch(C){l={error:C}}finally{try{m&&!m.done&&(u=S.return)&&u.call(S)}finally{if(l)throw l.error}}}}}}function dc(o,t,e,r){return void 0===r&&(r="sum"),{scopes:[o.id],type:"group-value-processor",matchGroupIds:t,adjust:al({normaliseTo:e,mode:r},Qx)}}function Zx(o){var t=o.normaliseTo,e=o.rangeMin,r=o.rangeMax,n=t[1]-t[0],i=function(a,s,l){var u=t[0]+(a-s)/l*n;return 0===l||u>=t[1]?t[1]:u<t[0]?t[0]:u};return function(){return function(a,s){var l,u,c,d,h=Dh(a.domain.values[s],2),p=h[0],v=h[1];null!=e&&(p=e),null!=r&&(v=r);var g=v-p;a.domain.values[s]=[t[0],t[1]];try{for(var y=ji(a.data),S=y.next();!S.done;S=y.next()){var C=S.value.values;"ungrouped"===a.type&&(C=[C]);try{for(var _=(c=void 0,ji(C)),w=_.next();!w.done;w=_.next()){var x=w.value;x[s]=i(x[s],p,g)}}catch(b){c={error:b}}finally{try{w&&!w.done&&(d=_.return)&&d.call(_)}finally{if(c)throw c.error}}}}catch(b){l={error:b}}finally{try{S&&!S.done&&(u=y.return)&&u.call(y)}finally{if(l)throw l.error}}}}}function Mh(o,t,e,r,n){return{scopes:[o.id],type:"property-value-processor",property:t,adjust:al({normaliseTo:e,rangeMin:r,rangeMax:n},Zx)}}function qx(o){return function(){return function(){return function(t,e){var r,n,i=0;try{for(var a=ji(e),s=a.next();!s.done;s=a.next()){var l=s.value,u=t[l];"number"!=typeof u||isNaN(u)||("normal"===o&&(i+=u),t[l]=i,"trailing"===o&&(i+=u))}}catch(c){r={error:c}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}}}}}function Jx(o){var t=o.mode,e=o.sum;return function(){var r=[],n=!0;return function(){return function(i,a){var s,l,u=0;try{for(var c=ji(a),d=c.next();!d.done;d=c.next()){var h=d.value,p=i[h],v=n&&"current"===e?0:r[h];r[h]=p;var g="current"===e?p:v;"number"!=typeof p||isNaN(p)||"number"!=typeof v||isNaN(v)?i[h]=g:("normal"===t&&(u+=g),i[h]=u,"trailing"===t&&(u+=g))}}catch(y){s={error:y}}finally{try{d&&!d.done&&(l=c.return)&&l.call(c)}finally{if(s)throw s.error}}n=!1}}}}function ew(o,t,e,r){var n;return n=e.startsWith("window")?al({mode:e.endsWith("-trailing")?"trailing":"normal",sum:r},Jx):al(e,qx),{scopes:[o.id],type:"group-value-processor",matchGroupIds:[t],adjust:n}}function Rh(o,t){return void 0===t&&(t=!0),{type:"processor",property:"diff",calculate:function(e){for(var r={changed:!1,added:[],updated:[],removed:[]},n=new Map,i=new Map,a=new Map,l=0;l<Math.max(o.data.length,e.data.length);l++){var u=o.data[l],c=e.data[l],d=u?.keys.join("___"),h=c?.keys.join("___");d!==h?(a.has(h)?((t||!sl(a.get(h).values,c.values))&&i.set(h,c),a.delete(h)):c&&n.set(h,c),n.has(d)?((t||!sl(n.get(d).values,u.values))&&i.set(d,u),n.delete(d)):u&&a.set(d,u)):sl(u.values,c.values)||i.set(h,c)}return r.added=Array.from(n.values()).map(function(p){return p.keys}),r.updated=Array.from(i.values()).map(function(p){return p.keys}),r.removed=Array.from(a.values()).map(function(p){return p.keys}),r.changed=r.added.length>0||r.updated.length>0||r.removed.length>0,r}}}function sl(o,t){if(null==o||null==t||o.length!==t.length)return!1;for(var e=0;e<o.length;e++){if(Array.isArray(o[e])&&Array.isArray(t[e]))return sl(o[e],t[e]);if(o[e]!==t[e])return!1}return!0}function Qe(o,t){return Gi(function(e,r,n){return e[o][t??r]=n,n})}function br(o){var t=o.newValue,e=o.oldValue,r=o.changeValue;return Gi(function(n,i,a,s){return a!==s&&(void 0!==s&&e?.call(n,s),void 0!==a&&t?.call(n,a),r?.call(n,a,s)),a})}var fc=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Qn=function(){return Qn=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},Qn.apply(this,arguments)},lt=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Fh=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},hc=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},et=function(o){return o[o.EXACT_SHAPE_MATCH=0]="EXACT_SHAPE_MATCH",o[o.NEAREST_BY_MAIN_AXIS_FIRST=1]="NEAREST_BY_MAIN_AXIS_FIRST",o[o.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST=2]="NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST",o[o.NEAREST_NODE=3]="NEAREST_NODE",o}(et||{});function pc(o){return null!=Js(o,!0)}function Ih(o){return null!=Js(o,!1)}function vc(o,t,e,r){return void 0===r&&(r={}),Qn({scopes:[o.id],property:t,type:"key",valueType:e?"range":"category",validation:e?pc:Ih},r)}function ut(o,t,e,r){return void 0===r&&(r={}),Qn({scopes:[o.id],property:t,type:"value",valueType:e?"range":"category",validation:e?pc:Ih},r)}function iw(o,t,e,r){void 0===r&&(r={});var n=Qn(Qn({},ut(o,t,e,r)),{processor:function(){var o=0;return function(t){return"number"!=typeof t||isNaN(t)?t:o+=t}}});return n}function Zn(o,t,e,r,n,i){return void 0===n&&(n="current"),[ut(o,t,e,i),ew(o,i.groupId,r,n)]}var xa=function(){return function o(t,e,r){this.type="nodeClick",this.event=t,this.datum=e.datum,this.seriesId=r.id}}(),ow=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return fc(t,o),t}(xa),aw=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.type="nodeDoubleClick",e}return fc(t,o),t}(xa),sw=function(){function o(){this.fill="yellow",this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0}return lt([A(De)],o.prototype,"fill",void 0),lt([A(_e(0,1))],o.prototype,"fillOpacity",void 0),lt([A(De)],o.prototype,"stroke",void 0),lt([A(_e(0))],o.prototype,"strokeWidth",void 0),o}(),lw=function(){function o(){this.strokeWidth=void 0,this.dimOpacity=void 0,this.enabled=void 0}return lt([A(_e(0))],o.prototype,"strokeWidth",void 0),lt([A(_e(0,1))],o.prototype,"dimOpacity",void 0),lt([A(wr)],o.prototype,"enabled",void 0),o}(),uw=function(){function o(){this.color="black"}return lt([A(De)],o.prototype,"color",void 0),o}(),gc=function(){return function o(){this.item=new sw,this.series=new lw,this.text=new uw}}(),qn=function(){function o(){this.enabled=!0,this.showArrow=void 0,this.interaction=new cw,this.position=new Eh}return lt([A(Te)],o.prototype,"enabled",void 0),lt([A(wr)],o.prototype,"showArrow",void 0),o}(),cw=function(){function o(){this.enabled=!1}return lt([A(Te)],o.prototype,"enabled",void 0),o}(),ll=function(o){function t(e){var r,n=o.call(this)||this;n.id=Ur(n),n.rootGroup=new re({name:"seriesRoot",isVirtual:!0}),n.axes=((r={})[Z.X]=void 0,r[Z.Y]=void 0,r),n.directions=[Z.X,Z.Y],n.nodeDataRefresh=!0,n._data=void 0,n._visible=!0,n.showInLegend=!0,n.cursor="default",n.nodeClickRange="exact",n.seriesGrouping=void 0,n._declarationOrder=-1,n.highlightStyle=new gc,n.ctx=e.moduleCtx;var i=e.useLabelLayer,a=void 0!==i&&i,s=e.pickModes,l=void 0===s?[et.NEAREST_BY_MAIN_AXIS_FIRST]:s,u=e.directionKeys,d=e.directionNames,h=void 0===d?{}:d,p=e.contentGroupVirtual,v=void 0===p||p,g=n.rootGroup;return n.directionKeys=void 0===u?{}:u,n.directionNames=h,n.contentGroup=g.appendChild(new re({name:n.id+"-content",layer:!v,isVirtual:v,zIndex:We.SERIES_LAYER_ZINDEX,zIndexSubOrder:n.getGroupZIndexSubOrder("data")})),n.highlightGroup=g.appendChild(new re({name:n.id+"-highlight",layer:!0,zIndex:We.SERIES_LAYER_ZINDEX,zIndexSubOrder:n.getGroupZIndexSubOrder("highlight")})),n.highlightNode=n.highlightGroup.appendChild(new re({name:"highlightNode"})),n.highlightLabel=n.highlightGroup.appendChild(new re({name:"highlightLabel"})),n.highlightNode.zIndex=0,n.highlightLabel.zIndex=10,n.pickModes=l,a&&(n.labelGroup=g.appendChild(new re({name:n.id+"-series-labels",layer:!0,zIndex:We.SERIES_LABEL_ZINDEX}))),n}return fc(t,o),Object.defineProperty(t.prototype,"type",{get:function(){var e;return null!==(e=this.constructor.type)&&void 0!==e?e:""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e,this.nodeDataRefresh=!0},enumerable:!1,configurable:!0}),t.prototype.hasData=function(){var e=this.data;return e&&(!Array.isArray(e)||e.length>0)},Object.defineProperty(t.prototype,"visible",{get:function(){return this._visible},set:function(e){this._visible=e,this.visibleChanged()},enumerable:!1,configurable:!0}),t.prototype.onSeriesGroupingChange=function(e,r){var n=this,i=this,a=i.id,s=i.type,l=i.visible,u=i.rootGroup;e&&this.ctx.seriesStateManager.deregisterSeries({id:a,type:s}),r&&this.ctx.seriesStateManager.registerSeries({id:a,type:s,visible:l,seriesGrouping:r}),this.ctx.seriesLayerManager.changeGroup({id:a,type:s,rootGroup:u,getGroupZIndexSubOrder:function(c){return n.getGroupZIndexSubOrder(c)},seriesGrouping:r,oldGrouping:e})},t.prototype.getBandScalePadding=function(){return{inner:1,outer:0}},t.prototype.getGroupZIndexSubOrder=function(e,r){var n=this;void 0===r&&(r=0);var i=0;switch(e){case"data":case"paths":break;case"labels":i+=2e4;break;case"marker":i+=1e4;break;case"highlight":r+=15e3}return[function(){return n._declarationOrder+i},r]},t.prototype.addChartEventListeners=function(){},t.prototype.destroy=function(){this.ctx.seriesStateManager.deregisterSeries(this),this.ctx.seriesLayerManager.releaseGroup(this)},t.prototype.getDirectionValues=function(e,r){var n=this,i=this.resolveKeyDirection(e),a=r?.[i],s=[],l=function(){for(var c,d,h=[],p=0;p<arguments.length;p++)h[p]=arguments[p];try{for(var v=Fh(h),g=v.next();!g.done;g=v.next())u(g.value)}catch(S){c={error:S}}finally{try{g&&!g.done&&(d=v.return)&&d.call(v)}finally{if(c)throw c.error}}},u=function(c){Array.isArray(c)?l.apply(void 0,function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o}([],hc(c))):"object"==typeof c?l(Object.values(c)):s.push(c)};return a&&a.forEach(function(c){u(n[c])}),s},t.prototype.getKeys=function(e){return this.getDirectionValues(e,this.directionKeys)},t.prototype.getNames=function(e){return this.getDirectionValues(e,this.directionNames)},t.prototype.resolveKeyDirection=function(e){return e},t.prototype.markNodeDataDirty=function(){this.nodeDataRefresh=!0},t.prototype.visibleChanged=function(){this.ctx.seriesStateManager.registerSeries(this)},t.prototype.getOpacity=function(e){var r=this.highlightStyle.series,n=r.dimOpacity,i=void 0===n?1:n,a=r.enabled;if(!1===(void 0===a||a)||1===i)return 1;switch(this.isItemIdHighlighted(e)){case"no-highlight":case"highlighted":return 1;case"peer-highlighted":case"other-highlighted":return i}},t.prototype.getStrokeWidth=function(e,r){var n=this.highlightStyle.series,i=n.strokeWidth,a=n.enabled;if(!1===(void 0===a||a)||void 0===i)return e;switch(this.isItemIdHighlighted(r)){case"highlighted":return i;case"no-highlight":case"other-highlighted":case"peer-highlighted":return e}},t.prototype.isItemIdHighlighted=function(e){var r,n=null===(r=this.ctx.highlightManager)||void 0===r?void 0:r.getActiveHighlight(),i=n??{},a=i.series,s=i.itemId;return null!=a?a!==this?"other-highlighted":void 0===s?"highlighted":e&&n!==e&&s!==e.itemId?"peer-highlighted":"highlighted":"no-highlight"},t.prototype.pickNode=function(e,r){var n,i,a=this,s=a.pickModes;if(a.visible&&a.rootGroup.visible)try{for(var c=Fh(s),d=c.next();!d.done;d=c.next()){var h=d.value;if(!r||r.includes(h)){var p=void 0;switch(h){case et.EXACT_SHAPE_MATCH:p=this.pickNodeExactShape(e);break;case et.NEAREST_BY_MAIN_AXIS_FIRST:case et.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST:p=this.pickNodeMainAxisFirst(e,h===et.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST);break;case et.NEAREST_NODE:p=this.pickNodeClosestDatum(e)}if(p)return{pickMode:h,match:p.datum,distance:p.distance}}}}catch(v){n={error:v}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}},t.prototype.pickNodeExactShape=function(e){var r=this.contentGroup.pickNode(e.x,e.y);if(r)return{datum:r.datum,distance:0}},t.prototype.pickNodeClosestDatum=function(e){throw new Error("AG Charts - Series.pickNodeClosestDatum() not implemented")},t.prototype.pickNodeMainAxisFirst=function(e,r){throw new Error("AG Charts - Series.pickNodeMainAxisFirst() not implemented")},t.prototype.fireNodeClickEvent=function(e,r){var n=this.getNodeClickEvent(e,r);this.fireEvent(n)},t.prototype.fireNodeDoubleClickEvent=function(e,r){var n=this.getNodeDoubleClickEvent(e,r);this.fireEvent(n)},t.prototype.getNodeClickEvent=function(e,r){return new ow(e,r,this)},t.prototype.getNodeDoubleClickEvent=function(e,r){return new aw(e,r,this)},t.prototype.toggleSeriesItem=function(e,r){this.visible=r,this.nodeDataRefresh=!0},t.prototype.isEnabled=function(){return this.visible},t.prototype.fixNumericExtent=function(e,r){var n,i=ol(e);if(0===i.length)return i;var a=hc(i,2),s=a[0],l=a[1];if(s===l){var u=hc(null!==(n=r?.calculatePadding(s,l))&&void 0!==n?n:[1,1],2);s-=u[0],l+=u[1]}return[s,l]},t.highlightedZIndex=1e12,lt([A(at)],t.prototype,"id",void 0),lt([A(Te)],t.prototype,"_visible",void 0),lt([A(Te)],t.prototype,"showInLegend",void 0),lt([A(at)],t.prototype,"cursor",void 0),lt([A(bh)],t.prototype,"nodeClickRange",void 0),lt([br({changeValue:function(e,r){this.onSeriesGroupingChange(r,e)}})],t.prototype,"seriesGrouping",void 0),t}(hh),ul=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},cl=function(){function o(t,e,r,n){void 0===t&&(t=0),void 0===e&&(e=t),void 0===r&&(r=t),void 0===n&&(n=e),this.top=t,this.right=e,this.bottom=r,this.left=n}return o.prototype.clear=function(){this.top=this.right=this.bottom=this.left=0},ul([A(X(0))],o.prototype,"top",void 0),ul([A(X(0))],o.prototype,"right",void 0),ul([A(X(0))],o.prototype,"bottom",void 0),ul([A(X(0))],o.prototype,"left",void 0),o}(),Lh=function(){function o(){}return o.init=function(){var t=this,e=window.ResizeObserver;e?this.resizeObserver=new e(function(n){var i,a;try{for(var s=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),l=s.next();!l.done;l=s.next()){var u=l.value,c=u.contentRect,d=c.width,h=c.height;t.checkSize(t.elements.get(u.target),u.target,d,h)}}catch(p){i={error:p}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}}):this.pollerHandler=window.setInterval(function(){t.elements.forEach(function(n,i){t.checkClientSize(i,n)})},100),this.ready=!0},o.destroy=function(){var t;null!=this.pollerHandler&&(clearInterval(this.pollerHandler),this.pollerHandler=void 0),null===(t=this.resizeObserver)||void 0===t||t.disconnect(),this.resizeObserver=void 0,this.ready=!1},o.checkSize=function(t,e,r,n){t&&(!t.size||r!==t.size.width||n!==t.size.height)&&(t.size={width:r,height:n},t.cb(t.size,e))},o.observe=function(t,e){this.ready||this.init(),this.unobserve(t,!1),this.resizeObserver&&this.resizeObserver.observe(t),this.elements.set(t,{cb:e}),this.checkClientSize(t,{cb:e})},o.unobserve=function(t,e){void 0===e&&(e=!0),this.resizeObserver&&this.resizeObserver.unobserve(t),this.elements.delete(t),e&&0===this.elements.size&&this.destroy()},o.checkClientSize=function(t,e){this.checkSize(e,t,t.clientWidth?t.clientWidth:0,t.clientHeight?t.clientHeight:0)},o.elements=new Map,o.ready=!1,o}();function fw(o,t,e,r,n){var i=o.x;o.x<t?i=t:o.x>t+r&&(i=t+r);var a=o.y;o.y<e?a=e:o.y>e+n&&(a=e+n);var s=o.x-i,l=o.y-a;return Math.sqrt(s*s+l*l)<=.5*o.size}function Nh(o,t,e,r,n){return o.x+o.width>t&&o.x<t+r&&o.y+o.height>e&&o.y<e+n}function hw(o,t,e,r,n){return t+r<o.x+o.width&&t>o.x&&e>o.y&&e+n<o.y+o.height}function pw(o){return null!=o&&"object"==typeof o.point&&"object"==typeof o.label}function kh(o,t){var n,i,e=0,r=!1,a=function(){return r},s=function(){r=!1,i?.(),i=void 0,n=void 0,e>0&&o(l)},l=function(){var u=e;e=0,r=!0;var c=t({count:u});c?c.then(s).catch(s):s()};return{schedule:function(u){0===e&&!a()&&o(l,u),e++},await:function(){return function(o,t,e,r){return new(e||(e=Promise))(function(i,a){function s(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):function n(i){return i instanceof e?i:new e(function(a){a(i)})}(c.value).then(s,l)}u((r=r.apply(o,t||[])).next())})}(this,void 0,void 0,function(){return function(o,t){var r,n,i,a,e={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(!(i=(i=e.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){e=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){e.label=u[1];break}if(6===u[0]&&e.label<i[1]){e.label=i[1],i=u;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(u);break}i[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(o,e)}catch(c){u=[6,c],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}(this,function(u){switch(u.label){case 0:if(!a())return[2];null==n&&(n=new Promise(function(c){i=c})),u.label=1;case 1:return a()?[4,n]:[3,3];case 2:return u.sent(),[3,1];case 3:return[2]}})})}}}function Gh(o){return new Promise(function(t){setTimeout(function(){return t(void 0)},o)})}var Vh=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},_w=function(){function o(t,e){this.renderer=void 0,this.text=void 0,this.className=t,this.parentElement=e}return o.prototype.show=function(t){var e,r,n=this.element;if(n||((n=document.createElement("div")).className=this.className,this.element=n),n.style.position="absolute",n.style.left=t.x+"px",n.style.top=t.y+"px",n.style.width=t.width+"px",n.style.height=t.height+"px",this.renderer)n.innerHTML=this.renderer();else{var i=document.createElement("div");i.style.alignItems="center",i.style.boxSizing="border-box",i.style.display="flex",i.style.justifyContent="center",i.style.margin="8px",i.style.height="100%",i.style.font="12px Verdana, sans-serif",i.innerText=null!==(e=this.text)&&void 0!==e?e:"No data to display",n.append(i)}null===(r=this.parentElement)||void 0===r||r.append(n)},o.prototype.hide=function(){var t;null===(t=this.element)||void 0===t||t.remove(),this.element=void 0},Vh([A(ke)],o.prototype,"renderer",void 0),Vh([A(oe)],o.prototype,"text",void 0),o}(),xw=function(){return function o(t){this.noData=new _w("ag-chart-no-data-overlay",t)}}(),Xr=function(){return Xr=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},Xr.apply(this,arguments)},mn=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Sn=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},Bh=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function Jn(o,t){var e,r,n=Qt(o),i=Qt(t);if("array"===i){var a=t;return"array"!==n||o.length!==a.length||a.some(function(y,S){var m;return null!=Jn(null===(m=o)||void 0===m?void 0:m[S],y)})?Sn([],mn(a)):null}if("primitive"===i)return"primitive"!==n?Xr({},t):o!==t?t:null;var s=o||{},l=t||{},u=new Set(Sn(Sn([],mn(Object.keys(s))),mn(Object.keys(l)))),c=0,d={},h=function(y){if(s[y]===l[y])return"continue";var S=function(w){d[y]=w,c++},m=Qt(s[y]),C=Qt(l[y]);if(m!==C||"primitive"===C||null===C||"array"===C&&s[y].length!==l[y].length||"class-instance"===C||"function"===C&&s[y]!==l[y])return S(l[y]),"continue";var _=Jn(s[y],l[y]);null!==_&&S(_)};try{for(var p=Bh(u),v=p.next();!v.done;v=p.next())h(v.value)}catch(y){e={error:y}}finally{try{v&&!v.done&&(r=p.return)&&r.call(p)}finally{if(e)throw e.error}}return 0===c?null:d}var sr=Symbol("<delete-property>"),jh=Symbol("<unspecified-property>");function He(o,t){var e,r,n,i=null!==(n=t?.avoidDeepClone)&&void 0!==n?n:[];if(o.map(function(v){return Qt(v)}).some(function(v){return"array"===v})){var s=o[o.length-1];return s instanceof Array?s.map(function(v){var g=Qt(v);return"array"===g?He([[],v],t):"object"===g?He([{},v],t):v}):s}var l={},u=new Set(o.map(function(v){return null!=v?Object.keys(v):[]}).reduce(function(v,g){return v.concat(g)},[])),c=function(v){var g=o.map(function(C){return null!=C&&"object"==typeof C&&v in C?C[v]:jh}).filter(function(C){return C!==jh});if(0===g.length)return"continue";var y=g[g.length-1];if(y===sr)return"continue";var S=g.map(function(C){return Qt(C)}),m=S[0];if(S.some(function(C){return C!==m}))return l[v]=y,"continue";l[v]="array"!==m&&"object"!==m||i.includes(v)?"array"===m?Sn([],mn(y)):y:He(g,t)};try{for(var d=Bh(u),h=d.next();!h.done;h=d.next())c(h.value)}catch(v){e={error:v}}finally{try{h&&!h.done&&(r=d.return)&&r.call(d)}finally{if(e)throw e.error}}return l}function wa(o,t,e){var r,n,i;void 0===e&&(e={});var a=e.path,s=void 0===a?void 0:a,l=e.matcherPath,u=void 0===l?s?s.replace(/(\[[0-9+]+\])/i,"[]"):void 0:l,c=e.skip,d=void 0===c?[]:c,h=e.constructors,p=void 0===h?{}:h,v=e.constructedArrays,g=void 0===v?new WeakMap:v,y=e.allowedTypes,S=void 0===y?{}:y,m=e.idx;if(null==o)throw new Error("AG Charts - target is uninitialised: "+(s??"<root>"));if(null==t)return o;var C=o;null!=m&&"_declarationOrder"in C&&(C._declarationOrder=m);var _=Qt(o),w=function(b){var O=(u?u+".":"")+b;if(d.indexOf(O)>=0)return"continue";var T=t[b],E=(s?s+".":"")+b,P=C.constructor,D=C[b],R=null!==(r=p[O])&&void 0!==r?r:p[b];try{var M=Qt(D),F=Qt(T);if("class-instance"===_&&!(b in o)&&!Object.prototype.hasOwnProperty.call(C,b))return q.warn("unable to set ["+E+"] in "+P?.name+" - property is unknown"),"continue";var I=null!==(n=S[O])&&void 0!==n?n:[M];if(("class-instance"!==M||"object"!==F)&&null!=M&&null!=F&&!I.includes(F))return q.warn("unable to set ["+E+"] in "+P?.name+" - can't apply type of ["+F+"], allowed types are: ["+I+"]"),"continue";"array"===F?C[b]=null!=(R=null!==(i=R??g.get(D))&&void 0!==i?i:p[O+"[]"])?T.map(function(N,k){return wa(new R,N,Xr(Xr({},e),{path:E,matcherPath:O+"[]",idx:k}))}):T:"class-instance"===F?C[b]=T:"object"===F?null!=D?wa(D,T,Xr(Xr({},e),{path:E,matcherPath:O,idx:void 0})):C[b]=null!=R?wa(new R,T,Xr(Xr({},e),{path:E,matcherPath:O,idx:void 0})):T:C[b]=T}catch(N){return q.warn("unable to set ["+E+"] in ["+P?.name+"]; nested error is: "+N.message),"continue"}};for(var x in t)w(x);return o}function zi(o,t,e){for(var r,n=[],i=3;i<arguments.length;i++)n[i-3]=arguments[i];var a=Qt(o),s=null!==(r=e.skip)&&void 0!==r?r:[];if("array"!==a){if("object"===a){t.apply(void 0,Sn([a,o],mn(n)));var l=function(c){if(s.indexOf(c)>=0)return"continue";var d=o[c],h=n?.map(function(v){return v?.[c]}),p=Qt(d);("object"===p||"array"===p)&&zi.apply(void 0,Sn([d,t,e],mn(h)))};for(var u in o)l(u)}}else o.forEach(function(c,d){zi.apply(void 0,Sn([c,t,e],mn((n??[]).map(function(h){return h?.[d]}))))})}var ww=typeof window<"u";function Qt(o){return null==o?null:ww&&o instanceof HTMLElement?"primitive":o instanceof Array?"array":o instanceof Date?"primitive":"object"==typeof o&&o.constructor===Object?"object":"function"==typeof o?"function":"object"==typeof o&&null!=o.constructor?"class-instance":"primitive"}var yc=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},dl=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},fl=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},mc=function(){function o(){this.registeredListeners={}}return o.prototype.addListener=function(t,e){var r,n=Symbol(t);return this.registeredListeners[t]||(this.registeredListeners[t]=[]),null===(r=this.registeredListeners[t])||void 0===r||r.push({symbol:n,handler:e}),n},o.prototype.dispatch=function(t){for(var e,r,n,i=[],a=1;a<arguments.length;a++)i[a-1]=arguments[a];var s=null!==(n=this.registeredListeners[t])&&void 0!==n?n:[],l=[];try{for(var u=yc(s),c=u.next();!c.done;c=u.next()){var d=c.value;try{l.push(d.handler.apply(d,fl([],dl(i))))}catch(h){q.errorOnce(h),l.push(void 0)}}}catch(h){e={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(e)throw e.error}}return l},o.prototype.cancellableDispatch=function(t,e){for(var r,n,i,a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];var l=null!==(i=this.registeredListeners[t])&&void 0!==i?i:[],u=[];try{for(var c=yc(l),d=c.next();!d.done;d=c.next()){var h=d.value;if(e())break;u.push(h.handler.apply(h,fl([],dl(a))))}}catch(p){r={error:p}}finally{try{d&&!d.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}return u},o.prototype.reduceDispatch=function(t,e){for(var r,n,i,a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];var l=null!==(i=this.registeredListeners[t])&&void 0!==i?i:[],u=void 0;try{for(var c=yc(l),d=c.next();!d.done;d=c.next()){var h=d.value;u=h.handler.apply(h,fl([],dl(a))),a=e.apply(void 0,fl([u],dl(a)))}}catch(p){r={error:p}}finally{try{d&&!d.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}return u},o.prototype.removeListener=function(t){for(var e in this.registeredListeners){var r=this.registeredListeners[e],n=r?.findIndex(function(i){return i.symbol===t});null!=n&&n>=0&&r?.splice(n,1),null!=n&&0===r?.length&&delete this.registeredListeners[e]}},o}(),ba=function(){function o(){this.listeners=new mc}return o.prototype.addListener=function(t,e){return this.listeners.addListener(t,e)},o.prototype.removeListener=function(t){this.listeners.removeListener(t)},o}();function Oa(o,t){return o=+o,t=+t,function(e){return o*(1-e)+t*e}}function zh(o,t){if("string"==typeof o)try{o=Xe.fromString(o)}catch{o=Xe.fromArray([0,0,0])}if("string"==typeof t)try{t=Xe.fromString(t)}catch{t=Xe.fromArray([0,0,0])}var e=Oa(o.r,t.r),r=Oa(o.g,t.g),n=Oa(o.b,t.b),i=Oa(o.a,t.a);return function(a){return Xe.fromArray([e(a),r(a),n(a),i(a)]).toRgbaString()}}function Hh(o,t){var e=typeof t;if("number"===e)return Oa(o,t);if("string"===e)try{return zh(o,t=Xe.fromString(t))}catch{}throw new Error("Unable to interpolate values")}function Uh(o){return Hh(o.from,o.to)}var Hi=function bw(o){return function(t){var n=Hh(t.from,t.to);return function(i){return n(o(i))}}}(function(o){return Math.sin(o*Math.PI/2)}),hl=function(){return hl=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},hl.apply(this,arguments)},Sc=function(o){return o.Loop="loop",o.Reverse="reverse",o}(Sc||{});function Wh(o){var _,t=o.driver,e=o.duration,i=o.autoplay,a=void 0===i||i,s=o.delay,l=void 0===s?0:s,u=o.ease,d=o.repeat,h=void 0===d?0:d,p=o.repeatType,v=void 0===p?Sc.Loop:p,g=o.onComplete,y=o.onPlay,S=o.onRepeat,m=o.onStop,C=o.onUpdate,w=0,x=0,b=0,O=!0,T=!1,E=(void 0===u?Uh:u)({from:o.from,to:o.to}),P={isPlaying:!1,play:R,pause:function M(){return P.isPlaying=!1,P},stop:F,reset:function I(){return T=!1,x=0,b=0,D.reset(),P}},D=t(function k(U){O||(U=-U),w>=l?(x+=U,T||(_=E(Math.min(1,Math.max(0,x/e))),T=O?x>=e:x<=0),C?.(_),T&&(b<h?function L(){b++,v===Sc.Reverse?x=(O=b%2==0)?x%e:e-x%e:x%=e,T=!1,S?.()}():function N(){F(),g?.()}())):w+=U});function R(){return P.isPlaying=!0,D.start(),y?.(),P}function F(){return P.isPlaying=!1,D.stop(),m?.(),P}return a&&R(),P}var Ew=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Zt=function(){return Zt=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},Zt.apply(this,arguments)},Kh=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Aw=function(o){function t(e){var r=o.call(this)||this;return r.controllers={},r.throttles={},r.throttleGroups=new Set,r.updaters=[],r.isPlaying=!1,r.readyToPlay=!1,r.defaultOptions={},r.skipAnimations=!1,r.debug=!1,r.interactionManager=e,window.addEventListener("DOMContentLoaded",function(){r.readyToPlay=!0}),setTimeout(function(){r.readyToPlay=!0},10),r}return Ew(t,o),t.prototype.play=function(){if(!this.isPlaying){for(var e in this.isPlaying=!0,this.debug&&q.debug("AnimationManager.play()"),this.controllers)this.controllers[e].play();this.startAnimationCycle()}},t.prototype.pause=function(){if(this.isPlaying)for(var e in this.isPlaying=!1,this.cancelAnimationFrame(),this.debug&&q.debug("AnimationManager.pause()"),this.controllers)this.controllers[e].pause()},t.prototype.stop=function(){for(var e in this.isPlaying=!1,this.cancelAnimationFrame(),this.debug&&q.debug("AnimationManager.stop()"),this.controllers)this.controllers[e].stop()},t.prototype.reset=function(){this.isPlaying?(this.stop(),this.play()):this.stop()},t.prototype.animate=function(e,r){var n,i,a=r.disableInteractions,s=void 0===a||a,l=function(o,t){var e={};for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&t.indexOf(r)<0&&(e[r]=o[r]);if(null!=o&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(o);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(o,r[n])&&(e[r[n]]=o[r[n]])}return e}(r,["disableInteractions"]);if(!this.skipAnimations){var u=Zt(Zt({},l),{autoplay:!!this.isPlaying&&l.autoplay,driver:this.createDriver(e,s)});this.controllers[e]&&this.controllers[e].stop();var c=Wh(u);return this.controllers[e]=c,null===(i=l.onUpdate)||void 0===i||i.call(l,l.from),c}null===(n=l.onUpdate)||void 0===n||n.call(l,l.to)},t.prototype.animateMany=function(e,r,n){var i,a,s;if(this.skipAnimations){var l=r.map(function(b){return b.to});return n.onUpdate(l),void(null===(s=n.onComplete)||void 0===s||s.call(n))}var u=r.map(function(b){return b.from}),c=0,d=0,h=0,p=0,v=function(b){return function(O){var T;u[b]=O,++h>=r.length&&(null===(T=n.onUpdate)||void 0===T||T.call(n,u),h=0)}},g=function(){var b;++c>=r.length&&(null===(b=n.onPlay)||void 0===b||b.call(n))},y=function(){var b;++d>=r.length&&(null===(b=n.onStop)||void 0===b||b.call(n))},S=function(){var b;++p>=r.length&&(null===(b=n.onComplete)||void 0===b||b.call(n))},m=0;try{for(var C=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(r),_=C.next();!_.done;_=C.next()){var w=_.value;this.animate(e+"-"+m,Zt(Zt(Zt({},n),w),{onUpdate:v(m),onPlay:g,onStop:y,onComplete:S})),m++}}catch(b){i={error:b}}finally{try{_&&!_.done&&(a=C.return)&&a.call(C)}finally{if(i)throw i.error}}},t.prototype.animateWithThrottle=function(e,r){var n,i=null!==(n=r.throttleId)&&void 0!==n?n:e;this.throttles[i]&&r.duration&&Date.now()-this.throttles[i]<r.duration&&(r.delay=0,r.duration=1),this.throttles[e]=Date.now(),this.animate(e,Zt({},r))},t.prototype.animateManyWithThrottle=function(e,r,n){var a,i=this,s=n.throttleGroup,l=null!==(a=n.throttleId)&&void 0!==a?a:e,u=Date.now(),c=this.throttles[l]&&n.duration&&u-this.throttles[l]<n.duration,d=s&&this.throttleGroups.has(s);return c&&!d&&(n.delay=0,n.duration=1),!c&&s&&this.throttleGroups.add(s),this.throttles[l]=u,this.animateMany(e,r,Zt(Zt({},n),{onStop:function(){var p;s&&i.throttleGroups.delete(s),null===(p=n.onStop)||void 0===p||p.call(n)}}))},t.prototype.tween=function(e){var r="tween-"+btoa(JSON.stringify(e));return function Ow(o){var t,r=Wh(hl(hl({},o),{autoplay:!1,onUpdate:function(i){t?.(i)}})),n={start:function(i){return r.stop(),r.reset(),r.play(),t=i,n},stop:function(){return r.stop(),n}};return n}(Zt(Zt({},e),{driver:this.createDriver(r)}))},t.prototype.createDriver=function(e,r){var n=this;return function(i){return{start:function(){n.updaters.push([e,i]),null==n.requestId&&n.startAnimationCycle(),r&&n.interactionManager.pause("animation_"+e)},stop:function(){delete n.controllers[e],n.updaters=n.updaters.filter(function(a){return Kh(a,1)[0]!==e}),n.updaters.length<=0&&n.cancelAnimationFrame(),r&&n.interactionManager.resume("animation_"+e)},reset:function(){}}}},t.prototype.startAnimationCycle=function(){var e=this;if(0!==this.updaters.length){var r=function(n){if(e.requestId=requestAnimationFrame(r),e.readyToPlay){void 0===e.lastTime&&(e.lastTime=n);var i=n-e.lastTime;e.lastTime=n,e.debug&&q.debug("AnimationManager - frame()",{updaterCount:e.updaters.length}),e.updaters.forEach(function(a){return(0,Kh(a,2)[1])(i)}),e.listeners.dispatch("animation-frame",{type:"animation-frame",deltaMs:i})}};this.requestId=requestAnimationFrame(r)}},t.prototype.cancelAnimationFrame=function(){this.requestId&&(cancelAnimationFrame(this.requestId),this.requestId=void 0,this.lastTime=void 0)},t}(ba),Mw=function(){function o(t){this.states={},this.element=t}return o.prototype.updateCursor=function(t,e){delete this.states[t],null!=e&&(this.states[t]={style:e}),this.applyStates()},o.prototype.applyStates=function(){var t="default";Object.entries(this.states).reverse().slice(0,1).forEach(function(e){var r=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i}(e,2);return t=r[1].style}),this.element.style.cursor=t},o}(),Rw=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Fw=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return Rw(t,o),t.prototype.legendItemClick=function(e,r,n,i){this.listeners.dispatch("legend-item-click",{type:"legend-item-click",series:e,itemId:r,enabled:n,legendItemName:i})},t.prototype.legendItemDoubleClick=function(e,r,n,i,a){this.listeners.dispatch("legend-item-double-click",{type:"legend-item-double-click",series:e,itemId:r,enabled:n,legendItemName:a,numVisibleItems:i})},t.prototype.axisHover=function(e,r){this.listeners.dispatch("axis-hover",{type:"axis-hover",axisId:e,direction:r})},t}(ba),Iw=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),kw=function(o){function t(){var e=o.call(this)||this;return e.states={},e.activeHighlight=void 0,e}return Iw(t,o),t.prototype.updateHighlight=function(e,r){delete this.states[e],null!=r&&(this.states[e]={highlightedDatum:r}),this.applyStates()},t.prototype.getActiveHighlight=function(){return this.activeHighlight},t.prototype.applyStates=function(){var e=this.activeHighlight,r=void 0;Object.entries(this.states).reverse().slice(0,1).forEach(function(a){var s=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i}(a,2);return r=s[1].highlightedDatum}),this.activeHighlight=r;var n=!function Nw(o,t){return o===t||!(o?.series!==t?.series||o?.itemId!==t?.itemId||o?.datum!==t?.datum)}(e,this.activeHighlight);n&&this.listeners.dispatch("highlight-change",{type:"highlight-change",previousHighlight:e,currentHighlight:this.activeHighlight})},t}(ba),Gw=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ui=function(){return Ui=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},Ui.apply(this,arguments)},Ea=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Yh=["pagehide","mousemove","mouseup","wheel"],$h=["click","dblclick","contextmenu","mousedown","mouseout","mouseenter","touchstart","touchmove","touchend","touchcancel"],zw=function(o){function t(e,r){var n,i,a,s;void 0===r&&(r=document);var l=o.call(this)||this;l.eventHandler=function(g){return l.processEvent(g)},l.mouseDown=!1,l.touchDown=!1,l.enabled=!0,l.pausers=[],l.rootElement=r.body,l.element=e;try{for(var u=Ea($h),c=u.next();!c.done;c=u.next())(d=c.value).startsWith("touch")?e.addEventListener(d,l.eventHandler,{passive:!0}):e.addEventListener(d,l.eventHandler)}catch(g){n={error:g}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}try{for(var h=Ea(Yh),p=h.next();!p.done;p=h.next()){var d;"wheel"===(d=p.value)?window.addEventListener(d,l.eventHandler,{passive:!1}):window.addEventListener(d,l.eventHandler)}}catch(g){a={error:g}}finally{try{p&&!p.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}if(t.interactionDocuments.indexOf(r)<0){var v=document.createElement("style");v.innerHTML="\n.ag-chart-wrapper {\n    touch-action: none;\n}\n",document.head.insertBefore(v,document.head.querySelector("style")),t.interactionDocuments.push(r)}return l}return Gw(t,o),t.prototype.destroy=function(){var e,r,n,i;try{for(var a=Ea(Yh),s=a.next();!s.done;s=a.next()){var l=s.value;window.removeEventListener(l,this.eventHandler)}}catch(d){e={error:d}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}try{for(var u=Ea($h),c=u.next();!c.done;c=u.next())this.element.removeEventListener(l=c.value,this.eventHandler)}catch(d){n={error:d}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}},t.prototype.resume=function(e){return this.pausers=this.pausers.filter(function(r){return r!==e}),this.enabled=this.pausers.length<=0,this.enabled},t.prototype.pause=function(e){this.enabled=!1,this.pausers.push(e)},t.prototype.processEvent=function(e){var r=this.decideInteractionEventTypes(e);r.length>0&&this.enabled&&this.dispatchEvent(e,r).catch(function(n){return q.errorOnce(n)})},t.prototype.dispatchEvent=function(e,r){return function(o,t,e,r){return new(e||(e=Promise))(function(i,a){function s(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):function n(i){return i instanceof e?i:new e(function(a){a(i)})}(c.value).then(s,l)}u((r=r.apply(o,t||[])).next())})}(this,void 0,void 0,function(){var n,i,a,s,l,c,d;return function(o,t){var r,n,i,a,e={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(!(i=(i=e.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){e=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){e.label=u[1];break}if(6===u[0]&&e.label<i[1]){e.label=i[1],i=u;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(u);break}i[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(o,e)}catch(c){u=[6,c],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}(this,function(h){if(null==(n=this.calculateCoordinates(e)))return[2];i=function(p){var v=a.buildEvent(Ui(Ui({event:e},n),{type:p}));a.listeners.cancellableDispatch(p,function(){return v.consumed},v)},a=this;try{for(s=Ea(r),l=s.next();!l.done;l=s.next())i(l.value)}catch(p){c={error:p}}finally{try{l&&!l.done&&(d=s.return)&&d.call(s)}finally{if(c)throw c.error}}return[2]})})},t.prototype.decideInteractionEventTypes=function(e){switch(e.type){case"click":return["click"];case"dblclick":return["dblclick"];case"contextmenu":return["contextmenu"];case"mousedown":return this.mouseDown=!0,this.dragStartElement=e.target,["drag-start"];case"touchstart":return this.touchDown=!0,this.dragStartElement=e.target,["drag-start"];case"touchmove":case"mousemove":return this.mouseDown||this.touchDown||this.isEventOverElement(e)?this.mouseDown||this.touchDown?["drag"]:["hover"]:[];case"mouseup":return this.mouseDown||this.isEventOverElement(e)?(this.mouseDown=!1,this.dragStartElement=void 0,["drag-end"]):[];case"touchend":return this.touchDown||this.isEventOverElement(e)?(this.touchDown=!1,this.dragStartElement=void 0,["drag-end"]):[];case"mouseout":case"touchcancel":return["leave"];case"mouseenter":var r=e instanceof MouseEvent&&1==(1&e.buttons);return this.mouseDown!==r?(this.mouseDown=r,[r?"drag-start":"drag-end"]):[];case"pagehide":return["page-left"];case"wheel":return["wheel"]}return[]},t.prototype.isEventOverElement=function(e){var r;return e.target===this.element||(null===(r=e.target)||void 0===r?void 0:r.parentElement)===this.element},t.prototype.calculateCoordinates=function(e){var r;if(e instanceof MouseEvent)return this.fixOffsets(e,{clientX:n=e.clientX,clientY:i=e.clientY,pageX:a=e.pageX,pageY:s=e.pageY,offsetX:e.offsetX,offsetY:e.offsetY});if(typeof TouchEvent<"u"&&e instanceof TouchEvent){var c=null!==(r=e.touches[0])&&void 0!==r?r:e.changedTouches[0],n=c.clientX,i=c.clientY,a=c.pageX,s=c.pageY;return Ui(Ui({},t.NULL_COORDS),{clientX:n,clientY:i,pageX:a,pageY:s})}return e instanceof PageTransitionEvent?e.persisted?void 0:t.NULL_COORDS:void 0},t.prototype.fixOffsets=function(e,r){var n=function(s){for(var l=0,u=0;s;)l+=s.offsetLeft,u+=s.offsetTop,s=s.offsetParent;return{x:l,y:u}};if(null!=this.dragStartElement&&e.target!==this.dragStartElement){var i=n(this.dragStartElement),a=n(e.target);r.offsetX-=i.x-a.x,r.offsetY-=i.y-a.y}return r},t.prototype.buildEvent=function(e){var r=e.type,n=e.event,i=e.clientX,a=e.clientY,s=e.offsetX,l=e.offsetY,u=e.pageX,c=e.pageY;if(!gt(s)||!gt(l)){var d=this.element.getBoundingClientRect();s=i-d.left,l=a-d.top}if(!gt(u)||!gt(c)){var h=this.rootElement.getBoundingClientRect();u=i-h.left,c=a-h.top}var p={type:r,offsetX:s,offsetY:l,pageX:u,pageY:c,sourceEvent:n,consumed:!1,consume:function(){return p.consumed=!0}};return p},t.interactionDocuments=[],t.NULL_COORDS={clientX:-1/0,clientY:-1/0,pageX:-1/0,pageY:-1/0,offsetX:-1/0,offsetY:-1/0},t}(ba),Xh=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Hw=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Uw=function(){function o(t,e){var r=this;this.states={},this.exclusiveAreas={},this.destroyFns=[],this.tooltip=t;var n=e.addListener("hover",function(i){return r.checkExclusiveRects(i)});this.destroyFns.push(function(){return e.removeListener(n)})}return o.prototype.updateTooltip=function(t,e,r){var n;null==r&&(r=null===(n=this.states[t])||void 0===n?void 0:n.content),this.states[t]={content:r,meta:e},this.applyStates()},o.prototype.updateExclusiveRect=function(t,e){e?this.exclusiveAreas[t]=e:delete this.exclusiveAreas[t]},o.prototype.removeTooltip=function(t){delete this.states[t],this.applyStates()},o.prototype.getTooltipMeta=function(t){var e;return null===(e=this.states[t])||void 0===e?void 0:e.meta},o.prototype.destroy=function(){var t,e;try{for(var r=Xh(this.destroyFns),n=r.next();!n.done;n=r.next())(0,n.value)()}catch(a){t={error:a}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},o.prototype.checkExclusiveRects=function(t){var e,r,n;try{for(var i=Xh(Object.entries(this.exclusiveAreas)),a=i.next();!a.done;a=i.next()){var s=Hw(a.value,2),l=s[0];if(s[1].containsPoint(t.offsetX,t.offsetY)){n=l;break}}}catch(c){e={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}n!==this.appliedExclusiveArea&&(this.appliedExclusiveArea=n,this.applyStates())},o.prototype.applyStates=function(){var e,t=this,r=this.appliedExclusiveArea?[this.appliedExclusiveArea]:Object.keys(this.states),n=void 0,i=void 0;if(r.reverse(),r.slice(0,1).forEach(function(s){var l,u=null!==(l=t.states[s])&&void 0!==l?l:{};n=u.content,i=u.meta}),void 0===i||void 0===n)return this.appliedState=void 0,void this.tooltip.toggle(!1);if((null===(e=this.appliedState)||void 0===e?void 0:e.content)===n){var a=this.tooltip.isVisible();this.tooltip.show(i,void 0,a)}else this.tooltip.show(i,n);this.appliedState={content:n,meta:i}},o}(),Ww=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Wi=function(){return Wi=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},Wi.apply(this,arguments)},Qh=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Zh=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Kw=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.axes={},e}return Ww(t,o),t.prototype.updateAxes=function(e){var r=this,n=new Set(Object.keys(this.axes));e.forEach(function(i){var a,s,l;n.delete(i.id),null!==(a=(s=r.axes)[l=i.id])&&void 0!==a||(s[l]=new Yw(i))}),n.forEach(function(i){delete r.axes[i]}),this.initialZoom&&(this.updateZoom(this.initialZoom.callerId,this.initialZoom.newZoom),this.initialZoom=void 0)},t.prototype.updateZoom=function(e,r){0!==Object.keys(this.axes).length?(Object.values(this.axes).forEach(function(n){n.updateZoom(e,r?.[n.getDirection()])}),this.applyStates()):this.initialZoom={callerId:e,newZoom:r}},t.prototype.updateAxisZoom=function(e,r,n){var i;null===(i=this.axes[r])||void 0===i||i.updateZoom(e,n),this.applyStates()},t.prototype.getZoom=function(){var e,r;if(Object.values(this.axes).forEach(function(n){n.getDirection()===Z.X?e=n.getZoom():n.getDirection()===Z.Y&&(r=n.getZoom())}),e||r)return{x:e,y:r}},t.prototype.getAxisZoom=function(e){var r;return null===(r=this.axes[e])||void 0===r?void 0:r.getZoom()},t.prototype.getAxisZooms=function(){var e,r,n={};try{for(var i=Qh(Object.entries(this.axes)),a=i.next();!a.done;a=i.next()){var s=Zh(a.value,2),u=s[1];n[s[0]]={direction:u.getDirection(),zoom:u.getZoom()}}}catch(c){e={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return n},t.prototype.applyStates=function(){var e,r;if(Object.values(this.axes).map(function(p){return p.applyStates()}).some(Boolean)){var i=this.getZoom(),a={};try{for(var s=Qh(Object.entries(this.axes)),l=s.next();!l.done;l=s.next()){var u=Zh(l.value,2);a[u[0]]=u[1].getZoom()}}catch(p){e={error:p}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}var h=Wi(Wi({type:"zoom-change"},i??{}),{axes:a});this.listeners.dispatch("zoom-change",h)}},t}(ba),Yw=function(){function o(t){this.states={},this.currentZoom=void 0,this.axis=t}return o.prototype.getDirection=function(){return this.axis.direction},o.prototype.updateZoom=function(t,e){delete this.states[t],null!=e&&(this.states[t]=Wi({},e))},o.prototype.getZoom=function(){return this.currentZoom},o.prototype.applyStates=function(){var t,e,r=this.currentZoom,n=Object.keys(this.states)[Object.keys(this.states).length-1];return this.currentZoom=Wi({},this.states[n]),r?.min!==(null===(t=this.currentZoom)||void 0===t?void 0:t.min)||r?.max!==(null===(e=this.currentZoom)||void 0===e?void 0:e.max)},o}(),pl=function(){return pl=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},pl.apply(this,arguments)},Qw=function(){function o(){this.layoutProcessors=new mc,this.listeners=new mc}return o.prototype.addListener=function(t,e){if(function $w(o){return"layout-complete"!==o}(t))return this.layoutProcessors.addListener(t,e);if(function Xw(o){return"layout-complete"===o}(t))return this.listeners.addListener(t,e);throw new Error("AG Charts - unsupported listener type: "+t)},o.prototype.removeListener=function(t){this.listeners.removeListener(t),this.layoutProcessors.removeListener(t)},o.prototype.dispatchPerformLayout=function(t,e){return this.layoutProcessors.reduceDispatch(t,function(n,i){var a=n.shrinkRect;return[pl(pl({},i),{shrinkRect:a})]},e)??e},o.prototype.dispatchLayoutComplete=function(t){this.listeners.dispatch("layout-complete",t)},o}(),Zw=function(){return function o(t){this.getSeries=t}}(),ge=function(o){return o[o.FULL=0]="FULL",o[o.PROCESS_DATA=1]="PROCESS_DATA",o[o.PERFORM_LAYOUT=2]="PERFORM_LAYOUT",o[o.SERIES_UPDATE=3]="SERIES_UPDATE",o[o.TOOLTIP_RECALCULATION=4]="TOOLTIP_RECALCULATION",o[o.SCENE_RENDER=5]="SCENE_RENDER",o[o.NONE=6]="NONE",o}(ge||{}),qw=function(){function o(t){this.updateCallback=t}return o.prototype.update=function(t,e){void 0===t&&(t=ge.FULL);var n=(void 0===e?{}:e).forceNodeDataRefresh;this.updateCallback(t,{forceNodeDataRefresh:void 0!==n&&n})},o}(),eb=function(){function o(){this.range="tooltip"}return function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);n>3&&i&&Object.defineProperty(t,e,i)}([A(xh("tooltip","node"))],o.prototype,"range",void 0),o}(),qh=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Jh=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Fe=function(){function o(t,e,r){void 0===r&&(r=!0),this._nodes=[],this._data=[],this._datumNodeIndices=new Map,this._garbage=[],this._garbageCollection=!0,this._parent=t,this._factory=Object.prototype.isPrototypeOf.call($s,e)?function(){return new e}:e,this._garbageCollection=r}return o.select=function(t,e,r){return void 0===r&&(r=!0),new o(t,e,r)},o.prototype.each=function(t){return this._nodes.forEach(function(e,r){return t(e,e.datum,r)}),this},o.prototype.update=function(t,e,r){var n,i,a=this,s=this._data,l=this._parent,u=this._factory,c=new Map;if(r?t.forEach(function(m,C){var _=r(m);if(c.set(_,C),!a._datumNodeIndices.has(_)){var w=u(m);w.datum=m,e?.(w),l.appendChild(w),a._nodes.push(w),a._datumNodeIndices.set(_,a._nodes.length-1)}}):t.length>s.length?t.slice(s.length).forEach(function(m){var C=u(m);C.datum=m,e?.(C),l.appendChild(C),a._nodes.push(C)}):t.length<s.length&&this._nodes.splice(t.length).forEach(function(m){l.removeChild(m)}),this._data=t.slice(0),r){try{for(var d=qh(this._datumNodeIndices),h=d.next();!h.done;h=d.next()){var p=Jh(h.value,2),v=p[0],g=p[1],y=c.get(v);void 0!==y?this._nodes[g].datum=t[y]:this._garbage.push(v)}}catch(m){n={error:m}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}this._garbageCollection&&this.cleanup()}else for(var S=0;S<t.length;S++)this._nodes[S].datum=this._data[S];return this},o.prototype.clear=function(){return this.update([]),this},o.prototype.cleanup=function(){var t,e,r=this;if(0!==this._garbage.length){this._garbage.forEach(function(h){var p=r._datumNodeIndices.get(h);if(void 0!==p){var v=r._nodes[p];delete r._nodes[p],r._datumNodeIndices.delete(h),v&&r._parent.removeChild(v)}});var n=0,i=this._datumNodeIndices.entries(),a=new Map;try{for(var s=qh(i),l=s.next();!l.done;l=s.next()){var u=Jh(l.value,2);a.set(u[1],u[0])}}catch(h){t={error:h}}finally{try{l&&!l.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}this._nodes=this._nodes.filter(function(h,p){if(void 0===h)return!1;var v=a.get(p);return r._datumNodeIndices.set(v,n),n++,!0}),this._garbage=[]}},o.selectAll=function(t,e){var r=[],n=function(i){e(i)&&r.push(i),i.children.forEach(n)};return n(t),r},o.selectByClass=function(t,e){return o.selectAll(t,function(r){return r instanceof e})},o.selectByTag=function(t,e){return o.selectAll(t,function(r){return r.tag===e})},o.prototype.select=function(t){return o.selectAll(this._parent,t)},o.prototype.selectByClass=function(t){return this.select(function(e){return e instanceof t})},o.prototype.selectByTag=function(t){return this.select(function(e){return e.tag===t})},o.prototype.nodes=function(){return this._nodes},o}();function Ta(o,t,e,r,n,i,a,s){var l=(e-o)*(s-i)-(r-t)*(a-n);if(0===l)return null;var u=((a-n)*(t-i)-(o-n)*(s-i))/l,c=((e-o)*(t-i)-(r-t)*(o-n))/l;return u>=0&&u<=1&&c>=0&&c<=1?{x:o+u*(e-o),y:t+u*(r-t)}:null}function ob(o,t,e,r,n,i,a,s,l,u,c,d){var h,p,v=[],g=u-d,y=c-l,S=l*(d-u)-u*(c-l),m=ep(o,e,n,a),C=ep(t,r,i,s),O=function nb(o,t,e,r){if(0===o)return function rb(o,t,e){if(0===o)return function tb(o,t){var e=-t/o;return 0!==o&&e>=0&&e<=1?[e]:[]}(t,e);var r=t*t-4*o*e,n=[];if(0===r){var i=-t/(2*o);i>=0&&i<=1&&n.push(i)}else if(r>0){var a=Math.sqrt(r),s=(-t-a)/(2*o),l=(-t+a)/(2*o);s>=0&&s<=1&&n.push(s),l>=0&&l<=1&&n.push(l)}return n}(t,e,r);var n=t/o,i=e/o,s=(3*i-n*n)/9,l=(9*n*i-r/o*27-2*n*n*n)/54,u=s*s*s+l*l,c=1/3,d=[];if(u>=0){var h=Math.sqrt(u),p=Math.sign(l+h)*Math.pow(Math.abs(l+h),c),v=Math.sign(l-h)*Math.pow(Math.abs(l-h),c),g=Math.abs(Math.sqrt(3)*(p-v)/2),y=-c*n+(p+v);if(y>=0&&y<=1&&d.push(y),0===g){var S=-c*n-(p+v)/2;S>=0&&S<=1&&d.push(S)}}else{var m=Math.acos(l/Math.sqrt(-s*s*s)),C=c*n,_=2*Math.sqrt(-s),w=_*Math.cos(c*m)-C,x=_*Math.cos(c*(m+2*Math.PI))-C,b=_*Math.cos(c*(m+4*Math.PI))-C;w>=0&&w<=1&&d.push(w),x>=0&&x<=1&&d.push(x),b>=0&&b<=1&&d.push(b)}return d}(g*m[0]+y*C[0],g*m[1]+y*C[1],g*m[2]+y*C[2],g*m[3]+y*C[3]+S);try{for(var T=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(O),E=T.next();!E.done;E=T.next()){var I,P=E.value,D=P*P,R=P*D,M=m[0]*R+m[1]*D+m[2]*P+m[3],F=C[0]*R+C[1]*D+C[2]*P+C[3];(I=l!==c?(M-l)/(c-l):(F-u)/(d-u))>=0&&I<=1&&v.push({x:M,y:F})}}catch(L){h={error:L}}finally{try{E&&!E.done&&(p=T.return)&&p.call(T)}finally{if(h)throw h.error}}return v}function ep(o,t,e,r){return[3*t-o-3*e+r,3*o-6*t+3*e,-3*o+3*t,o]}function tp(o,t,e,r,n,i,a,s,l,u){var c=(u-s)/(l-a),d=s-c*a,h=Math.pow(c,2)+1,p=2*(c*(d-t)-o),v=Math.pow(o,2)+Math.pow(d-t,2)-Math.pow(e,2),g=Math.pow(p,2)-4*h*v;if(g<0)return[];var y=(-p+Math.sqrt(g))/2/h,S=(-p-Math.sqrt(g))/2/h,m=[];return[y,S].forEach(function(C){if(C>=Math.min(a,l)&&C<=Math.max(a,l)){var w=c*C,x=_t(i?n:r),b=_t(i?r:n),O=_t(Math.atan2(w,C));b<=x&&(b+=2*Math.PI),O<x&&(O+=2*Math.PI),O>=x&&O<=b&&m.push({x:C,y:w})}}),m}var yt=function(o){return o[o.Move=0]="Move",o[o.Line=1]="Line",o[o.Arc=2]="Arc",o[o.Curve=3]="Curve",o[o.ClosePath=4]="ClosePath",o}(yt||{}),Cc=function(){function o(){this.previousCommands=[],this.previousParams=[],this.previousClosedPath=!1,this.commands=[],this.params=[],this._closedPath=!1}return o.prototype.isDirty=function(){if(this._closedPath!==this.previousClosedPath||this.previousCommands.length!==this.commands.length||this.previousParams.length!==this.params.length)return!0;for(var t=0;t<this.commands.length;t++)if(this.commands[t]!==this.previousCommands[t])return!0;for(t=0;t<this.params.length;t++)if(this.params[t]!==this.previousParams[t])return!0;return!1},o.prototype.draw=function(t){var e,r,n=this.commands,i=this.params,a=0;t.beginPath();try{for(var s=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),l=s.next();!l.done;l=s.next())switch(l.value){case yt.Move:t.moveTo(i[a++],i[a++]);break;case yt.Line:t.lineTo(i[a++],i[a++]);break;case yt.Curve:t.bezierCurveTo(i[a++],i[a++],i[a++],i[a++],i[a++],i[a++]);break;case yt.Arc:t.arc(i[a++],i[a++],i[a++],i[a++],i[a++],1===i[a++]);break;case yt.ClosePath:t.closePath()}}catch(c){e={error:c}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}0===n.length&&t.closePath()},o.prototype.moveTo=function(t,e){this.xy?(this.xy[0]=t,this.xy[1]=e):this.xy=[t,e],this.commands.push(yt.Move),this.params.push(t,e)},o.prototype.lineTo=function(t,e){this.xy?(this.commands.push(yt.Line),this.params.push(t,e),this.xy[0]=t,this.xy[1]=e):this.moveTo(t,e)},o.prototype.rect=function(t,e,r,n){this.moveTo(t,e),this.lineTo(t+r,e),this.lineTo(t+r,e+n),this.lineTo(t,e+n),this.closePath()},o.prototype.arc=function(t,e,r,n,i,a){void 0===a&&(a=!1);var s=t+r*Math.cos(i),l=e+r*Math.sin(i);this.xy?(this.xy[0]=s,this.xy[1]=l):this.xy=[s,l],this.commands.push(yt.Arc),this.params.push(t,e,r,n,i,a?1:0)},o.prototype.cubicCurveTo=function(t,e,r,n,i,a){this.xy||this.moveTo(t,e),this.commands.push(yt.Curve),this.params.push(t,e,r,n,i,a),this.xy&&(this.xy[0]=i,this.xy[1]=a)},Object.defineProperty(o.prototype,"closedPath",{get:function(){return this._closedPath},enumerable:!1,configurable:!0}),o.prototype.closePath=function(){this.xy&&(this.xy=void 0,this.commands.push(yt.ClosePath),this._closedPath=!0)},o.prototype.clear=function(t){(void 0===t?{trackChanges:!1}:t).trackChanges?(this.previousCommands=this.commands,this.previousParams=this.params,this.previousClosedPath=this._closedPath,this.commands=[],this.params=[]):(this.commands.length=0,this.params.length=0),this.xy=void 0,this._closedPath=!1},o.prototype.isPointInPath=function(t,e){for(var r=this.commands,n=this.params,i=r.length,a=-1e4,s=-1e4,l=NaN,u=NaN,c=0,d=0,h=0,p=0,v=0;p<i;p++)switch(r[p]){case yt.Move:isNaN(l)||Ta(l,u,c,d,a,s,t,e)&&h++,l=c=n[v++],u=d=n[v++];break;case yt.Line:Ta(c,d,n[v++],n[v++],a,s,t,e)&&h++,c=n[v-2],d=n[v-1];break;case yt.Curve:h+=ob(c,d,n[v++],n[v++],n[v++],n[v++],n[v++],n[v++],a,s,t,e).length,c=n[v-2],d=n[v-1];break;case yt.Arc:h+=tp(n[v++],n[v++],n[v++],n[v++],n[v++],!!n[v++],a,s,t,e).length,c=n[v-2],d=n[v-1];break;case yt.ClosePath:isNaN(l)||Ta(l,u,c,d,a,s,t,e)&&h++}return h%2==1},o}(),sb=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),rp=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i};function Me(o){var t=o??{},e=t.redraw;return ee({redraw:void 0===e?$.MAJOR:e,type:"path",convertor:t.convertor,changeCb:t.changeCb})}var wt=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.path=new Cc,e._dirtyPath=!0,e}return sb(t,o),Object.defineProperty(t.prototype,"dirtyPath",{get:function(){return this._dirtyPath},set:function(e){this._dirtyPath!==e&&(this._dirtyPath=e,e&&this.markDirty(this,$.MAJOR))},enumerable:!1,configurable:!0}),t.prototype.checkPathDirty=function(){var e,r;this._dirtyPath||(this.dirtyPath=this.path.isDirty()||null!==(r=null===(e=this.fillShadow)||void 0===e?void 0:e.isDirty())&&void 0!==r&&r)},t.prototype.isPointInPath=function(e,r){var n=this.transformPoint(e,r);return this.path.closedPath&&this.path.isPointInPath(n.x,n.y)},t.prototype.isDirtyPath=function(){return!1},t.prototype.updatePath=function(){},t.prototype.render=function(e){var r,n,i=e.ctx,s=e.stats;if(this.dirty!==$.NONE||e.forceRender){if(this.computeTransformMatrix(),this.matrix.toContext(i),(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1),this.clipPath){if(i.save(),"normal"===this.clipMode&&(this.clipPath.draw(i),i.clip()),this.path.draw(i),this.fillStroke(i),"punch-out"===this.clipMode){this.clipPath.draw(i),i.clip();var l=null!==(r=this.computeBBox())&&void 0!==r?r:{},u=l.x,d=l.y,p=l.width,g=l.height;i.clearRect(void 0===u?-1e4:u,void 0===d?-1e4:d,void 0===p?2e4:p,void 0===g?2e4:g)}i.restore()}else this.path.draw(i),this.fillStroke(i);null===(n=this.fillShadow)||void 0===n||n.markClean(),o.prototype.render.call(this,e)}else s&&(s.nodesSkipped+=this.nodeCount.count)},t.className="Path",rp([Me()],t.prototype,"clipPath",void 0),rp([Me()],t.prototype,"clipMode",void 0),t}(_r),lb=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),_c=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Cn=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.x=0,e.y=0,e.size=12,e}return lb(t,o),t.prototype.computeBBox=function(){var e=this,i=e.size,a=i/2;return new me(e.x-a,e.y-a,i,i)},t.prototype.applyPath=function(e,r){var n,i,a=this.path,l=this.x,u=this.y;a.clear();try{for(var c=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(r),d=c.next();!d.done;d=c.next()){var h=d.value;l+=h.x*e,u+=h.y*e,"move"===h.t?a.moveTo(l,u):a.lineTo(l,u)}}catch(y){n={error:y}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}a.closePath()},_c([Me()],t.prototype,"x",void 0),_c([Me()],t.prototype,"y",void 0),_c([Me({convertor:Math.abs})],t.prototype,"size",void 0),t}(wt),cb=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Pa=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return cb(t,o),t.prototype.updatePath=function(){var e=this,r=e.path,n=e.x,i=e.y,a=this.size/2;r.clear(),r.moveTo(this.align(n-a),this.align(i-a)),r.lineTo(this.align(n+a),this.align(i-a)),r.lineTo(this.align(n+a),this.align(i+a)),r.lineTo(this.align(n-a),this.align(i+a)),r.closePath()},t.className="Square",t}(Cn),db=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),lr=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},np=function(o){function t(){var e=o.call(this,{name:"markerLabelGroup"})||this;e.label=new Ee,e._marker=new Pa,e._markerSize=15,e._spacing=8;var r=e.label;return r.textBaseline="middle",r.fontSize=12,r.fontFamily="Verdana, sans-serif",r.fill="black",r.y=Ve.has.textMetrics?1:0,e.append([e.marker,r]),e.update(),e}return db(t,o),Object.defineProperty(t.prototype,"marker",{get:function(){return this._marker},set:function(e){this._marker!==e&&(this.removeChild(this._marker),this._marker=e,this.appendChild(e),this.update())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"markerSize",{get:function(){return this._markerSize},set:function(e){this._markerSize!==e&&(this._markerSize=e,this.update())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"spacing",{get:function(){return this._spacing},set:function(e){this._spacing!==e&&(this._spacing=e,this.update())},enumerable:!1,configurable:!0}),t.prototype.update=function(){var r=this.markerSize;this.marker.size=r,this.label.x=r/2+this.spacing},t.prototype.render=function(e){this.marker.opacity=this.opacity,this.label.opacity=this.opacity,o.prototype.render.call(this,e)},t.className="MarkerLabel",lr([Qe("label")],t.prototype,"text",void 0),lr([Qe("label")],t.prototype,"fontStyle",void 0),lr([Qe("label")],t.prototype,"fontWeight",void 0),lr([Qe("label")],t.prototype,"fontSize",void 0),lr([Qe("label")],t.prototype,"fontFamily",void 0),lr([Qe("label","fill")],t.prototype,"color",void 0),lr([Qe("marker","fill")],t.prototype,"markerFill",void 0),lr([Qe("marker","stroke")],t.prototype,"markerStroke",void 0),lr([Qe("marker","strokeWidth")],t.prototype,"markerStrokeWidth",void 0),lr([Qe("marker","fillOpacity")],t.prototype,"markerFillOpacity",void 0),lr([Qe("marker","strokeOpacity")],t.prototype,"markerStrokeOpacity",void 0),t}(re),fb=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Aa=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return fb(t,o),t.prototype.updatePath=function(){var e=this,r=e.x,n=e.y,i=e.path,s=e.size/2;i.clear(),i.arc(r,n,s,0,2*Math.PI),i.closePath()},t.className="Circle",t}(Cn),hb=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),pb=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return hb(t,o),t.prototype.updatePath=function(){o.prototype.applyPath.call(this,this.size/4.2,t.moves)},t.className="Cross",t.moves=[{x:-1,y:0,t:"move"},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:-1,y:1},{x:-1,y:-1}],t}(Cn),vb=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ip=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return vb(t,o),t.prototype.updatePath=function(){o.prototype.applyPath.call(this,this.size/2,t.moves)},t.className="Diamond",t.moves=[{x:0,y:-1,t:"move"},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:1,y:-1}],t}(Cn),gb=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),yb=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return gb(t,o),t.prototype.rad=function(e){return e/180*Math.PI},t.prototype.updatePath=function(){var e=this,r=e.x,n=e.path,a=e.rad,s=e.size/4,l=this.y+s/2;n.clear(),n.arc(r-s,l-s,s,a(130),a(330)),n.arc(r+s,l-s,s,a(220),a(50)),n.lineTo(r,l+s),n.closePath()},t.className="Heart",t}(Cn),mb=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Sb=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return mb(t,o),t.prototype.updatePath=function(){o.prototype.applyPath.call(this,this.size/3,t.moves)},t.className="Plus",t.moves=[{x:-.5,y:-.5,t:"move"},{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:-1},{x:-1,y:0},{x:0,y:-1}],t}(Cn),Cb=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Da=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return Cb(t,o),t.prototype.updatePath=function(){o.prototype.applyPath.call(this,1.1*this.size,t.moves)},t.className="Triangle",t.moves=[{x:0,y:-.48,t:"move"},{x:.5,y:.87},{x:-1,y:0}],t}(Cn);function Ki(o){if(void 0===o&&(o=Pa),"string"==typeof o)switch(o){case"circle":return Aa;case"cross":return pb;case"diamond":return ip;case"heart":return yb;case"plus":return Sb;case"triangle":return Da;default:return Pa}return"function"==typeof o?o:Pa}function xb(o){for(var t=o.orientation,e=o.bboxes,r=o.maxHeight,n=o.maxWidth,i=o.itemPaddingY,a=void 0===i?0:i,s=o.itemPaddingX,l=void 0===s?0:s,u=o.forceResult,c=void 0!==u&&u,d="horizontal"===t,h={max:d?n:r,fn:d?function(m){return m.width}:function(m){return m.height},padding:d?l:a},p={max:d?r:n,fn:d?function(m){return m.height}:function(m){return m.width},padding:d?a:l},v=0,g=[];v<e.length;){var S=wb(e.slice(v),v,h,p,c);if(!S)return;v+=S.processedBBoxCount,g.push(S.pageIndices)}return function Ob(o,t,e,r,n){var i=0,a=0,s=o.map(function(l){"horizontal"===t&&(l=function Eb(o){var t,e,r=[];try{for(var n=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(o[0]),i=n.next();!i.done;i=n.next())r.push([])}catch(s){t={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return o.forEach(function(s,l){s.forEach(function(u,c){r[c][l]=u})}),r}(l));var u=0,c=l.map(function(p){var v=p.map(function(S){return u=Math.max(S,u),e[S]}),g=0,y=0;return v.forEach(function(S){g+=S.height+r,y=Math.max(y,S.width+n)}),{indices:p,bboxes:v,columnHeight:g,columnWidth:y}}),d=0,h=0;return c.forEach(function(p){d+=p.columnWidth,h=Math.max(h,p.columnHeight)}),i=Math.max(d,i),a=Math.max(h,a),{columns:c,startIndex:l[0][0],endIndex:u,pageWidth:d,pageHeight:h}});return{pages:s,maxPageWidth:i,maxPageHeight:a}}(g,t,e,a,l)}function wb(o,t,e,r,n){var a=function Tb(o,t){for(var e=o.length,r=0,n=0;n<e;n++)if((r+=t.fn(o[n])+t.padding)>t.max)return e/n<2?Math.ceil(e/2):n;return e}(o,e);if(a<1){if(!n)return;a=1}for(var s=a;s>=1;s--){var l=bb(o,t,s,e,r,n);if(null==l&&s<=1)return;if(null!=l){if("number"==typeof l){if(l<=1)return;s=l<s&&l>1?l:s;continue}return{processedBBoxCount:l.length*l[0].length,pageIndices:l}}}}function bb(o,t,e,r,n,i){for(var a,s=[],l=0,u=0,c=[],d=[],h=0;h<o.length;h++){var p=(h+e)%e;0===p&&(l+=u,u=0,c.length>0&&s.push(c),c=[]);var v=r.fn(o[h])+r.padding;if(d[p]=Math.max(null!==(a=d[p])&&void 0!==a?a:0,v),l+(u=Math.max(u,n.fn(o[h])+n.padding))>n.max&&(!i||s.length>0)){c=[];break}if(d.reduce(function(m,C){return m+C},0)>r.max&&!i)return d.length<e?d.length:void 0;c.push(h+t)}return c.length>0&&s.push(c),s.length>0?s:void 0}var Lt=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Pb=function(){function o(){this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}return Lt([A(It)],o.prototype,"color",void 0),Lt([A($n)],o.prototype,"fontStyle",void 0),Lt([A(Xn)],o.prototype,"fontWeight",void 0),Lt([A(X(0))],o.prototype,"fontSize",void 0),Lt([A(at)],o.prototype,"fontFamily",void 0),o}(),xc=function(){function o(){this.size=15,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=1,this.strokeOpacity=1}return Lt([A(X(0))],o.prototype,"size",void 0),Lt([A(De)],o.prototype,"fill",void 0),Lt([A(_e(0,1))],o.prototype,"fillOpacity",void 0),Lt([A(De)],o.prototype,"stroke",void 0),Lt([A(X(0))],o.prototype,"strokeWidth",void 0),Lt([A(X(0,1))],o.prototype,"strokeOpacity",void 0),o}(),Ab=function(){function o(){this.size=15,this._shape=Da,this.padding=8}return Object.defineProperty(o.prototype,"shape",{get:function(){return this._shape},set:function(t){var e;this._shape=t,null===(e=this.parent)||void 0===e||e.onMarkerShapeChange()},enumerable:!1,configurable:!0}),Lt([A(X(0))],o.prototype,"size",void 0),Lt([A(X(0))],o.prototype,"padding",void 0),o}(),Db=function(){function o(t,e,r,n){var i=this;this.chartUpdateCallback=t,this.pageUpdateCallback=e,this.interactionManager=r,this.cursorManager=n,this.id=Ur(this),this.group=new re({name:"pagination"}),this.labelNode=new Ee,this.marker=new Ab,this.activeStyle=new xc,this.inactiveStyle=new xc,this.highlightStyle=new xc,this.label=new Pb,this.totalPages=0,this.currentPage=0,this.translationX=0,this.translationY=0,this.nextButtonDisabled=!1,this.previousButtonDisabled=!1,this._visible=!0,this._enabled=!0,this._orientation="vertical",this._nextButton=new Da,this._previousButton=new Da;var a=this.labelNode;a.textBaseline="middle",a.fontSize=12,a.fontFamily="Verdana, sans-serif",a.fill="black",a.y=Ve.has.textMetrics?1:0,this.group.append([this.nextButton,this.previousButton,a]),this.interactionManager.addListener("click",function(s){return i.onPaginationClick(s)}),this.interactionManager.addListener("hover",function(s){return i.onPaginationMouseMove(s)}),this.marker.parent=this,this.update(),this.updateMarkers()}return Object.defineProperty(o.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible=t,this.updateGroupVisibility()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t,this.updateGroupVisibility()},enumerable:!1,configurable:!0}),o.prototype.updateGroupVisibility=function(){this.group.visible=this.enabled&&this.visible},Object.defineProperty(o.prototype,"orientation",{get:function(){return this._orientation},set:function(t){"horizontal"===(this._orientation=t,t)?(this.previousButton.rotation=-Math.PI/2,this.nextButton.rotation=Math.PI/2):(this.previousButton.rotation=0,this.nextButton.rotation=Math.PI)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"nextButton",{get:function(){return this._nextButton},set:function(t){this._nextButton!==t&&(this.group.removeChild(this._nextButton),this._nextButton=t,this.group.appendChild(t))},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"previousButton",{get:function(){return this._previousButton},set:function(t){this._previousButton!==t&&(this.group.removeChild(this._previousButton),this._previousButton=t,this.group.appendChild(t))},enumerable:!1,configurable:!0}),o.prototype.update=function(){this.updateLabel(),this.updatePositions(),this.enableOrDisableButtons()},o.prototype.updatePositions=function(){this.group.translationX=this.translationX,this.group.translationY=this.translationY,this.updateLabelPosition(),this.updateNextButtonPosition()},o.prototype.updateLabelPosition=function(){var t=this.marker,e=t.size,r=t.padding;this.nextButton.size=e,this.previousButton.size=e,this.labelNode.x=e/2+r},o.prototype.updateNextButtonPosition=function(){var t=this.labelNode.computeBBox();this.nextButton.translationX=t.x+t.width+this.marker.size/2+this.marker.padding},o.prototype.updateLabel=function(){var t=this,n=t.labelNode,i=t.label,a=i.color,s=i.fontStyle,l=i.fontWeight,u=i.fontSize,c=i.fontFamily;n.text=t.currentPage+1+" / "+t.totalPages,n.fill=a,n.fontStyle=s,n.fontWeight=l,n.fontSize=u,n.fontFamily=c},o.prototype.updateMarkers=function(){var t=this,r=t.previousButton,i=t.previousButtonDisabled,a=t.activeStyle,s=t.inactiveStyle,l=t.highlightStyle,u=t.highlightActive,c=function(d,h){return h?s:d===u?l:a};this.updateMarker(t.nextButton,c("next",t.nextButtonDisabled)),this.updateMarker(r,c("previous",i))},o.prototype.updateMarker=function(t,e){var r;t.size=this.marker.size,t.fill=e.fill,t.fillOpacity=null!==(r=e.fillOpacity)&&void 0!==r?r:1,t.stroke=e.stroke,t.strokeWidth=e.strokeWidth,t.strokeOpacity=e.strokeOpacity},o.prototype.enableOrDisableButtons=function(){var e=this.currentPage,r=this.totalPages,n=0===r,a=0===e;this.nextButtonDisabled=e===r-1||n,this.previousButtonDisabled=a||n},o.prototype.nextButtonContainsPoint=function(t,e){return!this.nextButtonDisabled&&this.nextButton.containsPoint(t,e)},o.prototype.previousButtonContainsPoint=function(t,e){return!this.previousButtonDisabled&&this.previousButton.containsPoint(t,e)},o.prototype.onPaginationClick=function(t){var e=t.offsetX,r=t.offsetY;this.nextButtonContainsPoint(e,r)?(this.incrementPage(),this.onPaginationChanged(),t.consume()):this.previousButtonContainsPoint(e,r)&&(this.decrementPage(),this.onPaginationChanged(),t.consume())},o.prototype.onPaginationMouseMove=function(t){var e=t.offsetX,r=t.offsetY;this.nextButtonContainsPoint(e,r)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="next"):this.previousButtonContainsPoint(e,r)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="previous"):(this.cursorManager.updateCursor(this.id),this.highlightActive=void 0),this.updateMarkers(),this.chartUpdateCallback(ge.SCENE_RENDER)},o.prototype.onPaginationChanged=function(){this.pageUpdateCallback(this.currentPage)},o.prototype.incrementPage=function(){this.currentPage=Math.min(this.currentPage+1,this.totalPages-1)},o.prototype.decrementPage=function(){this.currentPage=Math.max(this.currentPage-1,0)},o.prototype.onMarkerShapeChange=function(){var t=Ki(this.marker.shape||Da);this.previousButton=new t,this.nextButton=new t,this.updatePositions(),this.updateMarkers(),this.chartUpdateCallback(ge.SCENE_RENDER)},o.prototype.attachPagination=function(t){t.append(this.group)},o.prototype.computeBBox=function(){return this.group.computeBBox()},o.className="Pagination",o}(),Be=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},ei=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Yi=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},op=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Mb=["horizontal","vertical"],Rb=ne(function(o,t){return Ne(o,t,function(e){return Mb.includes(e)})},"expecting an orientation keyword such as 'horizontal' or 'vertical'"),Fb=function(){function o(){this.maxLength=void 0,this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.formatter=void 0}return Be([A(_e(0))],o.prototype,"maxLength",void 0),Be([A(It)],o.prototype,"color",void 0),Be([A($n)],o.prototype,"fontStyle",void 0),Be([A(Xn)],o.prototype,"fontWeight",void 0),Be([A(X(0))],o.prototype,"fontSize",void 0),Be([A(at)],o.prototype,"fontFamily",void 0),Be([A(ke)],o.prototype,"formatter",void 0),o}(),Ib=function(){function o(){this.size=15,this._shape=void 0,this.padding=8,this.strokeWidth=1}return Object.defineProperty(o.prototype,"shape",{get:function(){return this._shape},set:function(t){var e;this._shape=t,null===(e=this.parent)||void 0===e||e.onMarkerShapeChange()},enumerable:!1,configurable:!0}),Be([A(X(0))],o.prototype,"size",void 0),Be([A(X(0))],o.prototype,"padding",void 0),Be([A(X(0))],o.prototype,"strokeWidth",void 0),o}(),Lb=function(){function o(){this.marker=new Ib,this.label=new Fb,this.maxWidth=void 0,this.paddingX=16,this.paddingY=8,this.toggleSeriesVisible=!0}return Be([A(_e(0))],o.prototype,"maxWidth",void 0),Be([A(X(0))],o.prototype,"paddingX",void 0),Be([A(X(0))],o.prototype,"paddingY",void 0),Be([A(Te)],o.prototype,"toggleSeriesVisible",void 0),o}(),Nb=function(){function o(){this.legendItemClick=void 0,this.legendItemDoubleClick=void 0}return Be([A(ke)],o.prototype,"legendItemClick",void 0),o}(),vl={category:function(){function o(t){var e,r=this;this.ctx=t,this.id=Ur(this),this.group=new re({name:"legend",layer:!0,zIndex:We.LEGEND_ZINDEX}),this.itemSelection=Fe.select(this.group,np),this.oldSize=[0,0],this.pages=[],this.maxPageSize=[0,0],this.paginationTrackingIndex=0,this.item=new Lb,this.listeners=new Nb,this.truncatedItems=new Set,this._data=[],this._enabled=!0,this.position="bottom",this.maxWidth=void 0,this.maxHeight=void 0,this.reverseOrder=void 0,this.destroyFns=[],this.spacing=20,this.characterWidths=new Map,this.size=[0,0],this._visible=!0,this.item.marker.parent=this,this.pagination=new Db(function(a){return t.updateService.update(a)},function(a){return r.updatePageNumber(a)},t.interactionManager,t.cursorManager),this.pagination.attachPagination(this.group),this.item.marker.parent=this;var n=[t.interactionManager.addListener("click",function(a){return r.checkLegendClick(a)}),t.interactionManager.addListener("dblclick",function(a){return r.checkLegendDoubleClick(a)}),t.interactionManager.addListener("hover",function(a){return r.handleLegendMouseMove(a)})],i=[t.layoutService.addListener("start-layout",function(a){return r.positionLegend(a.shrinkRect)})];(e=this.destroyFns).push.apply(e,Yi(Yi(Yi([],ei(n.map(function(a){return function(){return t.interactionManager.removeListener(a)}}))),ei(i.map(function(a){return function(){return t.layoutService.removeListener(a)}}))),[function(){return r.detachLegend()}]))}return Object.defineProperty(o.prototype,"data",{get:function(){return this._data},set:function(t){this._data=t,this.updateGroupVisibility()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t,this.updateGroupVisibility()},enumerable:!1,configurable:!0}),o.prototype.getOrientation=function(){if(void 0!==this.orientation)return this.orientation;switch(this.position){case"right":case"left":return"vertical";case"bottom":case"top":return"horizontal"}},o.prototype.destroy=function(){this.destroyFns.forEach(function(t){return t()})},o.prototype.onMarkerShapeChange=function(){this.itemSelection.clear(),this.group.markDirty(this.group,$.MINOR)},o.prototype.getCharacterWidths=function(t){var e=this.characterWidths;if(e.has(t))return e.get(t);var r={"...":Ve.getTextSize("...",t).width};return e.set(t,r),r},Object.defineProperty(o.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible=t,this.updateGroupVisibility()},enumerable:!1,configurable:!0}),o.prototype.updateGroupVisibility=function(){this.group.visible=this.enabled&&this.visible&&this.data.length>0},o.prototype.attachLegend=function(t){t.append(this.group)},o.prototype.detachLegend=function(){var t;null===(t=this.group.parent)||void 0===t||t.removeChild(this.group)},o.prototype.getItemLabel=function(t){var r=this.item.label.formatter;return r?this.ctx.callbackCache.call(r,{itemId:t.itemId,value:t.label.text,seriesId:t.seriesId}):t.label.text},o.prototype.performLayout=function(t,e){var r=this,n=this.item,i=n.paddingX,a=n.paddingY,s=n.label,l=n.maxWidth,u=n.marker,c=u.size,d=u.padding,h=u.shape,p=n.label,v=p.maxLength,g=void 0===v?1/0:v,y=p.fontStyle,S=p.fontWeight,m=p.fontSize,C=p.fontFamily,_=Yi([],ei(this.data));this.reverseOrder&&_.reverse(),this.itemSelection.update(_);var w=[],x=Yn(s),O=l??.8*t,T=c+d+i;if(this.itemSelection.each(function(N,k){var U,G=Ki(h??k.marker.shape);N.marker&&N.marker instanceof G||(N.marker=new G),N.markerSize=c,N.spacing=d,N.fontStyle=y,N.fontWeight=S,N.fontSize=m,N.fontFamily=C;var B=null!==(U=k.itemId)&&void 0!==U?U:k.id,K=(r.getItemLabel(k)??"<unknown>").replace(/\r?\n/g," ");N.text=r.truncate(K,g,O,T,x,B),w.push(N.computeBBox())}),t=Math.max(1,t),e=Math.max(1,e),!isFinite(t))return!1;var E=this.size,P=this.oldSize;E[0]=t,E[1]=e,(E[0]!==P[0]||E[1]!==P[1])&&(P[0]=E[0],P[1]=E[1]);var D=this.updatePagination(w,t,e),M=D.maxPageHeight,F=D.maxPageWidth;this.pages=D.pages,this.maxPageSize=[F-i,M-a];var I=this.pagination.currentPage;this.pages.length<1||!this.pages[I]?this.visible=!1:(this.visible=!0,this.updatePositions(I),this.update())},o.prototype.truncate=function(t,e,r,n,i,a){var s,l,c=t.split(""),d=!1;if(t.length>e&&(t=""+t.substring(0,e),d=!0),Math.floor(n+Ve.getTextSize(t,i).width)>r){var p="",v=this.getCharacterWidths(i),g=n+v["..."];try{for(var y=op(c),S=y.next();!S.done;S=y.next()){var m=S.value;if(v[m]||(v[m]=Ve.getTextSize(m,i).width),(g+=v[m])>r)break;p+=m}}catch(C){s={error:C}}finally{try{S&&!S.done&&(l=y.return)&&l.call(y)}finally{if(s)throw s.error}}t=p,d=!0}return d?(t+="...",this.truncatedItems.add(a)):this.truncatedItems.delete(a),t},o.prototype.updatePagination=function(t,e,r){var n=this.getOrientation(),i=Math.min(this.paginationTrackingIndex,t.length);this.pagination.orientation=n,this.pagination.translationX=0,this.pagination.translationY=0;var a=this.calculatePagination(t,e,r),s=a.pages,l=a.maxPageHeight,u=a.maxPageWidth,c=a.paginationBBox,d=a.paginationVertical,h=s.findIndex(function(w){return w.endIndex>=i});this.pagination.currentPage=Math.min(Math.max(h,0),s.length-1);var p=this.item,m=l-p.paddingY,C=0,_=-c.y-this.item.marker.size/2;return d?_+=m+8:(C+=u-p.paddingX-c.x+8,_+=(m-c.height)/2),this.pagination.translationX=C,this.pagination.translationY=_,this.pagination.update(),this.pagination.updateMarkers(),{maxPageHeight:l,maxPageWidth:u,pages:s}},o.prototype.calculatePagination=function(t,e,r){var n,i,a,O,s=this.item,l=s.paddingX,u=s.paddingY,c=this.getOrientation(),d=["left","right"].includes(this.position),h=this.pagination.computeBBox(),p=new me(0,0,0,0),v=[],g=0,y=0,S=0,C=void 0!==this.maxWidth||void 0!==this.maxHeight;do{if(S++>10){q.warn("unable to find stable legend layout.");break}h=p;var x=xb({orientation:c,bboxes:t,maxHeight:r-(d?h.height:0),maxWidth:e-(d?0:h.width),itemPaddingY:u,itemPaddingX:l,forceResult:C});v=null!==(n=x?.pages)&&void 0!==n?n:[],g=null!==(i=x?.maxPageWidth)&&void 0!==i?i:0,y=null!==(a=x?.maxPageHeight)&&void 0!==a?a:0;var b=v.length;if(this.pagination.visible=b>1,this.pagination.totalPages=b,this.pagination.update(),p=this.pagination.computeBBox(),!this.pagination.visible)break}while((O=p).width!==h.width||O.height!==h.height);return{maxPageWidth:g,maxPageHeight:y,pages:v,paginationBBox:h,paginationVertical:d}},o.prototype.updatePositions=function(t){void 0===t&&(t=0);var e=this,r=e.item.paddingY,n=e.itemSelection,i=e.pages;if(!(i.length<1)&&i[t]){var a=i[t],s=a.columns,l=a.startIndex,u=a.endIndex,c=0,d=0,h=s.length,p=s[0].indices.length,v="horizontal"===this.getOrientation(),g=s[0].bboxes[0].height+r,y=[];n.each(function(S,m,C){var _,w;if(C<l||C>u)S.visible=!1;else{var x=C-l,b=0,O=0;v?(b=x%h,O=Math.floor(x/h)):(b=Math.floor(x/p),O=x%p),S.visible=!0;var T=s[b];T&&(d=g*O,c=null!==(_=y[O])&&void 0!==_?_:0,y[O]=(null!==(w=y[O])&&void 0!==w?w:0)+T.columnWidth,S.translationX=Math.floor(c),S.translationY=Math.floor(d))}})}},o.prototype.updatePageNumber=function(t){var e=this.pages,r=e[t],n=r.startIndex,i=r.endIndex;this.paginationTrackingIndex=0===n?0:t===e.length-1?i:Math.floor((n+i)/2),this.pagination.update(),this.pagination.updateMarkers(),this.updatePositions(t),this.ctx.updateService.update(ge.SCENE_RENDER)},o.prototype.update=function(){var t=this.item,e=t.marker.strokeWidth,r=t.label.color;this.itemSelection.each(function(n,i){var a=i.marker;n.markerFill=a.fill,n.markerStroke=a.stroke,n.markerStrokeWidth=e,n.markerFillOpacity=a.fillOpacity,n.markerStrokeOpacity=a.strokeOpacity,n.opacity=i.enabled?1:.5,n.color=r})},o.prototype.getDatumForPoint=function(t,e){var r,n,i=[],a={dist:1/0,datum:void 0};try{for(var s=op(this.group.children),l=s.next();!l.done;l=s.next()){var u=l.value;if(u.visible&&u instanceof np){var c=u.computeBBox();if(c.grow(this.item.paddingX/2,"horizontal"),c.grow(this.item.paddingY/2,"vertical"),c.containsPoint(t,e))return u.datum;var d=t-c.x-this.item.paddingX/2,h=e-c.y-this.item.paddingY/2,p=Math.pow(d,2)+Math.pow(h,2);d>=0&&h>=0&&p<a.dist&&(a.dist=p,a.datum=u.datum),i.push(c)}}}catch(y){r={error:y}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}if(me.merge(i).containsPoint(t,e))return a.datum},o.prototype.computeBBox=function(){return this.group.computeBBox()},o.prototype.computePagedBBox=function(){var t=this.group.computeBBox();if(this.pages.length<=1)return t;var e=ei(this.maxPageSize,2),r=e[0];return t.height=Math.max(e[1],t.height),t.width=Math.max(r,t.width),t},o.prototype.checkLegendClick=function(t){var e=this,r=e.listeners.legendItemClick,n=e.ctx,i=n.dataService,a=n.highlightManager,s=e.item.toggleSeriesVisible,l=t.offsetX,u=t.offsetY,c=this.computeBBox(),d=this.group.visible&&c.containsPoint(l,u),h=this.getDatumForPoint(l,u);if(d&&h){var p=h.id,v=h.itemId,g=h.enabled,S=i.getSeries().find(function(C){return C.id===p});if(S){t.consume();var m=g;s&&this.ctx.chartEventManager.legendItemClick(S,v,m=!g,h.legendItemName),m?a.updateHighlight(this.id,{series:S,itemId:v,datum:void 0}):a.updateHighlight(this.id),this.ctx.updateService.update(ge.PROCESS_DATA,{forceNodeDataRefresh:!0}),r?.({type:"click",enabled:m,itemId:v,seriesId:S.id})}}},o.prototype.checkLegendDoubleClick=function(t){var e,r=this,n=r.listeners.legendItemDoubleClick,i=r.ctx.dataService,a=r.item.toggleSeriesVisible,s=t.offsetX,l=t.offsetY;if("integrated"!==this.ctx.mode){var u=this.computeBBox(),c=this.group.visible&&u.containsPoint(s,l),d=this.getDatumForPoint(s,l);if(c&&d){var h=d.id,p=d.itemId,v=d.seriesId,g=i.getSeries(),y=g.find(function(_){return _.id===h});if(y){if(t.consume(),a){var S=g.reduce(function(_,w){return Yi(Yi([],ei(_)),ei(w.getLegendData().filter(function(x){return"category"===x.legendType})))},[]),m={};S.forEach(function(_){var w,x;null!==(w=m[x=_.seriesId])&&void 0!==w||(m[x]=0),_.enabled&&m[_.seriesId]++});var C=S.find(function(_){return _.itemId===p&&_.seriesId===v});this.ctx.chartEventManager.legendItemDoubleClick(y,p,null!==(e=C?.enabled)&&void 0!==e&&e,m,C?.legendItemName)}this.ctx.updateService.update(ge.PROCESS_DATA,{forceNodeDataRefresh:!0}),n?.({type:"dblclick",enabled:!0,itemId:p,seriesId:y.id})}}}},o.prototype.handleLegendMouseMove=function(t){var e,r=this,i=r.item.toggleSeriesVisible,a=r.listeners;if(r.enabled){var s=this.computeBBox(),l=t.pageX,u=t.pageY,c=t.offsetX,d=t.offsetY,h=this.group.visible&&s.containsPoint(c,d);if(!h)return this.ctx.cursorManager.updateCursor(this.id),this.ctx.highlightManager.updateHighlight(this.id),void this.ctx.tooltipManager.removeTooltip(this.id);t.consume();var p=this.getDatumForPoint(c,d);if(!h||void 0===p)return this.ctx.cursorManager.updateCursor(this.id),void this.ctx.highlightManager.updateHighlight(this.id);var g=p?this.ctx.dataService.getSeries().find(function(S){return S.id===p?.id}):void 0;if(p&&this.truncatedItems.has(null!==(e=p.itemId)&&void 0!==e?e:p.id)){var y=this.getItemLabel(p);this.ctx.tooltipManager.updateTooltip(this.id,{pageX:l,pageY:u,offsetX:c,offsetY:d,event:t,showArrow:!1},st({content:y}))}else this.ctx.tooltipManager.removeTooltip(this.id);(i||null!=a.legendItemClick||null!=a.legendItemDoubleClick)&&this.ctx.cursorManager.updateCursor(this.id,"pointer"),p?.enabled&&g?this.ctx.highlightManager.updateHighlight(this.id,{series:g,itemId:p?.itemId,datum:void 0}):this.ctx.highlightManager.updateHighlight(this.id)}},o.prototype.positionLegend=function(t){var e=this,r=t.clone();if(!this.enabled||!this.data.length)return{shrinkRect:r};var n=ei(this.calculateLegendDimensions(t),2),i=n[0],a=n[1];this.group.translationX=0,this.group.translationY=0,this.performLayout(i,a);var s=this.computePagedBBox(),l=function(){switch(e.position){case"top":case"left":return 0;case"bottom":return t.height-s.height;default:return t.width-s.width}};if(this.visible){var u=void 0,c=void 0;switch(this.position){case"top":case"bottom":u=(t.width-s.width)/2,c=l(),r.shrink(s.height,this.position);break;default:u=l(),c=(t.height-s.height)/2,r.shrink(s.width,this.position)}this.group.translationX=Math.floor(-s.x+t.x+u),this.group.translationY=Math.floor(-s.y+t.y+c)}if(this.visible&&this.enabled&&this.data.length){r.shrink(this.spacing,this.position);var h=s.clone();h.x+=this.group.translationX,h.y+=this.group.translationY,this.ctx.tooltipManager.updateExclusiveRect(this.id,h)}else this.ctx.tooltipManager.updateExclusiveRect(this.id);return{shrinkRect:r}},o.prototype.calculateLegendDimensions=function(t){var e=t.width,r=t.height,n=e/r,l=0,u=0;switch(this.position){case"top":case"bottom":var c=n<1?Math.min(.5,1/n*.2):.2;l=this.maxWidth?Math.min(this.maxWidth,e):e,u=this.maxHeight?Math.min(this.maxHeight,r):Math.round(r*c);break;default:var d=n>1?Math.min(.5,.25*n):.25;l=this.maxWidth?Math.min(this.maxWidth,e):Math.round(e*d),u=this.maxHeight?Math.min(this.maxHeight,r):r}return[l,u]},o.className="Legend",Be([A(Te)],o.prototype,"_enabled",void 0),Be([A(wh)],o.prototype,"position",void 0),Be([A(_e(0))],o.prototype,"maxWidth",void 0),Be([A(_e(0))],o.prototype,"maxHeight",void 0),Be([A(wr)],o.prototype,"reverseOrder",void 0),Be([A(Rb)],o.prototype,"orientation",void 0),Be([A(X(0))],o.prototype,"spacing",void 0),o}()};function Gb(o,t){if(vl[o])throw new Error("AG Charts - already registered legend type: "+o);vl[o]=t}var zb=function(){function o(){this.cache=new Map}return o.prototype.call=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n,i=this.cache.get(t),a=function(){try{var s=t.apply(void 0,function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o}([],function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i}(e)));return i&&null!=n&&i.set(n,s),s}catch(l){return void q.warnOnce("User callback errored, ignoring",l)}};try{n=JSON.stringify(e)}catch{return a()}return null==i&&this.cache.set(t,i=new Map),i.has(n)?i.get(n):a()},o.prototype.invalidateCache=function(){this.cache=new Map},o}(),$i=function(){return $i=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},$i.apply(this,arguments)},ap=function(o,t,e,r){return new(e||(e=Promise))(function(i,a){function s(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):function n(i){return i instanceof e?i:new e(function(a){a(i)})}(c.value).then(s,l)}u((r=r.apply(o,t||[])).next())})},sp=function(o,t){var r,n,i,a,e={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(!(i=(i=e.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){e=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){e.label=u[1];break}if(6===u[0]&&e.label<i[1]){e.label=i[1],i=u;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(u);break}i[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(o,e)}catch(c){u=[6,c],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},wc=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},lp=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},up=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},Hb=function(){function o(){this.requested=[],this.status="setup"}return o.prototype.request=function(t,e,r){return ap(this,void 0,void 0,function(){var n=this;return sp(this,function(i){if("setup"!==this.status)throw new Error("AG Charts - data request after data setup phase.");return[2,new Promise(function(a,s){n.requested.push({id:t,opts:r,data:e,resultCb:a,reject:s})})]})})},o.prototype.execute=function(){return ap(this,void 0,void 0,function(){var t,e,r,n,i,a,h,p;return sp(this,function(v){if("setup"!==this.status)throw new Error("AG Charts - data request after data setup phase.");this.status="executed",o.DEBUG()&&q.debug("DataController.execute() - requested",this.requested),t=this.mergeRequested(),o.DEBUG()&&q.debug("DataController.execute() - merged",t),e=function(g,y,S,m,C){try{var _=new Lx(g),w=_.processData(y);w&&0===w.partialValidDataCount?S.forEach(function(x){return x({dataModel:_,processedData:w})}):w?r.splitResult(_,w,C,S):m.forEach(function(x){return x(new Error("AG Charts - no processed data generated"))})}catch(x){m.forEach(function(b){return b(x)})}},r=this;try{for(n=wc(t),i=n.next();!i.done;i=n.next())e((a=i.value).opts,a.data,a.resultCbs,a.rejects,a.ids)}catch(g){h={error:g}}finally{try{i&&!i.done&&(p=n.return)&&p.call(n)}finally{if(h)throw h.error}}return[2]})})},o.prototype.mergeRequested=function(){var t,e,r=[],n=function(p){return p.filter(function(v){return"key"===v.type}).map(function(v){return v.property}).join(";")},i=function(p){var v=p.opts,g=p.data;return function(y){return y[0].data===g&&y[0].opts.groupByKeys===v.groupByKeys&&y[0].opts.dataVisible===v.dataVisible&&y[0].opts.groupByFn===v.groupByFn&&n(y[0].opts.props)===n(v.props)}},a=function(p){return function(v){var g;if(v.type!==p.type||v.id!==p.id)return!1;var y=null!==(g=Jn(v,p))&&void 0!==g?g:{};return delete y.scopes,0===Object.keys(y).length}},s=function(p){return $i($i({},p[0]),{props:p.reduce(function(v,g){var y,S,m,C,_,w;try{for(var x=wc(g.props),b=x.next();!b.done;b=x.next()){var O=b.value,T=v.find(a(O));T?(null!==(C=T.scopes)&&void 0!==C||(T.scopes=[]),(m=T.scopes).push.apply(m,up(up([],lp(null!==(_=O.scopes)&&void 0!==_?_:[])),lp(null!==(w=g.scopes)&&void 0!==w?w:[])))):v.push(O)}}catch(E){y={error:E}}finally{try{b&&!b.done&&(S=x.return)&&S.call(x)}finally{if(y)throw y.error}}return v},[])})};try{for(var u=wc(this.requested),c=u.next();!c.done;c=u.next()){var d=c.value,h=r.find(i(d));h?h.push(d):r.push([d])}}catch(p){t={error:p}}finally{try{c&&!c.done&&(e=u.return)&&e.call(u)}finally{if(t)throw t.error}}return r.map(function(p){return{ids:p.map(function(v){return v.id}),resultCbs:p.map(function(v){return v.resultCb}),rejects:p.map(function(v){return v.reject}),data:p[0].data,opts:s(p.map(function(v){return v.opts}))}})},o.prototype.splitResult=function(t,e,r,n){for(var i=function(s){var l=r[s];(0,n[s])({dataModel:t,processedData:$i($i({},e),{data:e.data.filter(function(c){var d=c.validScopes;return null==d||d.some(function(h){return h===l})})})})},a=0;a<r.length;a++)i(a)},o.DEBUG=function(){var t;return null!==(t=[!0,"data-model"].includes(or("agChartsDebug")))&&void 0!==t&&t},o}(),bc=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Wb=function(){function o(){this.groups={}}return o.prototype.registerSeries=function(t){var e,r,n=t.id,i=t.seriesGrouping,a=t.visible,s=t.type;i&&(null!==(e=(r=this.groups)[s])&&void 0!==e||(r[s]={}),this.groups[s][n]={grouping:i,visible:a})},o.prototype.deregisterSeries=function(t){var r=t.type;this.groups[r]&&delete this.groups[r][t.id],this.groups[r]&&0===Object.keys(this.groups[r]).length&&delete this.groups[r]},o.prototype.getVisiblePeerGroupIndex=function(t){var e,n=t.seriesGrouping;if(!n)return{visibleGroupCount:1,index:0};var i=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o}([],bc(Object.entries(null!==(e=this.groups[t.type])&&void 0!==e?e:{}).filter(function(a){return bc(a,2)[1].visible}).reduce(function(a,s){var u=bc(s,2)[1];return u.visible&&a.add(u.grouping.groupIndex),a},new Set).values()));return i.sort(function(a,s){return a-s}),{visibleGroupCount:i.length,index:i.indexOf(n.groupIndex)}},o}(),cp=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Kb=function(){function o(t){this.groups={},this.series={},this.rootGroup=t}return o.prototype.requestGroup=function(t){var e,r,n,i,a=t.id,s=t.type,l=t.rootGroup,c=(t.seriesGrouping??{}).groupIndex,d=void 0===c?a:c;if(null!=this.series[a])throw new Error("AG Charts - series already has an allocated layer: "+this.series[a]);null!==(e=(n=this.groups)[s])&&void 0!==e||(n[s]={});var h=this.groups[s][d];return h||(h=null!==(r=(i=this.groups[s])[d])&&void 0!==r?r:i[d]={seriesIds:[],group:this.rootGroup.appendChild(new re({name:s+"-content",layer:!0,zIndex:We.SERIES_LAYER_ZINDEX,zIndexSubOrder:t.getGroupZIndexSubOrder("data")}))}),this.series[a]={layerState:h,seriesConfig:t},h.seriesIds.push(a),h.group.appendChild(l),h.group},o.prototype.changeGroup=function(t){var e,r,n=t.id,a=t.type,s=t.rootGroup,l=t.oldGrouping,u=(t.seriesGrouping??{}).groupIndex;null!==(r=null===(e=this.groups[a])||void 0===e?void 0:e[void 0===u?n:u])&&void 0!==r&&r.seriesIds.includes(n)||(null!=this.series[n]&&this.releaseGroup({id:n,seriesGrouping:l,type:a,rootGroup:s}),this.requestGroup(t))},o.prototype.releaseGroup=function(t){var e,r,n,i,a,s=t.id,u=t.rootGroup,c=t.type,d=(t.seriesGrouping??{}).groupIndex,h=void 0===d?s:d;if(null==this.series[s])throw new Error("AG Charts - series doesn't have an allocated layer: "+s);var p=null!==(r=null===(e=this.groups[c])||void 0===e?void 0:e[h])&&void 0!==r?r:null===(n=this.series[s])||void 0===n?void 0:n.layerState;if(p&&(p.seriesIds=p.seriesIds.filter(function(g){return g!==s}),p.group.removeChild(u)),0===p?.seriesIds.length)this.rootGroup.removeChild(p.group),delete this.groups[c][h],delete this.groups[c][s];else if(p?.seriesIds.length>0){var v=null===(a=this.series[null===(i=p?.seriesIds)||void 0===i?void 0:i[0]])||void 0===a?void 0:a.seriesConfig;p.group.zIndexSubOrder=v?.getGroupZIndexSubOrder("data")}delete this.series[s]},o.prototype.destroy=function(){var t,e,r,n;try{for(var i=cp(Object.values(this.groups)),a=i.next();!a.done;a=i.next()){var s=a.value;try{for(var l=(r=void 0,cp(Object.values(s))),u=l.next();!u.done;u=l.next())this.rootGroup.removeChild(u.value.group)}catch(d){r={error:d}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}}}catch(d){t={error:d}}finally{try{a&&!a.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}this.groups={},this.series={}},o}(),Yb=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),_n=function(){return _n=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},_n.apply(this,arguments)},Or=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},xn=function(o,t,e,r){return new(e||(e=Promise))(function(i,a){function s(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):function n(i){return i instanceof e?i:new e(function(a){a(i)})}(c.value).then(s,l)}u((r=r.apply(o,t||[])).next())})},wn=function(o,t){var r,n,i,a,e={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(!(i=(i=e.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){e=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){e.label=u[1];break}if(6===u[0]&&e.label<i[1]){e.label=i[1],i=u;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(u);break}i[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(o,e)}catch(c){u=[6,c],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},Xi=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Qi=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},gl=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},Oc=function(o){function t(e,r,n){void 0===e&&(e=window.document);var i,a=o.call(this)||this;a.id=Ur(a),a.processedOptions={},a.userOptions={},a.queuedUserOptions=[],a.seriesRoot=new re({name:a.id+"-Series-root"}),a.extraDebugStats={},a.container=void 0,a.data=[],a.padding=new cl(20),a.seriesAreaPadding=new cl(0),a.title=void 0,a.subtitle=void 0,a.footnote=void 0,a.mode="standalone",a._destroyed=!1,a.modules={},a.legendModules={},a._pendingFactoryUpdates=[],a._performUpdateNoRenderCount=0,a._performUpdateType=ge.NONE,a.seriesToUpdate=new Set,a.performUpdateTrigger=function Cw(o){return kh(function(t,e){return void 0===e&&(e=0),setTimeout(t,e)},o)}(function(d){var h=d.count;return xn(a,void 0,void 0,function(){var p;return wn(this,function(v){switch(v.label){case 0:if(this._destroyed)return[2];v.label=1;case 1:return v.trys.push([1,3,,4]),[4,this.performUpdate(h)];case 2:return v.sent(),[3,4];case 3:return p=v.sent(),this._lastPerformUpdateError=p,q.error("update error",p),[3,4];case 4:return[2]}})})}),a._axes=[],a._series=[],a.applyLegendOptions=void 0,a.lastInteractionEvent=void 0,a.pointerScheduler=function Sw(o){return kh(function(t,e){return requestAnimationFrame(t)},o)}(function(){a.lastInteractionEvent&&a.handlePointer(a.lastInteractionEvent),a.lastInteractionEvent=void 0}),a.onSeriesNodeClick=function(d){var h=_n(_n({},d),{type:"seriesNodeClick"});Object.defineProperty(h,"series",{enumerable:!1,get:function(){return d.series}}),a.fireEvent(h)},a.onSeriesNodeDoubleClick=function(d){var h=_n(_n({},d),{type:"seriesNodeDoubleClick"});a.fireEvent(h)};var s=n?.scene,l=null!==(i=n?.element)&&void 0!==i?i:e.createElement("div"),u=n?.container,c=new re({name:"root"});return c.visible=!1,c.append(a.seriesRoot),a.axisGroup=new re({name:"Axes",layer:!0,zIndex:We.AXIS_ZINDEX}),c.appendChild(a.axisGroup),a.element=l,l.classList.add("ag-chart-wrapper"),l.style.position="relative",a.scene=s??new ec({document:e,overrideDevicePixelRatio:r}),a.scene.debug.consoleLog=!1,a.scene.root=c,a.scene.container=l,a.autoSize=!0,a.chartEventManager=new Fw,a.cursorManager=new Mw(l),a.highlightManager=new kw,a.interactionManager=new zw(l),a.zoomManager=new Kw,a.dataService=new Zw(function(){return a.series}),a.layoutService=new Qw,a.updateService=new qw(function(d,h){return void 0===d&&(d=ge.FULL),a.update(d,{forceNodeDataRefresh:h.forceNodeDataRefresh})}),a.seriesStateManager=new Wb,a.seriesLayerManager=new Kb(a.seriesRoot),a.callbackCache=new zb,a.animationManager=new Aw(a.interactionManager),a.animationManager.skipAnimations=!0,a.animationManager.play(),a.tooltip=new Hx(a.scene.canvas.element,e,e.body),a.tooltipManager=new Uw(a.tooltip,a.interactionManager),a.overlays=new xw(a.element),a.highlight=new eb,a.container=u,a.debug=!1,Lh.observe(a.element,function(d){var h,p=d.width,v=d.height;if(a.autoSize&&(0!==p||0!==v)){var g=Xi(null!==(h=a._lastAutoSize)&&void 0!==h?h:[],2),y=g[0],m=g[1];(void 0===y?0:y)===p&&(void 0===m?0:m)===v||(a._lastAutoSize=[p,v],a.resize())}}),a.layoutService.addListener("start-layout",function(d){return a.positionPadding(d.shrinkRect)}),a.layoutService.addListener("start-layout",function(d){return a.positionCaptions(d.shrinkRect)}),a.interactionManager.addListener("click",function(d){return a.onClick(d)}),a.interactionManager.addListener("dblclick",function(d){return a.onDoubleClick(d)}),a.interactionManager.addListener("hover",function(d){return a.onMouseMove(d)}),a.interactionManager.addListener("leave",function(d){return a.onLeave(d)}),a.interactionManager.addListener("page-left",function(){return a.destroy()}),a.interactionManager.addListener("wheel",function(){return a.disablePointer()}),a.animationManager.addListener("animation-frame",function(d){a.update(ge.SCENE_RENDER)}),a.highlightManager.addListener("highlight-change",function(d){return a.changeHighlightDatum(d)}),a.zoomManager.addListener("zoom-change",function(d){return a.update(ge.PROCESS_DATA,{forceNodeDataRefresh:!0})}),a.attachLegend("category"),a}return Yb(t,o),t.prototype.getOptions=function(){var e,r=this.queuedUserOptions;return He([null!==(e=r[r.length-1])&&void 0!==e?e:this.userOptions])},t.prototype.autoSizeChanged=function(e){var r=this.element.style;if(e){if(r.display="block",r.width="100%",r.height="100%",!this._lastAutoSize)return;this.resize()}else r.display="inline-block",r.width="auto",r.height="auto"},t.prototype.download=function(e,r){this.scene.download(e,r)},Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),t.prototype.addModule=function(e){if(null!=this.modules[e.optionsKey])throw new Error("AG Charts - module already initialised: "+e.optionsKey);var r=new e.instanceConstructor(this.getModuleContext());this.modules[e.optionsKey]={instance:r},this[e.optionsKey]=r},t.prototype.removeModule=function(e){var r,n;null===(n=null===(r=this.modules[e.optionsKey])||void 0===r?void 0:r.instance)||void 0===n||n.destroy(),delete this.modules[e.optionsKey],delete this[e.optionsKey]},t.prototype.isModuleEnabled=function(e){return null!=this.modules[e.optionsKey]},t.prototype.getModuleContext=function(){var e=this;return{scene:e.scene,animationManager:e.animationManager,chartEventManager:e.chartEventManager,cursorManager:e.cursorManager,highlightManager:e.highlightManager,interactionManager:e.interactionManager,tooltipManager:e.tooltipManager,zoomManager:e.zoomManager,dataService:e.dataService,layoutService:e.layoutService,updateService:e.updateService,mode:e.mode,seriesStateManager:e.seriesStateManager,seriesLayerManager:e.seriesLayerManager,callbackCache:e.callbackCache}},t.prototype.destroy=function(e){var r,n,i;if(!this._destroyed){var a=e?.keepTransferableResources,s=void 0;this._performUpdateType=ge.NONE,this._pendingFactoryUpdates.splice(0),this.tooltipManager.destroy(),this.tooltip.destroy(),null===(i=this.legend)||void 0===i||i.destroy(),this.overlays.noData.hide(),Lh.unobserve(this.element);try{for(var l=Qi(Object.entries(this.modules)),u=l.next();!u.done;u=l.next()){var c=Xi(u.value,2),d=c[0];c[1].instance.destroy(),delete this.modules[d],delete this[d]}}catch(p){r={error:p}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return this.interactionManager.destroy(),this.animationManager.stop(),a?(this.scene.strip(),s={container:this.container,scene:this.scene,element:this.element}):(this.scene.destroy(),this.container=void 0),this.removeAllSeries(),this.seriesLayerManager.destroy(),this.axes.forEach(function(p){return p.destroy()}),this.axes=[],this.callbackCache.invalidateCache(),this._destroyed=!0,s}},t.prototype.log=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.debug&&q.debug.apply(q,gl([],Xi(e)))},t.prototype.disablePointer=function(e){void 0===e&&(e=!1),e||this.tooltipManager.removeTooltip(this.id),this.highlightManager.updateHighlight(this.id),this.lastInteractionEvent&&(this.lastInteractionEvent=void 0)},t.prototype.requestFactoryUpdate=function(e){var r=this._pendingFactoryUpdates,n=r.length;0===n?(r.push(e),this._processCallbacks().catch(function(i){return q.errorOnce(i)})):r.splice(1,n-1,e)},t.prototype._processCallbacks=function(){return xn(this,void 0,void 0,function(){var e,r;return wn(this,function(n){switch(n.label){case 0:e=this._pendingFactoryUpdates,n.label=1;case 1:return e.length>0?this.updatePending?[4,Gh(1)]:[3,3]:[3,7];case 2:return n.sent(),[3,1];case 3:return n.trys.push([3,5,,6]),[4,e[0]()];case 4:return n.sent(),this.callbackCache.invalidateCache(),[3,6];case 5:return r=n.sent(),q.error("update error",r),[3,6];case 6:return e.shift(),[3,1];case 7:return[2]}})})},Object.defineProperty(t.prototype,"performUpdateType",{get:function(){return this._performUpdateType},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"updatePending",{get:function(){return this._performUpdateType!==ge.NONE||null!=this.lastInteractionEvent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastPerformUpdateError",{get:function(){return this._lastPerformUpdateError},enumerable:!1,configurable:!0}),t.prototype.awaitUpdateCompletion=function(){return xn(this,void 0,void 0,function(){return wn(this,function(e){switch(e.label){case 0:return[4,this.performUpdateTrigger.await()];case 1:return e.sent(),[2]}})})},t.prototype.update=function(e,r){var n,i;void 0===e&&(e=ge.FULL);var a=r??{},s=a.forceNodeDataRefresh,u=a.seriesToUpdate,c=void 0===u?this.series:u;void 0!==s&&s&&this.series.forEach(function(v){return v.markNodeDataDirty()});try{for(var d=Qi(c),h=d.next();!h.done;h=d.next())this.seriesToUpdate.add(h.value)}catch(v){n={error:v}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}e<this._performUpdateType&&(this._performUpdateType=e,this.performUpdateTrigger.schedule())},t.prototype.performUpdate=function(e){var r;return xn(this,void 0,void 0,function(){var n,i,a,s,u,c,d,h;return wn(this,function(p){switch(p.label){case 0:switch(a=(n=this).extraDebugStats,this.log("Chart.performUpdate() - start",ge[i=n._performUpdateType]),s=[performance.now()],i){case ge.FULL:case ge.PROCESS_DATA:return[3,1];case ge.PERFORM_LAYOUT:return[3,3];case ge.SERIES_UPDATE:return[3,5];case ge.TOOLTIP_RECALCULATION:return[3,7];case ge.SCENE_RENDER:return[3,8];case ge.NONE:return[3,10]}return[3,11];case 1:return[4,this.processData()];case 2:p.sent(),this.disablePointer(!0),s.push(performance.now()),p.label=3;case 3:return this.checkFirstAutoSize()?[4,this.performLayout()]:[3,11];case 4:p.sent(),this.handleOverlays(),this.log("Chart.performUpdate() - seriesRect",this.seriesRect),s.push(performance.now()),p.label=5;case 5:return u=this.seriesRect,c=gl([],Xi(this.seriesToUpdate)).map(function(v){return v.update({seriesRect:u})}),this.seriesToUpdate.clear(),[4,Promise.all(c)];case 6:p.sent(),s.push(performance.now()),p.label=7;case 7:d=this.tooltipManager.getTooltipMeta(this.id),i<ge.SERIES_UPDATE&&"hover"===(null===(r=d?.event)||void 0===r?void 0:r.type)&&this.handlePointer(d.event),p.label=8;case 8:return[4,this.scene.render({debugSplitTimes:s,extraDebugStats:a})];case 9:p.sent(),this.extraDebugStats={},p.label=10;case 10:this._performUpdateType=ge.NONE,p.label=11;case 11:return h=performance.now(),this.log("Chart.performUpdate() - end",{chart:this,durationMs:Math.round(100*(h-s[0]))/100,count:e,performUpdateType:ge[i]}),[2]}})})},t.prototype.checkFirstAutoSize=function(){if(this.autoSize&&!this._lastAutoSize){var e=this._performUpdateNoRenderCount++,r=10*(2^e);if(e<5)return this._performUpdateType=ge.PERFORM_LAYOUT,this.performUpdateTrigger.schedule(r),this.log("Chart.checkFirstAutoSize() - backing off until first size update",r),!1;this.log("Chart.checkFirstAutoSize() - timeout for first size update.")}return this._performUpdateNoRenderCount=0,!0},Object.defineProperty(t.prototype,"axes",{get:function(){return this._axes},set:function(e){var r=this,n=new Set;this._axes.forEach(function(i){i.detachAxis(r.axisGroup),n.add(i)}),this._axes=e.filter(function(i){return!i.linkedTo}).concat(e.filter(function(i){return i.linkedTo})),this._axes.forEach(function(i){i.attachAxis(r.axisGroup),n.delete(i)}),this.zoomManager.updateAxes(this._axes),n.forEach(function(i){return i.destroy()})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"series",{get:function(){return this._series},set:function(e){var r=this;this.removeAllSeries(),e.forEach(function(n){return r.addSeries(n)})},enumerable:!1,configurable:!0}),t.prototype.addSeries=function(e){var r=this.series;return!!(r.indexOf(e)<0)&&(r.push(e),null==e.rootGroup.parent&&this.seriesLayerManager.requestGroup(e),this.initSeries(e),!0)},t.prototype.initSeries=function(e){e.chart=this,e.data||(e.data=this.data),this.addSeriesListeners(e),e.addChartEventListeners()},t.prototype.removeAllSeries=function(){var e=this;this.series.forEach(function(r){r.removeEventListener("nodeClick",e.onSeriesNodeClick),r.removeEventListener("nodeDoubleClick",e.onSeriesNodeDoubleClick),r.destroy(),r.chart=void 0}),this._series=[]},t.prototype.addSeriesListeners=function(e){this.hasEventListener("seriesNodeClick")&&e.addEventListener("nodeClick",this.onSeriesNodeClick),this.hasEventListener("seriesNodeDoubleClick")&&e.addEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick)},t.prototype.updateAllSeriesListeners=function(){var e=this;this.series.forEach(function(r){r.removeEventListener("nodeClick",e.onSeriesNodeClick),r.removeEventListener("nodeDoubleClick",e.onSeriesNodeDoubleClick),e.addSeriesListeners(r)})},t.prototype.assignSeriesToAxes=function(){var e=this;this.axes.forEach(function(r){r.boundSeries=e.series.filter(function(n){return n.axes[r.direction]===r})})},t.prototype.assignAxesToSeries=function(){var e=this,r={};this.axes.forEach(function(n){var i,a=n.direction;(null!==(i=r[a])&&void 0!==i?i:r[a]=[]).push(n)}),this.series.forEach(function(n){n.directions.forEach(function(i){var a=r[i];if(a){var s=n.getKeys(i),l=e.findMatchingAxis(a,n.getKeys(i));l?n.axes[i]=l:q.warn("no matching axis for direction ["+i+"] and keys ["+s+"]; check series and axes configuration.")}else q.warn("no available axis for direction ["+i+"]; check series and axes configuration.")})})},t.prototype.findMatchingAxis=function(e,r){var n,i,a,s;try{for(var l=Qi(e),u=l.next();!u.done;u=l.next()){var c=u.value,d=c.keys;if(!d.length)return c;if(r)try{for(var h=(a=void 0,Qi(r)),p=h.next();!p.done;p=h.next())if(d.indexOf(p.value)>=0)return c}catch(g){a={error:g}}finally{try{p&&!p.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}}}catch(g){n={error:g}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}},t.prototype.resize=function(e,r){var n,i,a,s;e??(e=null!==(n=this.width)&&void 0!==n?n:this.autoSize?null===(i=this._lastAutoSize)||void 0===i?void 0:i[0]:this.scene.canvas.width),r??(r=null!==(a=this.height)&&void 0!==a?a:this.autoSize?null===(s=this._lastAutoSize)||void 0===s?void 0:s[1]:this.scene.canvas.height),this.log("Chart.resize()",{width:e,height:r}),e&&r&&Number.isFinite(e)&&Number.isFinite(r)&&this.scene.resize(e,r)&&(this.disablePointer(),this.update(ge.PERFORM_LAYOUT,{forceNodeDataRefresh:!0}))},t.prototype.processData=function(){return xn(this,void 0,void 0,function(){var e,r;return wn(this,function(n){switch(n.label){case 0:return this.axes.length>0&&(this.assignAxesToSeries(),this.assignSeriesToAxes()),e=new Hb,r=this.series.map(function(i){return i.processData(e)}),[4,e.execute()];case 1:return n.sent(),[4,Promise.all(r)];case 2:return n.sent(),[4,this.updateLegend()];case 3:return n.sent(),[2]}})})},t.prototype.placeLabels=function(){var e,r,n=[],i=[];try{for(var a=Qi(this.series),s=a.next();!s.done;s=a.next()){var l=s.value;if(l.visible){var u=l.getLabelData();u&&pw(u[0])&&(i.push(u),n.push(l))}}}catch(h){e={error:h}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}var c=this.seriesRect,d=c&&i.length>0?function vw(o,t,e){void 0===e&&(e=5);var r=[];o=o.map(function(c){return c.slice().sort(function(d,h){return h.point.size-d.point.size})});for(var n=0;n<o.length;n++){var i=r[n]=[],a=o[n];if(a?.length&&a[0].label)for(var s=function(c,d){var h=a[c],p=h.label,g=h.point.x-.5*p.width,y=h.point.y-.5*h.point.size-p.height-e,S=p.width,m=p.height;return!t||hw(t,g,y,S,m)?o.some(function(x){return x.some(function(b){return fw(b.point,g,y,S,m)})})||r.some(function(x){return x.some(function(b){return Nh(b,g,y,S,m)})})?"continue":void i.push({index:c,text:p.text,x:g,y,width:S,height:m,datum:h}):"continue"},l=0,u=a.length;l<u;l++)s(l)}return r}(i,{x:0,y:0,width:c.width,height:c.height}):[];return new Map(d.map(function(h,p){return[n[p],h]}))},t.prototype.attachLegend=function(e){var r;if(this.legendType===e&&this.legend)return this.legend;null===(r=this.legend)||void 0===r||r.destroy(),this.legend=void 0;var i=function Vb(o,t){if(vl[o])return new vl[o](t);throw new Error("AG Charts - unknown legend type: "+o)}(e,this.getModuleContext());return i.attachLegend(this.scene.root),this.legend=i,this.legendType=e,i},t.prototype.setLegendInit=function(e){this.applyLegendOptions=e},t.prototype.updateLegend=function(){var e;return xn(this,void 0,void 0,function(){var r,n,i;return wn(this,function(a){return r=[],this.series.filter(function(s){return s.showInLegend}).forEach(function(s){var l=s.getLegendData();r.push.apply(r,gl([],Xi(l)))}),i=this.attachLegend(n=r.length>0?r[0].legendType:"category"),null===(e=this.applyLegendOptions)||void 0===e||e.call(this,i),"category"===n&&this.validateLegendData(r),i.data=r,[2]})})},t.prototype.validateLegendData=function(e){var r=this,n={};e.forEach(function(i){var a,s,l,u,c,d,h=null===(s=r.series.find(function(v){return v.id===i.seriesId}))||void 0===s?void 0:s.type;if(h){var p=i;null!==(l=n[h])&&void 0!==l||(n[h]=((a={})[p.label.text]=new Set,a)),null!==(u=(c=n[h])[d=p.label.text])&&void 0!==u||(c[d]=new Set),null!=p.marker.fill&&n[h][p.label.text].add(p.marker.fill)}}),Object.keys(n).forEach(function(i){Object.keys(n[i]).forEach(function(a){n[i][a].size>1&&q.warnOnce("legend item '"+a+"' has multiple fill colors, this may cause unexpected behaviour.")})})},t.prototype.performLayout=function(){return xn(this,void 0,void 0,function(){var e,i;return wn(this,function(a){return null!=this.scene.root&&(this.scene.root.visible=!0),i=new me(0,0,(e=this.scene).width,e.height),i=this.layoutService.dispatchPerformLayout("start-layout",{shrinkRect:i}).shrinkRect,[2,i=this.layoutService.dispatchPerformLayout("before-series",{shrinkRect:i}).shrinkRect]})})},t.prototype.positionPadding=function(e){var r=this.padding;return e.shrink(r.left,"left"),e.shrink(r.top,"top"),e.shrink(r.right,"right"),e.shrink(r.bottom,"bottom"),{shrinkRect:e}},t.prototype.positionCaptions=function(e){var r,n=this,i=n.title,a=n.subtitle,s=n.footnote,l=e.clone(),u=function(h){var p,g=null!==(p=h.lineHeight)&&void 0!==p?p:h.fontSize*Ee.defaultLineHeightRatio,y=e.width,S=Math.max(g,e.height/10);h.computeTextWrap(y,S)},c=function(h){var p,v=l.y;h.node.x=l.x+l.width/2,h.node.y=v,h.node.textBaseline="top",u(h);var g=h.node.computeBBox(),y=Math.ceil(g.y-v+g.height+(null!==(p=h.spacing)&&void 0!==p?p:0));l.shrink(y,"top")};return i&&(i.node.visible=i.enabled,i.node.visible&&c(i)),a&&(a.node.visible=null!==(r=i?.enabled&&a.enabled)&&void 0!==r&&r,a.node.visible&&c(a)),s&&(s.node.visible=s.enabled,s.node.visible&&function(h){var p,v=l.y+l.height;h.node.x=l.x+l.width/2,h.node.y=v,h.node.textBaseline="bottom",u(h);var g=h.node.computeBBox(),y=Math.ceil(v-g.y+(null!==(p=h.spacing)&&void 0!==p?p:0));l.shrink(y,"bottom")}(s)),{shrinkRect:l}},t.prototype.getSeriesRect=function(){return this.seriesRect},t.prototype.pickSeriesNode=function(e,r,n){var i,a,s,l,u=performance.now(),c=r?[et.EXACT_SHAPE_MATCH]:void 0,d=gl([],Xi(this.series)).reverse(),h=void 0;try{for(var p=Qi(d),v=p.next();!v.done;v=p.next()){var g=v.value;if(g.visible&&g.rootGroup.visible){var y=null!==(s=g.pickNode(e,c))&&void 0!==s?s:{},S=y.match,m=y.distance;if(S&&null!=m&&((!h||h.distance>m)&&m<=(n??1/0)&&(h={series:g,distance:m,datum:S}),0===m))break}}}catch(C){i={error:C}}finally{try{v&&!v.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}return this.extraDebugStats.pickSeriesNode=Math.round((null!==(l=this.extraDebugStats.pickSeriesNode)&&void 0!==l?l:0)+(performance.now()-u)),h},t.prototype.onMouseMove=function(e){this.lastInteractionEvent=e,this.pointerScheduler.schedule(),this.extraDebugStats.mouseX=e.offsetX,this.extraDebugStats.mouseY=e.offsetY,this.update(ge.SCENE_RENDER)},t.prototype.onLeave=function(e){this.tooltip.pointerLeftOntoTooltip(e)||this.disablePointer()},t.prototype.handlePointer=function(e){var r=this,i=this.lastPick,a=this.hoverRect,s=e.offsetX,l=e.offsetY,u=function(c){void 0===c&&(c=!1),i&&r.disablePointer(c)};a?.containsPoint(s,l)?(this.handlePointerTooltip(e,u),this.handlePointerNode(e)):u()},t.prototype.handlePointerTooltip=function(e,r){var n,i,v,s=this.lastPick,u=this.tooltip.range,c=e.pageX,d=e.pageY,h=e.offsetX,p=e.offsetY;"number"==typeof u&&Number.isFinite(u)&&(v=u);var g=this.pickSeriesNode({x:h,y:p},"exact"===u,v);if(!g)return this.tooltipManager.updateTooltip(this.id),void("tooltip"===this.highlight.range&&r(!0));var S,y="node"===this.highlight.range||!s||s.datum!==g.datum;y?(S=g.series.getTooltipHtml(g.datum),"tooltip"===this.highlight.range&&this.highlightManager.updateHighlight(this.id,g.datum)):s&&(s.event=e.sourceEvent);var x=this.tooltip.enabled&&g.series.tooltip.enabled&&("nearest"===u||null!=v||"exact"===u&&0===g.distance)&&(!y||void 0!==S),O=this.mergePointerDatum({pageX:c,pageY:d,offsetX:h,offsetY:p,event:e,showArrow:g.series.tooltip.showArrow,position:{xOffset:g.datum.series.tooltip.position.xOffset,yOffset:g.datum.series.tooltip.position.yOffset}},g.datum);O.enableInteraction=null!==(i=null===(n=g.series.tooltip.interaction)||void 0===n?void 0:n.enabled)&&void 0!==i&&i,x&&this.tooltipManager.updateTooltip(this.id,O,S)},t.prototype.handlePointerNode=function(e){var r=this;this.checkSeriesNodeRange(e,function(i,a){(i.hasEventListener("nodeClick")||i.hasEventListener("nodeDoubleClick"))&&r.cursorManager.updateCursor("chart","pointer"),"node"===r.highlight.range&&r.highlightManager.updateHighlight(r.id,a)})||(this.cursorManager.updateCursor("chart"),"node"===this.highlight.range&&this.highlightManager.updateHighlight(this.id))},t.prototype.onClick=function(e){this.checkSeriesNodeClick(e)?this.update(ge.SERIES_UPDATE):this.fireEvent({type:"click",event:e.sourceEvent})},t.prototype.onDoubleClick=function(e){this.checkSeriesNodeDoubleClick(e)?this.update(ge.SERIES_UPDATE):this.fireEvent({type:"doubleClick",event:e.sourceEvent})},t.prototype.checkSeriesNodeClick=function(e){return this.checkSeriesNodeRange(e,function(r,n){return r.fireNodeClickEvent(e.sourceEvent,n)})},t.prototype.checkSeriesNodeDoubleClick=function(e){return this.checkSeriesNodeRange(e,function(r,n){return r.fireNodeDoubleClickEvent(e.sourceEvent,n)})},t.prototype.checkSeriesNodeRange=function(e,r){var s,n=this.pickSeriesNode({x:e.offsetX,y:e.offsetY},!1),i=n?.datum,a=i?.series.nodeClickRange;if(i&&"nearest"===a)return r(i.series,i),!0;"number"==typeof a&&Number.isFinite(a)&&(s=a);var l=this.pickSeriesNode({x:e.offsetX,y:e.offsetY},"exact"===a,s);return!(!l||null==s&&("exact"!==a||0!==l.distance)||(r(l.series,l.datum),0))},t.prototype.mergePointerDatum=function(e,r){if("node"===r.series.tooltip.position.type&&r.nodeMidPoint){var i=r.nodeMidPoint,l=this.scene.canvas,u=r.series.contentGroup.inverseTransformPoint(i.x,i.y),c=l.element.getBoundingClientRect();return _n(_n({},e),{pageX:Math.round(c.left+window.scrollX+u.x),pageY:Math.round(c.top+window.scrollY+u.y),offsetX:Math.round(u.x),offsetY:Math.round(u.y)})}return e},t.prototype.changeHighlightDatum=function(e){var r,n,i=new Set,a=null!==(r=e.currentHighlight)&&void 0!==r?r:{},s=a.series,l=void 0===s?void 0:s,u=a.datum,c=null!==(n=e.previousHighlight)&&void 0!==n?n:{},d=c.series,h=void 0===d?void 0:d,p=c.datum;h&&i.add(h),l&&i.add(l),h?.cursor&&p&&this.cursorManager.updateCursor(h.id),l?.cursor&&u&&this.cursorManager.updateCursor(l.id,l.cursor),this.lastPick=e.currentHighlight?{datum:e.currentHighlight}:void 0,null==l||null==h?this.update(ge.SERIES_UPDATE):this.update(ge.SERIES_UPDATE,{seriesToUpdate:i})},t.prototype.waitForUpdate=function(e){return void 0===e&&(e=5e3),xn(this,void 0,void 0,function(){var r;return wn(this,function(n){switch(n.label){case 0:r=performance.now(),n.label=1;case 1:if(!(this._pendingFactoryUpdates.length>0||this.updatePending))return[3,3];if(performance.now()-r>e)throw new Error("waitForUpdate() timeout reached.");return[4,Gh(5)];case 2:return n.sent(),[3,1];case 3:return[4,this.awaitUpdateCompletion()];case 4:return n.sent(),[2]}})})},t.prototype.handleOverlays=function(){this.handleNoDataOverlay()},t.prototype.handleNoDataOverlay=function(){var e=!this.series.some(function(n){return n.hasData()}),r=this.getSeriesRect();e&&r?this.overlays.noData.show(r):this.overlays.noData.hide()},Or([br({newValue:function(e){this.scene.debug.consoleLog=e,this.animationManager&&(this.animationManager.debug=e)}})],t.prototype,"debug",void 0),Or([br({newValue:function(e){this.destroyed||e.appendChild(this.element)},oldValue:function(e){e.removeChild(this.element)}})],t.prototype,"container",void 0),Or([br({newValue:function(e){var r;null===(r=this.series)||void 0===r||r.forEach(function(n){return n.data=e})}})],t.prototype,"data",void 0),Or([br({newValue:function(e){this.resize(e)}})],t.prototype,"width",void 0),Or([br({newValue:function(e){this.resize(void 0,e)}})],t.prototype,"height",void 0),Or([br({changeValue:function(e){this.autoSizeChanged(e)}}),A(Te)],t.prototype,"autoSize",void 0),Or([br({newValue:function(e){var r;null===(r=this.scene.root)||void 0===r||r.appendChild(e.node)},oldValue:function(e){var r;null===(r=this.scene.root)||void 0===r||r.removeChild(e.node)}})],t.prototype,"title",void 0),Or([br({newValue:function(e){var r;null===(r=this.scene.root)||void 0===r||r.appendChild(e.node)},oldValue:function(e){var r;null===(r=this.scene.root)||void 0===r||r.removeChild(e.node)}})],t.prototype,"subtitle",void 0),Or([br({newValue:function(e){var r;null===(r=this.scene.root)||void 0===r||r.appendChild(e.node)},oldValue:function(e){var r;null===(r=this.scene.root)||void 0===r||r.removeChild(e.node)}})],t.prototype,"footnote",void 0),Or([A(xh("standalone","integrated"))],t.prototype,"mode",void 0),t}(hh);function Ec(o,t,e){return Math.max(t,Math.min(e,o))}var bt=function(){function o(){this.type="band",this.cache=null,this.cacheProps=["_domain","range","_paddingInner","_paddingOuter","round","interval"],this.index=new Map,this.ordinalRange=[],this._domain=[],this.range=[0,1],this._bandwidth=1,this._rawBandwidth=1,this._paddingInner=0,this._paddingOuter=0,this.round=!1}return o.prototype.didChange=function(){var t=this,e=this.cache;return!(e&&!this.cacheProps.some(function(n){return t[n]!==e[n]})||(this.cache={},this.cacheProps.forEach(function(n){return t.cache[n]=t[n]}),0))},o.prototype.refresh=function(){this.didChange()&&this.update()},Object.defineProperty(o.prototype,"domain",{get:function(){return this._domain},set:function(t){var e=[];this.index=new Map;var r=this.index;t.forEach(function(n){void 0===r.get(n)&&r.set(n,e.push(n)-1)}),this._domain=e},enumerable:!1,configurable:!0}),o.prototype.ticks=function(){this.refresh();var t=this.interval,r=Math.abs(Math.round(void 0===t?1:t));return this._domain.filter(function(n,i){return i%r==0})},o.prototype.convert=function(t){this.refresh();var e=this.index.get(t);if(void 0===e)return NaN;var r=this.ordinalRange[e];return void 0===r?NaN:r},o.prototype.invert=function(t){this.refresh();var e=this.ordinalRange.findIndex(function(r){return r===t});return this.domain[e]},Object.defineProperty(o.prototype,"bandwidth",{get:function(){return this.refresh(),this._bandwidth},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"rawBandwidth",{get:function(){return this.refresh(),this._rawBandwidth},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"padding",{get:function(){return this._paddingInner},set:function(t){t=Ec(t,0,1),this._paddingInner=t,this._paddingOuter=t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"paddingInner",{get:function(){return this._paddingInner},set:function(t){this._paddingInner=Ec(t,0,1)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"paddingOuter",{get:function(){return this._paddingOuter},set:function(t){this._paddingOuter=Ec(t,0,1)},enumerable:!1,configurable:!0}),o.prototype.update=function(){var t=this._domain.length;if(0!==t){for(var e=this.round,r=this._paddingInner,n=this._paddingOuter,i=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i}(this.range,2),a=i[0],l=i[1]-a,u=l/Math.max(1,t+2*n-r),c=e?Math.floor(u):u,h=a+(l-c*(t-r))/2,p=e?Math.round(h):h,v=c*(1-r),g=e?Math.round(v):v,y=u*(1-r),S=[],m=0;m<t;m++)S.push(p+c*m);this._bandwidth=g,this._rawBandwidth=y,this.ordinalRange=S}},o}(),Xb=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),yl=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Ze=function(o){function t(){var e=o.call(this)||this;return e.x1=0,e.y1=0,e.x2=0,e.y2=0,e.restoreOwnStyles(),e}return Xb(t,o),t.prototype.computeBBox=function(){return new me(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)},t.prototype.isPointInPath=function(e,r){return!1},t.prototype.render=function(e){var r,n=e.ctx,a=e.stats;if(this.dirty!==$.NONE||e.forceRender){this.computeTransformMatrix(),this.matrix.toContext(n);var s=this.x1,l=this.y1,u=this.x2,c=this.y2;if(s===u){var d=Math.round(s)+Math.floor(this.strokeWidth)%2/2;s=d,u=d}else if(l===c){var h=Math.round(l)+Math.floor(this.strokeWidth)%2/2;l=h,c=h}n.beginPath(),n.moveTo(s,l),n.lineTo(u,c),this.fillStroke(n),null===(r=this.fillShadow)||void 0===r||r.markClean(),o.prototype.render.call(this,e)}else a&&(a.nodesSkipped+=this.nodeCount.count)},t.className="Line",t.defaultStyles=Object.assign({},_r.defaultStyles,{fill:void 0,strokeWidth:1}),yl([ee({redraw:$.MAJOR})],t.prototype,"x1",void 0),yl([ee({redraw:$.MAJOR})],t.prototype,"y1",void 0),yl([ee({redraw:$.MAJOR})],t.prototype,"x2",void 0),yl([ee({redraw:$.MAJOR})],t.prototype,"y2",void 0),t}(_r),qt=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Zi=function(){function o(){this.node=new Ee,this.enabled=!1,this.text=void 0,this.fontSize=10,this.fontFamily="sans-serif",this.spacing=o.PADDING,this.lineHeight=void 0,this.maxWidth=void 0,this.maxHeight=void 0,this.wrapping="always";var t=this.node;t.textAlign="center",t.pointerEvents=Ct.None}return o.prototype.computeTextWrap=function(t,e){var r,n,a=this.text,s=this.wrapping,l=Math.min(null!==(r=this.maxWidth)&&void 0!==r?r:1/0,t),u=null!==(n=this.maxHeight)&&void 0!==n?n:e;if(isFinite(l)||isFinite(u)){var c=Ee.wrap(a??"",l,u,this,s);this.node.text=c}else this.node.text=a},o.PADDING=10,qt([A(Te)],o.prototype,"enabled",void 0),qt([A(oe),Qe("node")],o.prototype,"text",void 0),qt([A($n),Qe("node")],o.prototype,"fontStyle",void 0),qt([A(Xn),Qe("node")],o.prototype,"fontWeight",void 0),qt([A(X(0)),Qe("node")],o.prototype,"fontSize",void 0),qt([A(at),Qe("node")],o.prototype,"fontFamily",void 0),qt([A(De),Qe("node","fill")],o.prototype,"color",void 0),qt([A(_e(0))],o.prototype,"spacing",void 0),qt([A(_e(0))],o.prototype,"lineHeight",void 0),qt([A(_e(0))],o.prototype,"maxWidth",void 0),qt([A(_e(0))],o.prototype,"maxHeight",void 0),qt([A(lc)],o.prototype,"wrapping",void 0),o}();function Qb(o,t){return o.length===t.length&&o.every(function(e,r){return Number(e)===Number(t[r])})}var ml=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Pe=function(){function o(t,e){this.domain=t,this.range=e,this.nice=!1,this.tickCount=o.defaultTickCount,this.minTickCount=0,this.maxTickCount=1/0,this.niceDomain=null,this.strictClampByDefault=!1,this.cache=null,this.cacheProps=["domain","range","nice","tickCount","minTickCount","maxTickCount"]}return o.prototype.transform=function(t){return t},o.prototype.transformInvert=function(t){return t},o.prototype.fromDomain=function(t){return"number"==typeof t?t:t instanceof Date?t.getTime():NaN},o.prototype.getDomain=function(){return this.nice&&(this.refresh(),this.niceDomain)?this.niceDomain:this.domain},o.prototype.convert=function(t,e){var n,r=this;if(!this.domain||this.domain.length<2)return NaN;this.refresh();var i=null!==(n=e?.strict)&&void 0!==n?n:this.strictClampByDefault,a=this.getDomain().map(function(v){return r.transform(v)}),s=ml(a,2),l=s[0],u=s[1],d=ml(this.range,2),h=d[0],p=d[1];return(t=this.transform(t))<l?i?NaN:h:t>u?i?NaN:p:l===u?(h+p)/2:t===l?h:t===u?p:h+(this.fromDomain(t)-this.fromDomain(l))/(this.fromDomain(u)-this.fromDomain(l))*(p-h)},o.prototype.invert=function(t){var e=this;this.refresh();var v,r=this.getDomain().map(function(g){return e.transform(g)}),n=ml(r,2),i=n[0],a=n[1],l=ml(this.range,2),u=l[0],c=l[1],d=u>c;return t<(d?c:u)?d?a:i:t>(d?u:c)?d?i:a:(v=this.toDomain(u===c?(this.fromDomain(i)+this.fromDomain(a))/2:this.fromDomain(i)+(t-u)/(c-u)*(this.fromDomain(a)-this.fromDomain(i))),this.transformInvert(v))},o.prototype.didChange=function(){var t=this,e=this.cache;return!(e&&!this.cacheProps.some(function(n){return t[n]!==e[n]})||(this.cache={},this.cacheProps.forEach(function(n){return t.cache[n]=t[n]}),0))},o.prototype.refresh=function(){this.didChange()&&this.update()},o.prototype.isDenseInterval=function(t){var n=t.interval,i=t.count,a=this.range,s=t.stop-t.start,l=Math.min(a[0],a[1]);return i??(i=s/("number"==typeof n?n:1)),i>=Math.max(a[0],a[1])-l&&(q.warn("the configured tick interval results in more than 1 tick per pixel, ignoring. Supply a larger tick interval or omit this configuration."),!0)},o.defaultTickCount=5,o.defaultMaxTickCount=6,o}(),Zb=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();function Tc(o,t,e,r,n){if(e<2)return Sl(o,t,t-o);var i=Ma(o,t,e,r,n);return isNaN(i)?new Pc(0):Sl(o=Math.ceil(o/i)*i,t=Math.floor(t/i)*i,i)}var dp=[1,2,5,10];function Ma(o,t,e,r,n){void 0===r&&(r=0),void 0===n&&(n=1/0);var a=Math.floor(Math.log10((t-o)/e)),s=Math.pow(10,a),l=dp.map(function(u){var d=Math.ceil((t-o)/(u*s));return{multiplier:u,isWithinBounds:d>=r&&d<=n,diffCount:Math.abs(d-e)}}).sort(function(u,c){return u.isWithinBounds!==c.isWithinBounds?u.isWithinBounds?-1:1:u.diffCount-c.diffCount})[0].multiplier;return!l||isNaN(l)?NaN:l*s}var Pc=function(o){function t(e,r){var n=o.call(this)||this;if(r)for(var i=0,a=r.length;i<a;i++)n[i]=r[i];return n.fractionDigits=e,n}return Zb(t,o),t}(Array);function Sl(o,t,e){for(var n=(void 0,void 0,p=void 0,p=(e%1).toExponential().split("e"),Math.max((null!==(h=null===(d=p[0].split(".")[1])||void 0===d?void 0:d.length)&&void 0!==h?h:0)-Number(p[1]),0)),i=Math.pow(10,n),a=Math.ceil((t-o)/e),s=new Pc(n),l=0;l<=a;l++)s.push(Math.round((o+e*l)*i)/i);var d,h,p;return s}var Cl={periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};function Ac(o,t){void 0===t&&(t=new Date(o.getFullYear(),0,1));var e=o.getTimezoneOffset()-t.getTimezoneOffset(),r=o.getTime()-t.getTime()+6e4*e;return Math.floor(r/864e5)}function fp(o,t){var n=(t-new Date(o.getFullYear(),0,1).getDay()+7)%7,i=new Date(o.getFullYear(),0,n+1);return i<=o?Math.floor(Ac(o,i)/7)+1:0}function vp(o,t){void 0===t&&(t=o.getFullYear());var r=new Date(t,0,1).getDay(),i=new Date(t,0,(4-r+7)%7-3+1);return i<=o?Math.floor(Ac(o,i)/7)+1:vp(o,t-1)}var tO={a:function(o){return Cl.shortDays[o.getDay()]},A:function(o){return Cl.days[o.getDay()]},b:function(o){return Cl.shortMonths[o.getMonth()]},B:function(o){return Cl.months[o.getMonth()]},c:"%x, %X",d:function(o,t){return ct(o.getDate(),2,t??"0")},e:"%_d",f:function(o,t){return ct(1e3*o.getMilliseconds(),6,t??"0")},H:function(o,t){return ct(o.getHours(),2,t??"0")},I:function(o,t){var e=o.getHours()%12;return 0===e?"12":ct(e,2,t??"0")},j:function(o,t){return ct(Ac(o)+1,3,t??"0")},m:function(o,t){return ct(o.getMonth()+1,2,t??"0")},M:function(o,t){return ct(o.getMinutes(),2,t??"0")},L:function(o,t){return ct(o.getMilliseconds(),3,t??"0")},p:function(o){return o.getHours()<12?"AM":"PM"},Q:function(o){return String(o.getTime())},s:function(o){return String(Math.floor(o.getTime()/1e3))},S:function(o,t){return ct(o.getSeconds(),2,t??"0")},u:function(o){var t=o.getDay();return t<1&&(t+=7),String(t%7)},U:function(o,t){return ct(fp(o,0),2,t??"0")},V:function(o,t){return ct(vp(o),2,t??"0")},w:function(o,t){return ct(o.getDay(),2,t??"0")},W:function(o,t){return ct(fp(o,1),2,t??"0")},x:"%-m/%-d/%Y",X:"%-I:%M:%S %p",y:function(o,t){return ct(o.getFullYear()%100,2,t??"0")},Y:function(o,t){return ct(o.getFullYear(),4,t??"0")},Z:function(o){return function eO(o){var t=o.getTimezoneOffset(),e=Math.abs(t);return(t>0?"-":"+")+ct(Math.floor(e/60),2,"0")+ct(Math.floor(e%60),2,"0")}(o)},"%":function(){return"%"}},rO={_:" ",0:"0","-":""};function ct(o,t,e){var r=String(Math.floor(o));return r.length>=t?r:""+e.repeat(t-r.length)+r}function _l(o){for(var t=[];o.length>0;){var e=o.indexOf("%");if(0!==e){var r=e>0?o.substring(0,e):o;t.push(r)}if(e<0)break;var i=rO[o[e+1]];null!=i&&e++;var a=o[e+1],s=tO[a];if("function"==typeof s)t.push([s,i]);else if("string"==typeof s){var l=_l(s);t.push([l,i])}else t.push(""+(i??"")+a);o=o.substring(e+2)}return function(u){var c="number"==typeof u?new Date(u):u;return t.map(function(d){return"string"==typeof d?d:d[0](c,d[1])}).join("")}}var ur,nO=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Er=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},ti=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},xe=function(o){return o[o.MILLISECOND=0]="MILLISECOND",o[o.SECOND=1]="SECOND",o[o.MINUTE=2]="MINUTE",o[o.HOUR=3]="HOUR",o[o.WEEK_DAY=4]="WEEK_DAY",o[o.SHORT_MONTH=5]="SHORT_MONTH",o[o.MONTH=6]="MONTH",o[o.SHORT_YEAR=7]="SHORT_YEAR",o[o.YEAR=8]="YEAR",o}(xe||{}),ri=((ur={})[xe.MILLISECOND]=".%L",ur[xe.SECOND]=":%S",ur[xe.MINUTE]="%I:%M",ur[xe.HOUR]="%I %p",ur[xe.WEEK_DAY]="%a",ur[xe.SHORT_MONTH]="%b %d",ur[xe.MONTH]="%B",ur[xe.SHORT_YEAR]="%y",ur[xe.YEAR]="%Y",ur);function cr(o){return o instanceof Date?o.getTime():o}var qe,Dc=function(o){function t(){var e=o.call(this,[new Date(2022,11,7),new Date(2022,11,8)],[0,1])||this;return e.type="time",e.cacheProps=["domain","range","nice","tickCount","interval","minTickCount","maxTickCount"],e.year=qf,e.month=Zf,e.week=Qf,e.day=Xf,e.hour=$f,e.minute=Kf,e.second=Uf,e.millisecond=zf,e.tickIntervals=[[e.second,1,1e3],[e.second,5,5e3],[e.second,15,15e3],[e.second,30,3e4],[e.minute,1,Ft],[e.minute,5,5*Ft],[e.minute,15,15*Ft],[e.minute,30,30*Ft],[e.hour,1,Cr],[e.hour,3,3*Cr],[e.hour,6,6*Cr],[e.hour,12,12*Cr],[e.day,1,vn],[e.day,2,2*vn],[e.week,1,va],[e.week,2,2*va],[e.week,3,3*va],[e.month,1,ga],[e.month,2,2*ga],[e.month,3,3*ga],[e.month,4,4*ga],[e.month,6,6*ga],[e.year,1,Ys]],e}return nO(t,o),t.prototype.toDomain=function(e){return new Date(e)},t.prototype.calculateDefaultTickFormat=function(e){var r,n;void 0===e&&(e=[]);var y,i=xe.YEAR;try{for(var s=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),l=s.next();!l.done;l=s.next()){(y=this.getLowestGranularityFormat(l.value))<i&&(i=y)}}catch(y){r={error:y}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}var d=cr(e[0]),h=cr(e[e.length-1]),p=new Date(d).getFullYear(),v=new Date(h).getFullYear();return this.buildFormatString(i,v-p>0)},t.prototype.buildFormatString=function(e,r){var n=[ri[e]],i=0,a=this.getDomain(),s=Math.min.apply(Math,ti([],Er(a.map(cr)))),u=Math.max.apply(Math,ti([],Er(a.map(cr))))-s;switch(e){case xe.SECOND:u/Ft>1&&n.push(ri[xe.MINUTE]);case xe.MINUTE:u/Cr>1&&n.push(ri[xe.HOUR]);case xe.HOUR:i=n.length,u/vn>1&&n.push(ri[xe.WEEK_DAY]);case xe.WEEK_DAY:if(u/va>1||r){var c=n.indexOf(ri[xe.WEEK_DAY]);c>-1&&n.splice(c,1,ri[xe.SHORT_MONTH])}case xe.SHORT_MONTH:case xe.MONTH:(u/Ys>1||r)&&n.push(ri[xe.YEAR])}return i<n.length&&(n=ti(ti([],Er(n.slice(0,i))),[n.slice(i).join(" ")])),i>0&&i<(n=ti(ti([],Er(n.slice(0,i).reverse())),Er(n.slice(i)))).length&&n.splice(i,0," "),n.join("")},t.prototype.getLowestGranularityFormat=function(e){return this.second.floor(e)<e?xe.MILLISECOND:this.minute.floor(e)<e?xe.SECOND:this.hour.floor(e)<e?xe.MINUTE:this.day.floor(e)<e?xe.HOUR:this.month.floor(e)<e?this.week.floor(e)<e?xe.WEEK_DAY:xe.SHORT_MONTH:this.year.floor(e)<e?xe.MONTH:xe.YEAR},t.prototype.defaultTickFormat=function(e){var r=this.calculateDefaultTickFormat(e);return function(n){return _l(r)(n)}},t.prototype.getTickInterval=function(e){for(var r,c,d,n=e.start,i=e.stop,s=e.minCount,l=e.maxCount,u=this.tickIntervals,h=e.count??Pe.defaultTickCount,p=Math.abs(i-n)/Math.max(h,1),v=0;v<u.length&&p>u[v][2];)v++;return 0===v?(d=Math.max(Ma(n,i,h,s,l),1),c=this.millisecond):v===u.length?(d=Ma(n/Ys,i/Ys,h,s,l),c=this.year):(c=(r=Er(u[p-u[v-1][2]<u[v][2]-p?v-1:v],2))[0],d=r[1]),c.every(d)},t.prototype.invert=function(e){return new Date(o.prototype.invert.call(this,e))},t.prototype.ticks=function(){if(!this.domain||this.domain.length<2)return[];this.refresh();var e=Er(this.getDomain().map(cr),2),r=e[0],n=e[1];if(void 0!==this.interval)return this.getTicksForInterval({start:r,stop:n});if(this.nice){var i=this.tickCount;if(2===i)return this.niceDomain;if(1===i)return this.niceDomain.slice(0,1)}return this.getDefaultTicks({start:r,stop:n})},t.prototype.getDefaultTicks=function(e){var r=e.start,n=e.stop,i=this.getTickInterval({start:r,stop:n,count:this.tickCount,minCount:this.minTickCount,maxCount:this.maxTickCount});return i?i.range(new Date(r),new Date(n)):[]},t.prototype.getTicksForInterval=function(e){var r=e.start,n=e.stop,a=this.interval,s=this.tickIntervals;if(!a)return[];if(a instanceof Ii){var l=a.range(new Date(r),new Date(n));return this.isDenseInterval({start:r,stop:n,interval:a,count:l.length})?this.getDefaultTicks({start:r,stop:n}):l}var u=Math.abs(a);if(this.isDenseInterval({start:r,stop:n,interval:u}))return this.getDefaultTicks({start:r,stop:n});var c=ti([],Er(s));c.reverse();var d=c.find(function(y){return u%y[2]==0});if(d)return d[0].every(u/(d[2]/d[1])).range(new Date(r),new Date(n));for(var p=new Date(r),v=new Date(n),g=[];p<=v;)g.push(p),(p=new Date(p)).setMilliseconds(p.getMilliseconds()+u);return g},t.prototype.tickFormat=function(e){var n=e.specifier;return null==n?this.defaultTickFormat(e.ticks):_l(n)},t.prototype.update=function(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()},t.prototype.updateNiceDomain=function(){for(var r=Er(this.domain,2),n=r[0],i=r[1],a=0;a<4;a++){this.updateNiceDomainIteration(n,i);var s=Er(this.niceDomain,2),l=s[0],u=s[1];if(cr(n)===cr(l)&&cr(i)===cr(u))break;n=l,i=u}},t.prototype.updateNiceDomainIteration=function(e,r){var s,n=cr(e),i=cr(r),a=this.interval;if(a instanceof Ii)s=a;else{var l="number"==typeof a?(i-n)/Math.max(a,1):this.tickCount;s=this.getTickInterval({start:n,stop:i,count:l,minCount:this.minTickCount,maxCount:this.maxTickCount})}if(s){var u=s.range(e,r,!0);this.niceDomain=[u[0],u[u.length-1]]}},t}(Pe),xl=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},gp=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},qi=function(o){return"("+o+")"},Qr=function(o){return qi(o)+"?"},yp=function(o){return Qr("?:"+o)},oO=new RegExp(["^",yp(""+Qr(".")+qi("[<>=^]")),Qr("[+\\-( ]"),Qr("[$\u20ac\xa3\xa5\u20a3\u20b9#]"),Qr("0"),Qr("\\d+"),Qr(","),yp("\\."+qi("\\d+")),Qr("~"),Qr("[%a-z]"),"$"].join(""),"i"),aO=new RegExp(["^",qi(".*?"),"#\\{"+qi(".+?")+"\\}",qi(".*?"),"$"].join(""));function mp(o){var t,e,r,n=aO.exec(o);n&&(e=(t=xl(n,4))[1],o=t[2],r=t[3]);var i=oO.exec(o);if(!i)throw new Error("The number formatter is invalid: "+o);var a=xl(i,11),p=a[7],v=a[8],g=a[9],y=a[10];return{fill:a[1],align:a[2],sign:a[3],symbol:a[4],zero:a[5],width:parseInt(a[6]),comma:p,precision:parseInt(v),trim:!!g,type:y,prefix:e,suffix:r}}function Sp(o){var m,C,t="string"==typeof o?mp(o):o,e=t.fill,r=t.align,n=t.sign,i=void 0===n?"-":n,a=t.symbol,s=t.zero,l=t.width,u=t.comma,c=t.type,d=t.prefix,h=void 0===d?"":d,p=t.suffix,v=void 0===p?"":p,g=t.precision,y=t.trim,S=void 0===g||isNaN(g);if(c)if(c in Nt&&c in Ji)m=S?Ji[c]:Nt[c];else if(c in Nt)m=Nt[c];else{if(!(c in Ji))throw new Error("The number formatter type is invalid: "+c);m=Ji[c]}else m=Nt.g,y=!0;return C=null==g||S?c?6:12:g,function(_){var w=m(_,C);return y&&(w=function sO(o){return o.replace(/\.0+$/,"").replace(/(\.[1-9])0+$/,"$1")}(w)),u&&(w=function lO(o,t){var e=o.indexOf(".");e<0&&(e=o.length);for(var r=o.substring(0,e).split(""),n=o.substring(e),i=r.length-3;i>0;i-=3)r.splice(i,0,t);return""+r.join("")+n}(w,u)),w=function fO(o,t,e){return void 0===e&&(e=""),"("===e?o>=0?t:"("+t+")":""+(o>=0?"+"===e?"+":"":dO)+t}(_,w,i),a&&"#"!==a&&(w=""+a+w),"#"===a&&"x"===c&&(w="0x"+w),"s"===c&&(w=""+w+function uO(o){return cO[Cp(o)]}(_)),("%"===c||"p"===c)&&(w+="%"),null!=l&&!isNaN(l)&&(w=function hO(o,t,e,r){void 0===e&&(e=" "),void 0===r&&(r=">");var n=o;if(">"!==r&&r){if("<"===r)n=n.padEnd(t,e);else if("^"===r){var i=Math.max(0,t-n.length),a=Math.ceil(i/2),s=Math.floor(i/2);n=(n=n.padStart(a+n.length,e)).padEnd(s+n.length,e)}}else n=n.padStart(t,e);return n}(w,l,e??s,r)),""+h+w+v}}var wl=function(o){return Math.floor(Math.abs(o))},Ji={b:function(o){return wl(o).toString(2)},c:function(o){return String.fromCharCode(o)},d:function(o){return Math.round(Math.abs(o)).toFixed(0)},o:function(o){return wl(o).toString(8)},x:function(o){return wl(o).toString(16)},X:function(o){return Ji.x(o).toUpperCase()},n:function(o){return Ji.d(o)},"%":function(o){return""+wl(100*o).toFixed(0)}},Nt={e:function(o,t){return Math.abs(o).toExponential(t)},E:function(o,t){return Nt.e(o,t).toUpperCase()},f:function(o,t){return Math.abs(o).toFixed(t)},F:function(o,t){return Nt.f(o,t).toUpperCase()},g:function(o,t){if(0===o)return"0";var e=Math.abs(o),r=Math.floor(Math.log10(e));return r>=-4&&r<t?e.toFixed(t-1-r):e.toExponential(t-1)},G:function(o,t){return Nt.g(o,t).toUpperCase()},n:function(o,t){return Nt.g(o,t)},p:function(o,t){return Nt.r(100*o,t)},r:function(o,t){if(0===o)return"0";var e=Math.abs(o),n=Math.floor(Math.log10(e))-(t-1);if(n<=0)return e.toFixed(-n);var i=Math.pow(10,n);return(Math.round(e/i)*i).toFixed()},s:function(o,t){var e=Cp(o);return Nt.r(o/Math.pow(10,e),t)},"%":function(o,t){return Nt.f(100*o,t)}};function Cp(o){var t=Math.log10(Math.abs(o)),e=3*Math.floor(t/3);return Math.max(_p,Math.min(xp,e))}var _p=-24,xp=24,cO=((qe={})[_p]="y",qe[-21]="z",qe[-18]="a",qe[-15]="f",qe[-12]="p",qe[-9]="n",qe[-6]="\xb5",qe[-3]="m",qe[0]="",qe[3]="k",qe[6]="M",qe[9]="G",qe[12]="T",qe[15]="P",qe[18]="E",qe[21]="Z",qe[xp]="Y",qe),dO="\u2212",vO=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),bl=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},wp=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},bp=function(o){return o},Op=function(o){function t(){var e=o.call(this,[1,10],[0,1])||this;return e.type="log",e.base=10,e.cacheProps=["domain","range","nice","tickCount","base"],e.baseLog=bp,e.basePow=bp,e.log=function(r){return e.domain[0]>=0?e.baseLog(r):-e.baseLog(-r)},e.pow=function(r){return e.domain[0]>=0?e.basePow(r):-e.basePow(-r)},e}return vO(t,o),t.prototype.toDomain=function(e){return e},t.prototype.transform=function(e){return this.domain[0]>=0?Math.log(e):-Math.log(-e)},t.prototype.transformInvert=function(e){return this.domain[0]>=0?Math.exp(e):-Math.exp(-e)},t.prototype.update=function(){!this.domain||this.domain.length<2||(this.updateLogFn(),this.updatePowFn(),this.nice&&this.updateNiceDomain())},t.prototype.updateLogFn=function(){var r,e=this.base;if(10===e)r=Math.log10;else if(e===Math.E)r=Math.log;else if(2===e)r=Math.log2;else{var n=Math.log(e);r=function(i){return Math.log(i)/n}}this.baseLog=r},t.prototype.updatePowFn=function(){var r,e=this.base;r=10===e?t.pow10:e===Math.E?Math.exp:function(n){return Math.pow(e,n)},this.basePow=r},t.prototype.updateNiceDomain=function(){var e=bl(this.domain,2),n=e[1],i=this.pow(Math.floor(this.log(e[0]))),a=this.pow(Math.ceil(this.log(n)));this.niceDomain=[i,a]},t.pow10=function(e){return e>=0?Math.pow(10,e):1/Math.pow(10,-e)},t.prototype.ticks=function(){var r,e=this,n=null!==(r=this.tickCount)&&void 0!==r?r:10;if(!this.domain||this.domain.length<2||n<1)return[];this.refresh();var i=this.base,a=bl(this.getDomain(),2),s=a[0],l=a[1],u=this.log(s),c=this.log(l);if(this.interval){var d=Math.abs(this.interval),h=Math.abs(c-u),p=Sl(u,c,Math.min(h,d)).map(function(F){return e.pow(F)}).filter(function(F){return F>=s&&F<=l});if(!this.isDenseInterval({start:s,stop:l,interval:d,count:p.length}))return p}if(i%1!=0||c-u>=n)return Tc(u,c,Math.min(c-u,n)).map(function(F){return e.pow(F)});var y=[],S=s>0;u=Math.floor(u)-1,c=Math.round(c)+1;for(var m=Math.min.apply(Math,wp([],bl(this.range))),_=(Math.max.apply(Math,wp([],bl(this.range)))-m)/n,w=1/0,x=u;x<=c;x++)for(var b=this.convert(this.pow(x+1)),O=1;O<i;O++){var T=S?O:i-O+1,E=this.pow(x)*T,P=this.convert(E),D=Math.abs(w-P),R=Math.abs(P-b);E>=s&&E<=l&&(1===O||D>=_&&R>=_)&&(y.push(E),w=P)}return y},t.prototype.tickFormat=function(e){var r=e.count,n=e.ticks,i=e.specifier;return null==i&&(i=10===this.base?".0e":","),"string"==typeof i&&(i=Sp(i)),r===1/0?i:(null==n&&this.ticks(),function(s){return i(s)})},function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);n>3&&i&&Object.defineProperty(t,e,i)}([A(X(0))],t.prototype,"base",void 0),t}(Pe);function kt(o){var t=o.length;if(0!==t){for(var e=1/0,r=-1/0,n=0;n<t;n++){var i=o[n];i instanceof Date&&(i=i.getTime()),"number"==typeof i&&(i<e&&(e=i),i>r&&(r=i))}var a=[e,r];if(!a.some(function(s){return!isFinite(s)}))return a}}var eo=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},dr=function(){function o(){this.enabled=!0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.fontStyle=void 0,this.fontWeight=void 0,this.color="rgba(70, 70, 70, 1)"}return o.prototype.getFont=function(){return Yn(this)},eo([A(Te)],o.prototype,"enabled",void 0),eo([A(X(0))],o.prototype,"fontSize",void 0),eo([A(at)],o.prototype,"fontFamily",void 0),eo([A($n)],o.prototype,"fontStyle",void 0),eo([A(Xn)],o.prototype,"fontWeight",void 0),eo([A(It)],o.prototype,"color",void 0),o}();function Mc(o){var t=o.parallelFlipRotation,e=void 0===t?0:t,r=o.regularFlipRotation,n=void 0===r?0:r,i=o.rotation?_t(Xt(o.rotation)):0,a=!i&&e>=0&&e<=Math.PI?-1:1,s=!i&&n>=0&&n<=Math.PI?-1:1,l=0;return o.parallel?l=a*Math.PI/2:-1===s&&(l=Math.PI),{configuredRotation:i,defaultRotation:l,parallelFlipFlag:a,regularFlipFlag:s}}function Rc(o,t,e,r,n){var i=t>0&&t<=Math.PI,a=e>0&&e<=Math.PI;if(o){if(!t&&!e)return"center";if(r*(i||a?-1:1)==-1)return"end"}else if(r*n==-1)return"end";return"start"}function CO(o,t,e,r,n){var i=t.width,a=t.height,s=new me(e,r,0,0);n.transformBBox(s,t);var l=t.x,u=void 0===l?0:l,c=t.y,d=void 0===c?0:c;return t.width=i,t.height=a,{point:{x:u,y:d,size:0},label:{width:i,height:a,text:o}}}function bn(o,t){return void 0===t&&(t=[void 0]),Gi(function(e,r,n){return t.includes(n)?o:n})}var tt=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Ep=function(){function o(){this.enabled=!0,this.autoWrap=!1,this.maxWidth=void 0,this.maxHeight=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.padding=5,this.minSpacing=NaN,this.color="rgba(87, 87, 87, 1)",this.rotation=void 0,this.autoRotate=void 0,this.autoRotateAngle=335,this.avoidCollisions=!0,this.mirrored=!1,this.parallel=!1,this.formatter=void 0,this.format=void 0}return o.prototype.getSideFlag=function(){return this.mirrored?1:-1},o.prototype.getFont=function(){return Yn(this)},tt([A(Te)],o.prototype,"enabled",void 0),tt([A(wr)],o.prototype,"autoWrap",void 0),tt([A(_e(0))],o.prototype,"maxWidth",void 0),tt([A(_e(0))],o.prototype,"maxHeight",void 0),tt([A($n)],o.prototype,"fontStyle",void 0),tt([A(Xn)],o.prototype,"fontWeight",void 0),tt([A(X(1))],o.prototype,"fontSize",void 0),tt([A(at)],o.prototype,"fontFamily",void 0),tt([A(X(0))],o.prototype,"padding",void 0),tt([A(yn()),bn(NaN)],o.prototype,"minSpacing",void 0),tt([A(De)],o.prototype,"color",void 0),tt([A(_e(-360,360))],o.prototype,"rotation",void 0),tt([A(wr)],o.prototype,"autoRotate",void 0),tt([A(X(-360,360))],o.prototype,"autoRotateAngle",void 0),tt([A(Te)],o.prototype,"avoidCollisions",void 0),tt([A(Te)],o.prototype,"mirrored",void 0),tt([A(Te)],o.prototype,"parallel",void 0),tt([A(oe)],o.prototype,"format",void 0),o}(),Tp=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Pp=function(){function o(){this.width=1,this.color="rgba(195, 195, 195, 1)"}return Tp([A(X(0))],o.prototype,"width",void 0),Tp([A(De)],o.prototype,"color",void 0),o}(),On=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},_O=ne(function(o,t){return X(0)(o,t)||o instanceof Ii},"expecting a tick count Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),xO=ne(function(o,t){return Ne(o,t,_O)},"expecting an optional tick count Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),wO=ne(function(o,t){return Ne(o,t,function(e,r){return 0!==e&&X(0)(e,r)||e instanceof Ii})},"expecting an optional non-zero positive Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),Fc=function(){function o(){this.enabled=!0,this.width=1,this.size=6,this.color="rgba(195, 195, 195, 1)",this.count=void 0,this.interval=void 0,this.values=void 0,this.minSpacing=NaN}return On([A(Te)],o.prototype,"enabled",void 0),On([A(X(0))],o.prototype,"width",void 0),On([A(X(0))],o.prototype,"size",void 0),On([A(De)],o.prototype,"color",void 0),On([A(xO),kx("Use tick.interval or tick.minSpacing and tick.maxSpacing instead")],o.prototype,"count",void 0),On([A(wO)],o.prototype,"interval",void 0),On([A(ac())],o.prototype,"values",void 0),On([A(Yr(yn(1),rl("maxSpacing"))),bn(NaN)],o.prototype,"minSpacing",void 0),o}(),Ic=function(){function o(t,e){this.state=t,this.states=e,o.DEBUG()&&q.debug("%c"+this.constructor.name+" | init -> "+t,"color: green")}return o.prototype.transition=function(t,e){var r,n,i,a,s,l=this.states[this.state],u=null===(r=l?.on)||void 0===r?void 0:r[t];if(u){var c=u.target,d=this.states[c];return o.DEBUG()&&q.debug("%c"+this.constructor.name+" | "+this.state+" -> "+t+" -> "+c,"color: green"),u.action(e),null===(i=null===(n=l?.actions)||void 0===n?void 0:n.onExit)||void 0===i||i.call(n),null===(s=null===(a=d?.actions)||void 0===a?void 0:a.onEnter)||void 0===s||s.call(a),this.state=c,this.state}o.DEBUG()&&q.debug("%c"+this.constructor.name+" | "+this.state+" -> "+t+" -> "+this.state,"color: grey")},o.DEBUG=function(){var t;return null!==(t=[!0,"animation"].includes(or("agChartsDebug")))&&void 0!==t&&t},o}(),bO=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ni=function(){return ni=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},ni.apply(this,arguments)},Lc=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Ol=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Zr=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},to=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},EO=["stroke","lineDash"],TO=ne(gn(void 0,function(o){for(var t in o)if(!EO.includes(t))return!1;return!0}),"expecting an Array of objects with gridline style properties such as 'stroke' and 'lineDash'"),El=function(o){return o[o.TickLine=0]="TickLine",o[o.TickLabel=1]="TickLabel",o[o.GridLine=2]="GridLine",o[o.GridArc=3]="GridArc",o[o.AxisLine=4]="AxisLine",o}(El||{}),Tr=function(o){return o[o.CREATE=0]="CREATE",o[o.CREATE_SECONDARY=1]="CREATE_SECONDARY",o[o.FILTER=2]="FILTER",o[o.VALUES=3]="VALUES",o}(Tr||{}),PO=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return bO(t,o),t}(Ic),Ap=function(){function o(t,e){var r=this;this.moduleCtx=t,this.id=Ur(this),this.nice=!0,this.dataDomain=[],this.keys=[],this.boundSeries=[],this.includeInvisibleDomains=!1,this.axisGroup=new re({name:this.id+"-axis",zIndex:We.AXIS_ZINDEX}),this.lineNode=this.axisGroup.appendChild(new Ze),this.tickLineGroup=this.axisGroup.appendChild(new re({name:this.id+"-Axis-tick-lines",zIndex:We.AXIS_ZINDEX})),this.tickLabelGroup=this.axisGroup.appendChild(new re({name:this.id+"-Axis-tick-labels",zIndex:We.AXIS_ZINDEX})),this.crossLineGroup=new re({name:this.id+"-CrossLines"}),this.gridGroup=new re({name:this.id+"-Axis-grid"}),this.gridLineGroup=this.gridGroup.appendChild(new re({name:this.id+"-gridLines",zIndex:We.AXIS_GRID_ZINDEX})),this.tickLineGroupSelection=Fe.select(this.tickLineGroup,Ze,!1),this.tickLabelGroupSelection=Fe.select(this.tickLabelGroup,Ee,!1),this.gridLineGroupSelection=Fe.select(this.gridLineGroup,Ze,!1),this.line=new Pp,this.tick=this.createTick(),this.label=new Ep,this.translation={x:0,y:0},this.rotation=0,this.layout={label:{fractionDigits:0,padding:this.label.padding,format:this.label.format}},this.modules={},this.destroyFns=[],this.range=[0,1],this.visibleRange=[0,1],this.title=void 0,this._titleCaption=new Zi,this._gridLength=0,this.gridStyle=[{stroke:"rgba(219, 219, 219, 1)",lineDash:[4,2]}],this.fractionDigits=0,this.gridPadding=0,this.seriesAreaPadding=0,this.maxThickness=1/0,this._scale=e,this.refreshScale(),this._titleCaption.node.rotation=-Math.PI/2,this.axisGroup.appendChild(this._titleCaption.node);var n=t.interactionManager.addListener("hover",function(i){return r.checkAxisHover(i)});this.destroyFns.push(function(){return t.interactionManager.removeListener(n)}),this.animationManager=t.animationManager,this.animationState=new PO("empty",{empty:{on:{update:{target:"align",action:function(){return r.resetSelectionNodes()}}}},align:{on:{update:{target:"ready",action:function(){return r.resetSelectionNodes()}}}},ready:{on:{update:{target:"ready",action:function(i){return r.animateReadyUpdate(i)}}}}}),this._crossLines=[],this.assignCrossLineArrayConstructor(this._crossLines)}return Object.defineProperty(o.prototype,"scale",{get:function(){return this._scale},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"type",{get:function(){var t;return null!==(t=this.constructor.type)&&void 0!==t?t:""},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"crossLines",{get:function(){return this._crossLines},set:function(t){var r,n,e=this;null===(r=this._crossLines)||void 0===r||r.forEach(function(i){return e.detachCrossLine(i)}),t&&this.assignCrossLineArrayConstructor(t),this._crossLines=t,null===(n=this._crossLines)||void 0===n||n.forEach(function(i){e.attachCrossLine(i),e.initCrossLine(i)})},enumerable:!1,configurable:!0}),o.prototype.attachCrossLine=function(t){this.crossLineGroup.appendChild(t.group)},o.prototype.detachCrossLine=function(t){this.crossLineGroup.removeChild(t.group)},o.prototype.destroy=function(){var t,e;try{for(var r=Ol(Object.entries(this.modules)),n=r.next();!n.done;n=r.next()){var i=Zr(n.value,2),a=i[0];i[1].instance.destroy(),delete this.modules[a],delete this[a]}}catch(l){t={error:l}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}this.destroyFns.forEach(function(l){return l()})},o.prototype.refreshScale=function(){var e,t=this;this.range=this.scale.range.slice(),null===(e=this.crossLines)||void 0===e||e.forEach(function(r){t.initCrossLine(r)})},o.prototype.updateRange=function(){var t,e=this,r=e.range,n=e.visibleRange,a=(r[1]-r[0])/(n[1]-n[0]),l=r[0]-a*n[0];e.scale.range=[l,l+a],null===(t=this.crossLines)||void 0===t||t.forEach(function(u){u.clippedRange=[r[0],r[1]]})},o.prototype.setCrossLinesVisible=function(t){this.crossLineGroup.visible=t},o.prototype.attachAxis=function(t){t.appendChild(this.gridGroup),t.appendChild(this.axisGroup),t.appendChild(this.crossLineGroup)},o.prototype.detachAxis=function(t){t.removeChild(this.gridGroup),t.removeChild(this.axisGroup),t.removeChild(this.crossLineGroup)},o.prototype.inRange=function(t,e,r){return void 0===e&&(e=0),void 0===r&&(r=0),0===this.inRangeEx(t,e,r)},o.prototype.inRangeEx=function(t,e,r){void 0===e&&(e=0),void 0===r&&(r=0);var n=this.range,i=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]);return t+e<i-r?-1:t>a+r?1:0},o.prototype.onLabelFormatChange=function(t,e){var n=this.scale,i=this.fractionDigits,s=!(n instanceof Op)&&i>0?function(l){return"number"==typeof l?l.toFixed(i):String(l)}:function(l){return String(l)};if(e&&n&&n.tickFormat)try{this.labelFormatter=n.tickFormat({ticks:t,specifier:e})}catch{this.labelFormatter=s,q.warnOnce("the axis label format string "+e+" is invalid. No formatting will be applied")}else this.labelFormatter=s},o.prototype.setDomain=function(){var t,e=this,r=e.scale,n=e.dataDomain,i=e.tick.values;if(i&&r instanceof Pe){var a=Zr(null!==(t=kt(i))&&void 0!==t?t:[1/0,-1/0],2),s=a[0],l=a[1],u=Math.min(r.fromDomain(n[0]),s),c=Math.max(r.fromDomain(n[1]),l);r.domain=[r.toDomain(u),r.toDomain(c)]}else r.domain=n},o.prototype.setTickInterval=function(t){var e;this.scale.interval=null!==(e=this.tick.interval)&&void 0!==e?e:t},o.prototype.setTickCount=function(t,e,r){var n=this.scale;if(t&&n instanceof Pe){if("number"==typeof t)return n.tickCount=t,n.minTickCount=e??0,void(n.maxTickCount=r??1/0);n instanceof Dc&&this.setTickInterval(t)}},Object.defineProperty(o.prototype,"gridLength",{get:function(){return this._gridLength},set:function(t){var r,e=this;(this._gridLength&&!t||!this._gridLength&&t)&&(this.gridLineGroupSelection=this.gridLineGroupSelection.clear()),this._gridLength=t,null===(r=this.crossLines)||void 0===r||r.forEach(function(n){e.initCrossLine(n)})},enumerable:!1,configurable:!0}),o.prototype.createTick=function(){return new Fc},o.prototype.checkAxisHover=function(t){this.computeBBox().containsPoint(t.offsetX,t.offsetY)&&this.moduleCtx.chartEventManager.axisHover(this.id,this.direction)},o.prototype.update=function(t){var e=this.tickLabelGroupSelection.nodes().map(function(y){return y.datum.tickId}),r=this.calculateRotations(),n=r.rotation,i=r.parallelFlipRotation,a=r.regularFlipRotation,s=this.label.getSideFlag(),l=s*(this.tick.size+this.label.padding+this.seriesAreaPadding);this.updateScale(),this.updatePosition({rotation:n,sideFlag:s}),this.updateLine();var u=this.generateTicks({primaryTickCount:t,parallelFlipRotation:i,regularFlipRotation:a,labelX:l,sideFlag:s}),c=u.tickData,d=u.combinedRotation,h=u.textBaseline,p=u.textAlign,v=function(o,t){var e={};for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&t.indexOf(r)<0&&(e[r]=o[r]);if(null!=o&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(o);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(o,r[n])&&(e[r[n]]=o[r[n]])}return e}(u,["tickData","combinedRotation","textBaseline","textAlign"]);if(this.updateSelections(c.ticks),this.animationManager.skipAnimations)this.resetSelectionNodes();else{var g=this.calculateUpdateDiff(e,c);this.animationState.transition("update",g)}return this.updateLabels({tickLabelGroupSelection:this.tickLabelGroupSelection,combinedRotation:d,textBaseline:h,textAlign:p,labelX:l}),this.updateVisibility(),this.updateGridLines(s),this.updateTickLines(s),this.updateTitle({anyTickVisible:c.ticks.length>0,sideFlag:s}),this.updateCrossLines({rotation:n,parallelFlipRotation:i,regularFlipRotation:a,sideFlag:s}),this.updateLayoutState(),v.primaryTickCount},o.prototype.updateLayoutState=function(){this.layout.label={fractionDigits:this.fractionDigits,padding:this.label.padding,format:this.label.format}},o.prototype.updateScale=function(){this.updateRange(),this.calculateDomain(),this.setDomain(),this.setTickInterval(this.tick.interval);var e=this.scale,r=this.nice;e instanceof Pe&&(this.setTickCount(this.tick.count),e.nice=r,e.update())},o.prototype.calculateRotations=function(){var t=Xt(this.rotation);return{rotation:t,parallelFlipRotation:_t(t),regularFlipRotation:_t(t-Math.PI/2)}},o.prototype.generateTicks=function(t){for(var e,r,n,i,a=t.primaryTickCount,u=t.labelX,c=t.sideFlag,d=this,h=d.scale,p=d.tick,v=d.label,g=v.parallel,S=v.fontFamily,m=v.fontSize,C=v.fontStyle,_=v.fontWeight,w=void 0!==a,x=Mc({rotation:v.rotation,parallel:g,regularFlipRotation:t.regularFlipRotation,parallelFlipRotation:t.parallelFlipRotation}),b=x.defaultRotation,O=x.configuredRotation,T=x.parallelFlipFlag,E=x.regularFlipFlag,P=O+b,D=new Wn,R=this.estimateTickCount({minSpacing:p.minSpacing,maxSpacing:null!==(i=p.maxSpacing)&&void 0!==i?i:NaN}).maxTickCount,F=!p.count&&h instanceof Pe&&!isNaN(R)?R:10,I=Rc(g,O,0,c,E),L=function SO(o,t,e,r){return o&&!t?e*r==-1?"hanging":"bottom":"middle"}(g,O,c,T),N={fontFamily:S,fontSize:m,fontStyle:C,fontWeight:_,textBaseline:L,textAlign:I},k={rawTicks:[],ticks:[],labelCount:0},U=0,G=0,B=!0,j=!1;B&&U<=F&&!j;){G=0,I=Rc(g,O,0,c,E);var K=this.getTickStrategies({secondaryAxis:w,index:U});try{for(var V=(e=void 0,Ol(K)),H=V.next();!H.done;H=V.next()){U=(n=(0,H.value)({index:U,tickData:k,textProps:N,labelOverlap:B,terminate:j,primaryTickCount:a})).index,j=n.terminate;var Q=(k=n.tickData).ticks;I=Rc(g,O,G=n.autoRotation,c,E),B=this.checkLabelOverlap(P+G,0!==O||0!==G,D,Q,u,ni(ni({},N),{textAlign:I}))}}catch(ye){e={error:ye}}finally{try{H&&!H.done&&(r=V.return)&&r.call(V)}finally{if(e)throw e.error}}}return!w&&k.rawTicks.length>0&&(a=k.rawTicks.length),{tickData:k,primaryTickCount:a,combinedRotation:b+O+G,textBaseline:L,textAlign:I}},o.prototype.getTickStrategies=function(t){var v,e=this,i=this,s=i.label,l=i.tick,u=i.scale instanceof Pe,c=s.enabled&&s.avoidCollisions,h=!0===s.autoRotate&&void 0===s.rotation,p=[];return v=this.tick.values?Tr.VALUES:t.secondaryAxis?Tr.CREATE_SECONDARY:u&&void 0===this.tick.count||0===t.index||!c?Tr.CREATE:Tr.FILTER,p.push(function(C){return e.createTickData(v,C.index,C.tickData,C.terminate,C.primaryTickCount)}),u||isNaN(l.minSpacing)||p.push(function(C){return e.createTickData(Tr.FILTER,C.index,C.tickData,C.terminate,C.primaryTickCount)}),c?(s.autoWrap?p.push(function(C){return e.wrapLabels(C.tickData,C.index,C.textProps)}):h&&p.push(function(C){var b=C.terminate;return{index:C.index,tickData:C.tickData,autoRotation:e.getAutoRotation(C.labelOverlap),terminate:b}}),p):p},o.prototype.createTickData=function(t,e,r,n,i){for(var a,s,l,c=this.scale,d=this.tick,h=this.estimateTickCount({minSpacing:d.minSpacing,maxSpacing:null!==(a=d.maxSpacing)&&void 0!==a?a:NaN}),p=h.maxTickCount,v=h.minTickCount,g=h.defaultTickCount,y=c instanceof Pe,S=d.count||!y||isNaN(p)?10:p,m=null!==(s=d.count)&&void 0!==s?s:y?Math.max(g-e,v):p,C=void 0===d.interval&&void 0===d.values&&void 0===d.count&&m>v&&(y||t===Tr.FILTER),_=!0;_&&e<=S;){var w=r.rawTicks;m=null!==(l=d.count)&&void 0!==l?l:y?Math.max(g-e,v):p;var x=this.getTicks({tickGenerationType:t,previousTicks:w,tickCount:m,minTickCount:v,maxTickCount:p,primaryTickCount:i}),b=x.rawTicks,O=x.ticks,T=x.labelCount;r.rawTicks=b,r.ticks=O,r.labelCount=T,_=!!C&&Qb(b,w),e++}return n||(n=void 0!==d.interval||void 0!==d.values),{tickData:r,index:e,autoRotation:0,terminate:n}},o.prototype.checkLabelOverlap=function(t,e,r,n,i,a){Wn.updateTransformMatrix(r,1,1,t,0,0);var s=this.createLabelData(n,i,a,r),l=function mO(o,t){return isNaN(o)?t?0:10:o}(this.label.minSpacing,e);return function gw(o,t){for(var e=[],r=function(a){var s=o[a],l=s.point,u=l.x,c=l.y,d=s.label.text,h=s.label,p=h.width,v=h.height;if(p+=t??0,v+=t??0,e.some(function(y){return Nh(y,u,c,p,v)}))return{value:!0};e.push({index:a,text:d,x:u,y:c,width:p,height:v,datum:s})},n=0;n<o.length;n++){var i=r(n);if("object"==typeof i)return i.value}return!1}(s,l)},o.prototype.createLabelData=function(t,e,r,n){var i,a,s=[];try{for(var l=Ol(t),u=l.next();!u.done;u=l.next()){var c=u.value,d=c.tickLabel,h=c.translationY;if(""!==d&&null!=d){var v=fx(fh(d),e,h,r),m=CO(d,new me(e,h,v.width,v.height),e,h,n);s.push(m)}}}catch(C){i={error:C}}finally{try{u&&!u.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}return s},o.prototype.getAutoRotation=function(t){return t?_t(Xt(this.label.autoRotateAngle)):0},o.prototype.getTicks=function(t){var e,n=t.previousTicks,i=t.tickCount,a=t.minTickCount,s=t.maxTickCount,l=t.primaryTickCount,u=this.scale,c=[];switch(t.tickGenerationType){case Tr.VALUES:c=this.tick.values;break;case Tr.CREATE_SECONDARY:c=this.updateSecondaryAxisTicks(l);break;case Tr.FILTER:c=this.filterTicks(n,i);break;default:c=this.createTicks(i,a,s)}this.onLabelFormatChange(c,this.label.format),this.fractionDigits=c.fractionDigits>=0?c.fractionDigits:0;for(var d=(null!==(e=this.scale.bandwidth)&&void 0!==e?e:0)/2,h=[],p=0,v=new Map,g=0;g<c.length;g++){var y=c[g],S=u.convert(y)+d,m=this.formatTick(y,g),C=m;if(v.has(C)){var _=v.get(C);v.set(C,_+1),C=C+"_"+_}else v.set(C,1);h.push({tick:y,tickId:C,tickLabel:m,translationY:S}),""!==m&&null!=m&&p++}return{rawTicks:c,ticks:h,labelCount:p}},o.prototype.filterTicks=function(t,e){var r,i=isNaN(this.tick.minSpacing)&&isNaN(null!==(r=this.tick.maxSpacing)&&void 0!==r?r:NaN)?2:Math.ceil(t.length/e);return t.filter(function(a,s){return s%i==0})},o.prototype.createTicks=function(t,e,r){var n,i,a;return this.setTickCount(t,e,r),null!==(a=null===(i=(n=this.scale).ticks)||void 0===i?void 0:i.call(n))&&void 0!==a?a:[]},o.prototype.estimateTickCount=function(t){var e=t.minSpacing,r=t.maxSpacing,n=this.calculateAvailableRange(),i=Math.max(o.defaultTickMinSpacing,n/Pe.defaultMaxTickCount);isNaN(e)&&isNaN(r)?(e=i)>(r=n)&&(r=e):isNaN(e)?(e=i)>r&&(e=r):isNaN(r)&&e>(r=n)&&(r=e);var a=Math.max(1,Math.floor(n/e)),s=Math.min(a,Math.ceil(n/r)),l=Pe.defaultTickCount;return l>a?l=a:l<s&&(l=s),{minTickCount:s,maxTickCount:a,defaultTickCount:l}},o.prototype.updateVisibility=function(){var t=this.range,e=Math.min.apply(Math,to([],Zr(t))),r=Math.max.apply(Math,to([],Zr(t))),n=function(u){var c=Math.floor(e),d=Math.ceil(r);c!==d?(u.translationY>=c-1&&u.translationY<c&&(u.translationY=c),u.translationY>d&&u.translationY<=d+1&&(u.translationY=d),u.visible=u.translationY>=c&&u.translationY<=d):u.visible=!1},i=this,s=i.tickLineGroupSelection,l=i.tickLabelGroupSelection;i.gridLineGroupSelection.each(n),s.each(n),l.each(n),this.tickLineGroup.visible=this.tick.enabled,this.tickLabelGroup.visible=this.label.enabled},o.prototype.updateCrossLines=function(t){var r,e=this,n=t.rotation,i=t.parallelFlipRotation,a=t.regularFlipRotation,s=t.sideFlag,l=this.isAnySeriesActive();null===(r=this.crossLines)||void 0===r||r.forEach(function(u){var c;u.sideFlag=-s,u.direction=n===-Math.PI/2?Z.X:Z.Y,u.label.parallel=null!==(c=u.label.parallel)&&void 0!==c?c:e.label.parallel,u.parallelFlipRotation=i,u.regularFlipRotation=a,u.update(l)})},o.prototype.updateTickLines=function(t){var e=this.tick;this.tickLineGroupSelection.each(function(r){r.strokeWidth=e.width,r.stroke=e.color,r.x1=t*e.size,r.x2=0,r.y1=0,r.y2=0})},o.prototype.calculateAvailableRange=function(){var t=this.range,e=Math.min.apply(Math,to([],Zr(t)));return Math.max.apply(Math,to([],Zr(t)))-e},o.prototype.calculateDomain=function(){var t,e,r,n=this,i=n.direction,a=n.boundSeries,s=n.includeInvisibleDomains;if(this.linkedTo)this.dataDomain=this.linkedTo.dataDomain;else{var l=[],u=a.filter(function(v){return s||v.isEnabled()});try{for(var c=Ol(u),d=c.next();!d.done;d=c.next())l.push(d.value.getDomain(i))}catch(v){t={error:v}}finally{try{d&&!d.done&&(e=c.return)&&e.call(c)}finally{if(t)throw t.error}}var p=(r=new Array).concat.apply(r,to([],Zr(l)));this.dataDomain=this.normaliseDataDomain(p)}},o.prototype.updatePosition=function(t){var e=t.rotation,r=t.sideFlag,n=this,i=n.crossLineGroup,a=n.axisGroup,s=n.gridGroup,l=n.translation,u=n.gridLineGroupSelection,c=n.gridPadding,d=n.gridLength,h=Math.floor(l.x),p=Math.floor(l.y);i.translationX=h,i.translationY=p,i.rotation=e,a.translationX=h,a.translationY=p,a.rotation=e,s.translationX=h,s.translationY=p,s.rotation=e,u.each(function(v){v.x1=c,v.x2=-r*d+c,v.y1=0,v.y2=0})},o.prototype.updateSecondaryAxisTicks=function(t){throw new Error("AG Charts - unexpected call to updateSecondaryAxisTicks() - check axes configuration.")},o.prototype.updateSelections=function(t){var r=this.gridLineGroupSelection.update(this.gridLength?t:[],function(a){var s=new Ze;s.tag=El.GridLine,a.append(s)},function(a){return a.tickId}),n=this.tickLineGroupSelection.update(t,function(a){var s=new Ze;s.tag=El.TickLine,a.appendChild(s)},function(a){return a.tickId}),i=this.tickLabelGroupSelection.update(t,function(a){var s=new Ee;s.tag=El.TickLabel,a.appendChild(s)},function(a){return a.tickId});this.tickLineGroupSelection=n,this.tickLabelGroupSelection=i,this.gridLineGroupSelection=r},o.prototype.updateGridLines=function(t){var e=this,r=e.gridStyle,n=e.tick,i=e.gridPadding,a=e.gridLength;if(0!==a&&0!==r.length){var s=r.length;this.gridLineGroupSelection.each(function(l,u,c){var d=r[c%s];l.x1=i,l.x2=-t*a+i,l.y1=0,l.y2=0,l.stroke=d.stroke,l.strokeWidth=n.width,l.lineDash=d.lineDash,l.fill=void 0})}},o.prototype.updateLabels=function(t){var r=t.combinedRotation,n=t.textBaseline,i=t.textAlign,a=t.labelX,l=this.label;this.label.enabled&&t.tickLabelGroupSelection.each(function(c,d){var h=d.tickLabel;c.fontStyle=l.fontStyle,c.fontWeight=l.fontWeight,c.fontSize=l.fontSize,c.fontFamily=l.fontFamily,c.fill=l.color,c.text=h,""===c.text||null==c.text?c.visible=!1:(c.textBaseline=n,c.textAlign=i,c.x=a,c.rotationCenterX=a,c.rotation=r,c.visible=!0)})},o.prototype.wrapLabels=function(t,e,r){var n=this.label,i=n.parallel,a=n.maxWidth,s=n.maxHeight,l=i?Math.round(this.calculateAvailableRange()/t.labelCount):this.maxThickness,u=a??l,c=i?this.maxThickness:Math.round(this.calculateAvailableRange()/t.labelCount),d=s??c;return t.ticks.forEach(function(h){var g=Ee.wrap(h.tickLabel,u,d,r,"hyphenate");h.tickLabel=g}),{tickData:t,index:e,autoRotation:0,terminate:!0}},o.prototype.updateLine=function(){var e=this.lineNode,r=this.range;e.x1=0,e.x2=0,e.y1=r[0],e.y2=r[1],e.strokeWidth=this.line.width,e.stroke=this.line.color,e.visible=!0},o.prototype.updateTitle=function(t){var e,r=t.anyTickVisible,n=t.sideFlag,a=this,s=a.rotation,l=a.title,u=a._titleCaption,c=a.lineNode,d=a.range,h=a.tickLineGroup,p=a.tickLabelGroup,v=a.moduleCtx.callbackCache,g=(null!==(e=this.title)&&void 0!==e?e:{}).formatter,y=void 0===g?function(T){return T.defaultValue}:g;if(l){u.enabled=l.enabled,u.fontFamily=l.fontFamily,u.fontSize=l.fontSize,u.fontStyle=l.fontStyle,u.fontWeight=l.fontWeight,u.color=l.color,u.wrapping=l.wrapping;var S=!1,m=u.node;if(l.enabled&&c.visible){S=!0;var C=_t(s),_=Zi.PADDING,w=-1===n&&C>Math.PI&&C<2*Math.PI?-1:1;m.rotation=w*n*Math.PI/2,m.x=Math.floor(w*n*(d[0]+d[1])/2);var x=0;if(r){var b=re.computeBBox([h,p]),O=0===s?b.width:b.height;Math.abs(O)<1/0&&(x+=O)}m.y=-1===n?Math.floor(w*(-_-x)):Math.floor(-_-x),m.textBaseline=1===w?"bottom":"top",m.text=v.call(y,this.getTitleFormatterParams())}m.visible=S}else u.enabled=!1},o.prototype.formatTick=function(t,e){var r,n,i=this,a=i.label,s=i.labelFormatter,l=i.fractionDigits,u=i.moduleCtx.callbackCache;if(a.formatter){var c=l>0?t:String(t);return null!==(r=u.call(a.formatter,{value:c,index:e,fractionDigits:l,formatter:s}))&&void 0!==r?r:c}return s&&null!==(n=u.call(s,t))&&void 0!==n?n:String(t)},o.prototype.formatDatum=function(t){return String(t)},o.prototype.computeBBox=function(){return this.axisGroup.computeBBox()},o.prototype.initCrossLine=function(t){t.scale=this.scale,t.gridLength=this.gridLength},o.prototype.isAnySeriesActive=function(){var t=this;return this.boundSeries.some(function(e){return t.includeInvisibleDomains||e.isEnabled()})},o.prototype.clipTickLines=function(t,e,r,n){this.tickLineGroup.setClipRectInGroupCoordinateSpace(new me(t,e,r,n))},o.prototype.clipGrid=function(t,e,r,n){this.gridGroup.setClipRectInGroupCoordinateSpace(new me(t,e,r,n))},o.prototype.calculatePadding=function(t,e){return[Math.abs(.01*t),Math.abs(.01*t)]},o.prototype.getTitleFormatterParams=function(){var e,t=this,r=this.boundSeries.reduce(function(n,i){for(var a=i.getKeys(t.direction),s=i.getNames(t.direction),l=0;l<a.length;l++)n.push({key:a[l],name:s[l]});return n},[]);return{direction:this.direction,boundSeries:r,defaultValue:null===(e=this.title)||void 0===e?void 0:e.text}},o.prototype.normaliseDataDomain=function(t){return t},o.prototype.getLayoutState=function(){return ni({rect:this.computeBBox(),gridPadding:this.gridPadding,seriesAreaPadding:this.seriesAreaPadding,tickSize:this.tick.size},this.layout)},o.prototype.createAxisContext=function(){var t=this;return{axisId:this.id,direction:this.direction,continuous:this.scale instanceof Pe,keys:function(){return t.boundSeries.map(function(r){return r.getKeys(t.direction)}).reduce(function(r,n){return r.push.apply(r,to([],Zr(n))),r},[])},scaleValueFormatter:function(r){var n,i,a;return null!==(a=null===(i=(n=t.scale).tickFormat)||void 0===i?void 0:i.call(n,{specifier:r}))&&void 0!==a?a:void 0},scaleBandwidth:function(){var r;return null!==(r=t.scale.bandwidth)&&void 0!==r?r:0},scaleConvert:function(r){return t.scale.convert(r)},scaleInvert:function(r){var n,i,a;return null!==(a=null===(i=(n=t.scale).invert)||void 0===i?void 0:i.call(n,r))&&void 0!==a?a:void 0}}},o.prototype.addModule=function(t){if(null!=this.modules[t.optionsKey])throw new Error("AG Charts - module already initialised: "+t.optionsKey);null==this.axisContext&&(this.axisContext=this.createAxisContext());var e=new t.instanceConstructor(ni(ni({},this.moduleCtx),{parent:this.axisContext}));this.modules[t.optionsKey]={instance:e},this[t.optionsKey]=e},o.prototype.removeModule=function(t){var e,r;null===(r=null===(e=this.modules[t.optionsKey])||void 0===e?void 0:e.instance)||void 0===r||r.destroy(),delete this.modules[t.optionsKey],delete this[t.optionsKey]},o.prototype.isModuleEnabled=function(t){return null!=this.modules[t.optionsKey]},o.prototype.animateReadyUpdate=function(t){var r,n,e=this;if(t.changed){var i=this,a=i.gridLineGroupSelection,s=i.tickLineGroupSelection,l=i.tickLabelGroupSelection,u=Object.keys(t.added).length,c=Object.keys(t.removed).length;if(c!==t.tickCount){var d=null!==(n=null===(r=this.animationManager)||void 0===r?void 0:r.defaultOptions.duration)&&void 0!==n?n:1e3,h=Math.floor(d/2);u>0&&c>0&&(h=Math.floor(d/3));var p={delay:c>0?h:0,duration:h},v=this.id+"_"+Math.random();l.each(function(g,y){e.animateSelectionNode(l,t,p,g,y,v)}),a.each(function(g,y){e.animateSelectionNode(a,t,p,g,y,v)}),s.each(function(g,y){e.animateSelectionNode(s,t,p,g,y,v)})}else this.resetSelectionNodes()}else this.resetSelectionNodes()},o.prototype.animateSelectionNode=function(t,e,r,n,i,a){var s=Math.round(i.translationY),l={from:n.translationY,to:s},u={from:1,to:1},c=r.duration,d=r.delay,h=i.tickLabel;e.added[h]?(l={from:s,to:s},u={from:0,to:1},d+=c):e.removed[h]&&(u={from:1,to:0},d=0),this.animationManager.animateManyWithThrottle(this.id+"_ready-update_"+n.id,[l,u],{disableInteractions:!1,delay:d,duration:c,ease:Hi,throttleId:this.id,throttleGroup:a,onUpdate:function(v){var g=Zr(v,2),S=g[1];n.translationY=g[0],n.opacity=S},onComplete:function(){t.cleanup()}})},o.prototype.resetSelectionNodes=function(){var t=this,e=t.gridLineGroupSelection,r=t.tickLineGroupSelection,n=t.tickLabelGroupSelection;e.cleanup(),r.cleanup(),n.cleanup();var i=function(a){a.translationY=Math.round(a.datum.translationY),a.opacity=1};e.each(i),r.each(i),n.each(i)},o.prototype.calculateUpdateDiff=function(t,e){for(var r,n=new Set,i=new Set,a=Math.max(t.length,e.ticks.length),s=0;s<a;s++){var l=t[s],u=null===(r=e.ticks[s])||void 0===r?void 0:r.tickId;l!==u&&(i.has(u)?i.delete(u):u&&n.add(u),n.has(l)?n.delete(l):l&&i.add(l))}var c={},d={};return n.forEach(function(h){c[h]=!0}),i.forEach(function(h){d[h]=!0}),{changed:n.size>0||i.size>0,tickCount:a,added:c,removed:d}},o.defaultTickMinSpacing=50,Lc([A(Te)],o.prototype,"nice",void 0),Lc([A(_h)],o.prototype,"keys",void 0),Lc([A(TO)],o.prototype,"gridStyle",void 0),o}(),qr=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},AO=function(){function o(){this.enabled=!1,this.text=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=10,this.fontFamily="sans-serif",this.color=void 0,this.wrapping="always",this.formatter=void 0}return qr([A(Te)],o.prototype,"enabled",void 0),qr([A(oe)],o.prototype,"text",void 0),qr([A($n)],o.prototype,"fontStyle",void 0),qr([A(Xn)],o.prototype,"fontWeight",void 0),qr([A(X(0))],o.prototype,"fontSize",void 0),qr([A(at)],o.prototype,"fontFamily",void 0),qr([A(De)],o.prototype,"color",void 0),qr([A(lc)],o.prototype,"wrapping",void 0),qr([A(ke)],o.prototype,"formatter",void 0),o}(),DO=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ra=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Nc=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.enabled=!0,e.color="rgba(0, 0, 0, 0.5)",e.xOffset=0,e.yOffset=0,e.blur=5,e}return DO(t,o),Ra([A(Te),ee({redraw:$.MAJOR})],t.prototype,"enabled",void 0),Ra([A(It),ee({redraw:$.MAJOR})],t.prototype,"color",void 0),Ra([A(X()),ee({redraw:$.MAJOR})],t.prototype,"xOffset",void 0),Ra([A(X()),ee({redraw:$.MAJOR})],t.prototype,"yOffset",void 0),Ra([A(X(0)),ee({redraw:$.MAJOR})],t.prototype,"blur",void 0),t}(Qu),MO=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),kc=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Je=function(o){function t(){var e=o.call(this,[0,1],[0,1])||this;return e.type="linear",e}return MO(t,o),t.prototype.toDomain=function(e){return e},t.prototype.ticks=function(){var e,r=null!==(e=this.tickCount)&&void 0!==e?e:Pe.defaultTickCount;if(!this.domain||this.domain.length<2||r<1||this.domain.some(function(u){return!isFinite(u)}))return[];this.refresh();var n=kc(this.getDomain(),2),i=n[0],a=n[1],s=this.interval;if(s){var l=Math.abs(s);if(!this.isDenseInterval({start:i,stop:a,interval:l}))return Sl(i,a,l)}return Tc(i,a,r,this.minTickCount,this.maxTickCount)},t.prototype.update=function(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()},t.prototype.updateNiceDomain=function(){var e,r,n=null!==(e=this.tickCount)&&void 0!==e?e:Pe.defaultTickCount,i=kc(this.domain,2),a=i[0],s=i[1];if(n<1)this.niceDomain=[a,s];else if(1!==n){for(var u=a,c=s,d=0;d<4;d++){var h=null!==(r=this.interval)&&void 0!==r?r:Ma(a,s,n,this.minTickCount,this.maxTickCount),p=kc(this.domain,2),v=p[0],g=p[1];if(h>=1)a=Math.floor(v/h)*h,s=Math.ceil(g/h)*h;else{var y=1/h;a=Math.floor(v*y)/y,s=Math.ceil(g*y)/y}if(a===u&&s===c)break;u=a,c=s}this.niceDomain=[a,s]}else this.niceDomain=function qb(o,t){var e=Math.floor(Math.log10(t-o)),r=Math.pow(10,e);return dp.map(function(n){var i=n*r,a=Math.floor(o/i)*i,s=Math.ceil(t/i)*i;return{error:1-(t-o)/(s-a),domain:[a,s]}}).sort(function(n,i){return n.error-i.error})[0].domain}(a,s)},t.prototype.tickFormat=function(e){var n=e.specifier;return function pO(o,t){var e=mp(t??",f"),r=e.precision;(null==r||isNaN(r))&&("f"===e.type||"%"===e.type?e.precision=Math.max.apply(Math,gp([],xl(o.map(function(i){if("number"!=typeof i||0===i)return 0;var a=Math.floor(Math.log10(Math.abs(i))),l=i.toExponential((e.type?6:12)-1).replace(/\.?0+e/,"e"),u=l.indexOf(".");if(u<0)return a>=0?0:-a;var c=l.indexOf("e")-u;return Math.max(0,c-a-1)})))):(!e.type||e.type in Nt)&&(e.precision=Math.max.apply(Math,gp([],xl(o.map(function(i){if("number"!=typeof i)return 0;var a=i.toExponential((e.type?6:12)-1).replace(/\.?0+e/,"e");return a.substring(0,a.indexOf("e")).replace(".","").length}))))));var n=Sp(e);return function(i){return n(Number(i))}}(e.ticks??this.ticks(),n)},t}(Pe);function Gc(o,t,e){return void 0===e&&(e=1e-10),Math.abs(o-t)<e}function Dp(o,t){void 0===t&&(t=2);var e=Math.floor(Math.log(Math.abs(o))/Math.LN10);return e>=0||!isFinite(e)?o.toFixed(t):o.toFixed(Math.abs(e)-1+t)}function Mp(o,t,e){var r=Math.sqrt(Math.pow(o,2)+Math.pow(t,2)),n=e.innerRadius,i=e.outerRadius;if(r<Math.min(n,i)||r>Math.max(n,i))return!1;var a=Math.atan2(t,o);a<-Math.PI/2&&(a+=2*Math.PI);var s=e.startAngle,l=e.endAngle;return l===-Math.PI/2?a<s:s===3*Math.PI/2?a>l:a<=l&&a>=s}function Rp(o,t){var e=t.startAngle,r=t.endAngle,n=t.innerRadius,i=t.outerRadius,a={x:i*Math.cos(e),y:i*Math.sin(e)},s={x:i*Math.cos(r),y:i*Math.sin(r)},l=0===n?{x:0,y:0}:{x:n*Math.cos(e),y:n*Math.sin(e)},u=0===n?{x:0,y:0}:{x:n*Math.cos(r),y:n*Math.sin(r)};return null!=Ta(o.start.x,o.start.y,o.end.x,o.end.y,a.x,a.y,l.x,l.y)||null!=Ta(o.start.x,o.start.y,o.end.x,o.end.y,s.x,s.y,u.x,u.y)||tp(0,0,i,e,r,!0,o.start.x,o.start.y,o.end.x,o.end.y).length>0}var IO=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ii=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Fp=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.centerX=0,e.centerY=0,e.innerRadius=10,e.outerRadius=20,e.startAngle=0,e.endAngle=2*Math.PI,e.angleOffset=0,e}return IO(t,o),t.prototype.computeBBox=function(){var e=this.outerRadius;return new me(this.centerX-e,this.centerY-e,2*e,2*e)},t.prototype.updatePath=function(){var e=this.path,r=this.angleOffset,n=this.startAngle+r,i=this.endAngle+r,a=Math.min(this.innerRadius,this.outerRadius),s=Math.max(this.innerRadius,this.outerRadius),l=Gc(_t(this.startAngle),_t(this.endAngle)),u=this.centerX,c=this.centerY;e.clear(),l?(e.arc(u,c,s,n,i),a>0&&(e.moveTo(u+a*Math.cos(i),c+a*Math.sin(i)),e.arc(u,c,a,i,n,!0))):(e.moveTo(u+a*Math.cos(n),c+a*Math.sin(n)),e.arc(u,c,s,n,i),a>0?e.arc(u,c,a,i,n,!0):e.lineTo(u,c)),e.closePath(),this.dirtyPath=!1},t.prototype.isPointInPath=function(e,r){var n=this.angleOffset,i=this.startAngle+n,a=this.endAngle+n,s=Math.min(this.innerRadius,this.outerRadius),l=Math.max(this.innerRadius,this.outerRadius),u=this.transformPoint(e,r);return Mp(u.x,u.y,{startAngle:i,endAngle:a,innerRadius:s,outerRadius:l})},t.className="Sector",ii([Me()],t.prototype,"centerX",void 0),ii([Me()],t.prototype,"centerY",void 0),ii([Me()],t.prototype,"innerRadius",void 0),ii([Me()],t.prototype,"outerRadius",void 0),ii([Me()],t.prototype,"startAngle",void 0),ii([Me()],t.prototype,"endAngle",void 0),ii([Me()],t.prototype,"angleOffset",void 0),t}(wt),LO=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ip=function(o){function t(e){var r,n,a=e.useLabelLayer,l=e.pickModes,c=o.call(this,{moduleCtx:e.moduleCtx,useLabelLayer:void 0!==a&&a,pickModes:void 0===l?[et.EXACT_SHAPE_MATCH]:l,contentGroupVirtual:!1,directionKeys:(r={},r[Z.X]=["angleKey"],r[Z.Y]=["radiusKey"],r),directionNames:(n={},n[Z.X]=["angleName"],n[Z.Y]=["radiusName"],n)})||this;return c.centerX=0,c.centerY=0,c.radius=0,c}return LO(t,o),t.prototype.getLabelData=function(){return[]},t.prototype.computeLabelsBBox=function(e,r){return null},t}(ll),Pr=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),mt=function(){return mt=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},mt.apply(this,arguments)},ce=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},ro=function(o,t,e,r){return new(e||(e=Promise))(function(i,a){function s(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):function n(i){return i instanceof e?i:new e(function(a){a(i)})}(c.value).then(s,l)}u((r=r.apply(o,t||[])).next())})},no=function(o,t){var r,n,i,a,e={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(!(i=(i=e.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){e=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){e.label=u[1];break}if(6===u[0]&&e.label<i[1]){e.label=i[1],i=u;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(u);break}i[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(o,e)}catch(c){u=[6,c],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},Fa=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Lp=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},Np=function(o){function t(e,r,n,i,a,s,l){var u=o.call(this,a,s,l)||this;return u.angleKey=e,u.calloutLabelKey=r,u.sectorLabelKey=n,u.radiusKey=i,u}return Pr(t,o),t}(xa),NO=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.type="nodeClick",e}return Pr(t,o),t}(Np),kO=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.type="nodeDoubleClick",e}return Pr(t,o),t}(Np),Ar=function(o){return o[o.Sector=0]="Sector",o[o.Callout=1]="Callout",o[o.Label=2]="Label",o}(Ar||{}),GO=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.offset=3,e.minAngle=0,e.formatter=void 0,e.minSpacing=4,e.maxCollisionOffset=50,e.avoidCollisions=!0,e}return Pr(t,o),ce([A(X(0))],t.prototype,"offset",void 0),ce([A(X(0))],t.prototype,"minAngle",void 0),ce([A(ke)],t.prototype,"formatter",void 0),ce([A(X(0))],t.prototype,"minSpacing",void 0),ce([A(X(0))],t.prototype,"maxCollisionOffset",void 0),ce([A(Te)],t.prototype,"avoidCollisions",void 0),t}(dr),VO=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.positionOffset=0,e.positionRatio=.5,e.formatter=void 0,e}return Pr(t,o),ce([A(X())],t.prototype,"positionOffset",void 0),ce([A(X(0,1))],t.prototype,"positionRatio",void 0),ce([A(ke)],t.prototype,"formatter",void 0),t}(dr),BO=function(){function o(){this.colors=void 0,this.length=10,this.strokeWidth=1}return ce([A(Cx)],o.prototype,"colors",void 0),ce([A(X(0))],o.prototype,"length",void 0),ce([A(X(0))],o.prototype,"strokeWidth",void 0),o}(),jO=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.renderer=void 0,e}return Pr(t,o),ce([A(ke)],t.prototype,"renderer",void 0),t}(qn),zO=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.showInLegend=!1,e}return Pr(t,o),ce([A(Te)],t.prototype,"showInLegend",void 0),t}(Zi),HO=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.text="",e.margin=2,e}return Pr(t,o),ce([A(at)],t.prototype,"text",void 0),ce([A(X())],t.prototype,"margin",void 0),t}(dr),UO=function(){function o(){this.fill="transparent",this.fillOpacity=1}return ce([A(It)],o.prototype,"fill",void 0),ce([A(_e(0,1))],o.prototype,"fillOpacity",void 0),o}(),WO=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return Pr(t,o),t}(Ic),kp=function(o){function t(e){var r,n,i,a=o.call(this,{moduleCtx:e,useLabelLayer:!0})||this;a.radiusScale=new Je,a.groupSelection=Fe.select(a.contentGroup,re),a.highlightSelection=Fe.select(a.highlightGroup,re),a.nodeData=[],a.seriesItemEnabled=[],a.title=void 0,a.calloutLabel=new GO,a.sectorLabel=new VO,a.calloutLine=new BO,a.tooltip=new jO,a.angleKey="",a.angleName="",a.innerLabels=[],a.innerCircle=void 0,a.radiusKey=void 0,a.radiusName=void 0,a.radiusMin=void 0,a.radiusMax=void 0,a.calloutLabelKey=void 0,a.calloutLabelName=void 0,a.sectorLabelKey=void 0,a.sectorLabelName=void 0,a.legendItemKey=void 0,a.fills=["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],a.strokes=["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"],a.fillOpacity=1,a.strokeOpacity=1,a.lineDash=[0],a.lineDashOffset=0,a.formatter=void 0,a.rotation=0,a.outerRadiusOffset=0,a.outerRadiusRatio=1,a.innerRadiusOffset=0,a.innerRadiusRatio=1,a.strokeWidth=1,a.shadow=void 0,a.highlightStyle=new gc,a.surroundingRadius=void 0,a.angleScale=new Je,a.angleScale.domain=[0,1],a.angleScale.range=[-Math.PI,Math.PI].map(function(c){return c+Math.PI/2}),a.backgroundGroup=a.rootGroup.appendChild(new re({name:a.id+"-background",layer:!0,zIndex:We.SERIES_BACKGROUND_ZINDEX}));var s=new re({name:"pieCalloutLabels"}),l=new re({name:"pieSectorLabels"}),u=new re({name:"innerLabels"});return null===(r=a.labelGroup)||void 0===r||r.append(s),null===(n=a.labelGroup)||void 0===n||n.append(l),null===(i=a.labelGroup)||void 0===i||i.append(u),a.calloutLabelSelection=Fe.select(s,re),a.sectorLabelSelection=Fe.select(l,Ee),a.innerLabelsSelection=Fe.select(u,Ee),a.animationState=new WO("empty",{empty:{on:{update:{target:"ready",action:function(){return a.animateEmptyUpdateReady()}}}},ready:{on:{update:{target:"ready",action:function(){return a.animateReadyUpdateReady()}}}}}),a}return Pr(t,o),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e,this.processSeriesItemEnabled()},enumerable:!1,configurable:!0}),t.prototype.addChartEventListeners=function(){var r,e=this;null===(r=this.ctx.chartEventManager)||void 0===r||r.addListener("legend-item-click",function(n){return e.onLegendItemClick(n)})},t.prototype.visibleChanged=function(){this.processSeriesItemEnabled()},t.prototype.processSeriesItemEnabled=function(){var e,n=this.data,i=this.visible;this.seriesItemEnabled=null!==(e=n?.map(function(){return i}))&&void 0!==e?e:[]},t.prototype.getDomain=function(e){return e===Z.X?this.angleScale.domain:this.radiusScale.domain},t.prototype.processData=function(e){var r,n;return ro(this,void 0,void 0,function(){var i,a,s,l,u,c,d,h,p,v,g,S;return no(this,function(m){switch(m.label){case 0:return a=void 0===(i=this.data)?[]:i,u=(s=this).radiusKey,c=s.calloutLabelKey,d=s.sectorLabelKey,h=s.legendItemKey,p=s.seriesItemEnabled,(l=s.angleKey)?(v=[],u&&(v.push(function nw(o,t,e){void 0===e&&(e={});var r=e.min,n=void 0===r?-1/0:r,i=e.max,a=void 0===i?1/0:i,s=function(o,t){var e={};for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&t.indexOf(r)<0&&(e[r]=o[r]);if(null!=o&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(o);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(o,r[n])&&(e[r[n]]=o[r[n]])}return e}(e,["min","max"]);return Qn({scopes:[o.id],type:"value",property:t,valueType:"range",validation:pc,processor:function(){return function(l){return"number"!=typeof l||isNaN(l)?l:Math.min(Math.max(l,n),a)}}},s)}(this,u,{id:"radiusValue",min:null!==(r=this.radiusMin)&&void 0!==r?r:0,max:this.radiusMax}),ut(this,u,!0,{id:"radiusRaw"}),Mh(this,{id:"radiusValue"},[0,1],null!==(n=this.radiusMin)&&void 0!==n?n:0,this.radiusMax)),v.push()),c&&v.push(ut(this,c,!1,{id:"calloutLabelValue"})),d&&v.push(ut(this,d,!1,{id:"sectorLabelValue"})),h&&v.push(ut(this,h,!1,{id:"legendItemValue"})),a=a.map(function(C,_){var w;return p[_]?C:mt(mt({},C),((w={})[l]=0,w))}),[4,e.request(this.id,a,{props:Lp([iw(this,l,!0,{id:"angleValue"}),ut(this,l,!0,{id:"angleRaw"}),Mh(this,{id:"angleValue"},[0,1],0)],Fa(v))})]):[2];case 1:return g=m.sent(),S=g.processedData,this.dataModel=g.dataModel,this.processedData=S,[2]}})})},t.prototype.maybeRefreshNodeData=function(){if(this.nodeDataRefresh){var r=Fa(this._createNodeData(),1)[0],i=(void 0===r?{}:r).nodeData;this.nodeData=void 0===i?[]:i,this.nodeDataRefresh=!1}},t.prototype.createNodeData=function(){return ro(this,void 0,void 0,function(){return no(this,function(e){return[2,this._createNodeData()]})})},t.prototype.getProcessedDataIndexes=function(e){return{angleIdx:e.resolveProcessedDataIndexById(this,"angleValue").index,radiusIdx:this.radiusKey?e.resolveProcessedDataIndexById(this,"radiusValue").index:-1,calloutLabelIdx:this.calloutLabelKey?e.resolveProcessedDataIndexById(this,"calloutLabelValue").index:-1,sectorLabelIdx:this.sectorLabelKey?e.resolveProcessedDataIndexById(this,"sectorLabelValue").index:-1,legendItemIdx:this.legendItemKey?e.resolveProcessedDataIndexById(this,"legendItemValue").index:-1}},t.prototype._createNodeData=function(){var e=this,r=this,n=r.id,i=r.processedData,a=r.dataModel,s=r.rotation,l=r.angleScale;if(!i||!a||"ungrouped"!==i.type)return[];var u=this.getProcessedDataIndexes(a),c=u.angleIdx,d=u.radiusIdx,h=u.calloutLabelIdx,p=u.sectorLabelIdx,v=u.legendItemIdx,g=0,y=i.data.map(function(S,m){var C,_=S.datum,w=S.values,x=w[c],b=l.convert(g)+Xt(s),O=l.convert(g=x)+Xt(s),T=Math.abs(O-b),E=b+T/2,P=w[c+1],D=d>=0&&null!==(C=w[d])&&void 0!==C?C:1,R=d>=0?w[d+1]:void 0,M=v>=0?w[v]:void 0,F=e.getLabels(_,E,T,!0,x,R,w[h],w[p],M),I=e.getSectorFormat(_,m,m,!1);return mt({itemId:m,series:e,datum:_,index:m,angleValue:P,midAngle:E,midCos:Math.cos(E),midSin:Math.sin(E),startAngle:b,endAngle:O,sectorFormat:I,radius:D,radiusValue:R,legendItemValue:M},F)});return[{itemId:n,nodeData:y,labelData:y}]},t.prototype.getLabels=function(e,r,n,i,a,s,l,u,c){var d=this,h=d.calloutLabel,p=d.sectorLabel,v=d.legendItemKey,g=d.ctx.callbackCache,y=!i||h.enabled?this.calloutLabelKey:void 0,S=!i||p.enabled?this.sectorLabelKey:void 0;if(!y&&!S&&!v)return{};var C,x,m=this.getLabelFormatterParams(e,a,s,l,u);return y&&(C=n>Xt(h.minAngle)?h.formatter?g.call(h.formatter,m):String(l):void 0),S&&(x=p.formatter?g.call(p.formatter,m):String(u)),mt(mt(mt({},null!=C?{calloutLabel:mt(mt({},this.getTextAlignment(r)),{text:C,hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0})}:{}),null!=x?{sectorLabel:{text:x}}:{}),null!=v&&null!=c?{legendItem:{key:v,text:c}}:{})},t.prototype.getLabelFormatterParams=function(e,r,n,i,a){var s=this;return{datum:e,angleKey:s.angleKey,angleValue:r,angleName:s.angleName,radiusKey:s.radiusKey,radiusValue:n,radiusName:s.radiusName,calloutLabelKey:s.calloutLabelKey,calloutLabelValue:i,calloutLabelName:s.calloutLabelName,sectorLabelKey:s.sectorLabelKey,sectorLabelValue:a,sectorLabelName:s.sectorLabelName,seriesId:s.id}},t.prototype.getTextAlignment=function(e){var r=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],n=function ox(o){return(o%=ki)<-Math.PI?o+=ki:o>=Math.PI&&(o-=ki),o}(e),i=-3*Math.PI/4,l=function RO(o,t){return o>=0?Math.floor(o%t):Math.floor(o%t+t)}(Math.floor((n-i)/(Math.PI/2)),r.length);return r[l]},t.prototype.getSectorFormat=function(e,r,n,i){var a,s,l,u,c,d,h,p,I,v=this,g=v.angleKey,y=v.radiusKey,S=v.fills,m=v.strokes,C=v.fillOpacity,_=v.formatter,w=v.id,x=v.ctx,b=x.callbackCache,O=x.highlightManager,T=O?.getActiveHighlight(),E=i&&T?.series===this&&r===T.itemId,P=E?this.highlightStyle.item:null,D=null!==(a=P?.fill)&&void 0!==a?a:S[n%S.length],R=null!==(s=P?.fillOpacity)&&void 0!==s?s:C,M=null!==(l=P?.stroke)&&void 0!==l?l:m[n%m.length],F=null!==(u=P?.strokeWidth)&&void 0!==u?u:this.getStrokeWidth(this.strokeWidth);return _&&(I=b.call(_,{datum:e,angleKey:g,radiusKey:y,fill:D,stroke:M,strokeWidth:F,highlighted:E,seriesId:w})),{fill:null!==(c=I?.fill)&&void 0!==c?c:D,fillOpacity:null!==(d=I?.fillOpacity)&&void 0!==d?d:R,stroke:null!==(h=I?.stroke)&&void 0!==h?h:M,strokeWidth:null!==(p=I?.strokeWidth)&&void 0!==p?p:F}},t.prototype.getInnerRadius=function(){var e=this,r=e.radius,a=r*(e.innerRadiusRatio??1)+(e.innerRadiusOffset||0);return a===r||a<0?0:a},t.prototype.getOuterRadius=function(){var e=this,a=e.radius*(e.outerRadiusRatio??1)+(e.outerRadiusOffset||0);return a<0?0:a},t.prototype.updateRadiusScale=function(){var e=this.getInnerRadius(),r=this.getOuterRadius();this.radiusScale.range=[e,r]},t.prototype.getTitleTranslationY=function(){var e,r,n=Math.max(0,this.radiusScale.range[1]);return 0===n?NaN:-n-(2+(null!==(r=null===(e=this.title)||void 0===e?void 0:e.spacing)&&void 0!==r?r:0))-Math.max(0,-n)},t.prototype.update=function(e){var r=e.seriesRect;return ro(this,void 0,void 0,function(){var n,i,a;return no(this,function(s){switch(s.label){case 0:return n=this.title,this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(),this.updateInnerCircleNodes(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),n&&(i=this.getTitleTranslationY(),a=n.node.computeBBox(),n.node.visible=n.enabled&&isFinite(i)&&!this.bboxIntersectsSurroundingSeries(a,0,i),n.node.translationY=isFinite(i)?i:0),this.updateNodeMidPoint(),[4,this.updateSelections()];case 1:return s.sent(),[4,this.updateNodes(r)];case 2:return s.sent(),[2]}})})},t.prototype.updateTitleNodes=function(){var e,r,i=this.title,a=this.oldTitle;a!==i&&(a&&(null===(e=this.labelGroup)||void 0===e||e.removeChild(a.node)),i&&(i.node.textBaseline="bottom",null===(r=this.labelGroup)||void 0===r||r.appendChild(i.node)),this.oldTitle=i)},t.prototype.updateInnerCircleNodes=function(){var e,r=this,n=r.innerCircle,a=r.innerCircleNode;if(r.oldInnerCircle!==n){var s=void 0;a&&this.backgroundGroup.removeChild(a),n&&((s=new Aa).fill=n.fill,s.fillOpacity=null!==(e=n.fillOpacity)&&void 0!==e?e:1,this.backgroundGroup.appendChild(s)),this.oldInnerCircle=n,this.innerCircleNode=s}},t.prototype.updateNodeMidPoint=function(){var e=this;this.nodeData.forEach(function(r){var n=e.radiusScale.convert(r.radius);r.nodeMidPoint={x:r.midCos*Math.max(0,n/2),y:r.midSin*Math.max(0,n/2)}})},t.prototype.updateSelections=function(){return ro(this,void 0,void 0,function(){return no(this,function(e){switch(e.label){case 0:return[4,this.updateGroupSelection()];case 1:return e.sent(),[2]}})})},t.prototype.updateGroupSelection=function(){return ro(this,void 0,void 0,function(){var e,n,i,a,s,l,u=this;return no(this,function(c){return n=(e=this).highlightSelection,i=e.calloutLabelSelection,a=e.sectorLabelSelection,s=e.innerLabelsSelection,this.groupSelection=(l=function(d){return d.update(u.nodeData,function(h){var p=new Fp;p.tag=Ar.Sector,h.appendChild(p)})})(e.groupSelection),this.highlightSelection=l(n),i.update(this.nodeData,function(d){var h=new Ze;h.tag=Ar.Callout,h.pointerEvents=Ct.None,d.appendChild(h);var p=new Ee;p.tag=Ar.Label,p.pointerEvents=Ct.None,d.appendChild(p)}),a.update(this.nodeData,function(d){d.pointerEvents=Ct.None}),s.update(this.innerLabels,function(d){d.pointerEvents=Ct.None}),[2]})})},t.prototype.updateNodes=function(e){var r;return ro(this,void 0,void 0,function(){var n,i,a,s,l,u=this;return no(this,function(c){return n=null===(r=this.ctx.highlightManager)||void 0===r?void 0:r.getActiveHighlight(),i=this.seriesItemEnabled.indexOf(!0)>=0,this.rootGroup.visible=i,this.backgroundGroup.visible=i,this.contentGroup.visible=i,this.highlightGroup.visible=i&&n?.series===this,this.labelGroup&&(this.labelGroup.visible=i),this.contentGroup.opacity=this.getOpacity(),this.updateInnerCircle(),s=(a=this.radiusScale).convert(0),l=function(d,h,p,v){var g=a.convert(h.radius),y=d.parent,S=y?.parent;v&&y&&S&&(S.removeChild(y),S.appendChild(y)),d.innerRadius=Math.max(0,s),d.outerRadius=Math.max(0,g),v&&(d.startAngle=h.startAngle,d.endAngle=h.endAngle);var m=u.getSectorFormat(h.datum,h.itemId,p,v);d.fill=m.fill,d.stroke=m.stroke,d.strokeWidth=m.strokeWidth,d.fillOpacity=m.fillOpacity,d.strokeOpacity=u.strokeOpacity,d.lineDash=u.lineDash,d.lineDashOffset=u.lineDashOffset,d.fillShadow=u.shadow,d.lineJoin="round",d.visible=u.seriesItemEnabled[p]},this.groupSelection.selectByTag(Ar.Sector).forEach(function(d,h){return l(d,d.datum,h,!1)}),this.highlightSelection.selectByTag(Ar.Sector).forEach(function(d,h){var p=n?.series===u&&d.datum.itemId===n.itemId;p?l(d,d.datum,h,p):d.visible=!1}),this.animationState.transition("update"),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(e),this.updateSectorLabelNodes(),this.updateInnerLabelNodes(),[2]})})},t.prototype.updateCalloutLineNodes=function(){var e,n=this.radiusScale,i=this.calloutLine,a=i.length,s=i.strokeWidth,l=null!==(e=i.colors)&&void 0!==e?e:this.strokes,u=this.calloutLabel.offset;this.calloutLabelSelection.selectByTag(Ar.Callout).forEach(function(c,d){var h=c.datum,p=n.convert(h.radius),v=Math.max(0,p),g=h.calloutLabel;if(g?.text&&!g.hidden&&0!==v){c.visible=!0,c.strokeWidth=s,c.stroke=l[d%l.length],c.fill=void 0;var y=h.midCos*v,S=h.midSin*v,m=h.midCos*(v+a),C=h.midSin*(v+a);if((g.collisionTextAlign||0!==g.collisionOffsetY)&&null!=g.box){var w=g.box,x=m,b=C;m<w.x?x=w.x:m>w.x+w.width&&(x=w.x+w.width),C<w.y?b=w.y:C>w.y+w.height&&(b=w.y+w.height);var O=x-m,T=b-C,E=Math.sqrt(Math.pow(O,2)+Math.pow(T,2)),P=E-u;P>0&&(m+=O*P/E,C+=T*P/E)}c.x1=y,c.y1=S,c.x2=m,c.y2=C}else c.visible=!1})},t.prototype.getLabelOverflow=function(e,r,n){var i=n.x-this.centerX,a=n.x+n.width-this.centerX,c=1;r.x+1<i?c=(r.x+r.width-i)/r.width:r.x+r.width-1>a&&(c=(a-r.x)/r.width);var d=r.y+1<n.y-this.centerY||r.y+r.height-1>n.y+n.height-this.centerY;return{textLength:1===c?e.length:Math.floor(e.length*c)-1,hasVerticalOverflow:d,hasSurroundingSeriesOverflow:this.bboxIntersectsSurroundingSeries(r)}},t.prototype.bboxIntersectsSurroundingSeries=function(e,r,n){void 0===r&&(r=0),void 0===n&&(n=0);var i=this.surroundingRadius;if(null==i)return!1;var a=[{x:e.x+r,y:e.y+n},{x:e.x+e.width+r,y:e.y+n},{x:e.x+e.width+r,y:e.y+e.height+n},{x:e.x+r,y:e.y+e.height+n}],s=Math.pow(i,2);return a.some(function(l){return Math.pow(l.x,2)+Math.pow(l.y,2)>s})},t.prototype.computeCalloutLabelCollisionOffsets=function(){var e=this,r=this,n=r.radiusScale,i=r.calloutLabel,a=r.calloutLine,s=i.offset,l=i.minSpacing,u=n.convert(0),d=this.nodeData,h=this.nodeData.filter(function(x){return!function(x){var b=x.calloutLabel,O=n.convert(x.radius),T=Math.max(0,O);return!b||0===T}(x)});if(h.forEach(function(x){var b=x.calloutLabel;null!=b&&(b.hidden=!1,b.collisionTextAlign=void 0,b.collisionOffsetY=0)}),!(h.length<=1)){var p=h.filter(function(x){return x.midCos<0}).sort(function(x,b){return x.midSin-b.midSin}),v=h.filter(function(x){return x.midCos>=0}).sort(function(x,b){return x.midSin-b.midSin}),g=h.filter(function(x){var b;return x.midSin<0&&"center"===(null===(b=x.calloutLabel)||void 0===b?void 0:b.textAlign)}).sort(function(x,b){return x.midCos-b.midCos}),y=h.filter(function(x){var b;return x.midSin>=0&&"center"===(null===(b=x.calloutLabel)||void 0===b?void 0:b.textAlign)}).sort(function(x,b){return x.midCos-b.midCos}),S=new Ee,m=function(x){var b,O=x.calloutLabel;if(null==O)return new me(0,0,0,0);var T=n.convert(x.radius),P=Math.max(0,T)+a.length+s,D=x.midCos*P,R=x.midSin*P+O.collisionOffsetY;return S.text=O.text,S.x=D,S.y=R,S.setFont(e.calloutLabel),S.setAlign({textAlign:null!==(b=O.collisionTextAlign)&&void 0!==b?b:O.textAlign,textBaseline:O.textBaseline}),S.computeBBox()},C=function(x,b,O){var T=m(x).grow(l/2),E=m(b).grow(l/2);T.x<E.x+E.width&&T.x+T.width>E.x&&("to-top"===O?T.y<E.y+E.height:T.y+T.height>E.y)&&(b.calloutLabel.collisionOffsetY="to-top"===O?T.y-E.y-E.height:T.y+T.height-E.y)},_=function(x){for(var b=x.slice().sort(function(D,R){return Math.abs(D.midSin)-Math.abs(R.midSin)})[0],O=x.indexOf(b),T=O-1;T>=0;T--)C(x[T+1],x[T],"to-top");for(T=O+1;T<x.length;T++)C(x[T-1],x[T],"to-bottom")},w=function(x){for(var b=h.some(function(L){return 0!==L.calloutLabel.collisionOffsetY}),O=x.map(function(L){return m(L)}),T=O.map(function(L){return L.clone().grow(l/2)}),E=!1,P=0;P<T.length&&!E;P++)for(var D=T[P],R=P+1;R<x.length;R++)if(D.collidesBBox(T[R])){E=!0;break}var F=d.map(function(L){var N=L.startAngle,k=L.endAngle,U=n.convert(L.radius),G=Math.max(0,U);return{startAngle:N,endAngle:k,innerRadius:u,outerRadius:G}}),I=O.some(function(L){return F.some(function(N){return function FO(o,t){var n={x:o.x,y:o.y+o.height},i={x:o.x+o.width,y:o.y+o.height};return Rp({start:{x:o.x,y:o.y},end:{x:o.x+o.width,y:o.y}},t)||Rp({start:n,end:i},t)}(L,N)})});!E&&!b&&!I||x.filter(function(L){return"center"===L.calloutLabel.textAlign}).forEach(function(L){L.calloutLabel.collisionTextAlign=L.midCos<0?"right":L.midCos>0?"left":"center"})};_(p),_(v),w(g),w(y)}},t.prototype.updateCalloutLabelNodes=function(e){var r=this,n=this,i=n.radiusScale,a=n.calloutLabel,l=n.calloutLine.length,u=a.offset,c=a.color,d=new Ee;this.calloutLabelSelection.selectByTag(Ar.Label).forEach(function(h){var p,v=h.datum,g=v.calloutLabel,y=i.convert(v.radius),S=Math.max(0,y);if(g?.text&&0!==S&&!g.hidden){var m=S+l+u,C=v.midCos*m,_=v.midSin*m+g.collisionOffsetY,w={textAlign:null!==(p=g.collisionTextAlign)&&void 0!==p?p:g.textAlign,textBaseline:g.textBaseline};d.text=g.text,d.x=C,d.y=_,d.setFont(r.calloutLabel),d.setAlign(w);var x=d.computeBBox(),b=g.text,O=!0;if(a.avoidCollisions){var T=r.getLabelOverflow(g.text,x,e),E=T.textLength,P=T.hasVerticalOverflow;b=g.text.length===E?g.text:g.text.substring(0,E)+"\u2026",O=!P}h.text=b,h.x=C,h.y=_,h.setFont(r.calloutLabel),h.setAlign(w),h.fill=c,h.visible=O}else h.visible=!1})},t.prototype.computeLabelsBBox=function(e,r){var i,n=this,a=this,s=a.radiusScale,l=a.calloutLabel,c=a.calloutLine.length,d=l.offset,h=l.maxCollisionOffset,p=l.minSpacing;if(!l.avoidCollisions)return null;this.maybeRefreshNodeData(),this.updateRadiusScale(),this.computeCalloutLabelCollisionOffsets();var y,v=[],g=new Ee;if(null!==(i=this.title)&&void 0!==i&&i.text&&this.title.enabled){var S=this.getTitleTranslationY();isFinite(S)&&(g.text=this.title.text,g.x=0,g.y=S,g.setFont(this.title),g.setAlign({textBaseline:"bottom",textAlign:"center"}),y=g.computeBBox(),v.push(y))}return this.nodeData.forEach(function(m){var C,_=m.calloutLabel,w=s.convert(m.radius),x=Math.max(0,w);if(!_||0===x)return null;var b=x+c+d,O=m.midCos*b,T=m.midSin*b+_.collisionOffsetY;g.text=_.text,g.x=O,g.y=T,g.setFont(n.calloutLabel),g.setAlign({textAlign:null!==(C=_.collisionTextAlign)&&void 0!==C?C:_.textAlign,textBaseline:_.textBaseline});var E=g.computeBBox();if(_.box=E,Math.abs(_.collisionOffsetY)>h)_.hidden=!0;else{if(y){var P=r.y-n.centerY,D=new me(y.x-p,P,y.width+2*p,y.y+y.height+p-P);if(E.collidesBBox(D))return void(_.hidden=!0)}if(e.hideWhenNecessary){var R=n.getLabelOverflow(_.text,E,r);if(R.hasVerticalOverflow||_.text.length>2&&R.textLength<2||R.hasSurroundingSeriesOverflow)return void(_.hidden=!0)}_.hidden=!1,v.push(E)}}),0===v.length?null:me.merge(v)},t.prototype.updateSectorLabelNodes=function(){var e=this.radiusScale,r=e.convert(0),n=this.sectorLabel,i=n.fontSize,a=n.fontStyle,s=n.fontWeight,l=n.fontFamily,u=n.positionOffset,c=n.positionRatio,d=n.color,h=r>0,p=1===this.seriesItemEnabled.filter(Boolean).length;this.sectorLabelSelection.each(function(v,g){var y=g.sectorLabel,S=e.convert(g.radius),m=Math.max(0,S),C=!1;if(y&&0!==m){var _=r*(1-c)+S*c+u;v.fill=d,v.fontStyle=a,v.fontWeight=s,v.fontSize=i,v.fontFamily=l,v.text=y.text,!h&&p?(v.x=0,v.y=0):(v.x=g.midCos*_,v.y=g.midSin*_),v.textAlign="center",v.textBaseline="middle";var x=v.computeBBox(),E={startAngle:g.startAngle,endAngle:g.endAngle,innerRadius:r,outerRadius:m};[[x.x,x.y],[x.x+x.width,x.y],[x.x+x.width,x.y+x.height],[x.x,x.y+x.height]].every(function(P){var D=Fa(P,2);return Mp(D[0],D[1],E)})&&(C=!0)}v.visible=C})},t.prototype.updateInnerCircle=function(){var e=this.innerCircleNode;if(e){var r=this.getInnerRadius();if(0===r)e.size=0;else{var n=Math.min(r,this.getOuterRadius());e.size=Math.ceil(2*n+1)}}},t.prototype.updateInnerLabelNodes=function(){var e=[],r=[];this.innerLabelsSelection.each(function(y,S){var C=S.fontWeight,_=S.fontSize,w=S.fontFamily,x=S.color;y.fontStyle=S.fontStyle,y.fontWeight=C,y.fontSize=_,y.fontFamily=w,y.text=S.text,y.x=0,y.y=0,y.fill=x,y.textAlign="center",y.textBaseline="alphabetic",e.push(y.computeBBox()),r.push(S.margin)});for(var n=function(y){return 0===y?0:r[y]},i=function(y){return y===r.length-1?0:r[y]},a=e.reduce(function(y,S,m){return y+S.height+n(m)+i(m)},0),s=Math.max.apply(Math,Lp([],Fa(e.map(function(y){return y.width})))),l=this.getInnerRadius(),c=Math.sqrt(Math.pow(s/2,2)+Math.pow(a/2,2))<=(l>0?l:this.getOuterRadius()),d=[],h=0,p=-a/2;h<e.length;h++){var g=e[h].height+p+n(h);d.push(g),p=g+i(h)}this.innerLabelsSelection.each(function(y,S,m){y.y=d[m],y.visible=c})},t.prototype.getNodeClickEvent=function(e,r){return new NO(this.angleKey,this.calloutLabelKey,this.sectorLabelKey,this.radiusKey,e,r,this)},t.prototype.getNodeDoubleClickEvent=function(e,r){return new kO(this.angleKey,this.calloutLabelKey,this.sectorLabelKey,this.radiusKey,e,r,this)},t.prototype.getTooltipHtml=function(e){var r,n=this.angleKey;if(!n)return"";var i=this,s=i.angleName,l=i.radiusKey,u=i.radiusName,c=i.calloutLabelKey,d=i.sectorLabelKey,h=i.calloutLabelName,p=i.sectorLabelName,v=i.id,g=i.tooltip.renderer,y=e.datum,S=e.angleValue,m=e.radiusValue,C=e.sectorFormat.fill,_=e.calloutLabel,x=(void 0===_?{}:_).text,b=void 0===x?"":x,O="number"==typeof S?Dp(S):String(S),T=null===(r=this.title)||void 0===r?void 0:r.text,P={title:T,backgroundColor:C,content:(b?b+": ":"")+O};return g?st(g({datum:y,angleKey:n,angleValue:S,angleName:s,radiusKey:l,radiusValue:m,radiusName:u,calloutLabelKey:c,calloutLabelName:h,sectorLabelKey:d,sectorLabelName:p,title:T,color:C,seriesId:v}),P):st(P)},t.prototype.getLegendData=function(){var e,r,n,i=this,a=i.processedData,s=i.calloutLabelKey,l=i.legendItemKey,u=i.id,c=i.dataModel;if(!c||!a||0===a.data.length)return[];if(!l&&!s)return[];for(var d=this.getProcessedDataIndexes(c),h=d.angleIdx,p=d.radiusIdx,v=d.calloutLabelIdx,g=d.sectorLabelIdx,y=d.legendItemIdx,S=(null===(e=this.title)||void 0===e?void 0:e.showInLegend)&&this.title.text,m=[],C=0;C<a.data.length;C++){var _=a.data[C],w=_.datum,x=_.values,b=[];S&&b.push(S);var O=this.getLabels(w,2*Math.PI,2*Math.PI,!1,x[h],x[p],x[v],x[g],x[y]);if(l&&void 0!==O.legendItem?b.push(O.legendItem.text):s&&void 0!==(null===(r=O.calloutLabel)||void 0===r?void 0:r.text)&&b.push(null===(n=O.calloutLabel)||void 0===n?void 0:n.text),0!==b.length){var T=this.getSectorFormat(w,C,C,!1);m.push({legendType:"category",id:u,itemId:C,seriesId:u,enabled:this.seriesItemEnabled[C],label:{text:b.join(" - ")},marker:{fill:T.fill,stroke:T.stroke,fillOpacity:this.fillOpacity,strokeOpacity:this.strokeOpacity}})}}return m},t.prototype.onLegendItemClick=function(e){var r=e.enabled,n=e.itemId,i=e.series;i.id===this.id?this.toggleSeriesItem(n,r):"pie"===i.type&&this.toggleOtherSeriesItems(i,n,r)},t.prototype.toggleSeriesItem=function(e,r){this.seriesItemEnabled[e]=r,this.nodeDataRefresh=!0},t.prototype.toggleOtherSeriesItems=function(e,r,n){var a,s,i=this,c=this.dataModel;if(this.legendItemKey&&c){var d=e.legendItemKey&&(null===(a=e.data)||void 0===a?void 0:a.find(function(p,v){return v===r})[e.legendItemKey]);if(d){var h=c.resolveProcessedDataIndexById(this,"legendItemValue").index;null===(s=this.processedData)||void 0===s||s.data.forEach(function(p,v){p.values[h]===d&&i.toggleSeriesItem(v,n)})}}},t.prototype.animateEmptyUpdateReady=function(){var r,n,e=this,i=null!==(n=null===(r=this.ctx.animationManager)||void 0===r?void 0:r.defaultOptions.duration)&&void 0!==n?n:1e3,s=Math.PI/-2+Xt(this.rotation);this.groupSelection.selectByTag(Ar.Sector).forEach(function(u){var c,d=u.datum;null===(c=e.ctx.animationManager)||void 0===c||c.animateMany(e.id+"_empty-update-ready_"+u.id,[{from:s,to:d.startAngle},{from:s,to:d.endAngle}],{duration:i,ease:Hi,onUpdate:function(h){var p=Fa(h,2),g=p[1];u.startAngle=p[0],u.endAngle=g}})});var l={from:0,to:1,delay:i,duration:200};this.calloutLabelSelection.each(function(u){var c;null===(c=e.ctx.animationManager)||void 0===c||c.animate(e.id+"_empty-update-ready_"+u.id,mt(mt({},l),{onUpdate:function(d){u.opacity=d}}))}),this.sectorLabelSelection.each(function(u){var c;null===(c=e.ctx.animationManager)||void 0===c||c.animate(e.id+"_empty-update-ready_"+u.id,mt(mt({},l),{onUpdate:function(d){u.opacity=d}}))}),this.innerLabelsSelection.each(function(u){var c;null===(c=e.ctx.animationManager)||void 0===c||c.animate(e.id+"_empty-update-ready_"+u.id,mt(mt({},l),{onUpdate:function(d){u.opacity=d}}))})},t.prototype.animateReadyUpdateReady=function(){this.groupSelection.selectByTag(Ar.Sector).forEach(function(e){var r=e.datum;e.startAngle=r.startAngle,e.endAngle=r.endAngle})},t.className="PieSeries",t.type="pie",ce([A(at)],t.prototype,"angleKey",void 0),ce([A(at)],t.prototype,"angleName",void 0),ce([A(oe)],t.prototype,"radiusKey",void 0),ce([A(oe)],t.prototype,"radiusName",void 0),ce([A(_e(0))],t.prototype,"radiusMin",void 0),ce([A(_e(0))],t.prototype,"radiusMax",void 0),ce([A(oe)],t.prototype,"calloutLabelKey",void 0),ce([A(oe)],t.prototype,"calloutLabelName",void 0),ce([A(oe)],t.prototype,"sectorLabelKey",void 0),ce([A(oe)],t.prototype,"sectorLabelName",void 0),ce([A(oe)],t.prototype,"legendItemKey",void 0),ce([A(Ca)],t.prototype,"fills",void 0),ce([A(Ca)],t.prototype,"strokes",void 0),ce([A(X(0,1))],t.prototype,"fillOpacity",void 0),ce([A(X(0,1))],t.prototype,"strokeOpacity",void 0),ce([A(Vi)],t.prototype,"lineDash",void 0),ce([A(X(0))],t.prototype,"lineDashOffset",void 0),ce([A(ke)],t.prototype,"formatter",void 0),ce([A(X(-360,360))],t.prototype,"rotation",void 0),ce([A(X())],t.prototype,"outerRadiusOffset",void 0),ce([A(X(0))],t.prototype,"outerRadiusRatio",void 0),ce([A(X())],t.prototype,"innerRadiusOffset",void 0),ce([A(X(0))],t.prototype,"innerRadiusRatio",void 0),ce([A(X(0))],t.prototype,"strokeWidth",void 0),t}(Ip),Ia=function(){return Ia=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},Ia.apply(this,arguments)},La={constructors:{},constructedArrays:new WeakMap},Gp={constructors:{title:Zi,subtitle:Zi,footnote:Zi,shadow:Nc,innerCircle:UO,"axes[].title":AO,"series[].innerLabels[]":HO},allowedTypes:{"legend.pagination.marker.shape":["primitive","function"],"series[].marker.shape":["primitive","function"],"axis[].tick.count":["primitive","class-instance"]}};function Vp(){return{constructors:Ia(Ia({},Gp.constructors),La.constructors),constructedArrays:La.constructedArrays,allowedTypes:Ia({},Gp.allowedTypes)}}var YO={top:{xTranslationDirection:0,yTranslationDirection:-1},bottom:{xTranslationDirection:0,yTranslationDirection:1},left:{xTranslationDirection:-1,yTranslationDirection:0},right:{xTranslationDirection:1,yTranslationDirection:0},topLeft:{xTranslationDirection:1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:-1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:1},bottomRight:{xTranslationDirection:-1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:1,yTranslationDirection:0},insideRight:{xTranslationDirection:-1,yTranslationDirection:0},insideTop:{xTranslationDirection:0,yTranslationDirection:1},insideBottom:{xTranslationDirection:0,yTranslationDirection:-1},insideTopLeft:{xTranslationDirection:1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomRight:{xTranslationDirection:-1,yTranslationDirection:-1}},$O={top:{xTranslationDirection:1,yTranslationDirection:0},bottom:{xTranslationDirection:-1,yTranslationDirection:0},left:{xTranslationDirection:0,yTranslationDirection:-1},right:{xTranslationDirection:0,yTranslationDirection:1},topLeft:{xTranslationDirection:-1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},bottomRight:{xTranslationDirection:1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:0,yTranslationDirection:1},insideRight:{xTranslationDirection:0,yTranslationDirection:-1},insideTop:{xTranslationDirection:-1,yTranslationDirection:0},insideBottom:{xTranslationDirection:1,yTranslationDirection:0},insideTopLeft:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:-1},insideBottomRight:{xTranslationDirection:1,yTranslationDirection:-1}},Vc=function(o){var e=o.xEnd,r=o.yStart,n=o.yEnd;return o.yDirection?{x:e/2,y:r}:{x:e,y:isNaN(n)?r:(r+n)/2}},Bp=function(o){var r=o.xEnd,n=o.yStart,i=o.yEnd;return o.yDirection?{x:o.xStart,y:isNaN(i)?n:(n+i)/2}:{x:r/2,y:n}},jp=function(o){var e=o.xEnd,r=o.yStart,n=o.yEnd;return o.yDirection?{x:e,y:isNaN(n)?r:(r+n)/2}:{x:e/2,y:isNaN(n)?r:n}},zp=function(o){var e=o.xStart,n=o.yStart,i=o.yEnd;return o.yDirection?{x:o.xEnd/2,y:isNaN(i)?n:i}:{x:e,y:isNaN(i)?n:(n+i)/2}},Hp=function(o){var n=o.yStart;return o.yDirection?{x:o.xStart/2,y:n}:{x:o.xEnd,y:n}},Up=function(o){var e=o.xStart,r=o.yStart,n=o.yEnd;return o.yDirection?{x:e,y:isNaN(n)?r:n}:{x:e,y:r}},Wp=function(o){var e=o.xEnd,r=o.yStart,n=o.yEnd;return o.yDirection?{x:e,y:r}:{x:e,y:isNaN(n)?r:n}},Kp=function(o){var e=o.xStart,n=o.yStart,i=o.yEnd;return o.yDirection?{x:o.xEnd,y:isNaN(i)?n:i}:{x:e,y:isNaN(i)?n:i}},qO={top:{c:Vc},bottom:{c:zp},left:{c:Bp},right:{c:jp},topLeft:{c:Hp},topRight:{c:Wp},bottomLeft:{c:Up},bottomRight:{c:Kp},inside:{c:function(o){var e=o.yStart,r=o.yEnd;return{x:o.xEnd/2,y:isNaN(r)?e:(e+r)/2}}},insideLeft:{c:Bp},insideRight:{c:jp},insideTop:{c:Vc},insideBottom:{c:zp},insideTopLeft:{c:Hp},insideBottomLeft:{c:Up},insideTopRight:{c:Wp},insideBottomRight:{c:Kp}},JO=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Tl=function(){return Tl=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},Tl.apply(this,arguments)},oi=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},eE=function(o){function t(){var e=o.call(this)||this;return e.x1=0,e.y1=0,e.x2=0,e.y2=0,e.startLine=!1,e.endLine=!1,e.isRange=!1,e.restoreOwnStyles(),e}return JO(t,o),t.prototype.computeBBox=function(){return new me(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)},t.prototype.isPointInPath=function(e,r){return!1},t.prototype.render=function(e){var r,n=e.ctx,a=e.stats;if(this.dirty!==$.NONE||e.forceRender){this.computeTransformMatrix(),this.matrix.toContext(n);var s=this,l=s.x1,u=s.y1,c=s.x2,d=s.y2;l=this.align(l),u=this.align(u),c=this.align(c),d=this.align(d);var h=this,p=h.fill,v=h.opacity;if(h.isRange&&p){var S=this.fillOpacity;n.fillStyle=p,n.globalAlpha=v*S,n.beginPath(),n.moveTo(l,u),n.lineTo(c,u),n.lineTo(c,d),n.lineTo(l,d),n.closePath(),n.fill()}var m=this,C=m.stroke,_=m.strokeWidth,w=m.startLine,x=m.endLine;if((w||x)&&C&&_){var O=this,T=O.strokeOpacity,E=O.lineDash,P=O.lineDashOffset,D=O.lineCap,R=O.lineJoin;n.strokeStyle=C,n.globalAlpha=v*T,n.lineWidth=_,E&&n.setLineDash(E),P&&(n.lineDashOffset=P),D&&(n.lineCap=D),R&&(n.lineJoin=R),n.beginPath(),w&&(n.moveTo(l,u),n.lineTo(c,u)),x&&(n.moveTo(c,d),n.lineTo(l,d)),n.stroke()}null===(r=this.fillShadow)||void 0===r||r.markClean(),o.prototype.render.call(this,e)}else a&&(a.nodesSkipped+=this.nodeCount.count)},t.className="Range",t.defaultStyles=Tl(Tl({},_r.defaultStyles),{strokeWidth:1}),oi([ee({redraw:$.MINOR})],t.prototype,"x1",void 0),oi([ee({redraw:$.MINOR})],t.prototype,"y1",void 0),oi([ee({redraw:$.MINOR})],t.prototype,"x2",void 0),oi([ee({redraw:$.MINOR})],t.prototype,"y2",void 0),oi([ee({redraw:$.MINOR})],t.prototype,"startLine",void 0),oi([ee({redraw:$.MINOR})],t.prototype,"endLine",void 0),oi([ee({redraw:$.MINOR})],t.prototype,"isRange",void 0),t}(_r),Ye=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Jr=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Yp=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},tE=["top","left","right","bottom","topLeft","topRight","bottomLeft","bottomRight","inside","insideLeft","insideRight","insideTop","insideBottom","insideTopLeft","insideBottomLeft","insideTopRight","insideBottomRight"],rE=ne(function(o,t){return Ne(o,t,function(e){return tE.includes(e)})},"expecting an optional crossLine label position keyword such as 'topLeft', 'topRight' or 'inside'"),nE=ne(function(o,t){return Ne(o,t,function(e){return"range"===e||"line"===e})},"expecting a crossLine type keyword such as 'range' or 'line'"),iE=function(){function o(){this.enabled=void 0,this.text=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)",this.position=void 0,this.rotation=void 0,this.parallel=void 0}return Ye([A(wr)],o.prototype,"enabled",void 0),Ye([A(oe)],o.prototype,"text",void 0),Ye([A($n)],o.prototype,"fontStyle",void 0),Ye([A(Xn)],o.prototype,"fontWeight",void 0),Ye([A(X(0))],o.prototype,"fontSize",void 0),Ye([A(at)],o.prototype,"fontFamily",void 0),Ye([A(X(0))],o.prototype,"padding",void 0),Ye([A(De)],o.prototype,"color",void 0),Ye([A(rE)],o.prototype,"position",void 0),Ye([A(_e(-360,360))],o.prototype,"rotation",void 0),Ye([A(wr)],o.prototype,"parallel",void 0),o}(),oE=function(){function o(){this.id=Ur(this),this.enabled=void 0,this.type=void 0,this.range=void 0,this.value=void 0,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0,this.strokeOpacity=void 0,this.lineDash=void 0,this.label=new iE,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction=Z.X,this.group=new re({name:""+this.id,layer:!0,zIndex:o.LINE_LAYER_ZINDEX}),this.crossLineRange=new eE,this.crossLineLabel=new Ee,this.labelPoint=void 0,this.data=[],this.startLine=!1,this.endLine=!1,this.isRange=!1;var t=this,r=t.crossLineRange;t.group.append([r,t.crossLineLabel]),r.pointerEvents=Ct.None}return o.prototype.update=function(t){if(this.enabled&&(this.group.visible=t,t)){if(!this.createNodeData())return void(this.group.visible=!1);this.updateNodes(),this.group.zIndex=this.getZIndex(this.isRange)}},o.prototype.updateNodes=function(){this.updateRangeNode(),this.label.enabled&&(this.updateLabel(),this.positionLabel())},o.prototype.createNodeData=function(){var t,e,r,n,i,a=this,s=a.scale,c=a.direction,d=a.label.position,h=void 0===d?"top":d,p=a.clippedRange,v=a.strokeWidth,g=void 0===v?0:v;if(!s)return!1;var y=null!==(n=s.bandwidth)&&void 0!==n?n:0,S=function(k){return Math.max(Math.min.apply(Math,Yp([],Jr(p))),Math.min(Math.max.apply(Math,Yp([],Jr(p))),k))},m=Jr([0,a.sideFlag*a.gridLength],2),C=m[0],_=m[1],w=Jr(this.getRange(),2),x=w[0],b=w[1],O=Jr([Number(s.convert(x,{strict:!1})),s.convert(b,{strict:!1})+y],2),T=O[0],E=O[1];T=S(T),E=S(E),x=(t=Jr([Number(s.convert(x)),s.convert(b)+y],2))[0],b=t[1];var P=!isNaN(T)&&!isNaN(E)&&(x===T||b===E||T!==E)&&Math.abs(E-T)>0;if(P&&T!==Math.min(T,E)&&(T=(e=Jr([Math.min(T,E),Math.max(T,E)],2))[0],E=e[1],x=(r=Jr([b,x],2))[0],b=r[1]),this.isRange=P,this.startLine=!isNaN(x)&&g>0&&x===T,this.endLine=!isNaN(b)&&g>0&&b===E,!P&&!this.startLine&&!this.endLine)return!1;if(this.data=[T,E],this.label.enabled){var M=(null!==(i=qO[h])&&void 0!==i?i:{}).c,I=(void 0===M?Vc:M)({yDirection:c===Z.Y,xStart:C,xEnd:_,yStart:T,yEnd:E});this.labelPoint={x:I.x,y:I.y}}return!0},o.prototype.updateRangeNode=function(){var t,e=this,r=e.crossLineRange,n=e.sideFlag,i=e.gridLength,a=e.data,s=e.startLine,l=e.endLine,u=e.isRange,c=e.fill,d=e.fillOpacity,h=e.stroke,p=e.strokeWidth,v=e.lineDash;r.x1=0,r.x2=n*i,r.y1=a[0],r.y2=a[1],r.startLine=s,r.endLine=l,r.isRange=u,r.fill=c,r.fillOpacity=d??1,r.stroke=h,r.strokeWidth=p??1,r.strokeOpacity=null!==(t=this.strokeOpacity)&&void 0!==t?t:1,r.lineDash=v},o.prototype.updateLabel=function(){var e=this.crossLineLabel,r=this.label;r.text&&(e.fontStyle=r.fontStyle,e.fontWeight=r.fontWeight,e.fontSize=r.fontSize,e.fontFamily=r.fontFamily,e.fill=r.color,e.text=r.text)},o.prototype.positionLabel=function(){var t=this,e=t.crossLineLabel,r=t.labelPoint,n=void 0===r?{}:r,i=n.x,a=void 0===i?void 0:i,s=n.y,l=void 0===s?void 0:s,u=t.label,h=u.position,p=void 0===h?"top":h,v=u.padding,g=void 0===v?0:v,y=t.direction;if(void 0!==a&&void 0!==l){var C=Mc({rotation:u.rotation,parallel:u.parallel,regularFlipRotation:t.regularFlipRotation,parallelFlipRotation:t.parallelFlipRotation});e.rotation=C.defaultRotation+C.configuredRotation,e.textBaseline="middle",e.textAlign="center";var x=this.computeLabelBBox();if(x){var O=function XO(o){var t=o.yDirection,e=o.padding,r=void 0===e?0:e,n=o.position,a=o.bbox,l=(t?YO:$O)[void 0===n?"top":n];return{xTranslation:l.xTranslationDirection*(r+(t?a.width:a.height)/2),yTranslation:l.yTranslationDirection*(r+(t?a.height:a.width)/2)}}({yDirection:y===Z.Y,padding:g,position:p,bbox:x}),E=O.yTranslation;e.translationX=a+O.xTranslation,e.translationY=l+E}}},o.prototype.getZIndex=function(t){return void 0===t&&(t=!1),t?o.RANGE_LAYER_ZINDEX:o.LINE_LAYER_ZINDEX},o.prototype.getRange=function(){var t=this,i=t.scale instanceof Pe,a=Jr(t.range??[t.value,void 0],2),s=a[0],l=a[1];return!i&&void 0===l&&(l=s),s=null!=Js(s,i)?s:void 0,l=null!=Js(l,i)?l:void 0,i&&s===l&&(l=void 0),void 0===s&&void 0!==l&&(s=l,l=void 0),[s,l]},o.prototype.computeLabelBBox=function(){return this.crossLineLabel.computeTransformedBBox()},o.prototype.calculatePadding=function(t){var e,r,n,i,a,s,l,u,c=this,v=c.direction,g=c.label,y=g.padding,S=void 0===y?0:y,m=g.position,C=void 0===m?"top":m;if(c.isRange||c.startLine||c.endLine){var _=this.computeLabelBBox(),w=_?.x,x=_?.y;if(_&&null!=w&&null!=x){var b=function QO(o){var t=o.yDirection,e=o.bbox,r=o.padding,n=void 0===r?0:r,i=o.position,a=void 0===i?"top":i,s={};return a.startsWith("inside")||("top"!==a||t?"bottom"!==a||t?"left"===a&&t?s.left=n+e.width:"right"===a&&t&&(s.right=n+e.width):s.bottom=n+e.height:s.top=n+e.height),s}({yDirection:v===Z.Y,padding:S,position:C,bbox:_});t.left=Math.max(null!==(e=t.left)&&void 0!==e?e:0,null!==(r=b.left)&&void 0!==r?r:0),t.right=Math.max(null!==(n=t.right)&&void 0!==n?n:0,null!==(i=b.right)&&void 0!==i?i:0),t.top=Math.max(null!==(a=t.top)&&void 0!==a?a:0,null!==(s=b.top)&&void 0!==s?s:0),t.bottom=Math.max(null!==(l=t.bottom)&&void 0!==l?l:0,null!==(u=b.bottom)&&void 0!==u?u:0)}}},o.LINE_LAYER_ZINDEX=We.SERIES_CROSSLINE_LINE_ZINDEX,o.RANGE_LAYER_ZINDEX=We.SERIES_CROSSLINE_RANGE_ZINDEX,o.className="CrossLine",Ye([A(wr)],o.prototype,"enabled",void 0),Ye([A(nE)],o.prototype,"type",void 0),Ye([A(ac(2))],o.prototype,"range",void 0),Ye([A(De)],o.prototype,"fill",void 0),Ye([A(_e(0,1))],o.prototype,"fillOpacity",void 0),Ye([A(De)],o.prototype,"stroke",void 0),Ye([A(_e())],o.prototype,"strokeWidth",void 0),Ye([A(_e(0,1))],o.prototype,"strokeOpacity",void 0),Ye([A(Vi)],o.prototype,"lineDash",void 0),o}(),aE=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Pl=function(){return Pl=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},Pl.apply(this,arguments)},$p=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Al=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.thickness=0,e.position="left",e}return aE(t,o),Object.defineProperty(t.prototype,"direction",{get:function(){return["top","bottom"].includes(this.position)?Z.X:Z.Y},enumerable:!1,configurable:!0}),t.prototype.updateDirection=function(){switch(this.position){case"top":this.rotation=-90,this.label.mirrored=!0,this.label.parallel=!0;break;case"right":this.rotation=0,this.label.mirrored=!0,this.label.parallel=!1;break;case"bottom":this.rotation=-90,this.label.mirrored=!1,this.label.parallel=!0;break;case"left":this.rotation=0,this.label.mirrored=!1,this.label.parallel=!1}this.axisContext&&(this.axisContext.position=this.position,this.axisContext.direction=this.direction)},t.prototype.update=function(e){return this.updateDirection(),o.prototype.update.call(this,e)},t.prototype.createAxisContext=function(){return Pl(Pl({},o.prototype.createAxisContext.call(this)),{position:this.position})},t.prototype.assignCrossLineArrayConstructor=function(e){!function KO(o,t){var e;null===(e=La.constructedArrays)||void 0===e||e.set(o,t)}(e,oE)},$p([A(X(0))],t.prototype,"thickness",void 0),$p([A(wh)],t.prototype,"position",void 0),t}(Ap),sE=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Xp=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Qp=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},io=function(o){function t(e){var r=o.call(this,e,new bt)||this;return r._paddingOverrideEnabled=!1,r.groupPaddingInner=.1,r.includeInvisibleDomains=!0,r}return sE(t,o),Object.defineProperty(t.prototype,"paddingInner",{get:function(){return this._paddingOverrideEnabled=!0,this.scale.paddingInner},set:function(e){this._paddingOverrideEnabled=!0,this.scale.paddingInner=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"paddingOuter",{get:function(){return this.scale.paddingOuter},set:function(e){this.scale.paddingOuter=e},enumerable:!1,configurable:!0}),t.prototype.normaliseDataDomain=function(e){var r,n,i,a,s={};try{for(var l=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),u=l.next();!u.done;u=l.next()){var c=u.value;null!==(i=s[a=String(c)])&&void 0!==i||(s[a]=c)}}catch(d){r={error:d}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return Object.values(s)},t.prototype.calculateDomain=function(){if(!this._paddingOverrideEnabled){var r=this.boundSeries.map(function(n){var i;return null===(i=n.getBandScalePadding)||void 0===i?void 0:i.call(n)}).filter(function(n){return null!=n});r.length>0&&(this.scale.paddingInner=Math.min.apply(Math,Qp([],Xp(r.map(function(n){return n.inner})))),this.scale.paddingOuter=Math.max.apply(Math,Qp([],Xp(r.map(function(n){return n.outer})))))}return o.prototype.calculateDomain.call(this)},t.className="CategoryAxis",t.type="category",function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);n>3&&i&&Object.defineProperty(t,e,i)}([A(X(0,1))],t.prototype,"groupPaddingInner",void 0),t}(Al),Zp=function(){function o(t,e,r){void 0===t&&(t=""),void 0===r&&(r=0),this.x=0,this.y=0,this.subtreeLeft=NaN,this.subtreeRight=NaN,this.screenX=0,this.screenY=0,this.children=[],this.leafCount=0,this.prelim=0,this.mod=0,this.ancestor=this,this.change=0,this.shift=0,this.label=t,this.parent=e,this.depth=e?e.depth+1:0,this.number=r}return o.prototype.getLeftSibling=function(){return this.number>0&&this.parent?this.parent.children[this.number-1]:void 0},o.prototype.getLeftmostSibling=function(){return this.number>0&&this.parent?this.parent.children[0]:void 0},o.prototype.nextLeft=function(){return this.children?this.children[0]:this.thread},o.prototype.nextRight=function(){return this.children?this.children[this.children.length-1]:this.thread},o.prototype.getSiblings=function(){var t=this;return this.parent?this.parent.children.filter(function(e,r){return r!==t.number}):[]},o}();function fE(o,t,e){var n=e/(t.number-o.number);t.change-=n,t.shift+=e,o.change+=n,t.prelim+=e,t.mod+=e}function hE(o,t,e){return t.getSiblings().indexOf(o.ancestor)>=0?o.ancestor:e}function qp(o,t){var e=o.children;if(e.length){var r=e[0];e.forEach(function(a){qp(a,t),r=function vE(o,t,e){var r=o.getLeftSibling();if(r){for(var n=o,i=o,a=r,s=i.getLeftmostSibling(),l=i.mod,u=n.mod,c=a.mod,d=s.mod;a.nextRight()&&i.nextLeft();){a=a.nextRight(),i=i.nextLeft(),s=s.nextLeft(),(n=n.nextRight()).ancestor=o;var h=a.prelim+c-(i.prelim+l)+e;h>0&&(fE(hE(a,o,t),o,h),l+=h,u+=h),c+=a.mod,l+=i.mod,d+=s.mod,u+=n.mod}a.nextRight()&&!n.nextRight()?(n.thread=a.nextRight(),n.mod+=c-u):(i.nextLeft()&&!s.nextLeft()&&(s.thread=i.nextLeft(),s.mod+=l-d),t=o)}return t}(a,r,t)}),function pE(o){var t=o.children;if(t)for(var e=0,r=0,n=t.length-1;n>=0;n--){var i=t[n];i.prelim+=e,i.mod+=e,e+=i.shift+(r+=i.change)}}(o);var n=(e[0].prelim+e[e.length-1].prelim)/2;(i=o.getLeftSibling())?(o.prelim=i.prelim+t,o.mod=o.prelim-n):o.prelim=n}else{var i=o.getLeftSibling();o.prelim=i?i.prelim+t:0}}var Jp=function(){function o(){this.top=1/0,this.right=-1/0,this.bottom=-1/0,this.left=1/0}return o.prototype.update=function(t,e){var r=e(t),n=r.x,i=r.y;n>this.right&&(this.right=n),n<this.left&&(this.left=n),i>this.bottom&&(this.bottom=i),i<this.top&&(this.top=i)},o}();function ev(o,t,e){o.x=o.prelim+t,o.y=o.depth,e.update(o),o.children.forEach(function(r){return ev(r,t+o.mod,e)})}function tv(o){var t=o.children,e=0;t.forEach(function(r){tv(r),r.children.length?e+=r.leafCount:e++}),o.leafCount=e,t.length?(o.subtreeLeft=t[0].subtreeLeft,o.subtreeRight=t[o.children.length-1].subtreeRight,o.x=(o.subtreeLeft+o.subtreeRight)/2):(o.subtreeLeft=o.x,o.subtreeRight=o.x)}function gE(o){var t=new yE;return qp(o,1),ev(o,-o.prelim,t),tv(o),t}var yE=function(){function o(){this.dimensions=new Jp,this.leafCount=0,this.nodes=[],this.leafNodes=[],this.nonLeafNodes=[],this.depth=0}return o.prototype.update=function(t){this.dimensions.update(t,function(e){return{x:e.x,y:e.y}}),t.children.length?this.nonLeafNodes.push(t):(this.leafCount++,this.leafNodes.push(t)),t.depth>this.depth&&(this.depth=t.depth),this.nodes.push(t)},o.prototype.resize=function(t,e,r,n,i){void 0===r&&(r=0),void 0===n&&(n=0),void 0===i&&(i=!1);var a=this.leafCount-1,s=this.depth,l=this.dimensions,u=1,c=1;t>0&&a&&(u=t/a/((l.right-l.left)/a),i&&(u=-u)),e>0&&s&&(c=e/s/((l.bottom-l.top)/s));var g=new Jp;this.nodes.forEach(function(m){m.screenX=m.x*u,m.screenY=m.y*c,g.update(m,function(C){return{x:C.screenX,y:C.screenY}})});var y=-g.left,S=-g.top;this.nodes.forEach(function(m){m.screenX+=y+r,m.screenY+=S+n})},o}(),rv=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),nv=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},CE=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.grid=!1,e}return rv(t,o),nv([A(Te)],t.prototype,"grid",void 0),t}(Ep),Dl=function(o){function t(e){var r=o.call(this,e,new bt)||this;r.tickScale=new bt,r.translation={x:0,y:0},r.line=new Pp,r.label=new CE,r.labelColor="rgba(87, 87, 87, 1)",r.includeInvisibleDomains=!0;var i=r.tickLineGroup,a=r.tickLabelGroup,s=r.gridLineGroup,l=r.tickScale,u=r.scale;return u.paddingOuter=.1,u.paddingInner=2*u.paddingOuter,r.range=u.range.slice(),r.refreshScale(),l.paddingInner=1,l.paddingOuter=0,r.gridLineSelection=Fe.select(s,Ze),r.axisLineSelection=Fe.select(i,Ze),r.separatorSelection=Fe.select(i,Ze),r.labelSelection=Fe.select(a,Ee),r}return rv(t,o),t.prototype.updateRange=function(){var e=this,r=e.range,n=e.visibleRange,a=(r[1]-r[0])/(n[1]-n[0]),l=r[0]-a*n[0];this.tickScale.range=e.scale.range=[l,l+a],this.resizeTickTree()},t.prototype.resizeTickTree=function(){var e,r=this.scale,n=r.domain.length?[r.convert(r.domain[0]),r.convert(r.domain[r.domain.length-1])]:r.range,i=this.tickTreeLayout,a=this.lineHeight;i&&i.resize(Math.abs(n[1]-n[0]),i.depth*a,(Math.min(n[0],n[1])||0)+(null!==(e=r.bandwidth)&&void 0!==e?e:0)/2,-i.depth*a,n[1]-n[0]<0)},Object.defineProperty(t.prototype,"lineHeight",{get:function(){return 1.5*this.label.fontSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gridLength",{get:function(){return this._gridLength},set:function(e){(this._gridLength&&!e||!this._gridLength&&e)&&(this.gridLineSelection.clear(),this.labelSelection.clear()),this._gridLength=e},enumerable:!1,configurable:!0}),t.prototype.calculateDomain=function(){var e,r,i=this.direction,s=[],l=void 0;this.boundSeries.filter(function(d){return d.visible}).forEach(function(d){if(i===Z.X)if(void 0===l){var h=d.getDomain(i);s.push(h),l="number"==typeof h[0]}else l&&s.push(d.getDomain(i));else s.push(d.getDomain(i))});var u=(e=new Array).concat.apply(e,function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o}([],function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i}(s))),c=null!==(r=kt(u))&&void 0!==r?r:u;this.dataDomain=this.normaliseDataDomain(c),this.scale.domain=this.dataDomain},t.prototype.normaliseDataDomain=function(e){var r=e.filter(function(a,s,l){return l.indexOf(a)===s}),n=function cE(o,t){void 0===t&&(t=!0);var e=new Zp,r=0;return t&&o.forEach(function(n){return r=Math.max(r,n.labels.length)}),o.forEach(function(n){if(t)for(;n.labels.length<r;)n.labels.unshift("");!function dE(o,t){var e=t.labels.slice().reverse(),r=e.length-1;e.forEach(function(n,i){var a=o.children,s=a.find(function(c){return c.label===n}),l=i!==r;if(s&&l)o=s;else{var u=new Zp(n,o);u.number=a.length,a.push(u),l&&(o=u)}})}(e,n)}),e}(r);this.tickTreeLayout=gE(n);var i=r.slice();return i.push(""),this.tickScale.domain=i,this.resizeTickTree(),r},t.prototype.update=function(e){var r=this;this.updateDirection(),this.calculateDomain(),this.updateRange();var n=this,i=n.scale,a=n.label,s=n.label.parallel,l=n.moduleCtx.callbackCache,u=n.tickScale,c=n.range,d=n.title,h=n.title,v=(void 0===h?{}:h).formatter,g=void 0===v?function(z){return z.defaultValue}:v,y=n._titleCaption,S=i.range[0],m=i.range[1],_=Math.abs(m-S)/i.domain.length||0,w=Xt(this.rotation),x=Math.abs(Math.cos(w))<1e-8,b=a.getSideFlag();this.updatePosition({rotation:w,sideFlag:b}),y.node.visible=!1;var O=this.lineHeight,T=this.tickTreeLayout,E=i.ticks(),P=T?T.nodes:[],D=!!T&&T.depth>1,R=u.ticks(),M=Mc({rotation:a.rotation,parallel:s,regularFlipRotation:_t(w-Math.PI/2),parallelFlipRotation:_t(w)}),F=M.defaultRotation,I=M.configuredRotation,L=M.parallelFlipFlag,N=this.gridLineSelection.update(this.gridLength?R:[]),k=this.labelSelection.update(P),U=a.formatter,G=new Map,B=0;k.each(function(z,J,ue){var he;z.fontStyle=a.fontStyle,z.fontWeight=a.fontWeight,z.fontSize=a.fontSize,z.fontFamily=a.fontFamily,z.fill=a.color,z.textBaseline=-1===L?"bottom":"hanging",z.textAlign="center",z.translationX=J.screenY-.25*a.fontSize,z.translationY=J.screenX,0===ue?d?.enabled&&E.length>0?(z.visible=!0,z.text=l.call(g,r.getTitleFormatterParams()),z.fontSize=d.fontSize,z.fontStyle=d.fontStyle,z.fontWeight=d.fontWeight,z.fontFamily=d.fontFamily,z.textBaseline="hanging"):z.visible=!1:U?(z.text=null!==(he=l.call(U,{value:String(J.label),index:ue}))&&void 0!==he?he:String(J.label),z.visible=J.screenX>=c[0]&&J.screenX<=c[1]):(z.text=String(J.label),z.visible=J.screenX>=c[0]&&J.screenX<=c[1]);var je=z.computeBBox();G.set(z.id,je),je.width>B&&(B=je.width)});var j=b*a.padding,K=this.label.grid,V=[];k.each(function(z,J,ue){if(z.x=j,z.rotationCenterX=j,J.children.length){z.translationX-=B-O+r.label.padding;var je=J.leafCount*_;(he=G.get(z.id))&&he.width>je?z.visible=!1:z.rotation=x?F:-Math.PI/2}else{var he;z.rotation=I,z.textAlign="end",z.textBaseline="middle",(he=G.get(z.id))&&he.height>_&&(z.visible=!1)}if(J.parent&&D){var vt=J.children.length?J.screenX-J.leafCount*_/2:J.screenX-_/2;if(J.children.length){var vr=-B-2*r.label.padding+J.screenY;V.push({y:vt,x1:vr+O,x2:vr,toString:function(){return String(ue)}})}else(J.number!==J.children.length-1||K)&&V.push({y:vt,x1:0,x2:-B-2*r.label.padding,toString:function(){return String(ue)}})}});var H=0;V.forEach(function(z){return H=Math.min(H,z.x2)}),V.push({y:Math.max(S,m),x1:0,x2:H,toString:function(){return String(V.length)}}),this.separatorSelection.update(V).each(function(z,J){z.x1=J.x1,z.x2=J.x2,z.y1=J.y,z.y2=J.y,z.visible=J.y>=c[0]-1e-7&&J.y<=c[1]+1e-7,z.stroke=r.tick.color,z.fill=void 0,z.strokeWidth=1}),this.gridLineSelection=N,this.labelSelection=k;for(var ie=T?T.depth+1:1,te=[],ve=0;ve<ie;ve++)te.push(ve);if(this.axisLineSelection.update(te).each(function(z,J,ue){var he=ue>0?-B-2*r.label.padding-(ue-1)*O:0;z.x1=he,z.x2=he,z.y1=c[0],z.y2=c[1],z.strokeWidth=r.line.width,z.stroke=r.line.color,z.visible=E.length>0&&(0===ue||K&&D)}),this.gridLength){var de=this.gridStyle,fe=de.length;N.each(function(z,J,ue){var he=Math.round(u.convert(J));z.x1=0,z.x2=-b*r.gridLength,z.y1=he,z.y2=he,z.visible=he>=c[0]&&he<=c[1];var je=de[ue%fe];z.stroke=je.stroke,z.strokeWidth=r.tick.width,z.lineDash=je.lineDash,z.fill=void 0})}return e},t.className="GroupedCategoryAxis",t.type="groupedCategory",nv([A(De)],t.prototype,"labelColor",void 0),t}(Al),_E=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Na=function(){return Na=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},Na.apply(this,arguments)},iv=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Bc=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},bE=["top","right","bottom","left"],ov=function(o){function t(e,r,n){void 0===e&&(e=window.document);var i=o.call(this,e,r,n)||this;return i.paired=!0,i._lastAxisWidths={top:0,bottom:0,left:0,right:0},i._lastVisibility={crossLines:!0,series:!0},i}return _E(t,o),t.prototype.performLayout=function(){return function(o,t,e,r){return new(e||(e=Promise))(function(i,a){function s(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):function n(i){return i instanceof e?i:new e(function(a){a(i)})}(c.value).then(s,l)}u((r=r.apply(o,t||[])).next())})}(this,void 0,void 0,function(){var e,r,n,i,a,s,l,u,c,h;return function(o,t){var r,n,i,a,e={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(!(i=(i=e.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){e=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){e.label=u[1];break}if(6===u[0]&&e.label<i[1]){e.label=i[1],i=u;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(u);break}i[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(o,e)}catch(c){u=[6,c],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}(this,function(p){switch(p.label){case 0:return[4,o.prototype.performLayout.call(this)];case 1:return e=p.sent(),r=this.updateAxes(e),n=r.seriesRect,a=r.clipSeries,this.seriesRoot.visible=(i=r.visibility).series,this.seriesRect=n,this.seriesRoot.translationX=Math.floor(n.x),this.seriesRoot.translationY=Math.floor(n.y),l=(s=this).seriesRoot,u=s.seriesAreaPadding,c=n.clone().grow({top:u.top,right:u.right,bottom:u.bottom,left:u.left}),h=c.clone().grow(20),this.hoverRect=h,this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},series:{rect:n,paddedRect:c,hoverRect:h,visible:i.series},axes:this.axes.map(function(v){return Na({id:v.id},v.getLayoutState())})}),a?l.setClipRectInGroupCoordinateSpace(n):l.setClipRectInGroupCoordinateSpace(),[2,e]}})})},t.prototype.updateAxes=function(e){var r,n,i,a=Na({},this._lastAxisWidths),s=Na({},this._lastVisibility),l=new Set(this._axes.map(function(w){return w.position}));try{for(var u=iv(Object.keys(a)),c=u.next();!c.done;c=u.next()){var d=c.value;l.has(d)||delete a[d]}}catch(w){r={error:w}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}var w,h=function(w,x){return!Object.keys(w).some(function(b){return null==a[b]})&&s.crossLines===x.crossLines&&s.series===x.series&&Object.entries(a).every(function(b){var O=Bc(b,2),E=O[1],P=w[O[0]];return null==E&&null==P||E===P})},v={},g={},y=!1,S=null===(i=this.seriesRect)||void 0===i?void 0:i.clone(),m=0;do{Object.assign(a,v),Object.assign(s,g);var C=this.updateAxesPass(a,e.clone(),S);if(v=Object.entries(w=C.axisWidths).reduce(function(x,b){var O=Bc(b,2),T=O[0],E=O[1];return E&&Math.abs(E)===1/0&&(E=0),x[T]=null!=E?Math.ceil(E):E,x},{}),g=C.visibility,y=C.clipSeries,S=C.seriesRect,m++>10){q.warn("unable to find stable axis layout.");break}}while(!h(v,g));return this.axes.forEach(function(w){if(w.setCrossLinesVisible(s.crossLines),S)switch(w.clipGrid(S.x,S.y,S.width+5,S.height+5),w.position){case"left":case"right":w.clipTickLines(e.x,S.y,e.width+5,S.height+5);break;case"top":case"bottom":w.clipTickLines(S.x,e.y,S.width+5,e.height+5)}}),this._lastAxisWidths=a,this._lastVisibility=s,{seriesRect:S,visibility:s,clipSeries:y}},t.prototype.updateAxesPass=function(e,r,n){var i=this,a=this.axes,s={},l={},u={series:!0,crossLines:!0},c=!1,d={},h=this.applySeriesPadding(r),p=n?this.buildCrossLinePadding(e):{},v=this.buildAxisBound(h,e,p,u),g=this.buildSeriesRect(v,e);return a.forEach(function(y){var S,m,C=y.position,_=void 0===C?"left":C,w=i.calculateAxisDimensions({axis:y,seriesRect:g,paddedBounds:h,axisWidths:e,newAxisWidths:l,primaryTickCounts:d,clipSeries:c,addInterAxisPadding:(null!==(S=s[_])&&void 0!==S?S:0)>0}),x=w.clipSeries,b=w.axisThickness,O=w.axisOffset;s[_]=(null!==(m=s[_])&&void 0!==m?m:0)+1,c=c||x,i.positionAxis({axis:y,axisBound:v,axisOffset:O,axisThickness:b,axisWidths:e,primaryTickCounts:d,seriesRect:g})}),{clipSeries:c,seriesRect:g,axisWidths:l,visibility:u}},t.prototype.buildCrossLinePadding=function(e){var r,n,i,a={};this.axes.forEach(function(p){p.crossLines&&p.crossLines.forEach(function(v){v.calculatePadding(a)})});try{for(var s=iv(Object.entries(a)),l=s.next();!l.done;l=s.next()){var u=Bc(l.value,2),c=u[0],d=u[1];a[c]=Math.max((void 0===d?0:d)-(null!==(i=e[c])&&void 0!==i?i:0),0)}}catch(p){r={error:p}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a},t.prototype.applySeriesPadding=function(e){var r=this,n=e.clone(),i=this.axes.slice().reverse();return bE.forEach(function(a){var s=r.seriesAreaPadding[a],l=i.find(function(u){return u.position===a});l?l.seriesAreaPadding=s:n.shrink(s,a)}),n},t.prototype.buildAxisBound=function(e,r,n,i){var a,s,l,u,c=e.clone(),d=n.top,h=void 0===d?0:d,p=n.right,g=n.bottom,S=n.left,m=void 0===S?0:S,C=m+(void 0===p?0:p),_=h+(void 0===g?0:g),w=(null!==(a=r.left)&&void 0!==a?a:0)+(null!==(s=r.right)&&void 0!==s?s:0)+C,x=(null!==(l=r.top)&&void 0!==l?l:0)+(null!==(u=r.bottom)&&void 0!==u?u:0)+_;return c.width<=w||c.height<=x?(i.crossLines=!1,i.series=!1,c):(c.x+=m,c.y+=h,c.width-=C,c.height-=_,c)},t.prototype.buildSeriesRect=function(e,r){var n=e.clone(),i=r.top,a=r.bottom,s=r.left,l=r.right;return n.x+=s??0,n.y+=i??0,n.width-=(s??0)+(l??0),n.height-=(i??0)+(a??0),n.width=Math.max(0,n.width),n.height=Math.max(0,n.height),n},t.prototype.clampToOutsideSeriesRect=function(e,r,n,i){var a=e.x,s=e.y;return(1===i?Math.min:Math.max)(r,[a,s,a+e.width,s+e.height][("x"===n?0:1)+(1===i?0:2)])},t.prototype.calculateAxisDimensions=function(e){var r,n,i,a,s,I,l=e.axis,u=e.seriesRect,c=e.paddedBounds,d=e.axisWidths,h=e.newAxisWidths,p=e.primaryTickCounts,v=e.addInterAxisPadding,g=e.clipSeries,y=l.position,S=void 0===y?"left":y,m=l.direction,_=null!==(r=h[S])&&void 0!==r?r:0;switch(S){case"top":case"bottom":l.range=[0,u.width],l.gridLength=u.height;break;case"right":case"left":l.range=(I=l)instanceof io||I instanceof Dl?[0,u.height]:[u.height,0],l.gridLength=u.width}var x=this.zoomManager.getAxisZoom(l.id)??{},b=x.min,T=x.max;l.visibleRange=[void 0===b?0:b,void 0===T?1:T],!g&&(l.visibleRange[0]>0||l.visibleRange[1]<1)&&(g=!0);var P=l.nice?p[m]:void 0;l.maxThickness=null!=l.thickness&&l.thickness>0?l.thickness:m===Z.Y?.3*c.width:.3*c.height,P=l.update(P),p[m]=null!==(n=p[m])&&void 0!==n?n:P;var R=0;if(null!=l.thickness&&l.thickness>0)R=l.thickness;else{var M=l.computeBBox();R=m===Z.X?M.height:M.width}return v&&(R+=15),R=Math.ceil(R),h[S]=(null!==(i=h[S])&&void 0!==i?i:0)+R,l.gridPadding=(null!==(a=d[S])&&void 0!==a?a:0)-(null!==(s=h[S])&&void 0!==s?s:0),{clipSeries:g,axisThickness:R,axisOffset:_}},t.prototype.positionAxis=function(e){var r,n,i,a,s=e.axis,l=e.axisBound,u=e.axisWidths,c=e.seriesRect,d=e.axisOffset,h=e.axisThickness;switch(s.position){case"top":s.translation.x=l.x+(null!==(r=u.left)&&void 0!==r?r:0),s.translation.y=this.clampToOutsideSeriesRect(c,l.y+1+d+h,"y",1);break;case"bottom":s.translation.x=l.x+(null!==(n=u.left)&&void 0!==n?n:0),s.translation.y=this.clampToOutsideSeriesRect(c,l.y+l.height+1-h-d,"y",-1);break;case"left":s.translation.y=l.y+(null!==(i=u.top)&&void 0!==i?i:0),s.translation.x=this.clampToOutsideSeriesRect(c,l.x+d+h,"x",1);break;case"right":s.translation.y=l.y+(null!==(a=u.top)&&void 0!==a?a:0),s.translation.x=this.clampToOutsideSeriesRect(c,l.x+l.width-h-d,"x",-1)}s.updatePosition({rotation:Xt(s.rotation),sideFlag:s.label.getSideFlag()})},t.className="CartesianChart",t.type="cartesian",t}(Oc),OE=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),av=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.shape="polygon",e}return OE(t,o),t.prototype.computeLabelsBBox=function(e,r){return null},t}(Ap),EE=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),sv=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},lv=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},uv=function(o){function t(e,r,n){void 0===e&&(e=window.document);var i=o.call(this,e,r,n)||this;return i.padding=new cl(40),i}return EE(t,o),t.prototype.performLayout=function(){return function(o,t,e,r){return new(e||(e=Promise))(function(i,a){function s(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):function n(i){return i instanceof e?i:new e(function(a){a(i)})}(c.value).then(s,l)}u((r=r.apply(o,t||[])).next())})}(this,void 0,void 0,function(){var e,r,i;return function(o,t){var r,n,i,a,e={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(!(i=(i=e.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){e=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){e.label=u[1];break}if(6===u[0]&&e.label<i[1]){e.label=i[1],i=u;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(u);break}i[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(o,e)}catch(c){u=[6,c],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}(this,function(a){switch(a.label){case 0:return[4,o.prototype.performLayout.call(this)];case 1:return e=a.sent(),r=e.clone(),this.computeSeriesRect(e),this.computeCircle(e),this.axes.forEach(function(s){return s.update()}),i=e.clone().grow(20),this.hoverRect=i,this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},series:{rect:r,paddedRect:e,hoverRect:i,visible:!0},axes:[]}),[2,e]}})})},t.prototype.updateAxes=function(e,r,n){var i;this.axes.forEach(function(u){var c;if(u.direction===Z.X){var d=Xt(null!==(c=u.rotation)&&void 0!==c?c:0);u.range=[-Math.PI/2+d,3*Math.PI/2+d],u.gridLength=n,u.translation.x=e,u.translation.y=r}else u.direction===Z.Y&&(u.range=[n,0],u.translation.x=e,u.translation.y=r-n);u.updateScale()});var a=this.axes.find(function(u){return u.direction===Z.X}),s=a?.scale,l=null===(i=s?.ticks)||void 0===i?void 0:i.call(s).map(function(u){return s.convert(u)});this.axes.filter(function(u){return u instanceof av}).forEach(function(u){return u.gridAngles=l})},t.prototype.computeSeriesRect=function(e){var r=this.seriesAreaPadding;e.shrink(r.left,"left"),e.shrink(r.top,"top"),e.shrink(r.right,"right"),e.shrink(r.bottom,"bottom"),this.seriesRect=e},t.prototype.computeCircle=function(e){var r=this,n=this.series.filter(function(h){return h instanceof Ip}),i=this.axes.filter(function(h){return h instanceof av}),a=function(h,p,v){r.updateAxes(h,p,v),n.forEach(function(m){m.centerX=h,m.centerY=p,m.radius=v});var g=n.filter(function(m){return m instanceof kp});if(g.length>1){var y=g.map(function(m){var C=m.getInnerRadius();return{series:m,innerRadius:C}}).sort(function(m,C){return m.innerRadius-C.innerRadius});y[y.length-1].series.surroundingRadius=void 0;for(var S=0;S<y.length-1;S++)y[S].series.surroundingRadius=y[S+1].innerRadius}},s=e.x+e.width/2,l=e.y+e.height/2,u=Math.max(0,Math.min(e.width,e.height)/2),c=u;a(s,l,c);var d=function(h){var p,v,y=(void 0===h?{}:h).hideWhenNecessary,S=void 0!==y&&y,m=[];try{for(var C=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(lv(lv([],sv(i)),sv(n))),_=C.next();!_.done;_=C.next()){var x=_.value.computeLabelsBBox({hideWhenNecessary:S},e);x&&m.push(x)}}catch(T){p={error:T}}finally{try{_&&!_.done&&(v=C.return)&&v.call(C)}finally{if(p)throw p.error}}if(0!==m.length){var b=me.merge(m),O=r.refineCircle(b,c,e);a(O.centerX,O.centerY,O.radius),O.radius!==c&&(c=O.radius)}else a(s,l,u)};return d(),d(),d(),d({hideWhenNecessary:!0}),d({hideWhenNecessary:!0}),{radius:c,centerX:s,centerY:l}},t.prototype.refineCircle=function(e,r,n){var s=-r,l=r,u=r,c=Math.max(0,-r-e.x),d=Math.max(0,s-e.y),h=Math.max(0,e.x+e.width-l),p=Math.max(0,e.y+e.height-u),y=Math.min(n.width-c-h,n.height-d-p)/2,C=Math.min(.5*n.width/2,.5*n.height/2);if(y<C){var _=c+h;if(2*(y=C)+(d+p)>n.height){var x=n.height-2*y;2*Math.min(d,p)>x?(d=x/2,p=x/2):d>p?d=x-p:p=x-d}if(2*y+_>n.width){var b=n.width-2*y;2*Math.min(c,h)>b?(c=b/2,h=b/2):c>h?c=b-h:h=b-c}}return{centerX:n.x+(n.width-(c+2*y+h))/2+c+y,centerY:n.y+(n.height-(d+2*y+p))/2+d+y,radius:y}},t.className="PolarChart",t.type="polar",t}(Oc),DE=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),cv=function(o,t,e,r){return new(e||(e=Promise))(function(i,a){function s(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):function n(i){return i instanceof e?i:new e(function(a){a(i)})}(c.value).then(s,l)}u((r=r.apply(o,t||[])).next())})},dv=function(o,t){var r,n,i,a,e={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(!(i=(i=e.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){e=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){e.label=u[1];break}if(6===u[0]&&e.label<i[1]){e.label=i[1],i=u;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(u);break}i[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(o,e)}catch(c){u=[6,c],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},fv=function(o){function t(e,r,n){void 0===e&&(e=window.document);var i=o.call(this,e,r,n)||this;return i._data={},i}return DE(t,o),t.prototype.performLayout=function(){return cv(this,void 0,void 0,function(){var e,r,n,a,l=this;return dv(this,function(u){switch(u.label){case 0:return[4,o.prototype.performLayout.call(this)];case 1:return e=u.sent(),r=this.seriesAreaPadding,n=e.clone(),e.shrink(r.left,"left"),e.shrink(r.top,"top"),e.shrink(r.right,"right"),e.shrink(r.bottom,"bottom"),this.seriesRect=e,a=e.clone().grow(20),this.hoverRect=a,this.seriesRoot.translationX=Math.floor(e.x),this.seriesRoot.translationY=Math.floor(e.y),[4,Promise.all(this.series.map(function(c){return cv(l,void 0,void 0,function(){return dv(this,function(d){switch(d.label){case 0:return[4,c.update({seriesRect:e})];case 1:return d.sent(),[2]}})})}))];case 2:return u.sent(),this.seriesRoot.setClipRectInGroupCoordinateSpace(new me(e.x,e.y,e.width,e.height)),this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},series:{rect:n,paddedRect:e,hoverRect:a,visible:!0},axes:[]}),[2,e]}})})},t.className="HierarchyChart",t.type="hierarchy",t}(Oc);var hv=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),jc=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},kE=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.maxSpacing=NaN,e}return hv(t,o),jc([A(Yr(yn(1),Sa("minSpacing"))),bn(NaN)],t.prototype,"maxSpacing",void 0),t}(Fc),Ml=function(o){function t(e,r){void 0===r&&(r=new Je);var n=o.call(this,e,r)||this;return n.min=NaN,n.max=NaN,r.strictClampByDefault=!0,n}return hv(t,o),t.prototype.normaliseDataDomain=function(e){return function yO(o,t,e){var r;return o.length>2&&(o=null!==(r=kt(o))&&void 0!==r?r:[NaN,NaN]),isNaN(t)||(o=[t,o[1]]),isNaN(e)||(o=[o[0],e]),o[0]>o[1]&&(o=[]),o}(e,this.min,this.max)},t.prototype.formatDatum=function(e){return"number"==typeof e?e.toFixed(2):(q.warnOnce("data contains Date objects which are being plotted against a number axis, please only use a number axis for numbers."),String(e))},t.prototype.createTick=function(){return new kE},t.prototype.updateSecondaryAxisTicks=function(e){if(null==this.dataDomain)throw new Error("AG Charts - dataDomain not calculated, cannot perform tick calculation.");var r=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i}(function ME(o,t){var e=Math.floor(o[0]),r=o[1];e=function RE(o,t,e){var r=Math.abs(t-o)/(e-1),n=Math.floor(Math.log10(r)),i=Math.pow(10,n);return Math.floor(o/i)*i}(e,r,t);var n=function IE(o,t,e){return function LE(o){var t=Math.floor(Math.log10(o)),e=Math.pow(10,t),r=o/e*10;return r>0&&r<=1?e/10:r>1&&r<=2?2*e/10:r>1&&r<=5?5*e/10:r>5&&r<=10?10*e/10:r>10&&r<=20?20*e/10:r>20&&r<=40?40*e/10:r>40&&r<=50?50*e/10:r>50&&r<=100?100*e/10:r}((t-o)/(e-1))}(e,r,t),a=[e,r=e+(t-1)*n],s=function FE(o,t,e){for(var r=Math.floor(Math.log10(t)),n=t>0&&t<1?Math.abs(r):0,i=Math.pow(10,n),a=new Pc(n),s=0;s<e;s++)a[s]=Math.round((o+t*s)*i)/i;return a}(e,n,t);return[a,s]}(this.dataDomain,e??0),2),n=r[0],i=r[1];return this.scale.nice=!1,this.scale.domain=n,this.scale.update(),i},t.className="NumberAxis",t.type="number",jc([A(Yr(yn(),rl("max"))),bn(NaN)],t.prototype,"min",void 0),jc([A(Yr(yn(),Sa("min"))),bn(NaN)],t.prototype,"max",void 0),t}(Al),GE=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),pv=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i};function vv(){return ne(function(t){return"number"==typeof t&&0!==t},"expecting a non-zero Number")}var ai,Rl=function(o){function t(e){var r=o.call(this,e,new Op)||this;return r.min=NaN,r.max=NaN,r.scale.strictClampByDefault=!0,r}return GE(t,o),t.prototype.normaliseDataDomain=function(e){var r,i=this.min,a=this.max;e.length>2&&(e=null!==(r=kt(e))&&void 0!==r?r:[NaN,NaN]),isNaN(i)||(e=[i,e[1]]),isNaN(a)||(e=[e[0],a]);var l=e[0]<0&&e[1]>0,u=0===e[0]&&0===e[1];return(e[0]>e[1]||l||u)&&(e=[],l?q.warn("the data domain crosses zero, the chart data cannot be rendered. See log axis documentation for more information."):u&&q.warn("the data domain has 0 extent, no data is rendered.")),0===e[0]&&(e[0]=1),0===e[1]&&(e[1]=-1),e},Object.defineProperty(t.prototype,"base",{get:function(){return this.scale.base},set:function(e){this.scale.base=e},enumerable:!1,configurable:!0}),t.className="LogAxis",t.type="log",pv([A(Yr(yn(),rl("max"),vv())),bn(NaN)],t.prototype,"min",void 0),pv([A(Yr(yn(),Sa("min"),vv())),bn(NaN)],t.prototype,"max",void 0),t}(Ml),gv=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),zc=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},VE=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.maxSpacing=NaN,e}return gv(t,o),zc([A(Yr(yn(1),Sa("minSpacing"))),bn(NaN)],t.prototype,"maxSpacing",void 0),t}(Fc),Hc=function(o){function t(e){var r=o.call(this,e,new Dc)||this;r.datumFormat="%m/%d/%y, %H:%M:%S",r.min=void 0,r.max=void 0;var n=r.scale;return n.strictClampByDefault=!0,r.refreshScale(),r.datumFormatter=n.tickFormat({specifier:r.datumFormat}),r}return gv(t,o),t.prototype.normaliseDataDomain=function(e){var r,i=this.min,a=this.max;return"number"==typeof i&&(i=new Date(i)),"number"==typeof a&&(a=new Date(a)),e.length>2&&(e=(null!==(r=kt(e))&&void 0!==r?r:[0,1e3]).map(function(s){return new Date(s)})),i instanceof Date&&(e=[i,e[1]]),a instanceof Date&&(e=[e[0],a]),e[0]>e[1]&&(e=[]),e},t.prototype.createTick=function(){return new VE},t.prototype.onLabelFormatChange=function(e,r){r?o.prototype.onLabelFormatChange.call(this,e,r):this.labelFormatter=this.scale.tickFormat({ticks:e})},t.prototype.formatDatum=function(e){var r;return null!==(r=this.moduleCtx.callbackCache.call(this.datumFormatter,e))&&void 0!==r?r:String(e)},t.prototype.calculatePadding=function(e,r){return[0,1]},t.className="TimeAxis",t.type="time",zc([A(Yr(mh,rl("max")))],t.prototype,"min",void 0),zc([A(Yr(mh,Sa("min")))],t.prototype,"max",void 0),t}(Al),Fl=((ai={})[Ml.type]=Ml,ai[io.type]=io,ai[Hc.type]=Hc,ai[Dl.type]=Dl,ai[Rl.type]=Rl,ai);function BE(o,t){Fl[o]=t}function jE(o,t){var e=Fl[o];if(e)return new e(t);throw new Error("AG Charts - unknown axis type: "+o)}var Uc={has:function(o){return Object.prototype.hasOwnProperty.call(Fl,o)},get axesTypes(){return Object.keys(Fl)}},yv={};function mv(o,t){yv[o]=t}var Ll,Nl,HE=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Dr=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},UE=["circle","cross","diamond","heart","plus","square","triangle"],WE=ne(function(o){return UE.includes(o)||Object.getPrototypeOf(o)===Cn},"expecting a marker shape keyword such as 'circle', 'diamond' or 'square' or an object extending the Marker class"),KE=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.enabled=!0,e.shape=Aa,e.size=6,e.maxSize=30,e.domain=void 0,e.fill=void 0,e.stroke=void 0,e.strokeWidth=1,e.fillOpacity=void 0,e.strokeOpacity=void 0,e}return HE(t,o),Dr([A(Te),ee({redraw:$.MAJOR})],t.prototype,"enabled",void 0),Dr([A(WE),ee({redraw:$.MAJOR})],t.prototype,"shape",void 0),Dr([A(X(0)),ee({redraw:$.MAJOR})],t.prototype,"size",void 0),Dr([A(X(0)),ee({redraw:$.MAJOR})],t.prototype,"maxSize",void 0),Dr([A(Ch),ee({redraw:$.MAJOR})],t.prototype,"domain",void 0),Dr([A(De),ee({redraw:$.MAJOR})],t.prototype,"fill",void 0),Dr([A(De),ee({redraw:$.MAJOR})],t.prototype,"stroke",void 0),Dr([A(_e(0)),ee({redraw:$.MAJOR})],t.prototype,"strokeWidth",void 0),Dr([A(_e(0,1)),ee({redraw:$.MAJOR})],t.prototype,"fillOpacity",void 0),Dr([A(_e(0,1)),ee({redraw:$.MAJOR})],t.prototype,"strokeOpacity",void 0),t}(Qu),oo=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Il=function(){return Il=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},Il.apply(this,arguments)},Sv=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Gt=function(o,t,e,r){return new(e||(e=Promise))(function(i,a){function s(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):function n(i){return i instanceof e?i:new e(function(a){a(i)})}(c.value).then(s,l)}u((r=r.apply(o,t||[])).next())})},Vt=function(o,t){var r,n,i,a,e={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(!(i=(i=e.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){e=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){e.label=u[1];break}if(6===u[0]&&e.label<i[1]){e.label=i[1],i=u;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(u);break}i[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(o,e)}catch(c){u=[6,c],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},En=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},$E=((Ll={})[Z.X]=["xKey"],Ll[Z.Y]=["yKey"],Ll),XE=((Nl={})[Z.X]=["xName"],Nl[Z.Y]=["yName"],Nl),Wc=function(o){function t(e,r,n,i,a){var s=o.call(this,n,i,a)||this;return s.xKey=e,s.yKey=r,s}return oo(t,o),t}(xa),kl=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.type="nodeClick",e}return oo(t,o),t}(Wc),Gl=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.type="nodeDoubleClick",e}return oo(t,o),t}(Wc),QE=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return oo(t,o),t}(Ic),ka=function(o){function t(e){var r=o.call(this,Il(Il({},e),{useSeriesGroupLayer:!0,directionKeys:$E,directionNames:XE}))||this;r.legendItemName=void 0,r._contextNodeData=[],r.nodeDataDependencies={},r.highlightSelection=Fe.select(r.highlightNode,function(){return r.opts.hasMarkers?r.markerFactory():r.nodeFactory()}),r.highlightLabelSelection=Fe.select(r.highlightLabel,Ee),r.subGroups=[],r.subGroupId=0,r.datumSelectionGarbageCollection=!0;var n=e.pathsPerSeries,a=e.hasMarkers,l=e.hasHighlightedLabels,c=e.pathsZIndexSubOrderOffset;return r.opts={pathsPerSeries:void 0===n?1:n,hasMarkers:void 0!==a&&a,hasHighlightedLabels:void 0!==l&&l,pathsZIndexSubOrderOffset:void 0===c?[]:c},r.animationState=new QE("empty",{empty:{on:{update:{target:"ready",action:function(h){return r.animateEmptyUpdateReady(h)}}}},ready:{on:{updateData:{target:"waiting",action:function(){}},update:{target:"ready",action:function(h){return r.animateReadyUpdate(h)}},highlight:{target:"ready",action:function(h){return r.animateReadyHighlight(h)}},highlightMarkers:{target:"ready",action:function(h){return r.animateReadyHighlightMarkers(h)}},resize:{target:"ready",action:function(h){return r.animateReadyResize(h)}}}},waiting:{on:{update:{target:"ready",action:function(h){return r.animateWaitingUpdateReady(h)}}}}}),r}return oo(t,o),Object.defineProperty(t.prototype,"contextNodeData",{get:function(){var e;return null===(e=this._contextNodeData)||void 0===e?void 0:e.slice()},enumerable:!1,configurable:!0}),t.prototype.addChartEventListeners=function(){var r,n,e=this;null===(r=this.ctx.chartEventManager)||void 0===r||r.addListener("legend-item-click",function(i){return e.onLegendItemClick(i)}),null===(n=this.ctx.chartEventManager)||void 0===n||n.addListener("legend-item-double-click",function(i){return e.onLegendItemDoubleClick(i)})},t.prototype.destroy=function(){o.prototype.destroy.call(this),this._contextNodeData.splice(0,this._contextNodeData.length),this.subGroups.splice(0,this.subGroups.length)},t.prototype.checkDomainXY=function(e,r,n,i){return(n&&qs(e)||!n&&ic(e))&&(i&&qs(r)||!i&&ic(r))?[e,r]:void 0},t.prototype.checkRangeXY=function(e,r,n,i){return!isNaN(e)&&!isNaN(r)&&n.inRange(e)&&i.inRange(r)},t.prototype.update=function(e){var r,n,i=e.seriesRect;return Gt(this,void 0,void 0,function(){var a,s,l,u,c;return Vt(this,function(d){switch(d.label){case 0:return a=this.visible,s=(null!==(n=null===(r=this.ctx.highlightManager)||void 0===r?void 0:r.getActiveHighlight())&&void 0!==n?n:{}).series,l=s?s===this:void 0,(c=null!=Jn(this.nodeDataDependencies,u={seriesRectWidth:i?.width,seriesRectHeight:i?.height}))&&(this.nodeDataDependencies=u,this.markNodeDataDirty()),[4,this.updateSelections(l,a)];case 1:return d.sent(),[4,this.updateNodes(l,a)];case 2:return d.sent(),c&&this.animationState.transition("resize",{datumSelections:this.subGroups.map(function(h){return h.datumSelection}),markerSelections:this.subGroups.map(function(h){return h.markerSelection}),contextData:this._contextNodeData,paths:this.subGroups.map(function(h){return h.paths})}),this.animationState.transition("update",{datumSelections:this.subGroups.map(function(h){return h.datumSelection}),markerSelections:this.subGroups.map(function(h){return h.markerSelection}),labelSelections:this.subGroups.map(function(h){return h.labelSelection}),contextData:this._contextNodeData,paths:this.subGroups.map(function(h){return h.paths}),seriesRect:i}),[2]}})})},t.prototype.updateSelections=function(e,r){var n;return Gt(this,void 0,void 0,function(){var i,a=this;return Vt(this,function(s){switch(s.label){case 0:return[4,this.updateHighlightSelection(e)];case 1:return s.sent(),r&&(this.nodeDataRefresh||this.isPathOrSelectionDirty())?this.nodeDataRefresh?(this.nodeDataRefresh=!1,!(null===(n=this.chart)||void 0===n)&&n.debug&&q.debug("CartesianSeries.updateSelections() - calling createNodeData() for",this.id),i=this,[4,this.createNodeData()]):[3,4]:[2];case 2:return i._contextNodeData=s.sent(),[4,this.updateSeriesGroups()];case 3:s.sent(),s.label=4;case 4:return[4,Promise.all(this.subGroups.map(function(l,u){return a.updateSeriesGroupSelections(l,u)}))];case 5:return s.sent(),[2]}})})},t.prototype.updateSeriesGroupSelections=function(e,r){return Gt(this,void 0,void 0,function(){var i,a,s,l,u,c,d,h;return Vt(this,function(p){switch(p.label){case 0:return i=e.labelSelection,a=e.markerSelection,u=(s=this._contextNodeData[r]).labelData,c=e,[4,this.updateDatumSelection({nodeData:l=s.nodeData,datumSelection:e.datumSelection,seriesIdx:r})];case 1:return c.datumSelection=p.sent(),d=e,[4,this.updateLabelSelection({labelData:u,labelSelection:i,seriesIdx:r})];case 2:return d.labelSelection=p.sent(),a?(h=e,[4,this.updateMarkerSelection({nodeData:l,markerSelection:a,seriesIdx:r})]):[3,4];case 3:h.markerSelection=p.sent(),p.label=4;case 4:return[2]}})})},t.prototype.nodeFactory=function(){return new re},t.prototype.markerFactory=function(){return new(Ki())},t.prototype.updateSeriesGroups=function(){return Gt(this,void 0,void 0,function(){var e,r,n,i,a,s,l,u,c,d,h,p,v,g,y,S=this;return Vt(this,function(m){if(n=(e=this).contentGroup,s=(a=e.opts).pathsPerSeries,l=a.hasMarkers,(r=e._contextNodeData).length===(i=e.subGroups).length)return[2];for(r.length<i.length&&i.splice(r.length).forEach(function(C){var _,w,b=C.markerGroup,O=C.labelGroup,T=C.paths;n.removeChild(C.dataNodeGroup),b&&n.removeChild(b),O&&n.removeChild(O);try{for(var E=En(T),P=E.next();!P.done;P=E.next())n.removeChild(P.value)}catch(R){_={error:R}}finally{try{P&&!P.done&&(w=E.return)&&w.call(E)}finally{if(_)throw _.error}}}),u=r.length;u>i.length;){for(c=!1,d=this.subGroupId++,h=new re({name:this.id+"-series-sub"+d+"-dataNodes",layer:c,zIndex:We.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("data",d)}),p=l?new re({name:this.id+"-series-sub"+this.subGroupId+++"-markers",layer:c,zIndex:We.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("marker",d)}):void 0,v=new re({name:this.id+"-series-sub"+this.subGroupId+++"-labels",layer:c,zIndex:We.SERIES_LABEL_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("labels",d)}),n.appendChild(h),n.appendChild(v),p&&n.appendChild(p),g=[],y=0;y<s;y++)g[y]=new wt,g[y].zIndex=We.SERIES_LAYER_ZINDEX,g[y].zIndexSubOrder=this.getGroupZIndexSubOrder("paths",y),n.appendChild(g[y]);i.push({paths:g,dataNodeGroup:h,markerGroup:p,labelGroup:v,labelSelection:Fe.select(v,Ee),datumSelection:Fe.select(h,function(){return S.nodeFactory()},this.datumSelectionGarbageCollection),markerSelection:p?Fe.select(p,function(){return S.markerFactory()}):void 0})}return[2]})})},t.prototype.getGroupZIndexSubOrder=function(e,r){var n;void 0===r&&(r=0);var i=o.prototype.getGroupZIndexSubOrder.call(this,e,r);if("paths"===e){var a=null!==(n=this.opts.pathsZIndexSubOrderOffset[r])&&void 0!==n?n:0,s=i[0];i[0]="function"==typeof s?function(){return+s()+a}:+s+a}return i},t.prototype.updateNodes=function(e,r){var n;return Gt(this,void 0,void 0,function(){var i,a,s,l,u,c,d,h,p,v=this;return Vt(this,function(g){switch(g.label){case 0:return a=(i=this).highlightSelection,s=i.highlightLabelSelection,l=i._contextNodeData,c=(u=i.opts).hasMarkers,d=u.hasHighlightedLabels,h=this.visible&&(null===(n=this._contextNodeData)||void 0===n?void 0:n.length)>0&&r,this.rootGroup.visible=h,this.contentGroup.visible=h,this.highlightGroup.visible=h&&!!e,p=this.subGroups.map(function(y,S){return v.getOpacity({itemId:l[S].itemId})}),c?[4,this.updateMarkerNodes({markerSelection:a,isHighlight:!0,seriesIdx:-1})]:[3,2];case 1:return g.sent(),this.animationState.transition("highlightMarkers",a),[3,4];case 2:return[4,this.updateDatumNodes({datumSelection:a,isHighlight:!0,seriesIdx:-1})];case 3:g.sent(),this.animationState.transition("highlight",a),g.label=4;case 4:return d?[4,this.updateLabelNodes({labelSelection:s,seriesIdx:-1})]:[3,6];case 5:g.sent(),g.label=6;case 6:return[4,Promise.all(this.subGroups.map(function(y,S){return Gt(v,void 0,void 0,function(){var m,C,_,w,x,b,O,T,E,P,D,R,M,F;return Vt(this,function(I){switch(I.label){case 0:C=y.markerGroup,_=y.datumSelection,w=y.labelSelection,x=y.markerSelection,b=y.paths,O=y.labelGroup,T=h,(m=y.dataNodeGroup).opacity=E=p[S],m.visible=T,O.visible=T,C&&(C.opacity=E,C.zIndex=m.zIndex>=We.SERIES_LAYER_ZINDEX?m.zIndex:m.zIndex+1,C.visible=T),O&&(O.opacity=E);try{for(P=En(b),D=P.next();!D.done;D=P.next())(R=D.value).opacity=E,R.visible=T}catch(L){M={error:L}}finally{try{D&&!D.done&&(F=P.return)&&F.call(P)}finally{if(M)throw M.error}}return m.visible?[4,this.updateDatumNodes({datumSelection:_,isHighlight:!1,seriesIdx:S})]:[2];case 1:return I.sent(),[4,this.updateLabelNodes({labelSelection:w,seriesIdx:S})];case 2:return I.sent(),c&&x?[4,this.updateMarkerNodes({markerSelection:x,isHighlight:!1,seriesIdx:S})]:[3,4];case 3:I.sent(),I.label=4;case 4:return[2]}})})}))];case 7:return g.sent(),[2]}})})},t.prototype.updateHighlightSelection=function(e){var r;return Gt(this,void 0,void 0,function(){var n,i,a,s,l,u,c,d,h,p,v,g,S,m,C;return Vt(this,function(_){switch(_.label){case 0:return i=(n=this).highlightSelection,a=n.highlightLabelSelection,s=n._contextNodeData,l=null===(r=this.ctx.highlightManager)||void 0===r?void 0:r.getActiveHighlight(),c=this,[4,this.updateHighlightSelectionItem({item:u=e&&l?.datum?l:void 0,highlightSelection:i})];case 1:if(c.highlightSelection=_.sent(),this.isLabelEnabled()&&null!=u){p=void 0===(h=u.itemId)?void 0:h;try{for(v=En(s),g=v.next();!g.done&&null==(d=g.value.labelData.find(function(w){return w.datum===u.datum&&w.itemId===p}));g=v.next());}catch(w){m={error:w}}finally{try{g&&!g.done&&(C=v.return)&&C.call(v)}finally{if(m)throw m.error}}}return S=this,[4,this.updateHighlightSelectionLabel({item:d,highlightLabelSelection:a})];case 2:return S.highlightLabelSelection=_.sent(),[2]}})})},t.prototype.pickNodeExactShape=function(e){var r,n,i=o.prototype.pickNodeExactShape.call(this,e);if(i)return i;var a=e.x,s=e.y,l=this.opts.hasMarkers;try{for(var u=En(this.subGroups),c=u.next();!c.done;c=u.next()){var d=c.value,p=d.markerGroup,v=d.dataNodeGroup.pickNode(a,s);if(!v&&l&&(v=p?.pickNode(a,s)),v)return{datum:v.datum,distance:0}}}catch(g){r={error:g}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}},t.prototype.pickNodeClosestDatum=function(e){var r,n,i,a,s,l,C,d=this,h=d.axes,v=d._contextNodeData,g=h[Z.X],y=h[Z.Y],S=d.rootGroup.transformPoint(e.x,e.y),m=1/0;try{for(var _=En(v),w=_.next();!w.done;w=_.next()){var x=w.value;try{for(var b=(i=void 0,En(x.nodeData)),O=b.next();!O.done;O=b.next()){var L,T=O.value,E=T.point,P=void 0===E?{}:E,D=P.x,R=void 0===D?NaN:D,M=P.y,F=void 0===M?NaN:M;isNaN(R)||isNaN(F)||g?.inRange(R)&&y?.inRange(F)&&(L=Math.max(Math.pow(S.x-R,2)+Math.pow(S.y-F,2),0))<m&&(m=L,C=T)}}catch(N){i={error:N}}finally{try{O&&!O.done&&(a=b.return)&&a.call(b)}finally{if(i)throw i.error}}}}catch(N){r={error:N}}finally{try{w&&!w.done&&(n=_.return)&&n.call(_)}finally{if(r)throw r.error}}if(C)return{datum:C,distance:L=Math.max(Math.sqrt(m)-(null!==(l=null===(s=C.point)||void 0===s?void 0:s.size)&&void 0!==l?l:0),0)}},t.prototype.pickNodeMainAxisFirst=function(e,r){var n,i,a,s,l,u,c=e.x,d=e.y,h=this,p=h.axes,v=h.rootGroup,g=h._contextNodeData,y=p[Z.X],S=p[Z.Y],m=[y,S].filter(function(Q){return Q instanceof io}).map(function(Q){return Q.direction});if(!r||0!==m.length){var C=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i}(m,1),_=C[0],w=void 0===_?Z.X:_,x=v.transformPoint(c,d),b=w===Z.X?[x.x,x.y]:[x.y,x.x],O=[1/0,1/0],T=void 0;try{for(var E=En(g),P=E.next();!P.done;P=E.next()){var D=P.value;try{for(var R=(a=void 0,En(D.nodeData)),M=R.next();!M.done;M=R.next()){var F=M.value,I=F.point,L=void 0===I?{}:I,N=L.x,k=void 0===N?NaN:N,U=L.y,G=void 0===U?NaN:U;if(!isNaN(k)&&!isNaN(G)&&y?.inRange(k)&&S?.inRange(G)){for(var j=w===Z.X?[k,G]:[G,k],K=!0,V=0;V<j.length;V++){var H=Math.abs(j[V]-b[V]);if(H>O[V]){K=!1;break}H<O[V]&&(O[V]=H,O.fill(1/0,V+1,O.length))}K&&(T=F)}}}catch(Q){a={error:Q}}finally{try{M&&!M.done&&(s=R.return)&&s.call(R)}finally{if(a)throw a.error}}}}catch(Q){n={error:Q}}finally{try{P&&!P.done&&(i=E.return)&&i.call(E)}finally{if(n)throw n.error}}if(T)return{datum:T,distance:Math.max(Math.sqrt(Math.pow(O[0],2)+Math.pow(O[1],2))-(null!==(u=null===(l=T.point)||void 0===l?void 0:l.size)&&void 0!==u?u:0),0)}}},t.prototype.onLegendItemClick=function(e){(e.series.id===this.id||null!=this.legendItemName&&this.legendItemName===e.legendItemName)&&this.toggleSeriesItem(e.itemId,e.enabled)},t.prototype.onLegendItemDoubleClick=function(e){var r=e.enabled,n=e.itemId,i=e.series,s=e.legendItemName,l=Object.values(e.numVisibleItems).reduce(function(c,d){return c+d},0);this.toggleSeriesItem(n,!!(i.id===this.id||null!=this.legendItemName&&this.legendItemName===s||r&&1===l))},t.prototype.isPathOrSelectionDirty=function(){return!1},t.prototype.getLabelData=function(){return[]},t.prototype.updateHighlightSelectionItem=function(e){return Gt(this,void 0,void 0,function(){var n,i,a;return Vt(this,function(l){return i=e.highlightSelection,a=(n=e.item)?[n]:[],this.opts.hasMarkers?[2,this.updateMarkerSelection({nodeData:a,markerSelection:i,seriesIdx:-1})]:[2,this.updateDatumSelection({nodeData:a,datumSelection:i,seriesIdx:-1})]})})},t.prototype.updateHighlightSelectionLabel=function(e){return Gt(this,void 0,void 0,function(){var r;return Vt(this,function(a){return[2,this.updateLabelSelection({labelData:(r=e.item)?[r]:[],labelSelection:e.highlightLabelSelection,seriesIdx:-1})]})})},t.prototype.updateDatumSelection=function(e){return Gt(this,void 0,void 0,function(){return Vt(this,function(r){return[2,e.datumSelection]})})},t.prototype.updateDatumNodes=function(e){return Gt(this,void 0,void 0,function(){return Vt(this,function(r){return[2]})})},t.prototype.updateMarkerSelection=function(e){return Gt(this,void 0,void 0,function(){return Vt(this,function(r){return[2,e.markerSelection]})})},t.prototype.updateMarkerNodes=function(e){return Gt(this,void 0,void 0,function(){return Vt(this,function(r){return[2]})})},t.prototype.animateEmptyUpdateReady=function(e){},t.prototype.animateReadyUpdate=function(e){},t.prototype.animateWaitingUpdateReady=function(e){},t.prototype.animateReadyHighlight=function(e){},t.prototype.animateReadyHighlightMarkers=function(e){},t.prototype.animateReadyResize=function(e){},Sv([A(oe)],t.prototype,"legendItemName",void 0),t}(ll),Kc=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.formatter=void 0,e}return oo(t,o),Sv([A(ke),ee({redraw:$.MAJOR})],t.prototype,"formatter",void 0),t}(KE),qE=/(#\{(.*?)\})/g;function Cv(o,t,e){return o.replace(qE,function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var c,a=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i}(r[2].split(":"),2),l=a[1],u=t[a[0]];return"number"==typeof u?(c=l&&e&&e[l])?u.toLocaleString(c.locales,c.options):String(u):u instanceof Date?"string"==typeof(c=l&&e&&e[l])?_l(c)(u):u.toDateString():"string"==typeof u||u?.toString?String(u):""})}var ao=null;function dt(o){return ao=ao??document.createElement("div"),o?(ao.textContent=o,ao.innerHTML):""}var Yc=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Tn=function(){return Tn=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},Tn.apply(this,arguments)},Ot=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},so=function(o,t,e,r){return new(e||(e=Promise))(function(i,a){function s(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):function n(i){return i instanceof e?i:new e(function(a){a(i)})}(c.value).then(s,l)}u((r=r.apply(o,t||[])).next())})},lo=function(o,t){var r,n,i,a,e={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(!(i=(i=e.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){e=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){e.label=u[1];break}if(6===u[0]&&e.label<i[1]){e.label=i[1],i=u;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(u);break}i[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(o,e)}catch(c){u=[6,c],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},en=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},uo=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},JE=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.formatter=void 0,e}return Yc(t,o),Ot([A(ke)],t.prototype,"formatter",void 0),t}(dr),eT=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.renderer=void 0,e.format=void 0,e}return Yc(t,o),Ot([A(ke)],t.prototype,"renderer",void 0),Ot([A(oe)],t.prototype,"format",void 0),t}(qn),Ga=function(o){return o[o.Fill=0]="Fill",o[o.Stroke=1]="Stroke",o[o.Marker=2]="Marker",o[o.Label=3]="Label",o}(Ga||{}),tT=function(o){function t(e){var r=o.call(this,{moduleCtx:e,pathsPerSeries:2,pathsZIndexSubOrderOffset:[0,1e3],hasMarkers:!0})||this;r.tooltip=new eT,r.marker=new Kc,r.label=new JE,r.fill="#c16068",r.stroke="#874349",r.fillOpacity=1,r.strokeOpacity=1,r.lineDash=[0],r.lineDashOffset=0,r.xKey=void 0,r.xName=void 0,r.strokeWidth=2,r.shadow=void 0;var a=r.label;return r.marker.enabled=!1,a.enabled=!1,r}return Yc(t,o),t.prototype.processData=function(e){return so(this,void 0,void 0,function(){var r,n,i,a,s,l,u,c,h,p,v,g,y,S,m,C,_,w,b;return lo(this,function(O){switch(O.label){case 0:return i=(r=this).yKey,a=r.axes,s=r.normalizedTo,l=r.data,u=r.visible,p=void 0===(h=(void 0===(c=r.seriesGrouping)?{}:c).groupIndex)?this.id:h,(n=r.xKey)&&i&&l?(v=a[Z.X],g=a[Z.Y],y=v?.scale instanceof Pe,S=g?.scale instanceof Pe,m=["area-stack-"+p+"-yValues","area-stack-"+p+"-yValues-trailing","area-stack-"+p+"-yValues-prev","area-stack-"+p+"-yValues-trailing-prev","area-stack-"+p+"-yValues-marker"],C=[],(_=s&&isFinite(s)?s:void 0)&&(C.push(dc(this,[m[0],m[1],m[4]],_,"range")),C.push(dc(this,[m[2],m[3]],_,"range"))),[4,e.request(this.id,l,{props:uo(uo(uo(uo(uo(uo([vc(this,n,y,{id:"xValue"}),ut(this,i,S,{id:"yValue-raw",invalidValue:null})],en(Zn(this,i,S,"window","current",{id:"yValue-end",invalidValue:null,groupId:m[0]}))),en(Zn(this,i,S,"window-trailing","current",{id:"yValue-start",invalidValue:null,groupId:m[1]}))),en(Zn(this,i,S,"window","last",{id:"yValue-previous-end",invalidValue:null,groupId:m[2]}))),en(Zn(this,i,S,"window-trailing","last",{id:"yValue-previous-start",invalidValue:null,groupId:m[3]}))),en(Zn(this,i,S,"normal","current",{id:"yValue-cumulative",invalidValue:null,groupId:m[4]}))),en(C)),groupByKeys:!0,dataVisible:u})]):[2];case 1:return w=O.sent(),b=w.processedData,this.dataModel=w.dataModel,this.processedData=b,[2]}})})},t.prototype.getDomain=function(e){var r=this,n=r.processedData,i=r.dataModel,a=r.axes;if(!n||!i)return[];var s=a[Z.X],l=a[Z.Y],u=i.resolveProcessedDataDefById(this,"xValue"),c=i.getDomain(this,"xValue","key",n),d=i.getDomain(this,/yValue-(previous-)?end/,"value",n);return e===Z.X?"key"===u?.def.type&&"category"===u.def.valueType?c:this.fixNumericExtent(kt(c),s):this.fixNumericExtent(l instanceof Rl||l instanceof Hc?d:[d[0]>0?0:d[0],d[1]<0?0:d[1]],l)},t.prototype.createNodeData=function(){var e;return so(this,void 0,void 0,function(){var r,n,i,a,l,u,c,d,h,p,v,g,y,S,m,C,_,w,x,b,O,T,E,P,D,R,M,F,I,L,N,k,U,G,B,j,K,V,H,Y,Q,ie,te,ve=this;return lo(this,function(ye){if(i=(r=this).data,l=(void 0===(a=r.processedData)?{}:a).data,u=r.dataModel,c=r.ctx.callbackCache,h=(n=r.axes)[Z.Y],!((d=n[Z.X])&&h&&i&&u))return[2,[]];for(g=void 0===(v=(p=this).yKey)?"":v,S=void 0===(y=p.xKey)?"":y,m=p.marker,C=p.label,_=p.fill,w=p.stroke,x=p.id,T=(O=h.scale)instanceof Pe,E=(null!==(e=(b=d.scale).bandwidth)&&void 0!==e?e:0)/2,P=u.resolveProcessedDataIndexById(this,"yValue-start").index,D=u.resolveProcessedDataIndexById(this,"yValue-end").index,R=u.resolveProcessedDataIndexById(this,"yValue-raw").index,M=u.resolveProcessedDataIndexById(this,"yValue-previous-start").index,F=u.resolveProcessedDataIndexById(this,"yValue-previous-end").index,I=u.resolveProcessedDataIndexById(this,"yValue-cumulative").index,L=function(de,fe,z){var J=b.convert(de)+E,ue=O.convert(fe,{strict:!1});return[{x:J,y:O.convert(z,{strict:!1}),size:m.size},{x:J,y:ue,size:m.size}]},N=function(de,fe,z){var J,ue=ve.normalizedTo&&isFinite(ve.normalizedTo),he=ue&&T&&qs(z);return(!ue&&!isNaN(z)||he)&&(J=fe),{x:b.convert(de)+E,y:O.convert(J,{strict:!1}),size:m.size}},j={itemId:g,fillSelectionData:B={itemId:g,points:[]},labelData:k=[],nodeData:U=[],strokeSelectionData:G={itemId:g,points:[],yValues:[]}},K=B.points,V=[],H=G.points,Y=G.yValues,Q=-1,l?.forEach(function(de){var z=en(de.keys,1)[0],J=de.datum;de.values.forEach(function(he,je){var vt;Q++;var vr=J[je],gr=he[R],Wd=he[P],$o=he[D],Kd=he[M],un=he[F],mu=null!=gr,Xo=N(z,+he[I],gr);if(mu&&m&&U.push({index:Q,series:ve,itemId:g,datum:vr,nodeMidPoint:{x:Xo.x,y:Xo.y},cumulativeValue:$o,yValue:gr,xValue:z,yKey:g,xKey:S,point:Xo,fill:_,stroke:w}),mu&&C){var Qo;Qo=C.formatter?null!==(vt=c.call(C.formatter,{value:gr,seriesId:x}))&&void 0!==vt?vt:"":gt(gr)?Number(gr).toFixed(2):String(gr),k.push({index:Q,itemId:g,point:Xo,label:Qo?{text:Qo,fontStyle:C.fontStyle,fontWeight:C.fontWeight,fontSize:C.fontSize,fontFamily:C.fontFamily,textAlign:"center",textBaseline:"bottom",fill:C.color}:void 0})}var Vn=[Kd,Wd],ps=[un,$o];if([ie,z].some(function(vs){return null==vs}))ie=z;else{Vn.some(function(vs){return null==vs})&&(Vn[0]=0,Vn[1]=0),ps.some(function(vs){return null==vs})&&(ps[0]=0,ps[1]=0);var $d=L(ie,+Vn[0],+ps[0]);K.push($d[0]),V.push($d[1]);var Xd=L(z,+Vn[1],+ps[1]);K.push(Xd[0]),V.push(Xd[1]),H.push({x:NaN,y:NaN}),Y.push(void 0),null!=un&&(H.push($d[0]),Y.push(un)),null!=$o&&(H.push(Xd[0]),Y.push($o)),ie=z}})}),te=V.length-1;te>=0;te--)K.push(V[te]);return[2,[j]]})})},t.prototype.isPathOrSelectionDirty=function(){return this.marker.isDirty()},t.prototype.markerFactory=function(){return new(Ki(this.marker.shape))},t.prototype.updateMarkerSelection=function(e){return so(this,void 0,void 0,function(){var r,n,a;return lo(this,function(s){return r=e.nodeData,n=e.markerSelection,a=this.marker.enabled&&r?r:[],this.marker.isDirty()&&n.clear(),[2,n.update(a,function(l){l.tag=Ga.Marker})]})})},t.prototype.updateMarkerNodes=function(e){var r;return so(this,void 0,void 0,function(){var i,a,s,l,u,c,d,h,p,v,g,y,S,m,C,_,w,x,b,O,T,E,P,D;return lo(this,function(R){return i=e.isHighlight,s=(a=this).id,u=void 0===(l=a.xKey)?"":l,d=a.fill,h=a.stroke,p=a.fillOpacity,g=void 0===(v=a.marker.fillOpacity)?p:v,y=a.strokeOpacity,m=(S=a.highlightStyle.item).fill,_=void 0===(C=S.fillOpacity)?g:C,w=S.stroke,x=S.strokeWidth,b=a.visible,O=a.ctx.callbackCache,T=(c=a.marker).size,E=c.formatter,P=null!==(r=c.strokeWidth)&&void 0!==r?r:this.strokeWidth,D="function"==typeof c.shape,e.markerSelection.each(function(M,F){var I,L,N,k,U,G,B,j,K=i&&void 0!==m?m:null!==(I=c.fill)&&void 0!==I?I:d,V=i?_:g,H=i&&void 0!==w?w:null!==(L=c.stroke)&&void 0!==L?L:h,Y=i&&void 0!==x?x:P,Q=void 0;E&&(Q=O.call(E,{datum:F.datum,xKey:u,yKey:F.yKey,fill:K,stroke:H,strokeWidth:Y,size:T,highlighted:i,seriesId:s})),M.fill=null!==(N=Q?.fill)&&void 0!==N?N:K,M.stroke=null!==(k=Q?.stroke)&&void 0!==k?k:H,M.strokeWidth=null!==(U=Q?.strokeWidth)&&void 0!==U?U:Y,M.fillOpacity=V??1,M.strokeOpacity=null!==(B=null!==(G=c.strokeOpacity)&&void 0!==G?G:y)&&void 0!==B?B:1,M.size=null!==(j=Q?.size)&&void 0!==j?j:T,M.translationX=F.point.x,M.translationY=F.point.y,M.visible=M.size>0&&b&&!isNaN(F.point.x)&&!isNaN(F.point.y),D&&!M.dirtyPath&&(M.path.clear({trackChanges:!0}),M.updatePath(),M.checkPathDirty())}),i||this.marker.markClean(),[2]})})},t.prototype.updateLabelSelection=function(e){return so(this,void 0,void 0,function(){return lo(this,function(i){return[2,e.labelSelection.update(e.labelData,function(a){a.tag=Ga.Label})]})})},t.prototype.updateLabelNodes=function(e){return so(this,void 0,void 0,function(){var n,i,a,s,l,u,c;return lo(this,function(d){return i=(n=this.label).enabled,a=n.fontStyle,s=n.fontWeight,l=n.fontSize,u=n.fontFamily,c=n.color,e.labelSelection.each(function(h,p){var v=p.point,g=p.label;g&&i?(h.fontStyle=a,h.fontWeight=s,h.fontSize=l,h.fontFamily=u,h.textAlign=g.textAlign,h.textBaseline=g.textBaseline,h.text=g.text,h.x=v.x,h.y=v.y-10,h.fill=c,h.visible=!0):h.visible=!1}),[2]})})},t.prototype.getNodeClickEvent=function(e,r){var n;return new kl(null!==(n=this.xKey)&&void 0!==n?n:"",r.yKey,e,r,this)},t.prototype.getNodeDoubleClickEvent=function(e,r){var n;return new Gl(null!==(n=this.xKey)&&void 0!==n?n:"",r.yKey,e,r,this)},t.prototype.getTooltipHtml=function(e){var r,n,i,a=this,s=a.xKey,l=a.id,u=a.axes,c=a.xName,d=a.yName,h=a.fill,p=a.stroke,v=a.tooltip,g=a.marker,y=a.dataModel,S=e.yKey,m=e.xValue,C=e.yValue,_=e.datum,w=u[Z.X],x=u[Z.Y];if(!(s&&S&&w&&x&&gt(C)&&y))return"";var b=y.resolveProcessedDataIndexById(this,"yValue-raw").index,O=g.size,T=g.formatter,E=g.strokeWidth,P=g.fill,D=g.stroke,R=w.formatDatum(m),M=x.formatDatum(C),F=null===(n=null===(r=this.processedData)||void 0===r?void 0:r.data[e.index])||void 0===n?void 0:n.values[0][b],I=dt(d),L=dt(R+": "+M),k=P??h,G=void 0;T&&(G=T({datum:_,xKey:s,yKey:S,fill:k,stroke:D??p,strokeWidth:E??this.strokeWidth,size:O,highlighted:!1,seriesId:l}));var B=null!==(i=G?.fill)&&void 0!==i?i:k,j={title:I,backgroundColor:B,content:L},K=v.renderer,V=v.format;if(V||K){var H={datum:_,xKey:s,xName:c,xValue:m,yKey:S,yValue:C,processedYValue:F,yName:d,color:B,title:I,seriesId:l};if(V)return st({content:Cv(V,H)},j);if(K)return st(K(H),j)}return st(j)},t.prototype.getLegendData=function(){var e,r,n,i,a=this,s=a.data,l=a.id,u=a.xKey,c=a.yKey,d=a.yName,h=a.marker,p=a.fill,v=a.stroke,g=a.fillOpacity,y=a.strokeOpacity,S=a.visible;return s?.length&&u&&c?[{legendType:"category",id:l,itemId:c,seriesId:l,enabled:S,label:{text:d??c},marker:{shape:h.shape,fill:null!==(e=h.fill)&&void 0!==e?e:p,stroke:null!==(r=h.stroke)&&void 0!==r?r:v,fillOpacity:null!==(n=h.fillOpacity)&&void 0!==n?n:g,strokeOpacity:null!==(i=h.strokeOpacity)&&void 0!==i?i:y}}]:[]},t.prototype.animateEmptyUpdateReady=function(e){var r=this,n=e.markerSelections,i=e.labelSelections,s=e.paths,l=e.seriesRect,u=this,c=u.stroke,d=u.fill,h=u.fillOpacity,p=u.lineDash,v=u.lineDashOffset,g=u.strokeOpacity,y=u.strokeWidth,S=u.shadow;e.contextData.forEach(function(m,C){var _,w,x,b,O,T=m.fillSelectionData,E=m.strokeSelectionData,P=m.itemId,D=en(s[C],2),R=D[0],M=D[1],F=null!==(w=null===(_=r.ctx.animationManager)||void 0===_?void 0:_.defaultOptions.duration)&&void 0!==w?w:1e3,L={from:0,to:null!==(x=l?.width)&&void 0!==x?x:0,duration:F},N=E.points,k=E.yValues;M.tag=Ga.Stroke,M.fill=void 0,M.lineJoin=M.lineCap="round",M.pointerEvents=Ct.None,M.stroke=c,M.strokeWidth=r.getStrokeWidth(r.strokeWidth,{itemId:P}),M.strokeOpacity=g,M.lineDash=p,M.lineDashOffset=v,null===(b=r.ctx.animationManager)||void 0===b||b.animate(r.id+"_empty-update-ready_stroke_"+C,Tn(Tn({},L),{onUpdate:function(j){M.path.clear({trackChanges:!0});var K=!0;N.forEach(function(V,H){if(void 0===k[H]||isNaN(V.x)||isNaN(V.y))K=!0;else if(V.x<=j)K?(M.path.moveTo(V.x,V.y),K=!1):M.path.lineTo(V.x,V.y);else if(H>0&&void 0!==k[H]&&void 0!==k[H-1]&&N[H-1].x<=j){var Y=N[H-1];M.path.lineTo(j,Y.y+(j-Y.x)*(V.y-Y.y)/(V.x-Y.x))}}),M.checkPathDirty()}}));var U=T.points,G=U.slice(0,U.length/2),B=U.slice(U.length/2);R.tag=Ga.Fill,R.stroke=void 0,R.lineJoin="round",R.pointerEvents=Ct.None,R.fill=d,R.fillOpacity=h,R.strokeOpacity=g,R.strokeWidth=y,R.lineDash=p,R.lineDashOffset=v,R.fillShadow=S,null===(O=r.ctx.animationManager)||void 0===O||O.animate(r.id+"_empty-update-ready_fill_"+C,Tn(Tn({},L),{onUpdate:function(j){R.path.clear({trackChanges:!0});var K=0;G.forEach(function(H,Y){if(H.x<=j)K=H.x,R.path.lineTo(H.x,H.y);else if(Y>0&&G[Y-1].x<j){var Q=G[Y-1];R.path.lineTo(K=j,Q.y+(K-Q.x)*(H.y-Q.y)/(H.x-Q.x))}}),B.forEach(function(H,Y){var Q=B.length-Y-1;if(H.x<=j)R.path.lineTo(H.x,H.y);else if(Q>0&&G[Q-1].x<j){var te=B[Y+1];R.path.lineTo(K,H.y+(K-H.x)*(te.y-H.y)/(te.x-H.x))}}),B.length>0&&R.path.lineTo(B[B.length-1].x,B[B.length-1].y),R.path.closePath(),R.checkPathDirty()}})),n[C].each(function(j,K){var V,H,Y,Q,ie=l?.width?K.point.x/l.width*F:0,te=r.animateFormatter(K),ve=null!==(H=null===(V=K.point)||void 0===V?void 0:V.size)&&void 0!==H?H:0;null===(Y=r.ctx.animationManager)||void 0===Y||Y.animate(r.id+"_empty-update-ready_"+j.id,Tn(Tn({},L),{to:null!==(Q=te?.size)&&void 0!==Q?Q:ve,delay:ie,duration:200,onUpdate:function(ye){j.size=ye}}))}),i[C].each(function(j,K){var V;null===(V=r.ctx.animationManager)||void 0===V||V.animate(r.id+"_empty-update-ready_"+j.id,{from:0,to:1,delay:l?.width?K.point.x/l.width*F:0,duration:200,onUpdate:function(Y){j.opacity=Y}})})})},t.prototype.animateReadyUpdate=function(e){var r=this,i=e.paths,a=this,s=a.stroke,l=a.fill,u=a.fillOpacity,c=a.lineDash,d=a.lineDashOffset,h=a.strokeOpacity,p=a.strokeWidth,v=a.shadow;e.contextData.forEach(function(g,y){var S=g.strokeSelectionData,m=g.fillSelectionData,C=g.itemId,_=en(i[y],2),w=_[0],x=_[1];x.stroke=s,x.strokeWidth=r.getStrokeWidth(r.strokeWidth,{itemId:C}),x.strokeOpacity=h,x.lineDash=c,x.lineDashOffset=d,x.path.clear({trackChanges:!0});var b=!0;S.points.forEach(function(O,T){void 0===S.yValues[T]||isNaN(O.x)||isNaN(O.y)?b=!0:b?(x.path.moveTo(O.x,O.y),b=!1):x.path.lineTo(O.x,O.y)}),x.checkPathDirty(),w.fill=l,w.fillOpacity=u,w.strokeOpacity=h,w.strokeWidth=p,w.lineDash=c,w.lineDashOffset=d,w.fillShadow=v,w.path.clear({trackChanges:!0}),m.points.forEach(function(O){w.path.lineTo(O.x,O.y)}),w.path.closePath(),w.checkPathDirty()})},t.prototype.animateFormatter=function(e){var r,n,i,a=this,s=a.marker,c=a.xKey,g=s.formatter,y=null!==(r=s.fill)&&void 0!==r?r:a.fill,S=null!==(n=s.stroke)&&void 0!==n?n:a.stroke,m=null!==(i=s.strokeWidth)&&void 0!==i?i:this.strokeWidth,C=void 0;return g&&(C=a.ctx.callbackCache.call(g,{datum:e.datum,xKey:void 0===c?"":c,yKey:e.yKey,fill:y,stroke:S,strokeWidth:m,size:s.size,highlighted:!1,seriesId:a.id})),C},t.prototype.isLabelEnabled=function(){return this.label.enabled},t.className="AreaSeries",t.type="area",Ot([A(It)],t.prototype,"fill",void 0),Ot([A(It)],t.prototype,"stroke",void 0),Ot([A(X(0,1))],t.prototype,"fillOpacity",void 0),Ot([A(X(0,1))],t.prototype,"strokeOpacity",void 0),Ot([A(Vi)],t.prototype,"lineDash",void 0),Ot([A(X(0))],t.prototype,"lineDashOffset",void 0),Ot([A(oe)],t.prototype,"xKey",void 0),Ot([A(oe)],t.prototype,"xName",void 0),Ot([A(oe)],t.prototype,"yKey",void 0),Ot([A(oe)],t.prototype,"yName",void 0),Ot([A(_e(0))],t.prototype,"normalizedTo",void 0),Ot([A(X(0))],t.prototype,"strokeWidth",void 0),t}(ka),rT=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),co=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},fr=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.borderPath=new Cc,e.x=0,e.y=0,e.width=10,e.height=10,e.radius=0,e.crisp=!1,e.lastUpdatePathStrokeWidth=_r.defaultStyles.strokeWidth,e.effectiveStrokeWidth=_r.defaultStyles.strokeWidth,e.microPixelEffectOpacity=1,e}return rT(t,o),t.prototype.isDirtyPath=function(){var e;return!!(this.lastUpdatePathStrokeWidth!==this.strokeWidth||this.path.isDirty()||this.borderPath.isDirty()||null!==(e=this.clipPath)&&void 0!==e&&e.isDirty())},t.prototype.updatePath=function(){var e,r,n,i=this,a=i.path,s=i.borderPath,l=i.crisp,u=this,c=u.x,d=u.y,h=u.width,p=u.height,v=u.strokeWidth,y=1/(null!==(r=null===(e=this.layerManager)||void 0===e?void 0:e.canvas.pixelRatio)&&void 0!==r?r:1),S=1;if(a.clear({trackChanges:!0}),s.clear({trackChanges:!0}),l&&(h<=y&&(S*=h/y),p<=y&&(S*=p/y),h=this.align(c,h),p=this.align(d,p),c=this.align(c),d=this.align(d)),v)if(h<y){var m=c+y/2;s.moveTo(m,d),s.lineTo(m,d+p),v=y,this.borderClipPath=void 0}else if(p<y){var C=d+y/2;s.moveTo(c,C),s.lineTo(c+h,C),v=y,this.borderClipPath=void 0}else if(v<h&&v<p){var _=v/2;c+=_,d+=_,h-=v,p-=v,this.borderClipPath=void 0,a.rect(c,d,h,p),s.rect(c,d,h,p)}else this.borderClipPath=null!==(n=this.borderClipPath)&&void 0!==n?n:new Cc,this.borderClipPath.clear({trackChanges:!0}),this.borderClipPath.rect(c,d,h,p),s.rect(c,d,h,p);else this.borderClipPath=void 0,a.rect(c,d,h,p);this.effectiveStrokeWidth=v,this.lastUpdatePathStrokeWidth=v,this.microPixelEffectOpacity=S},t.prototype.computeBBox=function(){var e=this;return new me(e.x,e.y,e.width,e.height)},t.prototype.isPointInPath=function(e,r){var n=this.transformPoint(e,r);return this.computeBBox().containsPoint(n.x,n.y)},t.prototype.applyFillAlpha=function(e){var r=this;e.globalAlpha=e.globalAlpha*r.opacity*r.fillOpacity*r.microPixelEffectOpacity},t.prototype.renderStroke=function(e){var r=this,n=r.stroke,i=r.effectiveStrokeWidth,a=r.borderPath,s=r.borderClipPath,l=r.opacity,u=r.microPixelEffectOpacity;if(n&&i){var d=this,h=d.strokeOpacity,p=d.lineDash,v=d.lineDashOffset,g=d.lineCap,y=d.lineJoin;s&&(s.draw(e),e.clip()),a.draw(e);var S=e.globalAlpha;e.strokeStyle=n,e.globalAlpha=S*l*h*u,e.lineWidth=i,p&&e.setLineDash(p),v&&(e.lineDashOffset=v),g&&(e.lineCap=g),y&&(e.lineJoin=y),e.stroke(),e.globalAlpha=S}},t.className="Rect",co([Me()],t.prototype,"x",void 0),co([Me()],t.prototype,"y",void 0),co([Me()],t.prototype,"width",void 0),co([Me()],t.prototype,"height",void 0),co([Me()],t.prototype,"radius",void 0),co([Me()],t.prototype,"crisp",void 0),t}(wt),$c=function(){return $c=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},$c.apply(this,arguments)};var Vl=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ft=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},fo=function(o,t,e,r){return new(e||(e=Promise))(function(i,a){function s(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):function n(i){return i instanceof e?i:new e(function(a){a(i)})}(c.value).then(s,l)}u((r=r.apply(o,t||[])).next())})},ho=function(o,t){var r,n,i,a,e={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(!(i=(i=e.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){e=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){e.label=u[1];break}if(6===u[0]&&e.label<i[1]){e.label=i[1],i=u;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(u);break}i[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(o,e)}catch(c){u=[6,c],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},po=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Bl=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},cT=["inside","outside"],dT=function(o,t){return Ne(o,t,function(e){return cT.includes(e)})},Xc=function(o){return o[o.Bar=0]="Bar",o[o.Label=1]="Label",o}(Xc||{}),fT=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.formatter=void 0,e.placement="inside",e}return Vl(t,o),ft([A(ke)],t.prototype,"formatter",void 0),ft([A(dT)],t.prototype,"placement",void 0),t}(dr),hT=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.renderer=void 0,e}return Vl(t,o),ft([A(ke)],t.prototype,"renderer",void 0),t}(qn),_v=function(o){function t(e){var r=o.call(this,{moduleCtx:e,pickModes:[et.EXACT_SHAPE_MATCH],pathsPerSeries:0,hasHighlightedLabels:!0})||this;return r.label=new fT,r.tooltip=new hT,r.fill="#c16068",r.stroke="#874349",r.fillOpacity=1,r.strokeOpacity=1,r.lineDash=[0],r.lineDashOffset=0,r.formatter=void 0,r.xKey=void 0,r.xName=void 0,r.yKey=void 0,r.yName=void 0,r.groupScale=new bt,r.stackGroup=void 0,r.strokeWidth=1,r.shadow=void 0,r.smallestDataInterval=void 0,r.datumSelectionGarbageCollection=!1,r.label.enabled=!1,r}return Vl(t,o),t.prototype.resolveKeyDirection=function(e){return this.getBarDirection()===Z.X?e===Z.X?Z.Y:Z.X:e},t.prototype.processData=function(e){var r,n,i,a,s;return fo(this,void 0,void 0,function(){var l,u,c,h,v,g,y,S,m,C,_,w,x,b,O,T,P;return ho(this,function(D){switch(D.label){case 0:return u=(l=this).xKey,c=l.yKey,g=void 0===(v=(void 0===(h=l.seriesGrouping)?{}:h).groupIndex)?this.id:v,S=void 0===(y=l.data)?[]:y,m=Math.abs(l.normalizedTo??NaN),C=(null===(r=this.getCategoryAxis())||void 0===r?void 0:r.scale)instanceof Pe,_=(null===(n=this.getValueAxis())||void 0===n?void 0:n.scale)instanceof Pe,x=(w="bar-stack-"+g+"-yValues")+"-trailing",b=m&&isFinite(m)?m:void 0,O=[],b&&O.push(dc(this,[w,x],b,"range")),!(null!==(i=this.ctx.animationManager)&&void 0!==i&&i.skipAnimations)&&this.processedData&&O.push(Rh(this.processedData)),[4,e.request(this.id,S,{props:Bl(Bl(Bl(Bl([vc(this,u,C,{id:"xValue"}),ut(this,c,_,{id:"yValue-raw",invalidValue:null})],po(Zn(this,c,_,"normal","current",{id:"yValue-end",invalidValue:null,groupId:w}))),po(Zn(this,c,_,"trailing","current",{id:"yValue-start",invalidValue:null,groupId:x}))),po(C?[cc]:[])),po(O)),groupByKeys:!0,dataVisible:this.visible})];case 1:return T=D.sent(),P=T.processedData,this.dataModel=T.dataModel,this.processedData=P,this.smallestDataInterval={x:null!==(s=null===(a=P.reduced)||void 0===a?void 0:a[cc.property])&&void 0!==s?s:1/0,y:1/0},this.animationState.transition("updateData"),[2]}})})},t.prototype.getDomain=function(e){var r,i=this.processedData,a=this.dataModel;if(!i||!a)return[];var l=i.reduced,d=(void 0===l?{}:l)[cc.property],h=this.getCategoryAxis(),p=this.getValueAxis(),v=a.resolveProcessedDataDefById(this,"xValue"),g=a.getDomain(this,"xValue","key",i),y=a.getDomain(this,"yValue-end","value",i);if(e===this.getCategoryDirection()){if("key"===v?.def.type&&"category"===v?.def.valueType)return g;var S=isFinite(d)?d:0,m=null!==(r=kt(g))&&void 0!==r?r:[NaN,NaN];return this.fixNumericExtent(e===Z.Y?[m[0]+-S,m[1]]:[m[0],m[1]+S],h)}return this.getValueAxis()instanceof Rl?this.fixNumericExtent(y,p):this.fixNumericExtent([y[0]>0?0:y[0],y[1]<0?0:y[1]],p)},t.prototype.getNodeClickEvent=function(e,r){var n;return new kl(null!==(n=this.xKey)&&void 0!==n?n:"",r.yKey,e,r,this)},t.prototype.getNodeDoubleClickEvent=function(e,r){var n;return new Gl(null!==(n=this.xKey)&&void 0!==n?n:"",r.yKey,e,r,this)},t.prototype.getCategoryAxis=function(){var e=this.getCategoryDirection();return this.axes[e]},t.prototype.getValueAxis=function(){var e=this.getBarDirection();return this.axes[e]},t.prototype.calculateStep=function(e){var r,n=this.smallestDataInterval,i=this.getCategoryAxis();if(i){var s=(i.dataDomain[1]-i.dataDomain[0])/(null!==(r=n?.x)&&void 0!==r?r:1)+1,l=Math.floor(e),u=Math.min(s,l);return e/Math.max(1,u)}},t.prototype.createNodeData=function(){return fo(this,void 0,void 0,function(){var e,r,n,i,a,s,l,u,c,d,h,p,v,g,y,S,m,C,_,w,x,b,O,T,E,P,D,R,M,F,I,L,N,k,U,G=this;return ho(this,function(B){if(r=(e=this).visible,n=e.dataModel,i=this.getCategoryAxis(),a=this.getValueAxis(),!(n&&r&&i&&a))return[2,[]];for(l=a.scale,c=(u=this).groupScale,h=void 0===(d=u.yKey)?"":d,v=void 0===(p=u.xKey)?"":p,g=u.fill,y=u.stroke,S=u.strokeWidth,m=u.label,C=u.id,_=u.processedData,w=u.ctx,x=u.ctx.seriesStateManager,b=(s=i.scale).bandwidth,s instanceof Pe&&(O=Math.max(i.range[0],i.range[1]),T=this.calculateStep(O),b=T),E=[],P=x.getVisiblePeerGroupIndex(this),D=P.index,R=P.visibleGroupCount,M=0;M<R;M++)E.push(String(M));return c.domain=E,c.range=[0,b??0],c.padding=i instanceof io?i.groupPaddingInner:i instanceof Dl?.1:0,c.round=0!==c.padding,F=c.bandwidth>=1?c.bandwidth:c.rawBandwidth,I=n.resolveProcessedDataIndexById(this,"xValue","key").index,L=n.resolveProcessedDataIndexById(this,"yValue-raw").index,N=n.resolveProcessedDataIndexById(this,"yValue-start").index,k=n.resolveProcessedDataIndexById(this,"yValue-end").index,U={itemId:h,nodeData:[],labelData:[]},_?.data.forEach(function(j,K){var H=j.datum,Y=j.values,Q=j.keys[I],ie=s.convert(Q),te=+Y[0][k],ve=+Y[0][N],ye=Y[0][L],de=ie+c.convert(String(D));if(i.inRange(de,F)&&!isNaN(te)){var fe=l.convert(te,{strict:!1}),z=l.convert(ve,{strict:!1}),J=G.getBarDirection()===Z.X,ue={x:J?Math.min(fe,z):de,y:J?de:Math.min(fe,z),width:J?Math.abs(z-fe):F,height:J?F:Math.abs(z-fe)},he={x:ue.x+ue.width/2,y:ue.y+ue.height/2},je=m.fontStyle,vt=m.fontWeight,vr=m.fontSize,gr=m.fontFamily,Wd=m.color,un=function oT(o){var c,t=o.value,e=o.rect,r=o.placement,n=o.seriesId,i=o.padding,a=void 0===i?0:i,s=o.formatter,l=o.barAlongX;s&&(c=o.ctx.callbackCache.call(s,{value:gt(t)?t:void 0,seriesId:n})),void 0===c&&(c=gt(t)?t.toFixed(2):"");var d=e.x+e.width/2,h=e.y+e.height/2,p="center",v="middle",g=t>=0;switch(r){case"start":l?(d=g?e.x-a:e.x+e.width+a,p=g?"start":"end"):(h=g?e.y+e.height+a:e.y-a,v=g?"top":"bottom");break;case"outside":case"end":l?(d=g?e.x+e.width+a:e.x-a,p=g?"start":"end"):(h=g?e.y-a:e.y+e.height+a,v=g?"bottom":"top");break;default:v="middle"}return{text:c,textAlign:p,textBaseline:v,x:d,y:h}}({value:ye,rect:ue,formatter:m.formatter,placement:m.placement,seriesId:C,barAlongX:J,ctx:w}),yu=un.text,Vn={index:K,series:G,itemId:h,datum:H[0],cumulativeValue:ve+te,xValue:Q,yValue:ye,yKey:h,xKey:v,x:ue.x,y:ue.y,width:ue.width,height:ue.height,nodeMidPoint:he,fill:g,stroke:y,strokeWidth:S,label:yu?{text:yu,fontStyle:je,fontWeight:vt,fontSize:vr,fontFamily:gr,textAlign:un.textAlign,textBaseline:un.textBaseline,fill:Wd,x:un.x,y:un.y}:void 0};U.nodeData.push(Vn),U.labelData.push(Vn)}}),[2,[U]]})})},t.prototype.nodeFactory=function(){return new fr},t.prototype.updateDatumSelection=function(e){return fo(this,void 0,void 0,function(){return ho(this,function(a){return[2,e.datumSelection.update(e.nodeData,function(s){return s.tag=Xc.Bar},function(s){return s.xValue})]})})},t.prototype.updateDatumNodes=function(e){return fo(this,void 0,void 0,function(){var r,n,i,a,s,l,u,c,d,h,p,v,g,y,S,m,C,_,w=this;return ho(this,function(x){return r=e.datumSelection,n=e.isHighlight,a=(i=this).fill,s=i.stroke,l=i.fillOpacity,u=i.strokeOpacity,c=i.lineDash,d=i.lineDashOffset,h=i.shadow,p=i.formatter,v=i.id,g=i.highlightStyle.item,y=i.ctx,S=i.stackGroup,m=this.axes[Z.X],C=function lT(o){void 0===o&&(o=[]);var t=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i}(o,2);return!(0!==t[0]||1!==t[1])}(m?.visibleRange),_=this.getCategoryDirection()===Z.X,r.each(function(b,O){var T={fill:a,stroke:s,fillOpacity:l,strokeOpacity:u,lineDash:c,lineDashOffset:d,fillShadow:h,strokeWidth:w.getStrokeWidth(w.strokeWidth,O)},E=_?O.width>0:O.height>0,P=function sT(o){var t,e,r,n,i,a,s,l=o.datum,u=o.isHighlighted,c=o.style,d=o.highlightStyle,h=o.formatter,p=o.seriesId,v=o.stackGroup,g=o.ctx.callbackCache,y=function(o,t){var e={};for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&t.indexOf(r)<0&&(e[r]=o[r]);if(null!=o&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(o);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(o,r[n])&&(e[r[n]]=o[r[n]])}return e}(o,["datum","isHighlighted","style","highlightStyle","formatter","seriesId","stackGroup","ctx"]),S=u&&null!==(t=d.fill)&&void 0!==t?t:c.fill,m=u&&null!==(e=d.stroke)&&void 0!==e?e:c.stroke,C=u&&null!==(r=d.strokeWidth)&&void 0!==r?r:c.strokeWidth,_=u&&null!==(n=d.fillOpacity)&&void 0!==n?n:c.fillOpacity,w=c.strokeOpacity,x=c.fillShadow,b=c.lineDash,O=c.lineDashOffset,T=void 0;return h&&(T=g.call(h,$c({datum:l.datum,xKey:l.xKey,yKey:l.yKey,fill:S,stroke:m,strokeWidth:C,highlighted:u,seriesId:p,stackGroup:v},y))),{fill:null!==(i=T?.fill)&&void 0!==i?i:S,stroke:null!==(a=T?.stroke)&&void 0!==a?a:m,strokeWidth:null!==(s=T?.strokeWidth)&&void 0!==s?s:C,fillOpacity:_,strokeOpacity:w,lineDash:b,lineDashOffset:O,fillShadow:x}}({datum:O,isHighlighted:n,style:T,highlightStyle:g,formatter:p,seriesId:v,stackGroup:S,ctx:y});P.crisp=C,P.visible=E,function aT(o){var t=o.rect,e=o.config,r=e.crisp,i=e.fill,a=e.stroke,s=e.strokeWidth,l=e.fillOpacity,u=e.strokeOpacity,c=e.lineDash,d=e.lineDashOffset,h=e.fillShadow,p=e.visible,v=void 0===p||p;t.crisp=void 0===r||r,t.fill=i,t.stroke=a,t.strokeWidth=s,t.fillOpacity=l,t.strokeOpacity=u,t.lineDash=c,t.lineDashOffset=d,t.fillShadow=h,t.visible=v}({rect:b,config:P})}),[2]})})},t.prototype.updateLabelSelection=function(e){return fo(this,void 0,void 0,function(){var r;return ho(this,function(s){return r=e.labelData,[2,e.labelSelection.update(this.label.enabled?r:[],function(l){l.tag=Xc.Label,l.pointerEvents=Ct.None})]})})},t.prototype.updateLabelNodes=function(e){return fo(this,void 0,void 0,function(){var n=this;return ho(this,function(i){return e.labelSelection.each(function(a,s){!function uT(o){var t=o.labelNode,e=o.labelDatum,r=o.config,n=o.visible;if(e&&r&&r.enabled){var i=e.x,a=e.y,s=e.text,l=e.textAlign,u=e.textBaseline,d=r.fontWeight,h=r.fontSize,p=r.fontFamily,v=r.color;t.fontStyle=r.fontStyle,t.fontWeight=d,t.fontSize=h,t.fontFamily=p,t.textAlign=l,t.textBaseline=u,t.text=s,t.x=i,t.y=a,t.fill=v,t.visible=n}else t.visible=!1}({labelNode:a,labelDatum:s.label,config:n.label,visible:!0})}),[2]})})},t.prototype.getTooltipHtml=function(e){var r,n=this,i=n.xKey,a=n.yKey,s=n.processedData,l=n.ctx.callbackCache,u=this.getCategoryAxis(),c=this.getValueAxis(),d=e.xValue,h=e.yValue,p=e.datum;if(!(s&&i&&a&&u&&c))return"";var v=this,g=v.xName,y=v.yName,S=v.fill,m=v.stroke,_=v.formatter,w=v.id,x=v.stackGroup,b=v.tooltip.renderer,O=this.getStrokeWidth(this.strokeWidth),T=dt(u.formatDatum(d)),E=dt(c.formatDatum(h)),P=dt(y),D=T+": "+E,R=void 0;_&&(R=l.call(_,{datum:p,fill:S,stroke:m,strokeWidth:O,highlighted:!1,xKey:i,yKey:a,seriesId:w,stackGroup:x}));var M=null!==(r=R?.fill)&&void 0!==r?r:S,F={title:P,backgroundColor:M,content:D};return b?st(b({datum:p,xKey:i,xValue:d,xName:g,yKey:a,yValue:h,yName:y,color:M,title:P,seriesId:w,stackGroup:x}),F):st(F)},t.prototype.getLegendData=function(){var e,r=this,n=r.id,i=r.data,a=r.xKey,s=r.yKey,l=r.yName,u=r.legendItemName,c=r.fill,d=r.stroke,h=r.fillOpacity,p=r.strokeOpacity,v=r.visible;if(!(r.showInLegend&&i?.length&&a&&s))return[];var y=[];return y.push({legendType:"category",id:n,itemId:s,seriesId:n,enabled:v,label:{text:null!==(e=u??l)&&void 0!==e?e:s},legendItemName:u,marker:{fill:c,stroke:d,fillOpacity:h,strokeOpacity:p}}),y},t.prototype.animateEmptyUpdateReady=function(e){var n,i,r=this,a=e.datumSelections,s=e.labelSelections,l=null!==(i=null===(n=this.ctx.animationManager)||void 0===n?void 0:n.defaultOptions.duration)&&void 0!==i?i:1e3,c=this.getDirectionStartingValues(a),d=c.startingX,h=c.startingY;a.forEach(function(p){p.each(function(v,g){var y,S=d,m=0,C=g.y,_=g.height;r.getBarDirection()===Z.Y&&(S=g.x,m=g.width,C=h,_=0),null===(y=r.ctx.animationManager)||void 0===y||y.animateMany(r.id+"_empty-update-ready_"+v.id,[{from:S,to:g.x},{from:m,to:g.width},{from:C,to:g.y},{from:_,to:g.height}],{duration:l,ease:Hi,onUpdate:function(x){var b=po(x,4),T=b[1],E=b[2],P=b[3];v.x=b[0],v.width=T,v.y=E,v.height=P}})})}),s.forEach(function(p){p.each(function(v){var g;null===(g=r.ctx.animationManager)||void 0===g||g.animate(r.id+"_empty-update-ready_"+v.id,{from:0,to:1,delay:l,duration:200,onUpdate:function(y){v.opacity=y}})})})},t.prototype.animateReadyHighlight=function(e){this.resetSelectionRects(e)},t.prototype.animateReadyResize=function(e){var n,r=this,i=e.datumSelections;null===(n=this.ctx.animationManager)||void 0===n||n.reset(),i.forEach(function(a){r.resetSelectionRects(a)})},t.prototype.animateWaitingUpdateReady=function(e){var n,i,a,s,l,r=this,u=e.datumSelections,c=e.labelSelections,d=this.processedData,h=null===(n=d?.reduced)||void 0===n?void 0:n.diff;if(h?.changed){var p=null!==(a=null===(i=this.ctx.animationManager)||void 0===i?void 0:i.defaultOptions.duration)&&void 0!==a?a:1e3,g=p;(h.added.length>0||h.removed.length>0)&&(g=Math.floor(p/2));var y=this.getDirectionStartingValues(u),S=y.startingX,m=y.startingY,C=null===(l=null===(s=this.processedData)||void 0===s?void 0:s.defs.keys)||void 0===l?void 0:l[0],_={};h.added.forEach(function(O){_[O[0]]=!0});var w={};h.removed.forEach(function(O){w[O[0]]=!0});var x=this.id+"_"+Math.random(),b=this.id+"_"+Math.random();u.forEach(function(O){O.each(function(T,E){var P,D=[{from:T.x,to:E.x},{from:T.width,to:E.width},{from:T.y,to:E.y},{from:T.height,to:E.height}],R=h.removed.length>0?g:0,M=g,F=!1,I=C?E.xValue:"",L=S,N=0,k=E.y,U=E.height;r.getBarDirection()===Z.Y&&(L=E.x,N=E.width,k=m,U=0),void 0!==I&&void 0!==_[I]?(D=[{from:L,to:E.x},{from:N,to:E.width},{from:k,to:E.y},{from:U,to:E.height}],M=g):void 0!==I&&void 0!==w[I]&&(D=[{from:E.x,to:L},{from:E.width,to:N},{from:E.y,to:k},{from:E.height,to:U}],R=0,M=g,F=!0),null===(P=r.ctx.animationManager)||void 0===P||P.animateManyWithThrottle(r.id+"_waiting-update-ready_"+T.id,D,{delay:R,duration:M,ease:Hi,throttleId:r.id+"_rects",throttleGroup:x,onUpdate:function(j){var K=po(j,4),H=K[1],Y=K[2],Q=K[3];T.x=K[0],T.width=H,T.y=Y,T.height=Q},onComplete:function(){F&&O.cleanup()}})})}),c.forEach(function(O){O.each(function(T){var E;T.opacity=0,null===(E=r.ctx.animationManager)||void 0===E||E.animateWithThrottle(r.id+"_waiting-update-ready_"+T.id,{from:0,to:1,delay:p,duration:200,throttleId:r.id+"_labels",throttleGroup:b,onUpdate:function(P){T.opacity=P}})})})}else u.forEach(function(O){r.resetSelectionRects(O)})},t.prototype.resetSelectionRects=function(e){e.each(function(r,n){r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height}),e.cleanup()},t.prototype.getDirectionStartingValues=function(e){var r=this.getBarDirection()===Z.Y,n=this.axes[Z.X],i=this.axes[Z.Y],a=n?.scale instanceof Pe,l=1/0,u=0;return i&&r&&(i?.scale instanceof Pe?u=i.scale.convert(0):e.forEach(function(c){return c.each(function(d,h){h.yValue>=0&&(u=Math.max(u,h.height+h.y))})})),n&&!r&&(a?l=n.scale.convert(0):e.forEach(function(c){return c.each(function(d,h){h.yValue>=0&&(l=Math.min(l,h.x))})})),{startingX:l,startingY:u}},t.prototype.isLabelEnabled=function(){return this.label.enabled},t.prototype.getBandScalePadding=function(){return{inner:.2,outer:.3}},t.prototype.getBarDirection=function(){return Z.X},t.prototype.getCategoryDirection=function(){return Z.Y},t.className="BarSeries",t.type="bar",ft([A(De)],t.prototype,"fill",void 0),ft([A(De)],t.prototype,"stroke",void 0),ft([A(X(0,1))],t.prototype,"fillOpacity",void 0),ft([A(X(0,1))],t.prototype,"strokeOpacity",void 0),ft([A(Vi)],t.prototype,"lineDash",void 0),ft([A(X(0))],t.prototype,"lineDashOffset",void 0),ft([A(ke)],t.prototype,"formatter",void 0),ft([A(oe)],t.prototype,"xKey",void 0),ft([A(oe)],t.prototype,"xName",void 0),ft([A(oe)],t.prototype,"yKey",void 0),ft([A(oe)],t.prototype,"yName",void 0),ft([A(oe)],t.prototype,"stackGroup",void 0),ft([A(_e())],t.prototype,"normalizedTo",void 0),ft([A(X(0))],t.prototype,"strokeWidth",void 0),t}(ka),pT=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return Vl(t,o),t.prototype.getBarDirection=function(){return Z.Y},t.prototype.getCategoryDirection=function(){return Z.X},t.type="column",t.className="ColumnSeries",t}(_v),Qc=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ht=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},vo=function(o,t,e,r){return new(e||(e=Promise))(function(i,a){function s(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):function n(i){return i instanceof e?i:new e(function(a){a(i)})}(c.value).then(s,l)}u((r=r.apply(o,t||[])).next())})},go=function(o,t){var r,n,i,a,e={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(!(i=(i=e.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){e=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){e.label=u[1];break}if(6===u[0]&&e.label<i[1]){e.label=i[1],i=u;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(u);break}i[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(o,e)}catch(c){u=[6,c],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},Pn=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},xv=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},vT=["count","sum","mean"],gT=ne(function(o){return vT.includes(o)},"expecting a histogram aggregation keyword such as 'count', 'sum' or 'mean"),Zc=function(o){return o[o.Bin=0]="Bin",o[o.Label=1]="Label",o}(Zc||{}),yT=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.formatter=void 0,e}return Qc(t,o),ht([A(ke)],t.prototype,"formatter",void 0),t}(dr),mT=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.renderer=void 0,e}return Qc(t,o),ht([A(ke)],t.prototype,"renderer",void 0),t}(qn),ST=function(o){function t(e){var r=o.call(this,{moduleCtx:e,pickModes:[et.EXACT_SHAPE_MATCH]})||this;return r.label=new yT,r.tooltip=new mT,r.fill=void 0,r.stroke=void 0,r.fillOpacity=1,r.strokeOpacity=1,r.lineDash=[0],r.lineDashOffset=0,r.xKey=void 0,r.areaPlot=!1,r.bins=void 0,r.aggregation="count",r.binCount=void 0,r.xName=void 0,r.yKey=void 0,r.yName=void 0,r.strokeWidth=1,r.shadow=void 0,r.calculatedBins=[],r.datumSelectionGarbageCollection=!1,r.label.enabled=!1,r}return Qc(t,o),t.prototype.deriveBins=function(e){if(void 0===this.binCount){var r=Tc(e[0],e[1],10),n=Ma(e[0],e[1],10),i=r[0];return xv([[i-n,i]],Pn(r.map(function(s){return[s,s+n]})))}return this.calculateNiceBins(e,this.binCount)},t.prototype.calculateNiceBins=function(e,r){var n=Math.floor(e[0]),i=e[1],a=r||1,s=this.calculateNiceStart(n,i,a);return this.getBins(s.start,i,s.binSize,a)},t.prototype.getBins=function(e,r,n,i){for(var a=[],s=0;s<i;s++){var l=Math.round(10*(e+s*n))/10,u=Math.round(10*(e+(s+1)*n))/10;s===i-1&&(u=Math.max(u,r)),a[s]=[l,u]}return a},t.prototype.calculateNiceStart=function(e,r,n){var i=Math.abs(r-e)/n,a=Math.floor(Math.log10(i)),s=Math.pow(10,a);return{start:Math.floor(e/s)*s,binSize:i}},t.prototype.processData=function(e){var r;return vo(this,void 0,void 0,function(){var n,a,s,l,u,c,d,h,p,g,y=this;return go(this,function(S){switch(S.label){case 0:return a=(n=this).yKey,s=n.data,l=n.areaPlot,u=n.aggregation,c=[vc(this,n.xKey,!0),Xx],a?(d=Ph(this,"groupCount"),"count"===u||("sum"===u?d=function Wx(o,t,e){return{id:t,scopes:[o.id],type:"aggregate",matchGroupIds:e?[e]:void 0,aggregateFunction:function(r){return Th(r)},groupAggregateFunction:function(r,n){var i,a;return void 0===n&&(n=[0,0]),n[0]+=null!==(i=r?.[0])&&void 0!==i?i:0,n[1]+=null!==(a=r?.[1])&&void 0!==a?a:0,n}}}(this,"groupAgg"):"mean"===u&&(d=function Kx(o,t,e){return{id:t,scopes:[o.id],matchGroupIds:e?[e]:void 0,type:"aggregate",aggregateFunction:function(n){return Th(n)},groupAggregateFunction:function(n,i){var a,s;return void 0===i&&(i=[0,0,-1]),i[0]+=null!==(a=n?.[0])&&void 0!==a?a:0,i[1]+=null!==(s=n?.[1])&&void 0!==s?s:0,i[2]++,i},finalFunction:function(n){void 0===n&&(n=[0,0,0]);var i=n[0]+n[1];return i>=0?[0,i/n[2]]:[i/n[2],0]}}}(this,"groupAgg"))),l&&(d=Ah(this,"groupAgg",d)),c.push(ut(this,a,!0,{invalidValue:void 0}),d)):(d=Ph(this,"groupAgg"),l&&(d=Ah(this,"groupAgg",d)),c.push(d)),h=function(m){var C,_=ol(m.domain.keys[0]);if(0===_.length)return m.domain.groups=[],function(){return[]};var w=null!==(C=y.bins)&&void 0!==C?C:y.deriveBins(_),x=w.length;return y.calculatedBins=xv([],Pn(w)),function(b){for(var O=b.keys[0],T=0;T<x;T++){var E=w[T];if(O>=E[0]&&O<E[1]||T===x-1&&O<=E[1])return E}return[]}},!(null!==(r=this.ctx.animationManager)&&void 0!==r&&r.skipAnimations)&&this.processedData&&c.push(Rh(this.processedData,!1)),[4,e.request(this.id,s??[],{props:c,dataVisible:this.visible,groupByFn:h})];case 1:return p=S.sent(),g=p.processedData,this.dataModel=p.dataModel,this.processedData=g,this.animationState.transition("updateData"),[2]}})})},t.prototype.getDomain=function(e){var r,n,i,a,l=this.processedData,u=this.dataModel;if(!l||!u)return[];var c=u.getDomain(this,"groupAgg","aggregate",l),d=null===(r=this.calculatedBins)||void 0===r?void 0:r[0][0],h=null===(n=this.calculatedBins)||void 0===n?void 0:n[(null!==(a=null===(i=this.calculatedBins)||void 0===i?void 0:i.length)&&void 0!==a?a:0)-1][1];return ol(e===Z.X?[d,h]:c)},t.prototype.getNodeClickEvent=function(e,r){var n,i;return new kl(null!==(n=this.xKey)&&void 0!==n?n:"",null!==(i=this.yKey)&&void 0!==i?i:"",e,r,this)},t.prototype.getNodeDoubleClickEvent=function(e,r){var n,i;return new Gl(null!==(n=this.xKey)&&void 0!==n?n:"",null!==(i=this.yKey)&&void 0!==i?i:"",e,r,this)},t.prototype.createNodeData=function(){var e;return vo(this,void 0,void 0,function(){var r,n,i,a,s,l,u,c,d,h,p,v,g,y,S,m,C,_,w,x,b,O,T,E,P,D,R,M=this;return go(this,function(F){return i=(r=this).processedData,a=r.ctx.callbackCache,s=(n=r.axes)[Z.X],l=n[Z.Y],this.visible&&s&&l&&i&&"grouped"===i.type?(u=s.scale,c=l.scale,h=(d=this).fill,p=d.stroke,v=d.strokeWidth,g=d.id,S=void 0===(y=d.yKey)?"":y,C=void 0===(m=d.xKey)?"":m,_=[],w=function(I){return String(I.value)},O=void 0===(b=(x=this.label).formatter)?w:b,T=x.fontStyle,E=x.fontWeight,P=x.fontSize,D=x.fontFamily,R=x.color,i.data.forEach(function(I){var L,N=I.aggValues,U=Pn(void 0===N?[[0,0]]:N,1),G=Pn(U[0],2),B=G[0],j=G[1],K=I.datum,V=I.datum.length,H=I.keys,Y=Pn(I.keys,2),ie=Y[1],te=u.convert(Y[0]),ve=u.convert(ie),ye=B+j,de=c.convert(0),fe=c.convert(ye),z=ve-te,J=Math.abs(fe-de),ue=0!==ye?{text:null!==(L=a.call(O,{value:ye,seriesId:g}))&&void 0!==L?L:String(ye),fontStyle:T,fontWeight:E,fontSize:P,fontFamily:D,fill:R,x:te+z/2,y:fe+J/2}:void 0;_.push({series:M,datum:K,aggregatedValue:ye,frequency:V,domain:H,yKey:S,xKey:C,x:te,y:fe,xValue:te,yValue:fe,width:z,height:J,nodeMidPoint:{x:te+z/2,y:fe+J/2},fill:h,stroke:p,strokeWidth:v,label:ue})}),[2,[{itemId:null!==(e=this.yKey)&&void 0!==e?e:this.id,nodeData:_,labelData:_}]]):[2,[]]})})},t.prototype.nodeFactory=function(){return new fr},t.prototype.updateDatumSelection=function(e){return vo(this,void 0,void 0,function(){return go(this,function(i){return[2,e.datumSelection.update(e.nodeData,function(a){a.tag=Zc.Bin,a.crisp=!0},function(a){return a.domain.join("_")})]})})},t.prototype.updateDatumNodes=function(e){return vo(this,void 0,void 0,function(){var n,i,a,s,l,u,c,d,h,p,v,g=this;return go(this,function(y){return n=e.isHighlight,a=(i=this).fillOpacity,s=i.strokeOpacity,l=i.shadow,c=(u=i.highlightStyle.item).fill,h=void 0===(d=u.fillOpacity)?a:d,p=u.stroke,v=u.strokeWidth,e.datumSelection.each(function(S,m,C){var _,w,x=n&&void 0!==v?v:m.strokeWidth,b=n?h:a;S.fill=null!==(_=n?c:void 0)&&void 0!==_?_:m.fill,S.stroke=null!==(w=n?p:void 0)&&void 0!==w?w:m.stroke,S.fillOpacity=b,S.strokeOpacity=s,S.strokeWidth=x,S.lineDash=g.lineDash,S.lineDashOffset=g.lineDashOffset,S.fillShadow=l,S.zIndex=n?ll.highlightedZIndex:C,S.visible=m.height>0}),[2]})})},t.prototype.updateLabelSelection=function(e){return vo(this,void 0,void 0,function(){return go(this,function(i){return[2,e.labelSelection.update(e.labelData,function(a){a.tag=Zc.Label,a.pointerEvents=Ct.None,a.textAlign="center",a.textBaseline="middle"})]})})},t.prototype.updateLabelNodes=function(e){return vo(this,void 0,void 0,function(){var n;return go(this,function(i){return n=this.label.enabled,e.labelSelection.each(function(a,s){var l=s.label;l&&n?(a.text=l.text,a.x=l.x,a.y=l.y,a.fontStyle=l.fontStyle,a.fontWeight=l.fontWeight,a.fontSize=l.fontSize,a.fontFamily=l.fontFamily,a.fill=l.fill,a.visible=!0):a.visible=!1}),[2]})})},t.prototype.getTooltipHtml=function(e){var r=this,n=r.xKey,i=r.yKey,a=void 0===i?"":i,s=r.axes,l=s[Z.X],u=s[Z.Y];if(!n||!l||!u)return"";var c=this,d=c.xName,h=c.yName,p=c.fill,g=c.aggregation,y=c.id,S=c.tooltip.renderer,m=e.aggregatedValue,C=e.frequency,_=e.domain,w=Pn(e.domain,2),x=w[0],b=w[1],O=dt(d??n)+": "+l.formatDatum(x)+" - "+l.formatDatum(b),T=a?"<b>"+dt(h??a)+" ("+g+")</b>: "+u.formatDatum(m)+"<br>":"",E={title:O,backgroundColor:p,content:T+="<b>Frequency</b>: "+C};return S?st(S({datum:{data:e.datum,aggregatedValue:e.aggregatedValue,domain:e.domain,frequency:e.frequency},xKey:n,xValue:_,xName:d,yKey:a,yValue:m,yName:h,color:p,title:O,seriesId:y}),E):st(E)},t.prototype.getLegendData=function(){var e,r=this,n=r.id,i=r.data,a=r.xKey;return i&&0!==i.length?[{legendType:"category",id:n,itemId:a,seriesId:n,enabled:r.visible,label:{text:null!==(e=r.yName??a)&&void 0!==e?e:"Frequency"},marker:{fill:r.fill??"rgba(0, 0, 0, 0)",stroke:r.stroke??"rgba(0, 0, 0, 0)",fillOpacity:r.fillOpacity,strokeOpacity:r.strokeOpacity}}]:[]},t.prototype.animateEmptyUpdateReady=function(e){var n,i,r=this,a=e.datumSelections,s=e.labelSelections,l=null!==(i=null===(n=this.ctx.animationManager)||void 0===n?void 0:n.defaultOptions.duration)&&void 0!==i?i:1e3,c=0;a.forEach(function(d){return d.each(function(h,p){c=Math.max(c,p.height+p.y)})}),a.forEach(function(d){d.each(function(h,p){var v;null===(v=r.ctx.animationManager)||void 0===v||v.animateMany(r.id+"_empty-update-ready_"+h.id,[{from:c,to:p.y},{from:0,to:p.height}],{duration:l,ease:Hi,onUpdate:function(g){var y=Pn(g,2),m=y[1];h.y=y[0],h.height=m,h.x=p.x,h.width=p.width}})})}),s.forEach(function(d){d.each(function(h){var p;null===(p=r.ctx.animationManager)||void 0===p||p.animate(r.id+"_empty-update-ready_"+h.id,{from:0,to:1,delay:l,duration:200,onUpdate:function(v){h.opacity=v}})})})},t.prototype.animateReadyUpdate=function(e){var r=this;e.datumSelections.forEach(function(i){r.resetSelectionRects(i)})},t.prototype.animateReadyHighlight=function(e){this.resetSelectionRects(e)},t.prototype.animateReadyResize=function(e){var n,r=this,i=e.datumSelections;null===(n=this.ctx.animationManager)||void 0===n||n.reset(),i.forEach(function(a){r.resetSelectionRects(a)})},t.prototype.animateWaitingUpdateReady=function(e){var n,i,a,r=this,s=e.datumSelections,l=e.labelSelections,u=this.processedData,c=null===(n=u?.reduced)||void 0===n?void 0:n.diff;if(c?.changed){var d=null!==(a=null===(i=this.ctx.animationManager)||void 0===i?void 0:i.defaultOptions.duration)&&void 0!==a?a:1e3,p=d;c.added.length>0&&c.removed.length>0?p=Math.floor(d/3):(c.added.length>0||c.removed.length>0)&&(p=Math.floor(d/2));var v=0;s.forEach(function(S){return S.each(function(m,C){v=Math.max(v,C.height+C.y)})});var g={};c.added.forEach(function(S){g[S.join("_")]=!0});var y={};c.removed.forEach(function(S){y[S.join("_")]=!0}),s.forEach(function(S){S.each(function(m,C){var _,w=[{from:m.x,to:C.x},{from:m.width,to:C.width},{from:m.y,to:C.y},{from:m.height,to:C.height}],x=c.removed.length>0?p:0,b=!1,O=C.domain.join("_");void 0!==O&&void 0!==g[O]?(w=[{from:C.x,to:C.x},{from:C.width,to:C.width},{from:v,to:C.y},{from:0,to:C.height}],x+=p):void 0!==O&&void 0!==y[O]&&(w=[{from:m.x,to:C.x},{from:m.width,to:C.width},{from:C.y,to:v},{from:C.height,to:0}],x=0,b=!0),null===(_=r.ctx.animationManager)||void 0===_||_.animateMany(r.id+"_waiting-update-ready_"+m.id,w,{disableInteractions:!0,delay:x,duration:p,ease:Hi,repeat:0,onUpdate:function(P){var D=Pn(P,4),M=D[1],F=D[2],I=D[3];m.x=D[0],m.width=M,m.y=F,m.height=I},onComplete:function(){b&&S.cleanup()}})})}),l.forEach(function(S){S.each(function(m){var C;m.opacity=0,null===(C=r.ctx.animationManager)||void 0===C||C.animate(r.id+"_waiting-update-ready_"+m.id,{from:0,to:1,delay:d,duration:200,ease:Uh,repeat:0,onUpdate:function(_){m.opacity=_}})})})}else s.forEach(function(S){r.resetSelectionRects(S)})},t.prototype.resetSelectionRects=function(e){e.each(function(r,n){r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height})},t.prototype.isLabelEnabled=function(){return this.label.enabled},t.className="HistogramSeries",t.type="histogram",ht([A(De)],t.prototype,"fill",void 0),ht([A(De)],t.prototype,"stroke",void 0),ht([A(X(0,1))],t.prototype,"fillOpacity",void 0),ht([A(X(0,1))],t.prototype,"strokeOpacity",void 0),ht([A(Vi)],t.prototype,"lineDash",void 0),ht([A(X(0))],t.prototype,"lineDashOffset",void 0),ht([A(oe)],t.prototype,"xKey",void 0),ht([A(Te)],t.prototype,"areaPlot",void 0),ht([A(ac())],t.prototype,"bins",void 0),ht([A(gT)],t.prototype,"aggregation",void 0),ht([A(_e(0))],t.prototype,"binCount",void 0),ht([A(oe)],t.prototype,"xName",void 0),ht([A(oe)],t.prototype,"yKey",void 0),ht([A(oe)],t.prototype,"yName",void 0),ht([A(X(0))],t.prototype,"strokeWidth",void 0),t}(ka),qc=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),yo=function(){return yo=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},yo.apply(this,arguments)},Bt=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},mo=function(o,t,e,r){return new(e||(e=Promise))(function(i,a){function s(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):function n(i){return i instanceof e?i:new e(function(a){a(i)})}(c.value).then(s,l)}u((r=r.apply(o,t||[])).next())})},So=function(o,t){var r,n,i,a,e={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(!(i=(i=e.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){e=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){e.label=u[1];break}if(6===u[0]&&e.label<i[1]){e.label=i[1],i=u;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(u);break}i[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(o,e)}catch(c){u=[6,c],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},bv=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},CT=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.formatter=void 0,e}return qc(t,o),Bt([A(ke)],t.prototype,"formatter",void 0),t}(dr),_T=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.renderer=void 0,e.format=void 0,e}return qc(t,o),Bt([A(ke)],t.prototype,"renderer",void 0),Bt([A(oe)],t.prototype,"format",void 0),t}(qn),xT=function(o){function t(e){var r=o.call(this,{moduleCtx:e,hasMarkers:!0,pickModes:[et.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST,et.NEAREST_NODE,et.EXACT_SHAPE_MATCH]})||this;r.marker=new Kc,r.label=new CT,r.title=void 0,r.stroke="#874349",r.lineDash=[0],r.lineDashOffset=0,r.strokeWidth=2,r.strokeOpacity=1,r.tooltip=new _T,r.xKey=void 0,r.xName=void 0,r.yKey=void 0,r.yName=void 0;var i=r.marker,a=r.label;return i.fill="#c16068",i.stroke="#874349",a.enabled=!1,r}return qc(t,o),t.prototype.processData=function(e){return mo(this,void 0,void 0,function(){var r,n,i,a,s,l,u,c,d,h,p,v,y;return So(this,function(S){switch(S.label){case 0:return l=void 0===(s=(r=this).yKey)?"":s,u=(a=void 0===(i=r.xKey)?"":i)&&l&&this.data?this.data:[],c=(n=r.axes)[Z.X],d=n[Z.Y],h=c?.scale instanceof Pe,p=d?.scale instanceof Pe,[4,e.request(this.id,u??[],{props:[ut(this,a,h,{id:"xValue"}),ut(this,l,p,{id:"yValue",invalidValue:void 0})],dataVisible:this.visible})];case 1:return v=S.sent(),y=v.processedData,this.dataModel=v.dataModel,this.processedData=y,[2]}})})},t.prototype.getDomain=function(e){var r=this,n=r.axes,i=r.dataModel,a=r.processedData;if(!a||!i)return[];var s=n[Z.X],l=n[Z.Y],u=i.resolveProcessedDataDefById(this,"xValue");if(e===Z.X){var c=i.getDomain(this,"xValue","value",a);return"value"===u?.def.type&&"category"===u.def.valueType?c:this.fixNumericExtent(kt(c),s)}return c=i.getDomain(this,"yValue","value",a),this.fixNumericExtent(c,l)},t.prototype.createNodeData=function(){var e,r,n,i,a;return mo(this,void 0,void 0,function(){var s,l,u,c,d,h,p,v,g,y,S,m,C,_,w,x,b,O,T,E,P,D,R,M,F,I,L,N,k,U,G,B,j,K,V,H,Y,Q,ie,te,ve,ye,de;return So(this,function(fe){if(u=(s=this).dataModel,h=(d=s.marker).enabled,p=d.size,v=d.strokeWidth,g=s.ctx.callbackCache,y=(c=s.axes)[Z.X],S=c[Z.Y],!((l=s.processedData)&&u&&y&&S))return[2,[]];for(C=(m=this).label,w=void 0===(_=m.yKey)?"":_,b=void 0===(x=m.xKey)?"":x,O=m.id,P=(null!==(e=(T=y.scale).bandwidth)&&void 0!==e?e:0)/2,D=(null!==(r=(E=S.scale).bandwidth)&&void 0!==r?r:0)/2,R=new Array(l.data.length),M=h?p:0,F=u.resolveProcessedDataIndexById(this,"xValue").index,I=u.resolveProcessedDataIndexById(this,"yValue").index,L=!0,N=void 0,k=void 0,U=0,G=0;G<l.data.length;G++)if(j=(B=k??l.data[G]).datum,V=(K=B.values)[F],void 0===(H=K[I]))N=void 0,L=!0;else{if(Y=T.convert(V)+P,isNaN(Y)){N=void 0,L=!0,k=void 0;continue}if(Q=(null!==(n=T.bandwidth)&&void 0!==n?n:.5*p+(v??0))+1,k=void 0===(null===(i=l.data[G+1])||void 0===i?void 0:i.values[I])?void 0:l.data[G+1],ie=null===(a=l.data[G+1])||void 0===a?void 0:a.values[F],te=y.inRangeEx(Y,0,Q),ve=k&&y.inRangeEx(T.convert(ie)+P,0,Q),-1===te&&-1===ve){L=!0;continue}if(1===te&&1===N){L=!0;continue}N=te,ye=E.convert(H)+D,de=void 0,C.formatter&&(de=g.call(C.formatter,{value:H,seriesId:O})),void 0!==de||("number"==typeof H&&isFinite(H)?de=H.toFixed(2):H&&(de=String(H))),R[U++]={series:this,datum:j,yKey:w,xKey:b,point:{x:Y,y:ye,moveTo:L,size:M},nodeMidPoint:{x:Y,y:ye},yValue:H,xValue:V,label:de?{text:de,fontStyle:C.fontStyle,fontWeight:C.fontWeight,fontSize:C.fontSize,fontFamily:C.fontFamily,textAlign:"center",textBaseline:"bottom",fill:C.color}:void 0},L=!1}return R.length=U,[2,[{itemId:w,nodeData:R,labelData:R}]]})})},t.prototype.isPathOrSelectionDirty=function(){return this.marker.isDirty()},t.prototype.markerFactory=function(){return new(Ki(this.marker.shape))},t.prototype.updateMarkerSelection=function(e){return mo(this,void 0,void 0,function(){var r,n,i,s;return So(this,function(l){return r=e.nodeData,n=e.markerSelection,s=(i=this.marker).enabled,r=i.shape&&s?r:[],this.marker.isDirty()&&n.clear(),[2,n.update(r)]})})},t.prototype.updateMarkerNodes=function(e){var r;return mo(this,void 0,void 0,function(){var i,a,s,l,u,c,d,h,p,v,g,y,S,m,C,_,w,x,b,O,T,E;return So(this,function(P){return i=e.isHighlight,l=(a=this).marker.fillOpacity,c=void 0===(u=a.xKey)?"":u,h=void 0===(d=a.yKey)?"":d,p=a.stroke,v=a.strokeOpacity,y=(g=a.highlightStyle.item).fill,m=void 0===(S=g.fillOpacity)?l:S,C=g.stroke,_=g.strokeWidth,w=a.id,x=a.ctx.callbackCache,b=(s=a.marker).size,O=s.formatter,T=null!==(r=s.strokeWidth)&&void 0!==r?r:this.strokeWidth,E="function"==typeof s.shape,e.markerSelection.each(function(D,R){var M,F,I,L,N,k,U,G=i&&void 0!==y?y:s.fill,B=i?m:l,j=i&&void 0!==C?C:null!==(M=s.stroke)&&void 0!==M?M:p,K=i&&void 0!==_?_:T,V=void 0;O&&(V=x.call(O,{datum:R.datum,xKey:c,yKey:h,fill:G,stroke:j,strokeWidth:K,size:b,highlighted:i,seriesId:w})),D.fill=null!==(F=V?.fill)&&void 0!==F?F:G,D.stroke=null!==(I=V?.stroke)&&void 0!==I?I:j,D.strokeWidth=null!==(L=V?.strokeWidth)&&void 0!==L?L:K,D.fillOpacity=B??1,D.strokeOpacity=null!==(k=null!==(N=s.strokeOpacity)&&void 0!==N?N:v)&&void 0!==k?k:1,D.size=null!==(U=V?.size)&&void 0!==U?U:b,D.translationX=R.point.x,D.translationY=R.point.y,D.visible=D.size>0&&!isNaN(R.point.x)&&!isNaN(R.point.y),E&&!D.dirtyPath&&(D.path.clear({trackChanges:!0}),D.updatePath(),D.checkPathDirty())}),i||this.marker.markClean(),[2]})})},t.prototype.updateLabelSelection=function(e){return mo(this,void 0,void 0,function(){var r,i,s;return So(this,function(l){return r=e.labelData,s=(i=this.marker).enabled,[2,e.labelSelection.update(r=i.shape&&s?r:[])]})})},t.prototype.updateLabelNodes=function(e){return mo(this,void 0,void 0,function(){var n,i,a,s,l,u,c;return So(this,function(d){return i=(n=this.label).enabled,a=n.fontStyle,s=n.fontWeight,l=n.fontSize,u=n.fontFamily,c=n.color,e.labelSelection.each(function(h,p){var v=p.point,g=p.label;p&&g&&i?(h.fontStyle=a,h.fontWeight=s,h.fontSize=l,h.fontFamily=u,h.textAlign=g.textAlign,h.textBaseline=g.textBaseline,h.text=g.text,h.x=v.x,h.y=v.y-10,h.fill=c,h.visible=!0):h.visible=!1}),[2]})})},t.prototype.getNodeClickEvent=function(e,r){var n,i;return new kl(null!==(n=this.xKey)&&void 0!==n?n:"",null!==(i=this.yKey)&&void 0!==i?i:"",e,r,this)},t.prototype.getNodeDoubleClickEvent=function(e,r){var n,i;return new Gl(null!==(n=this.xKey)&&void 0!==n?n:"",null!==(i=this.yKey)&&void 0!==i?i:"",e,r,this)},t.prototype.getTooltipHtml=function(e){var r,n,i=this,a=i.xKey,s=i.yKey,l=i.axes,u=l[Z.X],c=l[Z.Y];if(!(a&&s&&u&&c))return"";var d=this,h=d.xName,p=d.yName,v=d.tooltip,g=d.marker,y=d.id,S=v.renderer,m=v.format,C=e.datum,_=e.xValue,w=e.yValue,x=u.formatDatum(_),b=c.formatDatum(w),O=dt(null!==(r=this.title)&&void 0!==r?r:p),T=dt(x+": "+b),E=g.formatter,P=g.fill,I=void 0;E&&(I=E({datum:C,xKey:a,yKey:s,fill:P,stroke:g.stroke,strokeWidth:g.strokeWidth??this.strokeWidth,size:g.size,highlighted:!1,seriesId:y}));var L=null!==(n=I?.fill)&&void 0!==n?n:P,N={title:O,backgroundColor:L,content:T};if(m||S){var k={datum:C,xKey:a,xValue:_,xName:h,yKey:s,yValue:w,yName:p,title:O,color:L,seriesId:y};if(m)return st({content:Cv(m,k)},N);if(S)return st(S(k),N)}return st(N)},t.prototype.getLegendData=function(){var e,r,n,i,a,s,l,u=this,c=u.id,d=u.data,h=u.xKey,p=u.yKey,v=u.yName,g=u.visible,y=u.title,S=u.marker,m=u.stroke,C=u.strokeOpacity;return d?.length&&h&&p?[{legendType:"category",id:c,itemId:p,seriesId:c,enabled:g,label:{text:null!==(e=y??v)&&void 0!==e?e:p},marker:{shape:S.shape,fill:null!==(r=S.fill)&&void 0!==r?r:"rgba(0, 0, 0, 0)",stroke:null!==(i=null!==(n=S.stroke)&&void 0!==n?n:m)&&void 0!==i?i:"rgba(0, 0, 0, 0)",fillOpacity:null!==(a=S.fillOpacity)&&void 0!==a?a:1,strokeOpacity:null!==(l=null!==(s=S.strokeOpacity)&&void 0!==s?s:C)&&void 0!==l?l:1}}]:[]},t.prototype.animateEmptyUpdateReady=function(e){var r=this,n=e.markerSelections,i=e.labelSelections,s=e.paths;e.contextData.forEach(function(l,u){var c,d,h,p=l.nodeData,g=bv(s[u],1)[0],y=g.path,S=[0],m=p.reduce(function(x,b,O){if(0===O)return x;var T=p[O-1];if(isNaN(b.point.x)||isNaN(b.point.y)||isNaN(T.point.x)||isNaN(T.point.y))return S.push(x),x;var E=Math.sqrt(Math.pow(b.point.x-T.point.x,2)+Math.pow(b.point.y-T.point.y,2));return S.push(x+E),x+E},0);g.fill=void 0,g.lineJoin="round",g.pointerEvents=Ct.None,g.stroke=r.stroke,g.strokeWidth=r.getStrokeWidth(r.strokeWidth),g.strokeOpacity=r.strokeOpacity,g.lineDash=r.lineDash,g.lineDashOffset=r.lineDashOffset;var C=null!==(d=null===(c=r.ctx.animationManager)||void 0===c?void 0:c.defaultOptions.duration)&&void 0!==d?d:1e3,w={from:0,to:m};null===(h=r.ctx.animationManager)||void 0===h||h.animate(r.id+"_empty-update-ready",yo(yo({},w),{duration:C,onUpdate:function(x){y.clear({trackChanges:!0}),p.forEach(function(b,O){if(S[O]<=x)b.point.moveTo?y.moveTo(b.point.x,b.point.y):y.lineTo(b.point.x,b.point.y);else if(O>0&&S[O-1]<x){var T=p[O-1].point,E=b.point,P=S[O]-S[O-1],R=(P-(S[O]-x))/P,M=(1-R)*T.x+R*E.x,F=(1-R)*T.y+R*E.y;b.point.moveTo?y.moveTo(M,F):y.lineTo(M,F)}}),g.checkPathDirty()}})),n[u].each(function(x,b,O){var T,E,P,D,R=m>0?S[O]/m*C:0,M=r.animateFormatter(b),F=null!==(E=null===(T=b.point)||void 0===T?void 0:T.size)&&void 0!==E?E:0;null===(P=r.ctx.animationManager)||void 0===P||P.animate(r.id+"_empty-update-ready_"+x.id,yo(yo({},w),{to:null!==(D=M?.size)&&void 0!==D?D:F,delay:R,duration:200,onUpdate:function(I){x.size=I}}))}),i[u].each(function(x,b,O){var T;null===(T=r.ctx.animationManager)||void 0===T||T.animate(r.id+"_empty-update-ready_"+x.id,{from:0,to:1,delay:S[O]/m*C,duration:200,onUpdate:function(P){x.opacity=P}})})})},t.prototype.animateReadyUpdate=function(e){this.resetMarkersAndPaths(e)},t.prototype.animateReadyResize=function(e){var r;null===(r=this.ctx.animationManager)||void 0===r||r.reset(),this.resetMarkersAndPaths(e)},t.prototype.resetMarkersAndPaths=function(e){var r=this,n=e.markerSelections,a=e.paths;e.contextData.forEach(function(s,l){var u=s.nodeData,d=bv(a[l],1)[0],h=d.path;d.stroke=r.stroke,d.strokeWidth=r.getStrokeWidth(r.strokeWidth),d.strokeOpacity=r.strokeOpacity,d.lineDash=r.lineDash,d.lineDashOffset=r.lineDashOffset,h.clear({trackChanges:!0}),u.forEach(function(p){p.point.moveTo?h.moveTo(p.point.x,p.point.y):h.lineTo(p.point.x,p.point.y)}),d.checkPathDirty(),n[l].each(function(p,v){var g,y,S,m=r.animateFormatter(v),C=null!==(y=null===(g=v.point)||void 0===g?void 0:g.size)&&void 0!==y?y:0;p.size=null!==(S=m?.size)&&void 0!==S?S:C})})},t.prototype.animateFormatter=function(e){var r,n,i=this,a=i.marker,s=i.xKey,u=i.yKey,g=a.formatter,S=null!==(r=a.stroke)&&void 0!==r?r:i.stroke,m=null!==(n=a.strokeWidth)&&void 0!==n?n:this.strokeWidth,C=void 0;return g&&(C=i.ctx.callbackCache.call(g,{datum:e.datum,xKey:void 0===s?"":s,yKey:void 0===u?"":u,fill:a.fill,stroke:S,strokeWidth:m,size:a.size,highlighted:!1,seriesId:i.id})),C},t.prototype.isLabelEnabled=function(){return this.label.enabled},t.className="LineSeries",t.type="line",Bt([A(oe)],t.prototype,"title",void 0),Bt([A(De)],t.prototype,"stroke",void 0),Bt([A(Vi)],t.prototype,"lineDash",void 0),Bt([A(X(0))],t.prototype,"lineDashOffset",void 0),Bt([A(X(0))],t.prototype,"strokeWidth",void 0),Bt([A(X(0,1))],t.prototype,"strokeOpacity",void 0),Bt([A(oe)],t.prototype,"xKey",void 0),Bt([A(oe)],t.prototype,"xName",void 0),Bt([A(oe)],t.prototype,"yKey",void 0),Bt([A(oe)],t.prototype,"yName",void 0),t}(ka),Ov=function(){function o(){this.domain=[0,1],this.range=["red","blue"],this.parsedRange=this.range.map(function(t){return Xe.fromString(t)})}return o.prototype.update=function(){var e=this.domain,r=this.range;e.length<2&&(q.warnOnce("`colorDomain` should have at least 2 values."),0===e.length?e.push(0,1):1===e.length&&e.push(e[0]+1));for(var n=1;n<e.length;n++)if(e[n-1]>=e[n]){q.warnOnce("`colorDomain` values should be supplied in ascending order."),e.sort(function(l,u){return l-u});break}var s=r.length<e.length;if(s||e.length>2&&r.length>e.length)if(q.warnOnce("Number of elements in `colorRange` needs to match the number of elements in `colorDomain`."),s)for(n=r.length;n<e.length;n++)r.push("black");else r.splice(e.length);this.parsedRange=this.range.map(function(l){return Xe.fromString(l)})},o.prototype.convert=function(t){var c,d,e=this,r=e.domain,n=e.range,i=e.parsedRange,a=r[0],s=r[r.length-1];if(t<=a)return n[0];if(t>=s)return n[n.length-1];if(2===r.length){var h=(t-a)/(s-a),p=1/(n.length-1);d=(h-(c=n.length<=2?0:Math.min(Math.floor(h*(n.length-1)),n.length-2))*p)/p}else{for(c=0;c<r.length-2&&!(t<r[c+1]);c++);var v=r[c];d=(t-v)/(r[c+1]-v)}return zh(i[c],i[c+1])(d)},o}(),Co=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Va=function(){return Va=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},Va.apply(this,arguments)},Et=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},_o=function(o,t,e,r){return new(e||(e=Promise))(function(i,a){function s(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):function n(i){return i instanceof e?i:new e(function(a){a(i)})}(c.value).then(s,l)}u((r=r.apply(o,t||[])).next())})},xo=function(o,t){var r,n,i,a,e={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(!(i=(i=e.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){e=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){e.label=u[1];break}if(6===u[0]&&e.label<i[1]){e.label=i[1],i=u;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(u);break}i[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(o,e)}catch(c){u=[6,c],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},Jc=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},ed=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},bT=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.formatter=void 0,e}return Co(t,o),Et([A(ke)],t.prototype,"formatter",void 0),t}(dr),Ev=function(o){function t(e,r,n,i,a,s){var l=o.call(this,r,n,i,a,s)||this;return l.sizeKey=e,l}return Co(t,o),t}(Wc),OT=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.type="nodeClick",e}return Co(t,o),t}(Ev),ET=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.type="nodeDoubleClick",e}return Co(t,o),t}(Ev),TT=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.renderer=void 0,e}return Co(t,o),Et([A(ke)],t.prototype,"renderer",void 0),t}(qn),PT=function(o){function t(e){var r=o.call(this,{moduleCtx:e,pickModes:[et.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST,et.NEAREST_NODE,et.EXACT_SHAPE_MATCH],pathsPerSeries:0,hasMarkers:!0})||this;return r.sizeScale=new Je,r.marker=new Kc,r.label=new bT,r.title=void 0,r.labelKey=void 0,r.xName=void 0,r.yName=void 0,r.sizeName="Size",r.labelName="Label",r.xKey=void 0,r.yKey=void 0,r.sizeKey=void 0,r.colorKey=void 0,r.colorName="Color",r.colorDomain=void 0,r.colorRange=["#ffff00","#00ff00","#0000ff"],r.colorScale=new Ov,r.tooltip=new TT,r.label.enabled=!1,r}return Co(t,o),t.prototype.processData=function(e){var r,n;return _o(this,void 0,void 0,function(){var i,a,s,l,u,c,d,h,p,v,g,y,S,m,C,_,w,x,b,O,T,E,P,D,R;return xo(this,function(M){switch(M.label){case 0:return s=void 0===(a=(i=this).xKey)?"":a,u=void 0===(l=i.yKey)?"":l,c=i.sizeKey,d=i.labelKey,p=i.marker,v=i.data,g=(h=i.axes)[Z.X],y=h[Z.Y],S=g?.scale instanceof Pe,m=y?.scale instanceof Pe,_=(C=this).colorScale,w=C.colorDomain,x=C.colorRange,b=C.colorKey,[4,e.request(this.id,v??[],{props:ed(ed(ed([ut(this,s,S,{id:"xValue"}),ut(this,u,m,{id:"yValue"})],Jc(c?[ut(this,c,!0,{id:"sizeValue"})]:[])),Jc(b?[ut(this,b,!0,{id:"colorValue"})]:[])),Jc(d?[ut(this,d,!1,{id:"labelValue"})]:[])),dataVisible:this.visible})];case 1:return O=M.sent(),E=O.processedData,this.dataModel=T=O.dataModel,this.processedData=E,c&&(P=T.resolveProcessedDataIndexById(this,"sizeValue").index,D=null!==(r=E.domain.values[P])&&void 0!==r?r:[],this.sizeScale.domain=p.domain?p.domain:D),b&&(R=T.resolveProcessedDataIndexById(this,"colorValue").index,_.domain=null!==(n=w??E.domain.values[R])&&void 0!==n?n:[],_.range=x,_.update()),[2]}})})},t.prototype.getDomain=function(e){var n=this.dataModel,i=this.processedData;if(!i||!n)return[];var a=e===Z.X?"xValue":"yValue",s=n.resolveProcessedDataDefById(this,a,"value"),l=n.getDomain(this,a,"value",i);if("value"===s?.def.type&&"category"===s?.def.valueType)return l;var u=this.axes[e];return this.fixNumericExtent(kt(l),u)},t.prototype.getNodeClickEvent=function(e,r){var n,i;return new OT(this.sizeKey,null!==(n=this.xKey)&&void 0!==n?n:"",null!==(i=this.yKey)&&void 0!==i?i:"",e,r,this)},t.prototype.getNodeDoubleClickEvent=function(e,r){var n,i;return new ET(this.sizeKey,null!==(n=this.xKey)&&void 0!==n?n:"",null!==(i=this.yKey)&&void 0!==i?i:"",e,r,this)},t.prototype.createNodeData=function(){var e,r,n,i,a,s;return _o(this,void 0,void 0,function(){var l,u,c,d,h,p,v,g,y,S,m,C,_,w,x,b,O,T,E,P,D,R,M,F,I,L,N,k,U,G,B,j,K,V,H,Y,Q,ie,te,ve,ye,de,fe,z,J,ue,he,je,vt;return xo(this,function(vr){if(u=(l=this).visible,h=void 0===(d=l.yKey)?"":d,v=void 0===(p=l.xKey)?"":p,g=l.label,y=l.labelKey,S=l.ctx.callbackCache,C=l.processedData,_=(c=l.axes)[Z.X],w=c[Z.Y],!((m=l.dataModel)&&C&&u&&_&&w))return[2,[]];x=m.resolveProcessedDataIndexById(this,"xValue").index,b=m.resolveProcessedDataIndexById(this,"yValue").index,O=this.sizeKey?m.resolveProcessedDataIndexById(this,"sizeValue").index:-1,T=this.colorKey?m.resolveProcessedDataIndexById(this,"colorValue").index:-1,E=this.labelKey?m.resolveProcessedDataIndexById(this,"labelValue").index:-1,D=(P=this).colorScale,R=P.sizeKey,M=P.colorKey,F=P.id,N=(null!==(e=(I=_.scale).bandwidth)&&void 0!==e?e:0)/2,k=(null!==(r=(L=w.scale).bandwidth)&&void 0!==r?r:0)/2,G=(U=this).sizeScale,B=U.marker,j=new Array(null!==(i=null===(n=this.processedData)||void 0===n?void 0:n.data.length)&&void 0!==i?i:0),G.range=[B.size,B.maxSize],K=g.getFont(),V=0;try{for(H=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(null!==(a=C.data)&&void 0!==a?a:[]),Y=H.next();!Y.done;Y=H.next())te=(Q=Y.value).datum,ye=(ie=Q.values)[b],de=I.convert(ve=ie[x])+N,fe=L.convert(ye)+k,this.checkRangeXY(de,fe,_,w)&&(z=void 0,g.formatter&&(z=S.call(g.formatter,{value:ye,seriesId:F,datum:te})),void 0===z&&(z=y?String(ie[E]):""),J=Ve.getTextSize(z,K),ue=R?G.convert(ie[O]):B.size,he=M?D.convert(ie[T]):void 0,j[V++]={series:this,itemId:h,yKey:h,xKey:v,datum:te,xValue:ve,yValue:ye,sizeValue:ie[O],point:{x:de,y:fe,size:ue},nodeMidPoint:{x:de,y:fe},fill:he,label:Va({text:z},J)})}catch(gr){je={error:gr}}finally{try{Y&&!Y.done&&(vt=H.return)&&vt.call(H)}finally{if(je)throw je.error}}return j.length=V,[2,[{itemId:null!==(s=this.yKey)&&void 0!==s?s:this.id,nodeData:j,labelData:j}]]})})},t.prototype.isPathOrSelectionDirty=function(){return this.marker.isDirty()},t.prototype.getLabelData=function(){var e;return null===(e=this.contextNodeData)||void 0===e?void 0:e.reduce(function(r,n){return r.concat(n.labelData)},[])},t.prototype.markerFactory=function(){return new(Ki(this.marker.shape))},t.prototype.updateMarkerSelection=function(e){return _o(this,void 0,void 0,function(){var r,n,i;return xo(this,function(s){return r=e.nodeData,n=e.markerSelection,i=this.marker.enabled,this.marker.isDirty()&&n.clear(),[2,n.update(i?r:[])]})})},t.prototype.updateMarkerNodes=function(e){return _o(this,void 0,void 0,function(){var r,n,i,a,s,l,u,c,h,p,v,g,y,S,m,C,_,w,x,b,O,T;return xo(this,function(E){return r=e.markerSelection,n=e.isHighlight,l=void 0===(s=(i=this).xKey)?"":s,c=void 0===(u=i.yKey)?"":u,p=(h=i.marker).fillOpacity,v=h.strokeOpacity,g=h.strokeWidth,S=(y=i.highlightStyle.item).fill,C=void 0===(m=y.fillOpacity)?p:m,_=y.stroke,w=y.strokeWidth,x=i.id,b=i.ctx.callbackCache,O=(a=i.marker).formatter,i.sizeScale.range=[a.size,a.maxSize],T="function"==typeof a.shape,r.each(function(P,D){var R,M,F,I,L,N,k,U,G,B,j=n&&void 0!==S?S:null!==(R=D.fill)&&void 0!==R?R:a.fill,K=n?C:p,V=n&&void 0!==_?_:a.stroke,H=v,Y=n&&void 0!==w?w:g??1,Q=null!==(F=null===(M=D.point)||void 0===M?void 0:M.size)&&void 0!==F?F:0,ie=void 0;O&&(ie=b.call(O,{datum:D.datum,xKey:l,yKey:c,fill:j,stroke:V,strokeWidth:Y,size:Q,highlighted:n,seriesId:x})),P.fill=null!==(I=ie?.fill)&&void 0!==I?I:j,P.stroke=null!==(L=ie?.stroke)&&void 0!==L?L:V,P.strokeWidth=null!==(N=ie?.strokeWidth)&&void 0!==N?N:Y,P.fillOpacity=K??1,P.strokeOpacity=H??1,P.translationX=null!==(U=null===(k=D.point)||void 0===k?void 0:k.x)&&void 0!==U?U:0,P.translationY=null!==(B=null===(G=D.point)||void 0===G?void 0:G.y)&&void 0!==B?B:0,P.visible=P.size>0,T&&!P.dirtyPath&&(P.path.clear({trackChanges:!0}),P.updatePath(),P.checkPathDirty())}),n||this.marker.markClean(),[2]})})},t.prototype.updateLabelSelection=function(e){var r,n;return _o(this,void 0,void 0,function(){var i,s,l;return xo(this,function(u){return i=e.labelSelection,s=this.label.enabled&&null!==(n=null===(r=this.chart)||void 0===r?void 0:r.placeLabels().get(this))&&void 0!==n?n:[],l=s.map(function(c){return Va(Va({},c.datum),{point:{x:c.x,y:c.y,size:c.datum.point.size}})}),[2,i.update(l)]})})},t.prototype.updateLabelNodes=function(e){return _o(this,void 0,void 0,function(){var n;return xo(this,function(i){return n=this.label,e.labelSelection.each(function(a,s){var l,u,c,d;a.text=s.label.text,a.fill=n.color,a.x=null!==(u=null===(l=s.point)||void 0===l?void 0:l.x)&&void 0!==u?u:0,a.y=null!==(d=null===(c=s.point)||void 0===c?void 0:c.y)&&void 0!==d?d:0,a.fontStyle=n.fontStyle,a.fontWeight=n.fontWeight,a.fontSize=n.fontSize,a.fontFamily=n.fontFamily,a.textAlign="left",a.textBaseline="top"}),[2]})})},t.prototype.getTooltipHtml=function(e){var r,n,i,a,s,l,u,c=this,d=c.xKey,h=c.yKey,p=c.axes,v=p[Z.X],g=p[Z.Y];if(!(d&&h&&v&&g))return"";var y=this,S=y.marker,m=y.tooltip,C=y.xName,_=y.yName,w=y.sizeKey,x=y.sizeName,b=y.labelKey,O=y.labelName,T=y.id,E=y.ctx.callbackCache,P=S.stroke,D=null!==(r=e.fill)&&void 0!==r?r:S.fill,R=this.getStrokeWidth(null!==(n=S.strokeWidth)&&void 0!==n?n:1),M=this.marker.formatter,F=void 0;M&&(F=E.call(M,{datum:e,xKey:d,yKey:h,fill:D,stroke:P,strokeWidth:R,size:null!==(a=null===(i=e.point)||void 0===i?void 0:i.size)&&void 0!==a?a:0,highlighted:!1,seriesId:T}));var I=null!==(l=null!==(s=F?.fill)&&void 0!==s?s:D)&&void 0!==l?l:"gray",L=null!==(u=this.title)&&void 0!==u?u:_,N=e.datum,k=e.xValue,U=e.yValue,G=e.sizeValue,B=e.label.text,j=dt(v.formatDatum(k)),K=dt(g.formatDatum(U)),V="<b>"+dt(C??d)+"</b>: "+j+"<br><b>"+dt(_??h)+"</b>: "+K;w&&(V+="<br><b>"+dt(x??w)+"</b>: "+dt(G)),b&&(V="<b>"+dt(O??b)+"</b>: "+dt(B)+"<br>"+V);var H={title:L,backgroundColor:I,content:V},Y=m.renderer;return Y?st(Y({datum:N,xKey:d,xValue:k,xName:C,yKey:h,yValue:U,yName:_,sizeKey:w,sizeName:x,labelKey:b,labelName:O,title:L,color:I,seriesId:T}),H):st(H)},t.prototype.getLegendData=function(){var e,r,n,i,a,s=this,l=s.id,u=s.data,c=s.xKey,d=s.yKey,h=s.yName,p=s.title,v=s.visible,g=s.marker,y=g.fill,S=g.stroke,m=g.fillOpacity,C=g.strokeOpacity;return u?.length&&c&&d?[{legendType:"category",id:l,itemId:d,seriesId:l,enabled:v,label:{text:null!==(e=p??h)&&void 0!==e?e:d},marker:{shape:g.shape,fill:null!==(n=null!==(r=g.fill)&&void 0!==r?r:y)&&void 0!==n?n:"rgba(0, 0, 0, 0)",stroke:null!==(a=null!==(i=g.stroke)&&void 0!==i?i:S)&&void 0!==a?a:"rgba(0, 0, 0, 0)",fillOpacity:m??1,strokeOpacity:C??1}}]:[]},t.prototype.animateEmptyUpdateReady=function(e){var n,i,r=this,s=e.labelSelections,l=null!==(i=null===(n=this.ctx.animationManager)||void 0===n?void 0:n.defaultOptions.duration)&&void 0!==i?i:1e3;e.markerSelections.forEach(function(c){c.each(function(d,h){var p,v,g,y,S=r.animateFormatter(d,h),m=null!==(v=null===(p=h.point)||void 0===p?void 0:p.size)&&void 0!==v?v:0,C=null!==(g=S?.size)&&void 0!==g?g:m;null===(y=r.ctx.animationManager)||void 0===y||y.animate(r.id+"_empty-update-ready_"+d.id,{from:0,to:C,duration:l,onUpdate:function(_){d.size=_}})})}),s.forEach(function(c){c.each(function(d){var h;null===(h=r.ctx.animationManager)||void 0===h||h.animate(r.id+"_empty-update-ready_"+d.id,{from:0,to:1,delay:l,duration:200,onUpdate:function(p){d.opacity=p}})})})},t.prototype.animateReadyUpdate=function(e){var r=this;e.markerSelections.forEach(function(i){r.resetMarkers(i)})},t.prototype.animateReadyHighlightMarkers=function(e){this.resetMarkers(e)},t.prototype.resetMarkers=function(e){var r=this;e.each(function(n,i){var a,s,l,u=r.animateFormatter(n,i),c=null!==(s=null===(a=i.point)||void 0===a?void 0:a.size)&&void 0!==s?s:0;n.size=null!==(l=u?.size)&&void 0!==l?l:c})},t.prototype.animateFormatter=function(e,r){var n,i,a,s=this,l=s.xKey,c=s.yKey,g=this.marker.formatter,y=null!==(n=r.fill)&&void 0!==n?n:e.fill,C=null!==(a=null===(i=r.point)||void 0===i?void 0:i.size)&&void 0!==a?a:0,_=void 0;return g&&(_=s.ctx.callbackCache.call(g,{datum:r.datum,xKey:void 0===l?"":l,yKey:void 0===c?"":c,fill:y,stroke:e.stroke,strokeWidth:s.marker.strokeWidth??1,size:C,highlighted:!1,seriesId:s.id})),_},t.prototype.isLabelEnabled=function(){return this.label.enabled},t.className="ScatterSeries",t.type="scatter",Et([A(oe)],t.prototype,"title",void 0),Et([A(oe)],t.prototype,"labelKey",void 0),Et([A(oe)],t.prototype,"xName",void 0),Et([A(oe)],t.prototype,"yName",void 0),Et([A(oe)],t.prototype,"sizeName",void 0),Et([A(oe)],t.prototype,"labelName",void 0),Et([A(oe)],t.prototype,"xKey",void 0),Et([A(oe)],t.prototype,"yKey",void 0),Et([A(oe)],t.prototype,"sizeKey",void 0),Et([A(oe)],t.prototype,"colorKey",void 0),Et([A(oe)],t.prototype,"colorName",void 0),Et([A(Ch)],t.prototype,"colorDomain",void 0),Et([A(Ca)],t.prototype,"colorRange",void 0),t}(ka),AT=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),DT=function(o){function t(e){return o.call(this,{moduleCtx:e,pickModes:[et.EXACT_SHAPE_MATCH]})||this}return AT(t,o),t.prototype.getLabelData=function(){return[]},t}(ll),An=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),td=function(){return td=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},td.apply(this,arguments)},Ie=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Ba=function(o,t,e,r){return new(e||(e=Promise))(function(i,a){function s(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):function n(i){return i instanceof e?i:new e(function(a){a(i)})}(c.value).then(s,l)}u((r=r.apply(o,t||[])).next())})},ja=function(o,t){var r,n,i,a,e={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(!(i=(i=e.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){e=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){e.label=u[1];break}if(6===u[0]&&e.label<i[1]){e.label=i[1],i=u;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(u);break}i[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(o,e)}catch(c){u=[6,c],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},RT=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.renderer=void 0,e}return An(t,o),Ie([A(ke)],t.prototype,"renderer",void 0),t}(qn),Tv=function(o){function t(e,r,n,i,a,s){var l=o.call(this,i,a,s)||this;return l.labelKey=e,l.sizeKey=r,l.colorKey=n,l}return An(t,o),t}(xa),FT=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.type="nodeClick",e}return An(t,o),t}(Tv),IT=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.type="nodeDoubleClick",e}return An(t,o),t}(Tv),Pv=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.padding=10,e}return An(t,o),Ie([A(X(0))],t.prototype,"padding",void 0),t}(dr),rd=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.wrapping="on-space",e}return An(t,o),Ie([A(lc)],t.prototype,"wrapping",void 0),t}(dr),LT=function(){function o(){var t;this.style=((t=new dr).color="white",t)}return Ie([A(oe)],o.prototype,"key",void 0),Ie([A(oe)],o.prototype,"name",void 0),Ie([A(ke)],o.prototype,"formatter",void 0),o}(),si=function(o){return o[o.Name=0]="Name",o[o.Value=1]="Value",o}(si||{}),Mr=new Ee;function wo(o,t){var r=t.fontWeight,n=t.fontSize,i=t.fontFamily;Mr.fontStyle=t.fontStyle,Mr.fontWeight=r,Mr.fontSize=n,Mr.fontFamily=i,Mr.text=o,Mr.x=0,Mr.y=0,Mr.textAlign="left",Mr.textBaseline="top";var a=Mr.computeBBox();return{width:a.width,height:a.height}}function nd(o){return"string"!=typeof o||Xe.validColorString(o)?o:(q.warnOnce('invalid Treemap tile colour string "'+o+'". Affected treemap tiles will be coloured black.'),"black")}var NT=function(){function o(){this.color="black"}return Ie([A(De)],o.prototype,"color",void 0),o}(),kT=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.text=new NT,e}return An(t,o),t}(gc),GT=function(o){function t(){var r,e=null!==o&&o.apply(this,arguments)||this;return e.groupSelection=Fe.select(e.contentGroup,re),e.highlightSelection=Fe.select(e.highlightGroup,re),e.title=((r=new Pv).color="white",r.fontWeight="bold",r.fontSize=12,r.fontFamily="Verdana, sans-serif",r.padding=15,r),e.subtitle=function(){var r=new Pv;return r.color="white",r.fontSize=9,r.fontFamily="Verdana, sans-serif",r.padding=13,r}(),e.labels={large:function(){var r=new rd;return r.color="white",r.fontWeight="bold",r.fontSize=18,r}(),medium:function(){var r=new rd;return r.color="white",r.fontWeight="bold",r.fontSize=14,r}(),small:function(){var r=new rd;return r.color="white",r.fontWeight="bold",r.fontSize=10,r}(),formatter:void 0,value:new LT},e.nodePadding=2,e.nodeGap=0,e.labelKey="label",e.sizeKey="size",e.colorKey="color",e.colorDomain=[-5,5],e.colorRange=["#cb4b3f","#6acb64"],e.groupFill="#272931",e.groupStroke="black",e.groupStrokeWidth=1,e.tileStroke="black",e.tileStrokeWidth=1,e.gradient=!0,e.formatter=void 0,e.colorName="Change",e.rootName="Root",e.highlightGroups=!0,e.tileShadow=new Nc,e.labelShadow=new Nc,e.tooltip=new RT,e.highlightStyle=new kT,e}return An(t,o),t.prototype.getNodePaddingTop=function(e,r){var n,i=this,l=i.nodePadding,u=e.label;if(e.isLeaf||!u||0===e.depth)return l;var c=e.depth>1?i.subtitle:i.title,d=wo(u,c);return c.fontSize>r.width/3||c.fontSize>r.height/3||d.height>=r.height?l:d.height+l+(null!==(n=c.padding)&&void 0!==n?n:0)},t.prototype.getNodePadding=function(e,r){var n=this.nodePadding;return{top:this.getNodePaddingTop(e,r),right:n,bottom:n,left:n}},t.prototype.squarify=function(e,r,n){if(void 0===n&&(n=new Map),r.width<=0||r.height<=0)return n;n.set(e,r);var a=this.getNodePadding(e,r),s=r.width-a.left-a.right,l=r.height-a.top-a.bottom;if(s<=0||l<=0||e.value<=0)return n;for(var u=0,c=0,d=1/0,h=e.value,p=e.children,v=new me(r.x+a.left,r.y+a.top,s,l),g=v.clone(),y=0;y<p.length;y++){var S=p[y].value,C=g.width<g.height,_=C?g.height:g.width,w=C?g.width:g.height,x=w*p[c].value/(u+=S),b=_*u/h,O=Math.max(x,b)/Math.min(x,b),T=Math.abs(1-O);if(T<d)d=T;else{b=_*(u-=S)/h;for(var E=C?g.x:g.y,P=c;P<y;P++){var D=p[P],F=w*D.value/u,N=new me(C?E:g.x,C?g.y:E,C?F:b,C?b:F);this.applyGap(v,N),this.squarify(D,N,n),h-=D.value,E+=F}C?(g.y+=b,g.height-=b):(g.x+=b,g.width-=b),c=y,u=0,d=1/0,y--}}var k=g.width<g.height,U=k?g.x:g.y;for(y=c;y<p.length;y++){var G=p[y].value/h,B=g.width*(k?G:1),j=g.height*(k?1:G);N=new me(k?U:g.x,k?g.y:U,B,j),this.applyGap(v,N),this.squarify(p[y],N,n),U+=k?B:j}return n},t.prototype.applyGap=function(e,r){var n=this.nodeGap/2,i=function(u){return{left:u.x,top:u.y,right:u.x+u.width,bottom:u.y+u.height}},a=i(e),s=i(r);Object.keys(a).forEach(function(u){Gc(a[u],s[u])||r.shrink(n,u)})},t.prototype.processData=function(){return Ba(this,void 0,void 0,function(){var e,r,n,i,a,s,l,u,c,d,h,p=this;return ja(this,function(v){return this.data?(r=(e=this).data,n=e.sizeKey,i=e.labelKey,a=e.colorKey,s=e.colorDomain,l=e.colorRange,u=e.groupFill,c=this.labels.formatter,(d=new Ov).domain=s,d.range=l,d.update(),this.dataRoot=(h=function(g,y,S){var m,C,_,w,x;void 0===y&&(y=0),c&&(x=p.ctx.callbackCache.call(c,{datum:g})),void 0!==x||(x=i&&null!==(m=g[i])&&void 0!==m?m:"");var b=a&&null!==(C=g[a])&&void 0!==C?C:y;b=nd(b);var O=!g.children,T=u;"string"==typeof b?T=b:(O||!u)&&(T=d.convert(b));var E={datum:g,depth:y,parent:S,value:0,label:x,fill:T,series:p,isLeaf:O,children:[]};return O?E.value=n&&null!==(_=g[n])&&void 0!==_?_:1:(null===(w=g.children)||void 0===w||w.forEach(function(P){var D=h(P,y+1,E),R=D.value;isNaN(R)||!isFinite(R)||0===R||(E.value+=R,E.children.push(D))}),E.children.sort(function(P,D){return D.value-P.value})),E})(r),[2]):[2]})})},t.prototype.createNodeData=function(){return Ba(this,void 0,void 0,function(){return ja(this,function(e){return[2,[]]})})},t.prototype.update=function(){return Ba(this,void 0,void 0,function(){return ja(this,function(e){switch(e.label){case 0:return[4,this.updateSelections()];case 1:return e.sent(),[4,this.updateNodes()];case 2:return e.sent(),[2]}})})},t.prototype.updateSelections=function(){return Ba(this,void 0,void 0,function(){var e,r,n,a,s,l,c,d;return ja(this,function(h){return this.nodeDataRefresh?(this.nodeDataRefresh=!1,n=(e=this).dataRoot,(r=e.chart)&&n&&r.getSeriesRect()?(a=[],(s=function(p){var v;a.push(p),null===(v=p.children)||void 0===v||v.forEach(s)})(n),c=(l=this).highlightSelection,this.groupSelection=(d=function(p){return p.update(a,function(v){var g=new fr,y=new Ee;y.tag=si.Name;var S=new Ee;S.tag=si.Value,v.append([g,y,S])})})(l.groupSelection),this.highlightSelection=d(c),[2]):[2]):[2]})})},t.prototype.isDatumHighlighted=function(e){var r;return e===(null===(r=this.ctx.highlightManager)||void 0===r?void 0:r.getActiveHighlight())&&(e.isLeaf||this.highlightGroups)},t.prototype.getTileFormat=function(e,r){var n,a=this.formatter;if(!a)return{};var l=this;return this.ctx.callbackCache.call(a,{seriesId:this.id,datum:e.datum,depth:e.depth,parent:null===(n=e.parent)||void 0===n?void 0:n.datum,colorKey:l.colorKey,sizeKey:l.sizeKey,labelKey:l.labelKey,fill:e.fill,stroke:e.isLeaf?l.tileStroke:l.groupStroke,strokeWidth:e.isLeaf?l.tileStrokeWidth:l.groupStrokeWidth,gradient:l.gradient,highlighted:r})??{}},t.prototype.updateNodes=function(){return Ba(this,void 0,void 0,function(){var e,r,n,i,a,s,l,u,c,d,h,p,v,g,y,S,m,C,_,w,x,b,O=this;return ja(this,function(T){return this.chart?(r=(e=this).gradient,a=(i=(n=e.highlightStyle).item).fill,s=i.fillOpacity,l=i.stroke,u=i.strokeWidth,c=n.text.color,d=e.tileStroke,h=e.tileStrokeWidth,p=e.groupStroke,v=e.groupStrokeWidth,g=e.tileShadow,y=e.labelShadow,(S=e.dataRoot)?(m=this.chart.getSeriesRect(),C=this.squarify(S,new me(0,0,m.width,m.height)),_=this.buildLabelMeta(C),w=this.getHighlightedSubtree(S),this.updateNodeMidPoint(C),x=function(E,P,D){var R,M,F,I,L,N,k=C.get(P);if(k){var U=D&&void 0!==a?a:P.fill,G=null!==(R=D?s:1)&&void 0!==R?R:1,B=p;D&&void 0!==l?B=l:P.isLeaf&&(B=d);var j=v;D&&void 0!==u?j=u:P.isLeaf&&(j=h);var K=O.getTileFormat(P,D),V=nd(null!==(M=K?.fill)&&void 0!==M?M:U);if(null!==(F=K?.gradient)&&void 0!==F?F:r){var H=Xe.tryParseFromString(U).brighter().toString(),Y=Xe.tryParseFromString(U).darker().toString();E.fill="linear-gradient(180deg, "+H+", "+Y+")"}else E.fill=V;E.fillOpacity=null!==(I=K?.fillOpacity)&&void 0!==I?I:G,E.stroke=nd(null!==(L=K?.stroke)&&void 0!==L?L:B),E.strokeWidth=null!==(N=K?.strokeWidth)&&void 0!==N?N:j,E.fillShadow=g,E.crisp=!0,E.x=k.x,E.y=k.y,E.width=k.width,E.height=k.height,E.visible=!0}else E.visible=!1},this.groupSelection.selectByClass(fr).forEach(function(E){return x(E,E.datum,!1)}),this.highlightSelection.selectByClass(fr).forEach(function(E){var P=O.isDatumHighlighted(E.datum);E.visible=P||w.has(E.datum),E.visible&&x(E,E.datum,P)}),b=function(E,P,D,R){var M=_.get(P),F=M?.[R];F?(E.text=F.text,E.fontFamily=F.style.fontFamily,E.fontSize=F.style.fontSize,E.fontWeight=F.style.fontWeight,E.fill=D?c??F.style.color:F.style.color,E.fillShadow=D?void 0:y,E.textAlign=F.hAlign,E.textBaseline=F.vAlign,E.x=F.x,E.y=F.y,E.visible=!0):E.visible=!1},this.groupSelection.selectByTag(si.Name).forEach(function(E){return b(E,E.datum,!1,"label")}),this.highlightSelection.selectByTag(si.Name).forEach(function(E){var P=O.isDatumHighlighted(E.datum);E.visible=P||w.has(E.datum),E.visible&&b(E,E.datum,P,"label")}),this.groupSelection.selectByTag(si.Value).forEach(function(E){return b(E,E.datum,!1,"value")}),this.highlightSelection.selectByTag(si.Value).forEach(function(E){var P=O.isDatumHighlighted(E.datum);E.visible=P||w.has(E.datum),E.visible&&b(E,E.datum,P,"value")}),[2]):[2]):[2]})})},t.prototype.updateNodeMidPoint=function(e){e.forEach(function(r,n){n.nodeMidPoint={x:r.x+r.width/2,y:r.y}})},t.prototype.getHighlightedSubtree=function(e){var r=this,n=new Set,i=function(a){var s;(r.isDatumHighlighted(a)||a.parent&&n.has(a.parent))&&n.add(a),null===(s=a.children)||void 0===s||s.forEach(i)};return i(e),n},t.prototype.buildLabelMeta=function(e){var r=this,n=r.labels,i=r.title,a=r.subtitle,s=r.nodePadding,l=r.labelKey,u=r.ctx.callbackCache,c=/-$/m,d=new Map;return e.forEach(function(h,p){var v,g,y;if(l&&0!==p.depth){var S=h.width-2*s,m=h.height-2*s,C=function(L){return L.fontSize>h.width/3||L.fontSize>h.height/3},_=p.isLeaf?p.label:p.label.toUpperCase(),w="",x=n.value,b=x.style,O=Math.ceil(2*b.fontSize*(Ee.defaultLineHeightRatio-1));p.isLeaf&&(x.formatter?w=null!==(v=u.call(x.formatter,{datum:p.datum}))&&void 0!==v?v:"":x.key&&(w=p.datum[x.key]));var T=wo(w,b);w&&T.width>S&&(w="");var E,P="";if(p.isLeaf){var D=function(){var L,N,k=m-(w?b.fontSize+O:0),U=[n.large,n.medium,n.small];try{for(var G=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(U),B=G.next();!B.done;B=G.next()){var j=B.value,K=wo(_,j),V=K.width;if(!(K.height>k||C(j))){if(V<=S)return{style:j,wrappedText:void 0};var Y=Ee.wrap(_,S,k,j,j.wrapping);if(Y&&"\u2026"!==Y&&(j===n.small||!c.exec(Y)&&!Y.endsWith("\u2026")))return{style:j,wrappedText:Y}}}}catch(ie){L={error:ie}}finally{try{B&&!B.done&&(N=G.return)&&N.call(G)}finally{if(L)throw L.error}}return wo(_,n.small).height<=k&&!C(n.small)?{style:n.small,wrappedText:void 0}:{style:void 0,wrappedText:void 0}},R=D();!R.style&&w&&(w="",R=D()),E=null!==(g=R.style)&&void 0!==g?g:n.small,P=null!==(y=R.wrappedText)&&void 0!==y?y:""}else E=1===p.depth?i:a;var M=wo(P||_,E);if(!C(E)){if(M.width>S){var F=Math.floor(_.length*S/M.width)-1;_=_.substring(0,F).trim()+"\u2026"}T=wo(w,b);var I=w&&T.width<S&&T.height+M.height+O<m;d.set(p,{label:td({text:P||_,style:E},p.isLeaf?{hAlign:"center",vAlign:"middle",x:h.x+h.width/2,y:h.y+h.height/2-(I?T.height/2+O/2:0)}:{hAlign:"left",vAlign:"top",x:h.x+s,y:h.y+s}),value:I?{text:w,style:b,hAlign:"center",vAlign:"middle",x:h.x+h.width/2,y:h.y+h.height/2+M.height/2+O/2}:void 0})}}}),d},t.prototype.getDomain=function(e){return[0,1]},t.prototype.getNodeClickEvent=function(e,r){return new FT(this.labelKey,this.sizeKey,this.colorKey,e,r,this)},t.prototype.getNodeDoubleClickEvent=function(e,r){return new IT(this.labelKey,this.sizeKey,this.colorKey,e,r,this)},t.prototype.getTooltipHtml=function(e){var r,n,i,a;if(!this.highlightGroups&&!e.isLeaf)return"";var s=this,u=s.sizeKey,c=s.labelKey,d=s.colorKey,p=s.id,v=s.labels,g=s.ctx.callbackCache,y=e.datum,S=s.tooltip.renderer,m=e.depth?y[c]:null!==(r=y[c])&&void 0!==r?r:s.rootName,C="",_=this.getTileFormat(e,!1),w=null!==(i=null!==(n=_?.fill)&&void 0!==n?n:e.fill)&&void 0!==i?i:"gray",x=v.value.key,b=v.value.formatter;if(x||b){var O="";if(b)O=g.call(b,{datum:y});else if(null!=x){var T=y[x];"number"==typeof T&&isFinite(T)&&(O=Dp(T))}O&&(v.value.name&&(C+="<b>"+v.value.name+":</b> "),C+=O)}var E={title:m,backgroundColor:w,content:C};return S?st(S({datum:e.datum,parent:null===(a=e.parent)||void 0===a?void 0:a.datum,depth:e.depth,sizeKey:u,labelKey:c,colorKey:d,title:m,color:w,seriesId:p}),E):m||C?st(E):""},t.prototype.getLegendData=function(){return[]},t.className="TreemapSeries",t.type="treemap",Ie([A(X(0))],t.prototype,"nodePadding",void 0),Ie([A(X(0))],t.prototype,"nodeGap",void 0),Ie([A(at)],t.prototype,"labelKey",void 0),Ie([A(oe)],t.prototype,"sizeKey",void 0),Ie([A(oe)],t.prototype,"colorKey",void 0),Ie([A(Sh)],t.prototype,"colorDomain",void 0),Ie([A(Ca)],t.prototype,"colorRange",void 0),Ie([A(oe)],t.prototype,"groupFill",void 0),Ie([A(De)],t.prototype,"groupStroke",void 0),Ie([A(_e(0))],t.prototype,"groupStrokeWidth",void 0),Ie([A(De)],t.prototype,"tileStroke",void 0),Ie([A(_e(0))],t.prototype,"tileStrokeWidth",void 0),Ie([A(Te)],t.prototype,"gradient",void 0),Ie([A(ke)],t.prototype,"formatter",void 0),Ie([A(at)],t.prototype,"colorName",void 0),Ie([A(at)],t.prototype,"rootName",void 0),Ie([A(wr)],t.prototype,"highlightGroups",void 0),t}(DT),bo={area:"cartesian",bar:"cartesian",column:"cartesian",histogram:"cartesian",line:"cartesian",scatter:"cartesian",treemap:"hierarchy",pie:"polar"},id={},$e={has:function(o){return Object.prototype.hasOwnProperty.call(bo,o)},isCartesian:function(o){return"cartesian"===bo[o]},isPolar:function(o){return"polar"===bo[o]},isHierarchy:function(o){return"hierarchy"===bo[o]},get seriesTypes(){return Object.keys(bo)},get cartesianTypes(){var o=this;return this.seriesTypes.filter(function(t){return o.isCartesian(t)})},get polarTypes(){var o=this;return this.seriesTypes.filter(function(t){return o.isPolar(t)})},get hierarchyTypes(){var o=this;return this.seriesTypes.filter(function(t){return o.isHierarchy(t)})}};function BT(o,t){var e;id[o]=He([null!==(e=id[o])&&void 0!==e?e:{},t])}function Av(o){var t;return null!==(t=id[o])&&void 0!==t?t:{}}var jT={area:tT,bar:_v,column:pT,histogram:ST,line:xT,pie:kp,scatter:PT,treemap:GT},Dv={},Mv={},Rv={},Fv={};function zT(o,t,e,r,n,i){Dv[o]=e,Mv[o]=r,Rv[o]=n,i&&Dn(o,i),function VT(o,t){bo[o]=t}(o,t)}function HT(o,t){var e,r=null!==(e=Dv[o])&&void 0!==e?e:jT[o];if(r)return new r(t);throw new Error("AG Charts - unknown series type: "+o)}function Iv(o){return Mv[o]}function Lv(o){return Rv[o]}function Dn(o,t){Fv[o]=t}var WT={axes:[{type:Ml.type,position:"left"},{type:io.type,position:"bottom"}]},KT={axes:[{type:"number",position:"bottom"},{type:"category",position:"left"}]},YT={axes:[{type:"number",position:"bottom"},{type:"number",position:"left"}]};function Rr(o,t){if(Nv(o)&&Nv(t)){var e={};return Object.keys(o).forEach(function(r){e[r]=r in t?Rr(o[r],t[r]):o[r]}),Object.keys(t).forEach(function(r){r in o||(e[r]=t[r])}),e}return Array.isArray(o)&&!Array.isArray(t)||od(o)&&!od(t)?o:t}function od(o){return o&&"object"==typeof o}function Nv(o){return od(o)&&o.constructor===Object}var ae=function(){return ae=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},ae.apply(this,arguments)},kv=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},XT={fills:["#f3622d","#fba71b","#57b757","#41a9c9","#4258c9","#9a42c8","#c84164","#888888"],strokes:["#aa4520","#b07513","#3d803d","#2d768d","#2e3e8d","#6c2e8c","#8c2d46","#5f5f5f"]},QT=Symbol("extends-axes-defaults"),ZT=Symbol("extends-axes-label-defaults"),qT=Symbol("extends-axes-line-defaults"),JT=Symbol("extends-series-defaults"),Gv=Symbol("override-series-label-defaults"),eP=Symbol("default-font"),li=function(){function o(t){var e=(t=Rr({},t??{})).overrides,r=void 0===e?null:e,n=t.palette,i=void 0===n?null:n,a=this.createChartConfigPerChartType(this.getDefaults());if(r){var s=r.common,l=r.cartesian,u=r.polar,c=r.hierarchy,d=function(h,p,v){v&&(a[h]=Rr(a[h],v),p.forEach(function(g){a[g]=Rr(a[g],v)}))};d("common",Object.keys(a),s),d("cartesian",$e.cartesianTypes,l),d("polar",$e.polarTypes,u),d("hierarchy",$e.hierarchyTypes,c),$e.seriesTypes.forEach(function(h){var p,v=h,g=r[v];g&&(g.series&&(g.series=((p={})[v]=g.series,p)),a[v]=Rr(a[v],g))})}this.palette=i??this.getPalette(),this.config=Object.freeze(a)}return o.prototype.getPalette=function(){return XT},o.getAxisDefaults=function(){return{top:{},right:{},bottom:{},left:{},title:{enabled:!1,text:"Axis Title",fontStyle:void 0,fontWeight:"bold",fontSize:12,fontFamily:this.fontFamily,color:"rgb(70, 70, 70)"},label:{fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,padding:5,rotation:void 0,color:"rgb(87, 87, 87)",formatter:void 0,autoRotate:!1,avoidCollisions:!0},line:{width:1,color:"rgb(195, 195, 195)"},tick:{width:1,size:6,color:"rgb(195, 195, 195)"},gridStyle:[{stroke:"rgb(219, 219, 219)",lineDash:[4,2]}],crossLines:{enabled:!1,fill:"rgb(187,221,232)",stroke:"rgb(70,162,192)",strokeWidth:1,label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,padding:5,color:"rgb(87, 87, 87)",rotation:void 0}}}},o.getSeriesDefaults=function(){return{tooltip:{enabled:!0,renderer:void 0},visible:!0,showInLegend:!0,highlightStyle:{item:{fill:"yellow",fillOpacity:1},series:{dimOpacity:1},text:{color:"black"}},nodeClickRange:"exact"}},o.getBarSeriesDefaults=function(){return ae(ae({},this.getSeriesDefaults()),{fillOpacity:1,strokeOpacity:1,normalizedTo:void 0,strokeWidth:1,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0,placement:"inside"},shadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5}})},o.getLineSeriesDefaults=function(){var t=this.getSeriesDefaults();return ae(ae({},t),{tooltip:ae(ae({},t.tooltip),{format:void 0,position:{type:"node"}})})},o.getAreaSeriesDefaults=function(){var t=this.getSeriesDefaults();return ae(ae({},t),{nodeClickRange:"nearest",tooltip:ae(ae({},t.tooltip),{position:{type:"node"}})})},o.getScatterSeriesDefaults=function(){var t=this.getSeriesDefaults();return ae(ae({},t),{tooltip:ae(ae({},t.tooltip),{position:{type:"node"}})})},o.getCartesianSeriesMarkerDefaults=function(){return{enabled:!0,shape:"circle",size:6,maxSize:30,strokeWidth:1,formatter:void 0}},o.getCaptionWrappingDefaults=function(){return"hyphenate"},o.getChartDefaults=function(){return{background:{visible:!0,fill:"white"},padding:{top:20,right:20,bottom:20,left:20},title:{enabled:!1,text:"Title",fontStyle:void 0,fontWeight:"bold",fontSize:16,fontFamily:this.fontFamily,color:"rgb(70, 70, 70)",wrapping:o.getCaptionWrappingDefaults()},subtitle:{enabled:!1,text:"Subtitle",fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,color:"rgb(140, 140, 140)",wrapping:o.getCaptionWrappingDefaults()},footnote:{enabled:!1,text:"Footnote",fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,color:"rgb(140, 140, 140)",spacing:30,wrapping:o.getCaptionWrappingDefaults()},legend:{position:"bottom",spacing:20,listeners:{},item:{paddingX:16,paddingY:8,marker:{shape:void 0,size:15,strokeWidth:1,padding:8},label:{color:"black",fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,formatter:void 0}},reverseOrder:!1,pagination:{marker:{size:12},activeStyle:{fill:"rgb(70, 70, 70)"},inactiveStyle:{fill:"rgb(219, 219, 219)"},highlightStyle:{fill:"rgb(70, 70, 70)"},label:{color:"rgb(70, 70, 70)"}}},tooltip:{enabled:!0,range:"nearest",delay:0},listeners:{}}},o.prototype.createChartConfigPerChartType=function(t){var e=this;return Object.entries({cartesian:$e.cartesianTypes,polar:$e.polarTypes,hierarchy:$e.hierarchyTypes,groupedCategory:[]}).forEach(function(n){var i=kv(n,2),s=i[1],l=i[0],u=e.templateTheme(Av(l));s.forEach(function(c){var d=c;t[d]||(t[d]=Rr({},t[l]),Rr(t[d],u))})}),t},o.prototype.getDefaults=function(){var t=this,e=Rr({},o.defaults),r=function(i,a){var s=t.templateTheme(Av(i));return s.series=a.reduce(function(l,u){var c=Lv(u);return c&&(l[u]=t.templateTheme(c)),l},{}),("cartesian"===i||"polar"===i)&&(s.axes=Uc.axesTypes.reduce(function(l,u){var c=function zE(o){var t;return null!==(t=yv[o])&&void 0!==t?t:{}}(u);return c&&(l[u]=t.templateTheme(c)),l},{})),s};return Rr(e,{cartesian:r("cartesian",$e.cartesianTypes),groupedCategory:r("cartesian",$e.cartesianTypes),polar:r("polar",$e.polarTypes),hierarchy:r("hierarchy",$e.hierarchyTypes)})},o.prototype.templateTheme=function(t){var e=He([t]),r=this.getTemplateParameters(),n=r.extensions,i=r.properties;return zi(e,function(a,s){var l,u;if(s.__extends__){var d=n.get(c=s.__extends__);if(null==d)throw new Error("AG Charts - no template variable provided for: "+c);Object.keys(d).forEach(function(m){m in s||(s[m]=d[m])}),delete s.__extends__}if(s.__overrides__){var c,h=n.get(c=s.__overrides__);if(null==h)throw new Error("AG Charts - no template variable provided for: "+c);Object.assign(s,h),delete s.__overrides__}try{for(var p=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(Object.entries(s)),v=p.next();!v.done;v=p.next()){var g=kv(v.value,2),y=g[0],S=g[1];i.has(S)&&(s[y]=i.get(S))}}catch(m){l={error:m}}finally{try{v&&!v.done&&(u=p.return)&&u.call(p)}finally{if(l)throw l.error}}},{}),e},o.prototype.getTemplateParameters=function(){var t=new Map;t.set(QT,o.getAxisDefaults()),t.set(ZT,o.getAxisDefaults().label),t.set(qT,o.getAxisDefaults().line),t.set(JT,o.getSeriesDefaults()),t.set(Gv,{});var e=new Map;return e.set(eP,o.fontFamily),{extensions:t,properties:e}},o.prototype.mergeWithParentDefaults=function(t,e){return Rr(t,e)},o.fontFamily="Verdana, sans-serif",o.cartesianDefaults=ae(ae({},o.getChartDefaults()),{axes:{number:ae({},o.getAxisDefaults()),log:ae(ae({},o.getAxisDefaults()),{base:10}),category:ae(ae({},o.getAxisDefaults()),{groupPaddingInner:.1,label:ae(ae({},o.getAxisDefaults().label),{autoRotate:!0})}),groupedCategory:ae({},o.getAxisDefaults()),time:ae({},o.getAxisDefaults())},series:{column:ae({},o.getBarSeriesDefaults()),bar:ae({},o.getBarSeriesDefaults()),line:ae(ae({},o.getLineSeriesDefaults()),{title:void 0,strokeWidth:2,strokeOpacity:1,lineDash:[0],lineDashOffset:0,marker:ae(ae({},o.getCartesianSeriesMarkerDefaults()),{fillOpacity:1,strokeOpacity:1}),label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:o.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0}}),scatter:ae(ae({},o.getScatterSeriesDefaults()),{sizeName:"Size",labelName:"Label",marker:ae({},o.getCartesianSeriesMarkerDefaults()),label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:o.fontFamily,color:"rgb(70, 70, 70)"}}),area:ae(ae({},o.getAreaSeriesDefaults()),{normalizedTo:void 0,fillOpacity:.8,strokeOpacity:1,strokeWidth:2,lineDash:[0],lineDashOffset:0,shadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5},marker:ae(ae({},o.getCartesianSeriesMarkerDefaults()),{fillOpacity:1,strokeOpacity:1,enabled:!1}),label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:o.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0}}),histogram:ae(ae({},o.getSeriesDefaults()),{strokeWidth:1,fillOpacity:1,strokeOpacity:1,lineDash:[0],lineDashOffset:0,areaPlot:!1,bins:void 0,aggregation:"sum",label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:o.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0},shadow:{enabled:!0,color:"rgba(0, 0, 0, 0.5)",xOffset:0,yOffset:0,blur:5}})}}),o.polarDefaults=ae(ae({},o.getChartDefaults()),{series:{pie:ae(ae({},o.getSeriesDefaults()),{title:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:14,fontFamily:o.fontFamily,color:"rgb(70, 70, 70)",spacing:0},radiusKey:void 0,radiusName:void 0,calloutLabelKey:void 0,calloutLabelName:void 0,sectorLabelKey:void 0,sectorLabelName:void 0,calloutLabel:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:o.fontFamily,color:"rgb(70, 70, 70)",offset:3,minAngle:0},sectorLabel:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:o.fontFamily,color:"rgb(70, 70, 70)",positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2},fillOpacity:1,strokeOpacity:1,strokeWidth:1,lineDash:[0],lineDashOffset:0,rotation:0,outerRadiusOffset:0,innerRadiusOffset:0,shadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5},innerLabels:{fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:o.fontFamily,color:"rgb(70, 70, 70)",margin:2}})}}),o.hierarchyDefaults=ae(ae({},o.getChartDefaults()),{series:{treemap:ae(ae({},o.getSeriesDefaults()),{showInLegend:!1,labelKey:"label",sizeKey:"size",colorKey:"color",colorDomain:[-5,5],colorRange:["#cb4b3f","#6acb64"],groupFill:"#272931",groupStroke:"black",groupStrokeWidth:1,tileStroke:"black",tileStrokeWidth:1,gradient:!0,tileShadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5},labelShadow:{enabled:!0,color:"rgba(0, 0, 0, 0.4)",xOffset:1.5,yOffset:1.5,blur:5},highlightGroups:!0,nodePadding:2,nodeGap:0,title:{enabled:!0,color:"white",fontStyle:void 0,fontWeight:"bold",fontSize:12,fontFamily:"Verdana, sans-serif",padding:2},subtitle:{enabled:!0,color:"white",fontStyle:void 0,fontWeight:void 0,fontSize:9,fontFamily:"Verdana, sans-serif",padding:2},labels:{large:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:18,fontFamily:"Verdana, sans-serif",color:"white",wrapping:"on-space"},medium:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:14,fontFamily:"Verdana, sans-serif",color:"white",wrapping:"on-space"},small:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:10,fontFamily:"Verdana, sans-serif",color:"white",wrapping:"on-space"},value:{style:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:"Verdana, sans-serif",color:"white"}}}})}}),o.defaults={cartesian:o.cartesianDefaults,groupedCategory:o.cartesianDefaults,polar:o.polarDefaults,hierarchy:o.hierarchyDefaults},o}(),nP=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ae=function(){return Ae=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},Ae.apply(this,arguments)},za=function(o){function t(e){return o.call(this,e)||this}return nP(t,o),t.prototype.getDefaults=function(){var e=this,r=t.fontColor,n=t.mutedFontColor,i={title:{color:r},label:{color:r},gridStyle:[{stroke:"rgb(88, 88, 88)",lineDash:[4,2]}]},a={label:{color:r}},s={axes:{number:Ae({},i),category:Ae({},i),time:Ae({},i)}},l={background:{fill:"rgb(34, 38, 41)"},title:{color:r},subtitle:{color:n},legend:{item:{label:{color:r}},pagination:{activeStyle:{fill:r},inactiveStyle:{fill:n},highlightStyle:{fill:r},label:{color:r}}}},u=function(c){return c.reduce(function(d,h){var p=Lv(h);return p&&(d[h]=e.templateTheme(p)),d},{})};return this.mergeWithParentDefaults(o.prototype.getDefaults.call(this),{cartesian:Ae(Ae(Ae({},l),s),{series:Ae({line:Ae({},a),bar:Ae({},a),column:Ae({},a),histogram:Ae({},a)},u($e.cartesianTypes))}),groupedCategory:Ae(Ae(Ae({},l),s),{series:Ae({bar:Ae({},a),column:Ae({},a),histogram:Ae({},a)},u($e.cartesianTypes))}),polar:Ae(Ae({},l),{series:Ae({pie:{calloutLabel:{color:r},sectorLabel:{color:r},title:{color:r},innerLabels:{color:r}}},u($e.polarTypes))}),hierarchy:Ae(Ae({},l),{series:Ae({treemap:{tileStroke:"white",groupStroke:"white",title:{color:r},subtitle:{color:n},labels:{large:{color:r},medium:{color:r},small:{color:r},value:{style:{color:r}}}}},u($e.hierarchyTypes))})})},t.prototype.getTemplateParameters=function(){var e=o.prototype.getTemplateParameters.call(this);return e.extensions.set(Gv,t.seriesLabelDefaults.label),e},t.fontColor="rgb(200, 200, 200)",t.mutedFontColor="rgb(150, 150, 150)",t.seriesLabelDefaults={label:{color:t.fontColor}},t}(li),iP=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),oP={fills:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722"],strokes:["#ab2f26","#a31545","#6d1b7b","#482980","#2c397f","#1769aa","#0276ab","#008494","#00695f","#357a38","#618834","#909a28","#b3a429","#b38705","#b36a00","#b33d18"]},aP=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return iP(t,o),t.prototype.getPalette=function(){return oP},t}(li),sP=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),lP={fills:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722"],strokes:["#ab2f26","#a31545","#6d1b7b","#482980","#2c397f","#1769aa","#0276ab","#008494","#00695f","#357a38","#618834","#909a28","#b3a429","#b38705","#b36a00","#b33d18"]},uP=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return sP(t,o),t.prototype.getPalette=function(){return lP},t}(za),cP=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),dP={fills:["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],strokes:["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"]},fP=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return cP(t,o),t.prototype.getPalette=function(){return dP},t}(li),hP=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),pP={fills:["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],strokes:["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"]},vP=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return hP(t,o),t.prototype.getPalette=function(){return pP},t}(za),gP=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),yP={fills:["#febe76","#ff7979","#badc58","#f9ca23","#f0932b","#eb4c4b","#6ab04c","#7ed6df","#e056fd","#686de0"],strokes:["#b28553","#b35555","#829a3e","#ae8d19","#a8671e","#a43535","#4a7b35","#58969c","#9d3cb1","#494c9d"]},mP=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return gP(t,o),t.prototype.getPalette=function(){return yP},t}(li),SP=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),CP={fills:["#febe76","#ff7979","#badc58","#f9ca23","#f0932b","#eb4c4b","#6ab04c","#7ed6df","#e056fd","#686de0"],strokes:["#b28553","#b35555","#829a3e","#ae8d19","#a8671e","#a43535","#4a7b35","#58969c","#9d3cb1","#494c9d"]},_P=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return SP(t,o),t.prototype.getPalette=function(){return CP},t}(za),xP=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),wP={fills:["#5BC0EB","#FDE74C","#9BC53D","#E55934","#FA7921","#fa3081"],strokes:["#4086a4","#b1a235","#6c8a2b","#a03e24","#af5517","#af225a"]},bP=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return xP(t,o),t.prototype.getPalette=function(){return wP},t}(li),OP=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),EP={fills:["#5BC0EB","#FDE74C","#9BC53D","#E55934","#FA7921","#fa3081"],strokes:["#4086a4","#b1a235","#6c8a2b","#a03e24","#af5517","#af225a"]},TP=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return OP(t,o),t.prototype.getPalette=function(){return EP},t}(za),Ha=function(){return Ha=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},Ha.apply(this,arguments)},jl=function(){return new li},ad=function(){return new za},PP={undefined:jl,null:jl,"ag-default":jl,"ag-material":function(){return new aP},"ag-pastel":function(){return new fP},"ag-solar":function(){return new mP},"ag-vivid":function(){return new bP}},Bv=Ha(Ha({},{undefined:ad,null:ad,"ag-default-dark":ad,"ag-material-dark":function(){return new uP},"ag-pastel-dark":function(){return new vP},"ag-solar-dark":function(){return new _P},"ag-vivid-dark":function(){return new TP}}),PP);function Ua(o){var t;if(o instanceof li)return o;var e=Bv[o];if(e)return e();for(var n,r=[];"object"==typeof o;)r.push(null!==(t=o.overrides)&&void 0!==t?t:{}),o.palette&&null==n&&(n=o.palette),o=o.baseTheme;r.reverse();var i=Ha({baseTheme:o,overrides:He(r)},n?{palette:n}:{});return i.baseTheme||i.overrides?new(Ua(i.baseTheme).constructor)(i):jl()}var zl=function(){return zl=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},zl.apply(this,arguments)},Oo=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},sd=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},jv=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},DP=["bar","column","area"],MP=["bar","column"],FP=function(){return[!0,"opts"].includes(or("agChartsDebug"))};var tn=function(){return tn=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},tn.apply(this,arguments)},ld=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Eo=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},zv=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o};function To(o){var t,e,r,n;return null!==(n=null!==(t=o.type)&&void 0!==t?t:null===(r=null===(e=o.series)||void 0===e?void 0:e[0])||void 0===r?void 0:r.type)&&void 0!==n?n:"line"}function Po(o){var t=To(o);return null==t||("cartesian"===t?(q.warnOnce("type '"+t+"' is deprecated, use a series type instead"),!0):$e.isCartesian(t))}function Hl(o){var t=To(o);return null!=t&&("hierarchy"===t?(q.warnOnce("type '"+t+"' is deprecated, use a series type instead"),!0):$e.isHierarchy(t))}function Ul(o){var t=To(o);return null!=t&&("polar"===t?(q.warnOnce("type '"+t+"' is deprecated, use a series type instead"),!0):$e.isPolar(t))}function Hv(o){return null!=o&&$e.has(o)}function Uv(o){var t,e,r=0;try{for(var n=ld(o),i=n.next();!i.done;i=n.next()){var a=i.value;a instanceof Array&&(r+=Uv(a)),null!=a&&r++}}catch(s){t={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return r}function Wv(o,t,e){for(var r=[],n=0;n<e;n++)r.push(t[(n+o.colourIndex)%t.length]);return r}var Mn={avoidDeepClone:["data"]};function NP(o,t){var e,r,n,i,a,s,l,u,c,d,h=He([t,o],Mn);!function kP(o){Object.entries({yKeys:"yKey",yNames:"yName"}).forEach(function(e){var r,n=Eo(e,2),i=n[0],a=n[1];null!==(r=o.series)&&void 0!==r&&r.some(function(s){return null!=s[i]})&&q.warnOnce("property [series."+i+"] is deprecated, please use [series."+a+"] and multiple series instead.")})}(h);var p=h.type,v=To(h),g=null!==(s=null===(a=h.tooltip)||void 0===a?void 0:a.position)&&void 0!==s?s:{},y=function(L){if(null!=L&&!Hv(L)&&!Iv(L))throw new Error("AG Charts - unknown series type: "+L+"; expected one of: "+$e.seriesTypes)};y(v);try{for(var S=ld(null!==(l=h.series)&&void 0!==l?l:[]),m=S.next();!m.done;m=S.next()){var C=m.value.type;null!=C&&y(C)}}catch(L){e={error:L}}finally{try{m&&!m.done&&(r=S.return)&&r.call(S)}finally{if(e)throw e.error}}h=tn(tn({},h),{type:v});var _="line";Po(h)?_="line":Hl(h)?_="treemap":Ul(h)&&(_="pie");var w={},x=Iv(v);x?w=x:"bar"===v?w=KT:"scatter"===v||"histogram"===v?w=YT:Po(h)&&(w=WT),function UP(o){zi(o,function(t,e){"enabled"in e&&!1===e.enabled&&Object.entries(e).forEach(function(r){var i=Eo(r,1)[0];"enabled"!==i&&delete e[i]})},{skip:["data","theme"]})}(h);var b=function VP(o,t){var e=function BP(o){var t,e,r=Ua(o.theme),n=r.config[null!==(t=To(o))&&void 0!==t?t:"cartesian"],i=Object.entries(r.config).reduce(function(a,s){var l=Eo(s,2),u=l[0],c=l[1].series;return a[u]=c?.[u],a},{});return{theme:r,axesThemes:null!==(e=n.axes)&&void 0!==e?e:{},seriesThemes:i,cleanedTheme:He([n,{axes:sr,series:sr}])}}(t),i=e.axesThemes,a=e.seriesThemes;return{context:{colourIndex:0,palette:e.theme.palette},mergedOptions:He([o,e.cleanedTheme,t],Mn),axesThemes:i,seriesThemes:a}}(w,h),O=b.context,T=b.mergedOptions,E=b.axesThemes,P=b.seriesThemes;T.series=function IP(o,t){var e,r,n=[],a=function RP(o){var t,e,r,n,i,a,s,l,u,c,d={},h={},p={},g=[];try{for(var y=Oo(o),S=y.next();!S.done;S=y.next()){var m=S.value,C=null!==(i=m.type)&&void 0!==i?i:"line",_=DP.includes(C),w=MP.includes(C);if(_||w){var b=m.stacked,O=m.stackGroup,T=m.grouped,E=void 0===T?void 0:T,P=m.xKey,D=null!=O||!0===b;null!==(a=p[C])&&void 0!==a||(p[C]=!1),p[C]||(p[C]=D);var R=!0===E,M=[O??(!0===b?"stacked":void 0),R?"grouped":void 0].filter(function(G){return null!=G}).join("-");M||(M="default-ag-charts-group");var F=C+"-"+P+"-"+M;if(D&&_)0===(I=null!==(s=h[F])&&void 0!==s?s:h[F]={type:"stack",opts:[]}).opts.length&&g.push(I),I.opts.push(m);else if(R&&w){var I;0===(I=null!==(l=d[F])&&void 0!==l?l:d[F]={type:"group",opts:[]}).opts.length&&g.push(I),I.opts.push(m)}else g.push({type:"ungrouped",opts:[m]})}else g.push({type:"ungrouped",opts:[m]})}}catch(G){t={error:G}}finally{try{S&&!S.done&&(e=y.return)&&e.call(y)}finally{if(t)throw t.error}}if(!Object.values(p).some(function(G){return G}))return g;try{for(var L=Oo(Object.entries(d)),N=L.next();!N.done;N=L.next()){var U=sd(N.value,2)[1];!0===p[C=null!==(c=null===(u=U.opts[0])||void 0===u?void 0:u.type)&&void 0!==c?c:"line"]&&(U.type="stack")}}catch(G){r={error:G}}finally{try{N&&!N.done&&(n=L.return)&&n.call(L)}finally{if(r)throw r.error}}return g}(t.map(function(p){var v;return"bar"!==p.type&&"column"!==p.type||null==p.yKey||p.stacked?p:zl(zl({},p),{grouped:null===(v=p.grouped)||void 0===v||v})})),s=a.reduce(function(p,v){var g,y;if("ungrouped"===v.type)return p;var S=null!==(g=v.opts[0].type)&&void 0!==g?g:"line";return null!==(y=p[S])&&void 0!==y||(p[S]=0),p[S]+="stack"===v.type?1:v.opts.length,p},{}),l={},u=function(p){var v,g,y,S,m,C,_,w,x=0,b=null!==(_=p.opts[0].type)&&void 0!==_?_:"line";if(null!==(w=l[b])&&void 0!==w||(l[b]=0),"stack"===p.type){try{for(var O=Oo(p.opts),T=O.next();!T.done;T=O.next())T.value.seriesGrouping={groupIndex:l[b],groupCount:s[b],stackIndex:x++,stackCount:p.opts.length}}catch(F){v={error:F}}finally{try{T&&!T.done&&(g=O.return)&&g.call(O)}finally{if(v)throw v.error}}l[b]++}else if("group"===p.type)try{for(var P=Oo(p.opts),D=P.next();!D.done;D=P.next())D.value.seriesGrouping={groupIndex:l[b],groupCount:s[b],stackIndex:0,stackCount:0},l[b]++}catch(F){y={error:F}}finally{try{D&&!D.done&&(S=P.return)&&S.call(P)}finally{if(y)throw y.error}}else try{for(var R=Oo(p.opts),M=R.next();!M.done;M=R.next())M.value.seriesGrouping=void 0}catch(F){m={error:F}}finally{try{M&&!M.done&&(C=R.return)&&C.call(R)}finally{if(m)throw m.error}}return p.opts};FP()&&q.debug("processSeriesOptions() - series grouping: ",a);try{for(var c=Oo(a),d=c.next();!d.done;d=c.next()){var h=d.value;switch(h.opts[0].type){case"column":case"bar":case"area":n.push.apply(n,jv([],sd(u(h))));break;default:h.opts.length>1&&q.warn("unexpected grouping of series type: "+h.opts[0].type),n.push.apply(n,jv([],sd(h.opts)))}}}catch(p){e={error:p}}finally{try{d&&!d.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}return n}(0,(null!==(u=T.series)&&void 0!==u?u:[]).map(function(L){var N=_;L.type?N=L.type:Hv(p)&&(N=p);var k=function GP(o,t,e,r){var n,i,a=He([tn({},r),null===(n=o.tooltip)||void 0===n?void 0:n.position],Mn);return He([null!==(i=e[t])&&void 0!==i?i:{},tn(tn({},o),{type:t,tooltip:tn(tn({},o.tooltip),{position:a})})],Mn)}(L,N,P,g);return"pie"===N&&function YP(o,t,e){e.innerLabels=Array.isArray(t.innerLabels)?t.innerLabels.map(function(r){return He([o.innerLabels,r])}):sr}(P.pie,L,k),k})).map(function(L){return function jP(o,t){for(var e=[],r=2;r<arguments.length;r++)e[r-2]=arguments[r];var n=function zP(o,t){var e,r=function UT(o){return Fv[o]}(t.type);if(!r)return{};var n=o.palette,i=n.fills,a=n.strokes;return r({seriesCount:Uv(null!==(e=t.yKeys)&&void 0!==e?e:[])||1,colorsCount:Math.max(i.length,a.length),takeColors:function(c){var d={fills:Wv(o,i,c),strokes:Wv(o,a,c)};return o.colourIndex+=c,d}})}(o,t),i={stacked:sr,grouped:sr};return He(zv(zv([],Eo(e)),[n,t,i]),Mn)}(O,L)});var L,N;if("axes"in T){var R=!0;try{for(var M=ld(null!==(c=T.axes)&&void 0!==c?c:[]),F=M.next();!F.done;F=M.next())N=void 0,N=function LP(o){return null!=o&&Uc.has(o)}(L=F.value.type),N||q.warnOnce("AG Charts - unknown axis type: "+L+"; expected one of: "+Uc.axesTypes+", ignoring."),N||(R=!1)}catch(L){n={error:L}}finally{try{F&&!F.done&&(i=M.return)&&i.call(M)}finally{if(n)throw n.error}}T.axes=R?null===(d=T.axes)||void 0===d?void 0:d.map(function(L){var N,k,U=L.type;return function HP(o,t){var e={top:sr,bottom:sr,left:sr,right:sr};if(o.crossLines){Array.isArray(o.crossLines)||(q.warn("axis[].crossLines should be an array."),o.crossLines=[]);var r=t.crossLines;o.crossLines=o.crossLines.map(function(i){return He([r,i])})}return He([t,{crossLines:sr},o,e],Mn)}(L,He([E[U],null!==(k=E[U][null!==(N=L.position)&&void 0!==N?N:"unknown"])&&void 0!==k?k:{}]))}):w.axes,function WP(o,t){var e,r,n,i;if(void 0===(null===(e=o.legend)||void 0===e?void 0:e.enabled)&&void 0===(null===(r=t.legend)||void 0===r?void 0:r.enabled)){if(null!==(n=t.legend)&&void 0!==n||(t.legend={}),(null!==(i=o.series)&&void 0!==i?i:[]).length>1)return void(t.legend.enabled=!0);t.legend.enabled=!1}}(h,T)}return function KP(o,t){zi(o,function(e,r,n){if(n){var i=n._enabledFromTheme;null!=i&&delete n._enabledFromTheme,"enabled"in n&&(i||null==r.enabled&&(n.enabled=!0))}},{skip:["data","theme"]},t),zi(t,function(e,r){null!=r._enabledFromTheme&&delete r._enabledFromTheme},{skip:["data","theme"]})}(h,T),T}Dn("pie",function(o){return(0,o.takeColors)(o.colorsCount)});var Ao=function(o){var e=(0,o.takeColors)(1);return{fill:Eo(e.fills,1)[0],stroke:Eo(e.strokes,1)[0]}};Dn("area",Ao),Dn("bar",Ao),Dn("column",Ao),Dn("histogram",Ao),Dn("scatter",function(o){var t=Ao(o);return{marker:{fill:t.fill,stroke:t.stroke}}}),Dn("line",function(o){var t=Ao(o),e=t.fill;return{stroke:e,marker:{fill:e,stroke:t.stroke}}});var Kv=function(){function o(){this.destroyFns=[]}return o.prototype.destroy=function(){var t,e;try{for(var r=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.destroyFns),n=r.next();!n.done;n=r.next())(0,n.value)()}catch(a){t={error:a}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},o}(),ui=[];function Yv(o){var t=ui.find(function(r){return o.type===r.type&&o.optionsKey===r.optionsKey&&o.identifier===r.identifier});if(t){if("enterprise"===o.packageType&&"community"===t.packageType){var e=ui.indexOf(t);ui.splice(e,1,o)}}else ui.push(o)}var XP=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Rn=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},$v=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e._fill="#f2f2f2",e._stroke="#999999",e._strokeWidth=1,e._lineCap="square",e._centerX=0,e._centerY=0,e._width=8,e._gripLineGap=2,e._gripLineLength=8,e._height=16,e}return XP(t,o),Object.defineProperty(t.prototype,"centerX",{get:function(){return this._centerX},set:function(e){this._centerX!==e&&(this._centerX=e,this.dirtyPath=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"centerY",{get:function(){return this._centerY},set:function(e){this._centerY!==e&&(this._centerY=e,this.dirtyPath=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){this._width!==e&&(this._width=e,this.dirtyPath=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gripLineGap",{get:function(){return this._gripLineGap},set:function(e){this._gripLineGap!==e&&(this._gripLineGap=e,this.dirtyPath=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gripLineLength",{get:function(){return this._gripLineLength},set:function(e){this._gripLineLength!==e&&(this._gripLineLength=e,this.dirtyPath=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){this._height!==e&&(this._height=e,this.dirtyPath=!0)},enumerable:!1,configurable:!0}),t.prototype.computeBBox=function(){var e=this,i=e.width,a=e.height;return new me(e.centerX-i/2,e.centerY-a/2,i,a)},t.prototype.isPointInPath=function(e,r){var n=this.transformPoint(e,r);return this.computeBBox().containsPoint(n.x,n.y)},t.prototype.updatePath=function(){var e=this,r=e.path,n=e.centerX,i=e.centerY,a=e.width,s=e.height;r.clear();var l=n-a/2,u=i-s/2,c=this.align(l),d=this.align(u),h=c+this.align(l,a),p=d+this.align(u,s);r.moveTo(c,d),r.lineTo(h,d),r.lineTo(h,p),r.lineTo(c,p),r.lineTo(c,d);var v=this.gripLineGap/2,g=this.gripLineLength/2;r.moveTo(this.align(n-v),this.align(i-g)),r.lineTo(this.align(n-v),this.align(i+g)),r.moveTo(this.align(n+v),this.align(i-g)),r.lineTo(this.align(n+v),this.align(i+g))},t.className="RangeHandle",Rn([A(It)],t.prototype,"_fill",void 0),Rn([A(It)],t.prototype,"_stroke",void 0),Rn([A(X(0))],t.prototype,"_strokeWidth",void 0),Rn([A(sc)],t.prototype,"_lineCap",void 0),Rn([A(X(0))],t.prototype,"_width",void 0),Rn([A(X(0))],t.prototype,"_gripLineGap",void 0),Rn([A(X(0))],t.prototype,"_gripLineLength",void 0),Rn([A(X(0))],t.prototype,"_height",void 0),t}(wt),QP=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),rn=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},ZP=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e._stroke="#999999",e._strokeWidth=1,e._fill="#999999",e._fillOpacity=.2,e._lineCap="square",e._x=0,e._y=0,e._width=200,e._height=30,e.minRange=.05,e._min=0,e._max=1,e}return QP(t,o),Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.dirtyPath=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.dirtyPath=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){this._width!==e&&(this._width=e,this.dirtyPath=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){this._height!==e&&(this._height=e,this.dirtyPath=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return this._min},set:function(e){var r;e=Math.min(Math.max(e,0),this.max-this.minRange),!isNaN(e)&&this._min!==e&&(this._min=e,this.dirtyPath=!0,null===(r=this.onRangeChange)||void 0===r||r.call(this))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this._max},set:function(e){var r;e=Math.max(Math.min(e,1),this.min+this.minRange),!isNaN(e)&&this._max!==e&&(this._max=e,this.dirtyPath=!0,null===(r=this.onRangeChange)||void 0===r||r.call(this))},enumerable:!1,configurable:!0}),t.prototype.computeBBox=function(){var e=this;return new me(e.x,e.y,e.width,e.height)},t.prototype.computeVisibleRangeBBox=function(){var e=this,r=e.x,i=e.width,u=r+i*e.min;return new me(u,e.y,r+i*e.max-u,e.height)},t.prototype.updatePath=function(){var e=this,r=e.path,n=e.x,i=e.y,a=e.width,s=e.height,l=e.min,u=e.max;r.clear();var c=this.align(n),d=this.align(i),h=c+this.align(n,a),p=d+this.align(i,s);r.moveTo(c,d),r.lineTo(h,d),r.lineTo(h,p),r.lineTo(c,p),r.lineTo(c,d);var v=this.align(n+a*l),g=this.align(n+a*u);r.moveTo(v,d),r.lineTo(v,p),r.lineTo(g,p),r.lineTo(g,d),r.lineTo(v,d)},t.className="RangeMask",rn([A(It)],t.prototype,"_stroke",void 0),rn([A(X(0))],t.prototype,"_strokeWidth",void 0),rn([A(It)],t.prototype,"_fill",void 0),rn([A(X(0,1))],t.prototype,"_fillOpacity",void 0),rn([A(sc)],t.prototype,"_lineCap",void 0),rn([A(X(0))],t.prototype,"_width",void 0),rn([A(X(0))],t.prototype,"_height",void 0),rn([A(X())],t.prototype,"_min",void 0),rn([A(X())],t.prototype,"_max",void 0),t}(wt),qP=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Wl=function(){return Wl=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},Wl.apply(this,arguments)},JP=function(o){function t(){var e=o.call(this,{name:"rangeSelectorGroup"})||this;return e.minHandle=new $v,e.maxHandle=new $v,e.mask=function(){var r=t.defaults,n=r.x,i=r.y,a=r.width,s=r.height,l=r.min,u=r.max,c=new ZP;c.x=n,c.y=i,c.width=a,c.height=s,c.min=l,c.max=u;var h=e.minHandle,p=e.maxHandle;return h.centerX=n,p.centerX=n+a,h.centerY=p.centerY=i+s/2,e.append([c,h,p]),c.onRangeChange=function(){var v;e.updateHandles(),null===(v=e.onRangeChange)||void 0===v||v.call(e)},c}(),e._x=t.defaults.x,e._y=t.defaults.y,e._width=t.defaults.width,e._height=t.defaults.height,e._min=t.defaults.min,e._max=t.defaults.max,e.isContainerNode=!0,e}return qP(t,o),Object.defineProperty(t.prototype,"x",{get:function(){return this.mask.x},set:function(e){this.mask.x=e,this.updateHandles()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.mask.y},set:function(e){this.mask.y=e,this.updateHandles()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.mask.width},set:function(e){this.mask.width=e,this.updateHandles()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.mask.height},set:function(e){this.mask.height=e,this.updateHandles()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return this.mask.min},set:function(e){this.mask.min=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this.mask.max},set:function(e){this.mask.max=e},enumerable:!1,configurable:!0}),t.prototype.updateHandles=function(){var e=this,r=e.minHandle,n=e.maxHandle,i=e.x,a=e.y,s=e.width,l=e.height,u=e.mask;r.centerX=i+s*u.min,n.centerX=i+s*u.max,r.centerY=n.centerY=a+l/2},t.prototype.computeBBox=function(){return this.mask.computeBBox()},t.prototype.computeVisibleRangeBBox=function(){return this.mask.computeVisibleRangeBBox()},t.prototype.render=function(e){var r=e.ctx,n=e.forceRender,i=e.stats;if(this.dirty!==$.NONE||n){this.computeTransformMatrix(),this.matrix.toContext(r);var a=this;[a.mask,a.minHandle,a.maxHandle].forEach(function(c){c.visible&&(n||c.dirty>$.NONE)&&(r.save(),c.render(Wl(Wl({},e),{ctx:r,forceRender:n})),r.restore())}),this.markClean({force:!0}),i&&i.nodesRendered++}else i&&i.nodesSkipped++},t.className="Range",t.defaults={x:0,y:0,width:200,height:30,min:0,max:1},t}(re),eA=function(){function o(t){this.rm=t}return Object.defineProperty(o.prototype,"fill",{get:function(){return this.rm.fill},set:function(t){this.rm.fill=t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"stroke",{get:function(){return this.rm.stroke},set:function(t){this.rm.stroke=t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"strokeWidth",{get:function(){return this.rm.strokeWidth},set:function(t){this.rm.strokeWidth=t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"fillOpacity",{get:function(){return this.rm.fillOpacity},set:function(t){this.rm.fillOpacity=t},enumerable:!1,configurable:!0}),o}(),Xv=function(){function o(t){this.rh=t}return Object.defineProperty(o.prototype,"fill",{get:function(){return this.rh.fill},set:function(t){this.rh.fill=t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"stroke",{get:function(){return this.rh.stroke},set:function(t){this.rh.stroke=t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"strokeWidth",{get:function(){return this.rh.strokeWidth},set:function(t){this.rh.strokeWidth=t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"width",{get:function(){return this.rh.width},set:function(t){this.rh.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"height",{get:function(){return this.rh.height},set:function(t){this.rh.height=t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"gripLineGap",{get:function(){return this.rh.gripLineGap},set:function(t){this.rh.gripLineGap=t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"gripLineLength",{get:function(){return this.rh.gripLineLength},set:function(t){this.rh.gripLineLength=t},enumerable:!1,configurable:!0}),o}(),tA=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Qv=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i};Yv({type:"root",optionsKey:"navigator",packageType:"community",chartTypes:["cartesian"],instanceConstructor:function(o){function t(e){var r,n=o.call(this)||this;return n.ctx=e,n.rs=new JP,n.mask=new eA(n.rs.mask),n.minHandle=new Xv(n.rs.minHandle),n.maxHandle=new Xv(n.rs.maxHandle),n.minHandleDragging=!1,n.maxHandleDragging=!1,n.panHandleOffset=NaN,n._enabled=!1,n.margin=10,n._visible=!0,n.rs.onRangeChange=function(){return n.ctx.zoomManager.updateZoom("navigator",{x:{min:n.rs.min,max:n.rs.max}})},[e.interactionManager.addListener("drag-start",function(i){return n.onDragStart(i)}),e.interactionManager.addListener("drag",function(i){return n.onDrag(i)}),e.interactionManager.addListener("hover",function(i){return n.onDrag(i)}),e.interactionManager.addListener("drag-end",function(){return n.onDragStop()})].forEach(function(i){return n.destroyFns.push(function(){return e.interactionManager.removeListener(i)})}),[e.layoutService.addListener("before-series",function(i){return n.layout(i)}),e.layoutService.addListener("layout-complete",function(i){return n.layoutComplete(i)})].forEach(function(i){return n.destroyFns.push(function(){return e.layoutService.removeListener(i)})}),null===(r=e.scene.root)||void 0===r||r.appendChild(n.rs),n.destroyFns.push(function(){var i;return null===(i=e.scene.root)||void 0===i?void 0:i.removeChild(n.rs)}),n.destroyFns.push(function(){return n.ctx.zoomManager.updateZoom("navigator")}),n.updateGroupVisibility(),n}return tA(t,o),Object.defineProperty(t.prototype,"enabled",{get:function(){return this._enabled},set:function(e){this._enabled=e,this.updateGroupVisibility()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.rs.width},set:function(e){this.rs.width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.rs.height},set:function(e){this.rs.height=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return this.rs.min},set:function(e){this.rs.min=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this.rs.max},set:function(e){this.rs.max=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return this._visible},set:function(e){this._visible=e,this.updateGroupVisibility()},enumerable:!1,configurable:!0}),t.prototype.updateGroupVisibility=function(){var e=this.enabled&&this.visible;this.rs.visible=e,e?this.ctx.zoomManager.updateZoom("navigator",{x:{min:this.rs.min,max:this.rs.max}}):this.ctx.zoomManager.updateZoom("navigator")},t.prototype.layout=function(e){var r=e.shrinkRect;return this.enabled&&(r.shrink(this.rs.height+this.margin,"bottom"),this.rs.y=r.y+r.height+this.margin),{shrinkRect:r}},t.prototype.layoutComplete=function(e){var r=e.series,n=r.rect,i=r.visible;this.enabled&&i&&(this.rs.x=n.x,this.rs.width=n.width),this.visible=i},t.prototype.onDragStart=function(e){if(this.enabled){var r=e.offsetX,n=e.offsetY,i=this.rs,a=i.minHandle,s=i.maxHandle,l=i.x,u=i.width,c=i.min,d=i.computeVisibleRangeBBox();this.minHandleDragging||this.maxHandleDragging||(a.containsPoint(r,n)?this.minHandleDragging=!0:s.containsPoint(r,n)?this.maxHandleDragging=!0:d.containsPoint(r,n)&&(this.panHandleOffset=(r-l)/u-c))}},t.prototype.onDrag=function(e){if(this.enabled){var n=this.rs,i=this.panHandleOffset,a=n.x,l=n.width,c=n.minHandle,d=n.maxHandle,h=e.offsetX,p=e.offsetY,v=a+l*n.min,y=new me(v,n.y,a+l*n.max-v,n.height),S=function(){return Math.min(Math.max((h-a)/l,0),1)};if(c.containsPoint(h,p)||d.containsPoint(h,p)?this.ctx.cursorManager.updateCursor("navigator","ew-resize"):y.containsPoint(h,p)?this.ctx.cursorManager.updateCursor("navigator","grab"):this.ctx.cursorManager.updateCursor("navigator"),this.minHandleDragging)n.min=S();else if(this.maxHandleDragging)n.max=S();else if(!isNaN(i)){var m=n.max-n.min,C=Math.min(S()-i,1-m);C<=n.min?(n.min=C,n.max=n.min+m):(n.max=C+m,n.min=n.max-m)}}},t.prototype.onDragStop=function(){this.stopHandleDragging()},t.prototype.stopHandleDragging=function(){this.minHandleDragging=this.maxHandleDragging=!1,this.panHandleOffset=NaN},Qv([A(Te)],t.prototype,"_enabled",void 0),Qv([A(X(0))],t.prototype,"margin",void 0),t}(Kv),themeTemplate:{navigator:{enabled:!1,height:30,mask:{fill:"#999999",stroke:"#999999",strokeWidth:1,fillOpacity:.2},minHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:8,height:16,gripLineGap:2,gripLineLength:8},maxHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:8,height:16,gripLineGap:2,gripLineLength:8}}}});var iA=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Zv=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i};Yv({type:"root",optionsKey:"background",packageType:"community",chartTypes:["cartesian","polar","hierarchy"],instanceConstructor:function(o){function t(e){var r,n=o.call(this)||this;n.onLayoutComplete=function(a){var s=a.chart,u=s.height;n.rectNode.width=s.width,n.rectNode.height=u},n.node=new re({name:"background"}),n.node.zIndex=We.SERIES_BACKGROUND_ZINDEX,n.rectNode=new fr,n.node.appendChild(n.rectNode),n.fill="white",n.visible=!0,null===(r=e.scene.root)||void 0===r||r.appendChild(n.node),n.destroyFns.push(function(){var a;return null===(a=e.scene.root)||void 0===a?void 0:a.removeChild(n.node)});var i=e.layoutService.addListener("layout-complete",n.onLayoutComplete);return n.destroyFns.push(function(){return e.layoutService.removeListener(i)}),n}return iA(t,o),Zv([A(Te),Qe("node","visible")],t.prototype,"visible",void 0),Zv([A(De),Qe("rectNode","fill")],t.prototype,"fill",void 0),t}(Kv)});var ud=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},rt=function(){return rt=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},rt.apply(this,arguments)},Wa=function(o,t,e,r){return new(e||(e=Promise))(function(i,a){function s(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?i(c.value):function n(i){return i instanceof e?i:new e(function(a){a(i)})}(c.value).then(s,l)}u((r=r.apply(o,t||[])).next())})},Ka=function(o,t){var r,n,i,a,e={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return function l(u){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(!(i=(i=e.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){e=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){e.label=u[1];break}if(6===u[0]&&e.label<i[1]){e.label=i[1],i=u;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(u);break}i[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(o,e)}catch(c){u=[6,c],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},qv=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Jv=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},Kl=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function eg(o){if(Po(o))return"cartesian";if(Ul(o))return"polar";if(Hl(o))return"hierarchy";throw new Error("AG Chart - unknown type of chart for options with type: "+o.type)}var ci=function(){function o(){}return o.create=function(t){return Do.createOrUpdate(t)},o.update=function(t,e){if(!Ya.isInstance(t))throw new Error("AG Charts - invalid chart reference passed");Do.createOrUpdate(e,t)},o.updateDelta=function(t,e){if(!Ya.isInstance(t))throw new Error("AG Charts - invalid chart reference passed");return Do.updateUserDelta(t,e)},o.download=function(t,e){if(!(t instanceof Ya))throw new Error("AG Charts - invalid chart reference passed");return Do.download(t,e)},o.getImageDataURL=function(t,e){if(!(t instanceof Ya))throw new Error("AG Charts - invalid chart reference passed");return Do.getImageDataURL(t,e)},o}(),Ya=function(){function o(t){this.chart=t}return o.isInstance=function(t){var e,r;if(t instanceof o||"AgChartInstanceProxy"===(null===(e=t.constructor)||void 0===e?void 0:e.name)&&null!=t.chart)return!0;var n=Object.keys(null===(r=t.constructor)||void 0===r?void 0:r.prototype);return!(!Object.keys(o.prototype).every(function(a){return n.includes(a)})||null==t.chart)},o.prototype.getOptions=function(){return this.chart.getOptions()},o.prototype.destroy=function(){this.chart.destroy()},o}(),Do=function(){function o(){}return o.initialiseModules=function(){o.initialised||(function sA(){var o,t,e,r,n,i;try{for(var a=ud(ui),s=a.next();!s.done;s=a.next()){var l=s.value;if(null!=La.constructors&&null!=l.optionConstructors&&Object.assign(La.constructors,l.optionConstructors),"root"===l.type&&l.themeTemplate)try{for(var u=(e=void 0,ud(l.chartTypes)),c=u.next();!c.done;c=u.next())BT(c.value,l.themeTemplate)}catch(g){e={error:g}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(e)throw e.error}}if("series"===l.type){if(l.chartTypes.length>1)throw new Error("AG Charts - Module definition error: "+l.identifier);zT(l.identifier,l.chartTypes[0],l.instanceConstructor,l.seriesDefaults,l.themeTemplate,l.paletteFactory)}if("axis-option"===l.type&&l.themeTemplate)try{for(var h=(n=void 0,ud(l.axisTypes)),p=h.next();!p.done;p=h.next())mv(p.value,l.themeTemplate)}catch(g){n={error:g}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}"axis"===l.type&&(BE(l.identifier,l.instanceConstructor),l.themeTemplate&&mv(l.identifier,l.themeTemplate)),"legend"===l.type&&Gb(l.identifier,l.instanceConstructor)}}catch(g){o={error:g}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(o)throw o.error}}}(),o.initialised=!0)},o.createOrUpdate=function(t,e){var r=this;o.initialiseModules(),di(">>> AgChartV2.createOrUpdate() user options",t);var n={};!0===o.DEBUG()&&(n.debug=!0);var i=t.overrideDevicePixelRatio;delete t.overrideDevicePixelRatio;var a=NP(t,n),s=e?.chart;(null==s||eg(t)!==eg(s.processedOptions))&&(s=o.createChartInstance(a,i,s)),null==e?e=new Ya(s):e.chart=s;var l=s;l.queuedUserOptions.push(t);var u=function(){var c=l.queuedUserOptions.indexOf(t);l.queuedUserOptions.splice(0,c)};return l.requestFactoryUpdate(function(){return Wa(r,void 0,void 0,function(){var c;return Ka(this,function(d){switch(d.label){case 0:return l.destroyed?[2]:null==(c=Jn(l.processedOptions,a))?(u(),[2]):[4,o.updateDelta(l,c,t)];case 1:return d.sent(),u(),[2]}})})}),e},o.updateUserDelta=function(t,e){var r,i=t.chart.queuedUserOptions,a=null!==(r=i[i.length-1])&&void 0!==r?r:t.chart.userOptions,s=He([a,e]);di(">>> AgChartV2.updateUserDelta() user delta",e),di("AgChartV2.updateUserDelta() - base options",a),o.createOrUpdate(s,t)},o.download=function(t,e){Wa(this,void 0,void 0,function(){var i;return Ka(this,function(s){switch(s.label){case 0:return[4,o.prepareResizedChart(t,e)];case 1:return(i=s.sent()).chart.scene.download(e?.fileName,e?.fileFormat),i!==t&&i.destroy(),[2]}})}).catch(function(i){return q.errorOnce(i)})},o.getImageDataURL=function(t,e){return Wa(this,void 0,void 0,function(){var r,i;return Ka(this,function(a){switch(a.label){case 0:return[4,o.prepareResizedChart(t,e)];case 1:return r=a.sent(),i=r.chart.scene.canvas.getDataURL(e?.fileFormat),r!==t&&r.destroy(),[2,i]}})})},o.prepareResizedChart=function(t,e){return Wa(this,void 0,void 0,function(){var r,n,i,a,s,l,c,d;return Ka(this,function(h){switch(h.label){case 0:return a=(n=e??{}).height,s=(r=t.chart).width,l=r.height,void 0===(i=n.width)&&void 0===a||1===r.scene.canvas.pixelRatio&&s===i&&l===a?[2,t]:(i=i??s,a=a??l,c=rt(rt({},r.userOptions),{container:document.createElement("div"),width:i,height:a,autoSize:!1,overrideDevicePixelRatio:1}),[4,(d=o.createOrUpdate(c)).chart.waitForUpdate()]);case 1:return h.sent(),[2,d]}})})},o.createChartInstance=function(t,e,r){var n=r?.destroy({keepTransferableResources:!0});if(Po(t))return new ov(document,e,n);if(Hl(t))return new fv(document,e,n);if(Ul(t))return new uv(document,e,n);throw new Error("AG Charts - couldn't apply configuration, check type of options: "+t.type)},o.updateDelta=function(t,e,r){var n;return Wa(this,void 0,void 0,function(){return Ka(this,function(i){switch(i.label){case 0:return null==e.type&&(e=rt(rt({},e),{type:null!==(n=t.processedOptions.type)&&void 0!==n?n:To(e)})),[4,t.awaitUpdateCompletion()];case 1:return i.sent(),t.destroyed||(di("AgChartV2.updateDelta() - applying delta",e),function lA(o,t,e){var r,n,i,a,s=He([null!==(r=o.processedOptions)&&void 0!==r?r:{},t],Mn),l=function uA(o,t){var e,r,n=function(h){return o instanceof ov&&h.chartTypes.includes("cartesian")||o instanceof uv&&h.chartTypes.includes("polar")||o instanceof fv&&h.chartTypes.includes("hierarchy")},i=!1,a=ui.filter(function(h){return"root"===h.type});try{for(var s=Kl(a),l=s.next();!l.done;l=s.next()){var u=l.value,c=n(u)&&null!=t[u.optionsKey];c!==o.isModuleEnabled(u)&&(i=!0,c?o.addModule(u):o.removeModule(u))}}catch(h){e={error:h}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return i}(o,s),u=["type","data","series","listeners","theme","legend"];if(Po(t)||Ul(t))u.push("axes");else if(!Hl(t))throw new Error("AG Charts - couldn't apply configuration, check type of options and chart: "+t.type);t.listeners&&tg(o,t.listeners),Yl(o,t,{skip:u});var c=!1;if(t.series&&t.series.length>0&&(function cA(o,t){var e=t.series;if(e){var r=o.series.length===e.length&&o.series.every(function(n,i){var a;return n.type===(null===(a=e[i])||void 0===a?void 0:a.type)});if(r)return void o.series.forEach(function(n,i){var a,s,l,u,d=Jn(null!==(l=null===(s=null===(a=o.processedOptions)||void 0===a?void 0:a.series)||void 0===s?void 0:s[i])&&void 0!==l?l:{},null!==(u=e[i])&&void 0!==u?u:{});d&&(di("AgChartV2.applySeries() - applying series diff idx "+i,d),rg(n,d,{path:"series["+i+"]",index:i}),n.markNodeDataDirty())});o.series=function hA(o,t){var e,r,n,i=[],a=o.getModuleContext(),s=0;try{for(var l=Kl(t??[]),u=l.next();!u.done;u=l.next()){var c=u.value,d="series["+s+++"]",h=HT(null!==(n=c.type)&&void 0!==n?n:"unknown",a);rg(h,c,{path:d,index:s}),i.push(h)}}catch(p){e={error:p}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}return i}(o,e)}}(o,t),c=!0),"axes"in t&&Array.isArray(t.axes)){var d=function dA(o,t){var e=t.axes;if(!e)return!1;var r=o.axes.length===e.length&&o.axes.every(function(i,a){return i.type===e[a].type});if(r){var n=o.processedOptions;if(Po(n))return o.axes.forEach(function(i,a){var s,l,c=Jn(null!==(l=null===(s=n.axes)||void 0===s?void 0:s[a])&&void 0!==l?l:{},e[a]);di("AgChartV2.applyAxes() - applying axis diff idx "+a,c),Yl(i,c,{path:"axes["+a+"]",skip:["axes[].type"]})}),!0}return o.axes=function pA(o,t){var e,r,n=[],i=["axes[].type"],a=o.getModuleContext(),s=0;try{for(var l=Kl(t??[]),u=l.next();!u.done;u=l.next()){var c=u.value,d=jE(c.type,a),h="axes["+s+++"]";vA(d,c),Yl(d,c,{path:h,skip:i}),n.push(d)}}catch(p){e={error:p}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}return n}(o,e),!0}(o,t);d&&(c=!0)}!function fA(o,t){var e=["listeners"];o.setLegendInit(function(r){var n,i,a,s;Yl(r,null!==(n=t.legend)&&void 0!==n?n:{},{skip:e}),null!==(i=t.legend)&&void 0!==i&&i.listeners&&Object.assign(null===(a=o.legend)||void 0===a?void 0:a.listeners,null!==(s=t.legend.listeners)&&void 0!==s?s:{})})}(o,t);var h=t.series,p=!!t.data||h?.some(function(S){return null!=S.data}),v=null!==(i=null!==(n=t.legend)&&void 0!==n?n:t.title)&&void 0!==i?i:t.subtitle;c=c||p||!!v,t.data&&(o.data=t.data),t.listeners&&o.updateAllSeriesListeners(),o.processedOptions=s,o.userOptions=He([null!==(a=o.userOptions)&&void 0!==a?a:{},e],Mn);var y=c||l?ge.PROCESS_DATA:ge.PERFORM_LAYOUT;di("AgChartV2.applyChartOptions() - update type",ge[y]),o.update(y,{forceNodeDataRefresh:c})}(t,e,r)),[2]}})})},o.DEBUG=function(){var t;return null!==(t=or("agChartsDebug"))&&void 0!==t&&t},o.initialised=!1,o}();function di(o){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];[!0,"opts"].includes(Do.DEBUG())&&q.debug.apply(q,Jv([o],qv(t)))}function vA(o,t){var e,r,n=!1,i=ui.filter(function(d){return"axis-option"===d.type});try{for(var a=Kl(i),s=a.next();!s.done;s=a.next()){var l=s.value,u=null!=t[l.optionsKey];u!==o.isModuleEnabled(l)&&(n=!0,u?o.addModule(l):o.removeModule(l))}}catch(d){e={error:d}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return n}function tg(o,t){for(var e in o.clearEventListeners(),t){var r=t[e];"function"==typeof r&&o.addEventListener(e,r)}}function Yl(o,t,e){var r=void 0===e?{}:e,n=r.skip,i=r.path;return wa(o,t,rt(rt(rt({},Vp()),{skip:n}),i?{path:i}:{}))}function rg(o,t,e){var r,n,i=void 0===e?{}:e,a=i.path,s=i.index,u=Vp(),c=null!==(r=u.constructors)&&void 0!==r?r:{},d={constructors:rt(rt({},c),{title:"pie"===o.type?zO:c.title})},p=wa(o,t,rt(rt(rt(rt(rt({},u),d),{skip:Jv(["series[].type"],qv(["series[].listeners","series[].seriesGrouping"]??[]))}),a?{path:a}:{}),{idx:s??-1})),v=t?.listeners;null!=v&&tg(o,v);var g=t.seriesGrouping;if("seriesGrouping"in(t??{}))if(g){var y=Object.freeze(rt(rt({},null!==(n=o.seriesGrouping)&&void 0!==n?n:{}),g));o.seriesGrouping=y}else o.seriesGrouping=g;return p}var yA=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),fi=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},$a=function(o){return o[o.Open=0]="Open",o[o.Chord=1]="Chord",o[o.Round=2]="Round",o}($a||{}),ng=function(o){function t(){var e=o.call(this)||this;return e.centerX=0,e.centerY=0,e.radius=10,e.startAngle=0,e.endAngle=2*Math.PI,e.counterClockwise=!1,e.type=$a.Open,e.restoreOwnStyles(),e}return yA(t,o),Object.defineProperty(t.prototype,"fullPie",{get:function(){return Gc(_t(this.startAngle),_t(this.endAngle))},enumerable:!1,configurable:!0}),t.prototype.updatePath=function(){var e=this.path;e.clear(),e.arc(this.centerX,this.centerY,this.radius,this.startAngle,this.endAngle,this.counterClockwise),this.type===$a.Chord?e.closePath():this.type===$a.Round&&!this.fullPie&&(e.lineTo(this.centerX,this.centerY),e.closePath())},t.prototype.computeBBox=function(){return new me(this.centerX-this.radius,this.centerY-this.radius,2*this.radius,2*this.radius)},t.prototype.isPointInPath=function(e,r){var n=this.transformPoint(e,r),i=this.computeBBox();return this.type!==$a.Open&&i.containsPoint(n.x,n.y)&&this.path.isPointInPath(n.x,n.y)},t.className="Arc",t.defaultStyles=Object.assign({},_r.defaultStyles,{lineWidth:1,fillStyle:null}),fi([Me()],t.prototype,"centerX",void 0),fi([Me()],t.prototype,"centerY",void 0),fi([Me()],t.prototype,"radius",void 0),fi([Me()],t.prototype,"startAngle",void 0),fi([Me()],t.prototype,"endAngle",void 0),fi([Me()],t.prototype,"counterClockwise",void 0),fi([Me()],t.prototype,"type",void 0),t}(wt),mA=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Xa=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i};!function(o){function t(e){var r=o.call(this)||this;return r.x=0,r.y=0,r.width=0,r.height=0,r.opacity=1,r.sourceImage=e,r}mA(t,o),t.prototype.render=function(e){var r=e.ctx,i=e.stats;if(this.dirty!==$.NONE||e.forceRender){this.computeTransformMatrix(),this.matrix.toContext(r);var a=this.sourceImage;r.globalAlpha=this.opacity,r.drawImage(a,0,0,a.width,a.height,this.x,this.y,this.width,this.height),o.prototype.render.call(this,e)}else i&&i.nodesSkipped++},Xa([ee({redraw:$.MAJOR})],t.prototype,"x",void 0),Xa([ee({redraw:$.MAJOR})],t.prototype,"y",void 0),Xa([ee({redraw:$.MAJOR})],t.prototype,"width",void 0),Xa([ee({redraw:$.MAJOR})],t.prototype,"height",void 0),Xa([ee({redraw:$.MAJOR})],t.prototype,"opacity",void 0)}($s);var CA=Object.entries(Bv).reduce(function(o,t){var e=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i}(t,2);return o[e[0]]=(0,e[1])(),o},{}),_A=["area","bar","column","histogram","line","pie","scatter"];function Jt(o){switch(o){case"bar":case"groupedBar":case"stackedBar":case"normalizedBar":return"bar";case"column":case"groupedColumn":case"stackedColumn":case"normalizedColumn":return"column";case"line":return"line";case"area":case"stackedArea":case"normalizedArea":return"area";case"scatter":case"bubble":return"scatter";case"histogram":return"histogram";case"pie":case"doughnut":return"pie";default:return"cartesian"}}var ig=["number","category","groupedCategory","log","time"],Qa=function(){return Qa=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},Qa.apply(this,arguments)};function wA(o,t){var e,C,r=o.chartOptionsToRestore,n=o.chartPaletteToRestore,i=o.chartThemeToRestore,a=function PA(o){var t=o.getChartThemeName(),e=o.getChartThemes();return f._.includes(e,t)||(t=e[0]),t}(o),s=og(a),l=s?{baseTheme:a}:null!==(e=ag(o,a))&&void 0!==e?e:{},u=o.getGridOptionsChartThemeOverrides(),c=o.apiChartThemeOverrides,d=Jt(o.chartType),p=o.crossFiltering?function OA(o,t,e){var r,n={listeners:{legendItemClick:function(a){o.getChart().series.forEach(function(l){l.toggleSeriesItem(a.itemId,a.enabled),l.toggleSeriesItem(a.itemId+"-filtered-out",a.enabled)})}}},i={};return"polar"===e&&(i.pie={tooltip:{renderer:function(a){var l=a.datum;return{title:a.angleName,content:l[a.calloutLabelKey]+": "+a.angleValue*l[a.radiusKey]}}}}),(r={})[e]={tooltip:{delay:500},legend:n,listeners:{click:function(a){return t.crossFilterCallback(a,!0)}},series:i},r}(t,o,"pie"===d?"polar":"cartesian"):void 0,v=Qa({},r??{}),S=[s?TA(o,(C=function(_){return!!_&&Object.keys(_).some(function(w){return f._.get(_[w],"title.enabled",!1)})},C(u)||C(c))):void 0,p,u,c,v].filter(function(C){return!!C}).reduce(function(C,_){return{baseTheme:C,overrides:_}},l);return n&&a===i&&(function bA(o,t){var e=function(r,n){return r.length===n.length&&r.every(function(i,a){return i===n[a]})};return e(o.fills,t.fills)&&e(o.strokes,t.strokes)}(n,Ua(l).palette)||(S.palette=n)),S}function og(o){return f._.includes(Object.keys(CA),o)}var EA=ig.reduce(function(o,t){var e;return Qa(Qa({},o),((e={})[t]={title:{_enabledFromTheme:!0}},e))},{});function TA(o,t){var e=o.getExtraPaddingDirections();return{common:{axes:EA,padding:{top:!t&&e.includes("top")?40:20,right:e.includes("right")?30:20,bottom:e.includes("bottom")?40:20,left:e.includes("left")?30:20}},pie:{series:{title:{_enabledFromTheme:!0},calloutLabel:{_enabledFromTheme:!0},sectorLabel:{enabled:!1,_enabledFromTheme:!0}}}}}function ag(o,t){var e=o.customChartThemes,r=e&&e[t];return r||console.warn("AG Grid: no stock theme exists with the name '"+t+"' and no custom chart theme with that name was supplied to 'customChartThemes'"),r}var Za=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Mo=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},$l=function(o){return function(t){return void 0===t||o(t)}},sg=function(o){return"string"==typeof o},lg=function(o){return"boolean"==typeof o},DA=function(o){return"object"==typeof o},nn=function(o,t){return function(e){return"AG Grid - unable to update chart as invalid params supplied:  `"+o+": "+e+"`, expected "+t+"."}},MA=function(){function o(){}return o.validateChartParams=function(t){switch(t.type){case"rangeChartUpdate":return o.validateUpdateRangeChartParams(t);case"pivotChartUpdate":return o.validateUpdatePivotChartParams(t);case"crossFilterChartUpdate":return o.validateUpdateCrossFilterChartParams(t);default:return console.warn("AG Grid - Invalid value supplied for 'type': "+t.type+". It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'."),!1}},o.validateUpdateRangeChartParams=function(t){var e=Mo(Mo(Mo([],Za(o.commonValidations)),Za(o.cellRangeValidations)),[{property:"seriesChartTypes",validationFn:function(r){return void 0===r||Array.isArray(r)&&r.every(DA)},warnMessage:nn("seriesChartTypes","Array of SeriesChartType")}]);return o.validateProperties(t,e,["type","chartId","chartType","chartThemeName","chartThemeOverrides","unlinkChart","cellRange","suppressChartRanges","aggFunc","seriesChartTypes"],"UpdateRangeChartParams")},o.validateUpdatePivotChartParams=function(t){var e=Mo([],Za(o.commonValidations));return o.validateProperties(t,e,["type","chartId","chartType","chartThemeName","chartThemeOverrides","unlinkChart"],"UpdatePivotChartParams")},o.validateUpdateCrossFilterChartParams=function(t){var e=Mo(Mo([],Za(o.commonValidations)),Za(o.cellRangeValidations));return o.validateProperties(t,e,["type","chartId","chartType","chartThemeName","chartThemeOverrides","unlinkChart","cellRange","suppressChartRanges","aggFunc"],"UpdateCrossFilterChartParams")},o.validateProperties=function(t,e,r,n){var i,a;try{for(var s=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),l=s.next();!l.done;l=s.next()){var u=l.value,h=u.warnMessage;if((c=u.property)in t){var p=t[c];if(!(0,u.validationFn)(p))return console.warn(h(p)),!1}}}catch(v){i={error:v}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}for(var c in t)if(!r.includes(c))return console.warn("AG Grid - Unexpected property supplied. "+n+" does not contain: `"+c+"`."),!1;return!0},o.validChartTypes=["column","groupedColumn","stackedColumn","normalizedColumn","bar","groupedBar","stackedBar","normalizedBar","line","scatter","bubble","pie","doughnut","area","stackedArea","normalizedArea","histogram","columnLineCombo","areaColumnCombo","customCombo"],o.validateChartType=$l(function(t){return o.validChartTypes.includes(t)}),o.validateAgChartThemeOverrides=$l(function(t){return"object"==typeof t}),o.validateChartParamsCellRange=$l(function(t){return"object"==typeof t}),o.validateAggFunc=$l(function(t){return"string"==typeof t||"function"==typeof t}),o.commonValidations=[{property:"chartId",validationFn:sg,warnMessage:nn("chartId","string")},{property:"chartType",validationFn:o.validateChartType,warnMessage:nn("chartType",o.validChartTypes.join(", "))},{property:"chartThemeName",validationFn:sg,warnMessage:nn("chartThemeName","string")},{property:"chartThemeOverrides",validationFn:o.validateAgChartThemeOverrides,warnMessage:nn("chartThemeOverrides","AgChartThemeOverrides")},{property:"unlinkChart",validationFn:lg,warnMessage:nn("unlinkChart","boolean")}],o.cellRangeValidations=[{property:"cellRange",validationFn:o.validateChartParamsCellRange,warnMessage:nn("cellRange","ChartParamsCellRange")},{property:"suppressChartRanges",validationFn:lg,warnMessage:nn("suppressChartRanges","boolean")},{property:"aggFunc",validationFn:o.validateAggFunc,warnMessage:nn("aggFunc","string or IAggFunc")}],o}(),RA=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),cd=function(){return cd=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},cd.apply(this,arguments)},ug=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},cg=["ag-default","ag-material","ag-pastel","ag-vivid","ag-solar"],hr=function(o){function t(e){var r=o.call(this)||this;return r.model=e,r}return RA(t,o),t.prototype.init=function(){var e=this;this.setChartRange(),this.addManagedListener(this.eventService,f.YFc.EVENT_RANGE_SELECTION_CHANGED,function(r){r.id&&r.id===e.model.chartId&&e.updateForRangeChange()}),this.model.unlinked&&this.rangeService&&this.rangeService.setCellRanges([]),this.addManagedListener(this.eventService,f.YFc.EVENT_COLUMN_MOVED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,f.YFc.EVENT_COLUMN_PINNED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,f.YFc.EVENT_COLUMN_VISIBLE,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,f.YFc.EVENT_COLUMN_ROW_GROUP_CHANGED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,f.YFc.EVENT_MODEL_UPDATED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,f.YFc.EVENT_CELL_VALUE_CHANGED,this.updateForDataChange.bind(this))},t.prototype.update=function(e){var r,n,i,a,s,l,u;if(!this.validUpdateType(e)||!MA.validateChartParams(e))return!1;var g=cd({},{chartId:e.chartId,pivotChart:this.model.pivotChart,chartType:e.chartType??this.model.chartType,chartThemeName:e.chartThemeName??this.model.chartThemeName,unlinkChart:e.unlinkChart??this.model.unlinked,cellRange:this.model.suppliedCellRange,aggFunc:this.model.aggFunc,seriesChartTypes:void 0,suppressChartRanges:!1,crossFiltering:!1});switch(e.type){case"rangeChartUpdate":g.cellRange=null!==(r=this.createCellRange(e))&&void 0!==r?r:this.model.suppliedCellRange,g.aggFunc=null!==(n=e.aggFunc)&&void 0!==n?n:this.model.aggFunc,g.seriesChartTypes=e.seriesChartTypes,g.suppressChartRanges=null!==(i=e.suppressChartRanges)&&void 0!==i?i:this.model.suppressChartRanges;break;case"crossFilterChartUpdate":g.cellRange=null!==(a=this.createCellRange(e))&&void 0!==a?a:this.model.suppliedCellRange,g.aggFunc=null!==(s=e.aggFunc)&&void 0!==s?s:this.model.aggFunc,g.crossFiltering=!0,g.suppressChartRanges=null!==(l=e.suppressChartRanges)&&void 0!==l?l:this.model.suppressChartRanges}return this.model.updateModel(g),g.unlinkChart||g.suppressChartRanges?null===(u=this.rangeService)||void 0===u||u.setCellRanges([]):this.setChartRange(),!0},t.prototype.updateForGridChange=function(){this.model.unlinked||(this.model.updateCellRanges(),this.model.updateData(),this.setChartRange())},t.prototype.updateForDataChange=function(){this.model.unlinked||(this.model.updateData(),this.raiseChartModelUpdateEvent())},t.prototype.updateForRangeChange=function(){this.updateForGridChange(),this.raiseChartRangeSelectionChangedEvent()},t.prototype.updateForPanelChange=function(e){this.model.updateCellRanges(e),this.model.updateData(),this.setChartRange(),this.raiseChartRangeSelectionChangedEvent()},t.prototype.getChartUpdateParams=function(e){var n=this.getSelectedValueColState().map(function(s){return{colId:s.colId,displayName:s.displayName}}),i=this.getChartData(),a=this.getSelectedDimension();return{data:i,grouping:this.isGrouping(),category:{id:a.colId,name:a.displayName,chartDataType:this.model.getChartDataType(a.colId)},fields:n,chartId:this.getChartId(),getCrossFilteringContext:function(){return{lastSelectedChartId:"xxx"}},seriesChartTypes:this.getSeriesChartTypes(),updatedOverrides:e}},t.prototype.getChartModel=function(){var e=this.model.pivotChart?"pivot":"range",r=this.isComboChart()?this.model.comboChartModel.seriesChartTypes:void 0;return{modelType:e,chartId:this.model.chartId,chartType:this.model.chartType,chartThemeName:this.getChartThemeName(),chartOptions:this.chartProxy.getChartThemeOverrides(),chartPalette:this.chartProxy.getChartPalette(),cellRange:this.getCellRangeParams(),suppressChartRanges:this.model.suppressChartRanges,aggFunc:this.model.aggFunc,unlinkChart:this.model.unlinked,seriesChartTypes:r}},t.prototype.getChartId=function(){return this.model.chartId},t.prototype.getChartData=function(){return this.model.chartData},t.prototype.getChartType=function(){return this.model.chartType},t.prototype.setChartType=function(e){this.model.chartType=e,this.model.comboChartModel.updateSeriesChartTypes(),this.raiseChartModelUpdateEvent(),this.raiseChartOptionsChangedEvent()},t.prototype.setChartThemeName=function(e){this.model.chartThemeName=e,this.raiseChartModelUpdateEvent(),this.raiseChartOptionsChangedEvent()},t.prototype.getChartThemeName=function(){return this.model.chartThemeName},t.prototype.isPivotChart=function(){return this.model.pivotChart},t.prototype.isPivotMode=function(){return this.model.isPivotMode()},t.prototype.isGrouping=function(){return this.model.isGrouping()},t.prototype.isCrossFilterChart=function(){return this.model.crossFiltering},t.prototype.getThemes=function(){return this.gridOptionsService.get("chartThemes")||cg},t.prototype.getPalettes=function(){var e=this;return this.getThemes().map(function(n){return Ua(og(n)?n:e.chartProxy.lookupCustomChartTheme(n)).palette})},t.prototype.getValueColState=function(){return this.model.valueColState.map(this.displayNameMapper.bind(this))},t.prototype.getSelectedValueColState=function(){return this.getValueColState().filter(function(e){return e.selected})},t.prototype.getSelectedDimension=function(){return this.model.getSelectedDimension()},t.prototype.displayNameMapper=function(e){var r=this.model.columnNames[e.colId];return e.displayName=r?r.join(" - "):this.model.getColDisplayName(e.column),e},t.prototype.getColStateForMenu=function(){return{dimensionCols:this.model.dimensionColState,valueCols:this.getValueColState()}},t.prototype.setChartRange=function(e){void 0===e&&(e=!1),this.rangeService&&!this.model.suppressChartRanges&&!this.model.unlinked&&this.rangeService.setCellRanges(this.getCellRanges()),e||this.raiseChartModelUpdateEvent()},t.prototype.detachChartRange=function(){this.model.unlinked=!this.model.unlinked,this.model.unlinked?this.rangeService&&this.rangeService.setCellRanges([]):this.updateForGridChange()},t.prototype.setChartProxy=function(e){this.chartProxy=e},t.prototype.getChartProxy=function(){return this.chartProxy},t.prototype.isActiveXYChart=function(){return f._.includes(["scatter","bubble"],this.getChartType())},t.prototype.isChartLinked=function(){return!this.model.unlinked},t.prototype.customComboExists=function(){var e=this.model.comboChartModel.savedCustomSeriesChartTypes;return e&&e.length>0},t.prototype.getSeriesChartTypes=function(){return this.model.comboChartModel.seriesChartTypes},t.prototype.isComboChart=function(){return this.model.isComboChart()},t.prototype.updateSeriesChartType=function(e,r,n){var i=this.model.comboChartModel.seriesChartTypes.find(function(l){return l.colId===e});if(i){var a="customCombo"!==this.model.chartType;a&&(this.model.chartType="customCombo");var s=i.chartType;null!=r&&(i.chartType=r),null!=n&&(i.secondaryAxis=n),this.model.comboChartModel.savedCustomSeriesChartTypes=this.model.comboChartModel.seriesChartTypes,this.model.comboChartModel.updateSeriesChartTypes(),this.updateForDataChange(),a&&this.dispatchEvent({type:t.EVENT_CHART_TYPE_CHANGED}),s!==r&&this.dispatchEvent({type:t.EVENT_CHART_SERIES_CHART_TYPE_CHANGED}),this.raiseChartOptionsChangedEvent()}},t.prototype.getActiveSeriesChartTypes=function(){var e=this.getSelectedValueColState().map(function(r){return r.colId});return this.getSeriesChartTypes().filter(function(r){return e.includes(r.colId)})},t.prototype.getChartSeriesTypes=function(){return this.isComboChart()?["line","column","area"]:[Jt(this.getChartType())]},t.prototype.getCellRanges=function(){return[this.model.dimensionCellRange,this.model.valueCellRange].filter(function(e){return e})},t.prototype.createCellRange=function(e){var r;return e.cellRange&&(null===(r=this.rangeService)||void 0===r?void 0:r.createCellRangeFromCellRangeParams(e.cellRange))},t.prototype.validUpdateType=function(e){var n,r=this;if(!e.type)return console.warn("AG Grid - Unable to update chart as the 'type' is missing. It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'."),!1;var i={"Range Chart":function(){return!r.isPivotChart()&&!r.isCrossFilterChart()},"Pivot Chart":function(){return r.isPivotChart()},"Cross Filter Chart":function(){return r.isCrossFilterChart()}},a=null!==(n=Object.keys(i).find(function(l){return i[l]()}))&&void 0!==n?n:"Range Chart",s=e.type===""+a[0].toLowerCase()+a.slice(1).replace(/ /g,"")+"Update";return s||console.warn("AG Grid - Unable to update chart as a '"+e.type+"' update type is not permitted on a "+a+"."),s},t.prototype.getCellRangeParams=function(){var e=this.getCellRanges(),r=e[0],n=r&&r.startRow||null,i=r&&r.endRow||null;return{rowStartIndex:n&&n.rowIndex,rowStartPinned:n&&n.rowPinned,rowEndIndex:i&&i.rowIndex,rowEndPinned:i&&i.rowPinned,columns:e.reduce(function(a,s){return a.concat(s.columns.map(function(l){return l.getId()}))},[])}},t.prototype.raiseChartModelUpdateEvent=function(){this.dispatchEvent({type:t.EVENT_CHART_MODEL_UPDATE})},t.prototype.raiseChartUpdatedEvent=function(){this.dispatchEvent({type:t.EVENT_CHART_UPDATED})},t.prototype.raiseChartApiUpdateEvent=function(){this.dispatchEvent({type:t.EVENT_CHART_API_UPDATE})},t.prototype.raiseChartOptionsChangedEvent=function(){var e=this.getChartModel(),i={type:f.YFc.EVENT_CHART_OPTIONS_CHANGED,chartId:e.chartId,chartType:e.chartType,chartThemeName:this.getChartThemeName(),chartOptions:this.chartProxy.getChartThemeOverrides()};this.eventService.dispatchEvent(i)},t.prototype.raiseChartRangeSelectionChangedEvent=function(){var e={type:f.YFc.EVENT_CHART_RANGE_SELECTION_CHANGED,id:this.model.chartId,chartId:this.model.chartId,cellRange:this.getCellRangeParams()};this.eventService.dispatchEvent(e)},t.prototype.destroy=function(){o.prototype.destroy.call(this),this.rangeService&&this.rangeService.setCellRanges([])},t.EVENT_CHART_UPDATED="chartUpdated",t.EVENT_CHART_API_UPDATE="chartApiUpdate",t.EVENT_CHART_MODEL_UPDATE="chartModelUpdate",t.EVENT_CHART_TYPE_CHANGED="chartTypeChanged",t.EVENT_CHART_SERIES_CHART_TYPE_CHANGED="chartSeriesChartTypeChanged",ug([(0,f.Qnc)("rangeService")],t.prototype,"rangeService",void 0),ug([f.QhY],t.prototype,"init",null),t}(f._QX),FA=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),dd=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Xl=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Ql=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},LA={groups:[{type:"categories",isOpen:!0},{type:"series",isOpen:!0},{type:"seriesChartType",isOpen:!0}]},NA=function(o){function t(e,r){var n=o.call(this,t.TEMPLATE)||this;return n.chartController=e,n.chartOptionsService=r,n.columnComps=new Map,n}return FA(t,o),t.prototype.init=function(){this.updatePanels(),this.addManagedListener(this.chartController,hr.EVENT_CHART_MODEL_UPDATE,this.updatePanels.bind(this)),this.addManagedListener(this.chartController,hr.EVENT_CHART_API_UPDATE,this.updatePanels.bind(this)),this.createAutoScrollService()},t.prototype.destroy=function(){this.clearComponents(),o.prototype.destroy.call(this)},t.prototype.updatePanels=function(){var r,n,e=this,i=this.chartType,a=this.chartController.getColStateForMenu(),s=a.dimensionCols,l=a.valueCols,u=s.map(function(p){return p.colId}).concat(l.map(function(p){return p.colId}));this.chartType=this.chartController.getChartType();var c=this.getGroupExpandedState();if(f._.areEqual(f._.keys(this.columnComps),u)&&this.chartType===i){if(Ql(Ql([],Xl(s)),Xl(l)).forEach(function(p){e.columnComps.get(p.colId).setValue(p.selected,!0)}),this.chartController.isActiveXYChart()){var d=this.generateGetSeriesLabel();l.forEach(function(p){e.columnComps.get(p.colId).setLabel(d(p))})}f._.removeFromParent(this.getGui().querySelector("#seriesChartTypeGroup")),this.seriesChartTypeGroupComp=this.destroyBean(this.seriesChartTypeGroupComp);var h=null===(r=this.getDataPanelDef().groups)||void 0===r?void 0:r.reduce(function(p,v,g){return"seriesChartType"===v.type?g:p},-1);-1!==h&&this.createSeriesChartTypeGroup(l,h)}else this.clearComponents(),null===(n=this.getDataPanelDef().groups)||void 0===n||n.forEach(function(p){var v=p.type;"categories"===v?e.createCategoriesGroup(s):"series"===v?e.createSeriesGroup(l):"seriesChartType"===v?e.createSeriesChartTypeGroup(l):console.warn("AG Grid: invalid charts data panel group name supplied: '"+v+"'")});this.restoreGroupExpandedState(c)},t.prototype.getGroupExpandedState=function(){var e=this;return[{groupType:"categories",comp:this.categoriesGroupComp},{groupType:"series",comp:this.seriesGroupComp},{groupType:"seriesChartType",comp:this.seriesChartTypeGroupComp}].map(function(n){var i,a,s=n.groupType,l=n.comp,u=!(null===(a=null===(i=e.getDataPanelDef().groups)||void 0===i?void 0:i.find(function(c){return c.type===s}))||void 0===a||!a.isOpen);return l?l.isExpanded():u})},t.prototype.restoreGroupExpandedState=function(e){[this.categoriesGroupComp,this.seriesGroupComp,this.seriesChartTypeGroupComp].forEach(function(r,n){r&&r.toggleGroupExpand(e[n])})},t.prototype.createAutoScrollService=function(){var e=this.getGui();this.autoScrollService=new f.IHe({scrollContainer:e,scrollAxis:"y",getVerticalPosition:function(){return e.scrollTop},setVerticalPosition:function(r){return e.scrollTop=r}})},t.prototype.createComponent=function(e,r){var n=document.createElement("div");return n.id=r,n.className="ag-chart-data-section",n.appendChild(e.getGui()),n},t.prototype.addComponent=function(e,r,n){var i=this.createComponent(r,n);e.appendChild(i)},t.prototype.addComponentAtIndex=function(e,r,n,i){var a=this.createComponent(r,n);e.insertBefore(a,e.children[i])},t.prototype.addChangeListener=function(e,r){var n=this;this.addManagedListener(e,f.YFc.EVENT_FIELD_VALUE_CHANGED,function(){r.selected=e.getValue(),n.chartController.updateForPanelChange(r)})},t.prototype.createCategoriesGroup=function(e){var r=this;this.categoriesGroupComp=this.createBean(new f.SKM({title:this.getCategoryGroupTitle(),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data"}));var n="chartDimension"+this.getCompId();e.forEach(function(i){var a=r.categoriesGroupComp.createManagedBean(new f.mar);a.setLabel(f._.escapeString(i.displayName)),a.setValue(i.selected),a.setInputName(n),r.addChangeListener(a,i),r.categoriesGroupComp.addItem(a),r.columnComps.set(i.colId,a)}),this.addComponent(this.getGui(),this.categoriesGroupComp,"categoriesGroup")},t.prototype.createSeriesGroup=function(e){var r=this;if(this.seriesGroupComp=this.createManagedBean(new f.SKM({title:this.getSeriesGroupTitle(),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data"})),this.chartController.isActiveXYChart()){var n=this.seriesGroupComp.createManagedBean(new f.E$5);n.setLabel(this.chartTranslationService.translate("paired")).setLabelAlignment("left").setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getPairedMode()).onValueChange(function(u){r.chartOptionsService.setPairedMode(!!u),r.chartController.updateForGridChange()}),this.seriesGroupComp.addItem(n)}var i=this.generateGetSeriesLabel();e.forEach(function(u){var c=r.seriesGroupComp.createManagedBean(new f.kDk);c.addCssClass("ag-data-select-checkbox");var d=i(u);c.setLabel(d),c.setValue(u.selected),r.addChangeListener(c,u),r.seriesGroupComp.addItem(c),r.columnComps.set(u.colId,c),r.addDragHandle(c,u)});var a=this.getGui(),s=this.seriesGroupComp.getGui();this.addComponent(a,this.seriesGroupComp,"seriesGroup");var l={getIconName:function(){return f.sZo.ICON_MOVE},getContainer:function(){return s},onDragging:function(u){return r.onDragging(u)},onDragLeave:function(){return r.onDragLeave()},isInterestedIn:this.isInterestedIn.bind(this),targetContainsSource:!0};this.dragAndDropService.addDropTarget(l),this.addDestroyFunc(function(){return r.dragAndDropService.removeDropTarget(l)})},t.prototype.createSeriesChartTypeGroup=function(e,r){var n=this;if(this.chartController.isComboChart()){this.seriesChartTypeGroupComp=this.createManagedBean(new f.SKM({title:this.chartTranslationService.translate("seriesChartType"),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data"}));var i=this.chartController.getSeriesChartTypes();e.forEach(function(a){if(a.selected){var s=i.filter(function(p){return p.colId===a.colId})[0];if(s){var l=n.seriesChartTypeGroupComp.createManagedBean(new f.SKM({title:a.displayName,enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!0,cssIdentifier:"charts-format-sub-level"})),u=n.seriesChartTypeGroupComp.createManagedBean(new f.kDk).setLabel(n.chartTranslationService.translate("secondaryAxis")).setLabelWidth("flex").setDisabled(["groupedColumn","stackedColumn","stackedArea"].includes(s.chartType)).setValue(!!s.secondaryAxis).onValueChange(function(p){return n.chartController.updateSeriesChartType(a.colId,void 0,p)});l.addItem(u);var c=function(p,v){return n.chartTranslationService.translate(p,v)},d=[{value:"line",text:c("line","Line")},{value:"area",text:c("area","Area")},{value:"stackedArea",text:c("stackedArea","StackedArea")},{value:"groupedColumn",text:c("groupedColumn","Grouped Column")},{value:"stackedColumn",text:c("stackedColumn","Stacked Column")}],h=l.createManagedBean(new f.Upw);h.setLabelAlignment("left").setLabelWidth("flex").addOptions(d).setValue(s.chartType).onValueChange(function(p){return n.chartController.updateSeriesChartType(a.colId,p)}),l.addItem(h),n.seriesChartTypeGroupComp.addItem(l)}}}),void 0===r?this.addComponent(this.getGui(),this.seriesChartTypeGroupComp,"seriesChartTypeGroup"):this.addComponentAtIndex(this.getGui(),this.seriesChartTypeGroupComp,"seriesChartTypeGroup",r)}},t.prototype.addDragHandle=function(e,r){var n=this,i=f._.createIconNoSpan("columnDrag",this.gridOptionsService);i.classList.add("ag-drag-handle","ag-chart-data-column-drag-handle"),e.getGui().insertAdjacentElement("beforeend",i);var a={type:f.gt1.ChartPanel,eElement:i,dragItemName:r.displayName,getDragItem:function(){return{columns:[r.column]}},onDragStopped:function(){return n.onDragStop()}};this.dragAndDropService.addDragSource(a,!0),this.addDestroyFunc(function(){return n.dragAndDropService.removeDragSource(a)})},t.prototype.generateGetSeriesLabel=function(){if(!this.chartController.isActiveXYChart())return function(a){return f._.escapeString(a.displayName)};var e="bubble"===this.chartType,r=this.isInPairedMode(),n=0,i=new Map;return i.set(0,"X"),i.set(1,"Y"),i.set(2,"size"),function(a){var l,s=f._.escapeString(a.displayName);return a.selected?(l=r?i.get(n%(e?3:2)):0===n?"X":e&&n%2==0?"size":"Y",n++,s+" ("+l+")"):s}},t.prototype.getCategoryGroupTitle=function(){return this.chartTranslationService.translate(this.chartController.isActiveXYChart()?"labels":"categories")},t.prototype.getSeriesGroupTitle=function(){return this.chartTranslationService.translate(this.chartController.isActiveXYChart()?"xyValues":"series")},t.prototype.getDataPanelDef=function(){var e;return(null===(e=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===e?void 0:e.dataPanel)||LA},t.prototype.isInPairedMode=function(){return this.chartController.isActiveXYChart()&&this.chartOptionsService.getSeriesOption("paired","scatter")},t.prototype.clearComponents=function(){f._.clearElement(this.getGui()),this.categoriesGroupComp=this.destroyBean(this.categoriesGroupComp),this.seriesGroupComp=this.destroyBean(this.seriesGroupComp),this.seriesChartTypeGroupComp=this.destroyBean(this.seriesChartTypeGroupComp),this.columnComps.clear()},t.prototype.onDragging=function(e){var r=this.checkHoveredItem(e);if(r){this.lastDraggedColumn=e.dragItem.columns[0];var n=r.comp,i=r.position,a=this.lastHoveredItem||{};n===a.comp&&i===a.position||(this.autoScrollService.check(e.event),this.clearHoveredItems(),this.lastHoveredItem={comp:n,position:i},n.getGui().classList.add("ag-list-item-hovered","ag-item-highlight-"+i))}},t.prototype.checkHoveredItem=function(e){var r,n;if(f._.missing(e.vDirection))return null;var i=e.event;try{for(var a=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.columnComps.values()),s=a.next();!s.done;s=a.next()){var l=s.value,u=l.getGui();if(u.querySelector(".ag-chart-data-column-drag-handle")){var c=u.getBoundingClientRect();if(i.clientY>=c.top&&i.clientY<=c.bottom)return{comp:l,position:i.clientY>c.top+u.clientHeight/2?"bottom":"top"}}}}catch(v){r={error:v}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return null},t.prototype.onDragLeave=function(){this.clearHoveredItems()},t.prototype.onDragStop=function(){var e=this;if(this.lastHoveredItem){var r=this.chartController.getColStateForMenu(),i=r.valueCols,a=Ql(Ql([],Xl(r.dimensionCols)),Xl(i)).find(function(l){return l.column===e.lastDraggedColumn});if(a){var s=Array.from(this.columnComps.values()).indexOf(this.lastHoveredItem.comp);"bottom"===this.lastHoveredItem.position&&s++,a.order=s,this.chartController.updateForPanelChange(a)}}this.clearHoveredItems(),this.lastDraggedColumn=void 0,this.autoScrollService.ensureCleared()},t.prototype.clearHoveredItems=function(){this.columnComps.forEach(function(e){e.getGui().classList.remove("ag-list-item-hovered","ag-item-highlight-top","ag-item-highlight-bottom")}),this.lastHoveredItem=void 0},t.prototype.isInterestedIn=function(e){return e===f.gt1.ChartPanel},t.TEMPLATE='<div class="ag-chart-data-wrapper ag-scrollable-container"></div>',dd([(0,f.Qnc)("dragAndDropService")],t.prototype,"dragAndDropService",void 0),dd([(0,f.Qnc)("chartTranslationService")],t.prototype,"chartTranslationService",void 0),dd([f.QhY],t.prototype,"init",null),t}(f.YlN),kA=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),hi=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},qa=function(o){function t(e){var r=o.call(this)||this;return r.activeComps=[],r.params=e,r}return kA(t,o),t.prototype.init=function(){this.setTemplate(t.TEMPLATE,{fontGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0}}),this.initGroup(),this.initFontFamilySelect(),this.initFontWeightStyleSelect(),this.initFontSizeSelect(),this.initFontColorPicker()},t.prototype.addCompToPanel=function(e){this.fontGroup.addItem(e),this.activeComps.push(e)},t.prototype.setEnabled=function(e){this.fontGroup.setEnabled(e)},t.prototype.initGroup=function(){var e=this;this.fontGroup.setTitle(this.params.name||this.chartTranslationService.translate("font")).setEnabled(this.params.enabled).hideEnabledCheckbox(!!this.params.suppressEnabledCheckbox).hideOpenCloseIcons(!0).onEnableChange(function(r){e.params.setEnabled&&e.params.setEnabled(r)})},t.prototype.initFontFamilySelect=function(){var e=this,r=["Arial, sans-serif","Aria Black, sans-serif","Book Antiqua,  serif","Charcoal, sans-serif","Comic Sans MS, cursive","Courier, monospace","Courier New, monospace","Gadget, sans-serif","Geneva, sans-serif","Helvetica, sans-serif","Impact, sans-serif","Lucida Console, monospace","Lucida Grande, sans-serif","Lucida Sans Unicode,  sans-serif","Monaco, monospace","Palatino Linotype, serif","Palatino, serif","Times New Roman, serif","Times, serif","Verdana, sans-serif"],n=this.params.initialFont.family,i=r[0];if(n){var s=r.map(function(c){return c.toLowerCase()}).indexOf(n.toLowerCase());if(s>=0)i=r[s];else{var l=f._.capitalise(n);r.push(l),i=l}}var u=r.sort().map(function(c){return{value:c,text:c}});this.familySelect.addOptions(u).setInputWidth("flex").setValue(""+i).onValueChange(function(c){return e.params.setFont({family:c})})},t.prototype.initFontSizeSelect=function(){var e=this,r=[8,10,12,14,16,18,20,22,24,26,28,30,32,34,36],n=this.params.initialFont.size;f._.includes(r,n)||r.push(n);var i=r.sort(function(a,s){return a-s}).map(function(a){return{value:""+a,text:""+a}});this.sizeSelect.addOptions(i).setInputWidth("flex").setValue(""+n).onValueChange(function(a){return e.params.setFont({size:parseInt(a,10)})}),this.sizeSelect.setLabel(this.chartTranslationService.translate("size"))},t.prototype.initFontWeightStyleSelect=function(){var e=this,r=this.params.initialFont,n=r.weight,i=void 0===n?"normal":n,a=r.style,s=void 0===a?"normal":a,l=[{name:"normal",weight:"normal",style:"normal"},{name:"bold",weight:"bold",style:"normal"},{name:"italic",weight:"normal",style:"italic"},{name:"boldItalic",weight:"bold",style:"italic"}],u=l.find(function(d){return d.weight===i&&d.style===s});u||l.unshift(u={name:"predefined",weight:i,style:s});var c=l.map(function(d){return{value:d.name,text:e.chartTranslationService.translate(d.name)}});this.weightStyleSelect.addOptions(c).setInputWidth("flex").setValue(u.name).onValueChange(function(d){var h=l.find(function(p){return p.name===d});e.params.setFont({weight:h.weight,style:h.style})})},t.prototype.initFontColorPicker=function(){var e=this;this.colorPicker.setLabel(this.chartTranslationService.translate("color")).setInputWidth(45).setValue(""+this.params.initialFont.color).onValueChange(function(r){return e.params.setFont({color:r})})},t.prototype.addItemToPanel=function(e){this.fontGroup.addItem(e),this.activeComps.push(e)},t.prototype.destroyActiveComps=function(){var e=this;this.activeComps.forEach(function(r){f._.removeFromParent(r.getGui()),e.destroyBean(r)})},t.prototype.destroy=function(){this.destroyActiveComps(),o.prototype.destroy.call(this)},t.TEMPLATE='<div class="ag-font-panel">\n            <ag-group-component ref="fontGroup">\n                <ag-select ref="familySelect"></ag-select>\n                <ag-select ref="weightStyleSelect"></ag-select>\n                <div class="ag-charts-font-size-color">\n                    <ag-select ref="sizeSelect"></ag-select>\n                    <ag-color-picker ref="colorPicker"></ag-color-picker>\n                </div>\n            </ag-group-component>\n        </div>',hi([(0,f.IzG)("fontGroup")],t.prototype,"fontGroup",void 0),hi([(0,f.IzG)("familySelect")],t.prototype,"familySelect",void 0),hi([(0,f.IzG)("weightStyleSelect")],t.prototype,"weightStyleSelect",void 0),hi([(0,f.IzG)("sizeSelect")],t.prototype,"sizeSelect",void 0),hi([(0,f.IzG)("colorPicker")],t.prototype,"colorPicker",void 0),hi([(0,f.Qnc)("chartTranslationService")],t.prototype,"chartTranslationService",void 0),hi([f.QhY],t.prototype,"init",null),t}(f.YlN),GA=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Fr=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},VA=function(o){function t(e){var r=e.chartOptionsService,n=e.isExpandedOnInit,i=void 0!==n&&n,a=o.call(this)||this;return a.activePanels=[],a.chartOptionsService=r,a.isExpandedOnInit=i,a}return GA(t,o),t.prototype.init=function(){this.setTemplate(t.TEMPLATE,{legendGroup:{cssIdentifier:"charts-format-top-level",direction:"vertical"}}),this.initLegendGroup(),this.initLegendPosition(),this.initLegendPadding(),this.initLegendItems(),this.initLabelPanel()},t.prototype.initLegendGroup=function(){var e=this;this.legendGroup.setTitle(this.chartTranslationService.translate("legend")).hideEnabledCheckbox(!1).setEnabled(this.chartOptionsService.getChartOption("legend.enabled")||!1).toggleGroupExpand(this.isExpandedOnInit).onEnableChange(function(r){e.chartOptionsService.setChartOption("legend.enabled",r),e.legendGroup.toggleGroupExpand(!0)})},t.prototype.initLegendPosition=function(){var e=this;this.legendPositionSelect.setLabel(this.chartTranslationService.translate("position")).setLabelWidth("flex").setInputWidth(80).addOptions(["top","right","bottom","left"].map(function(n){return{value:n,text:e.chartTranslationService.translate(n)}})).setValue(this.chartOptionsService.getChartOption("legend.position")).onValueChange(function(n){return e.chartOptionsService.setChartOption("legend.position",n)})},t.prototype.initLegendPadding=function(){var e=this,r=this.chartOptionsService.getChartOption("legend.spacing");this.legendPaddingSlider.setLabel(this.chartTranslationService.translate("spacing")).setMaxValue(pt(r,200)).setValue(""+r).setTextFieldWidth(45).onValueChange(function(n){return e.chartOptionsService.setChartOption("legend.spacing",n)})},t.prototype.initLegendItems=function(){var e=this,r=function(n,i,a,s){var l=e.chartOptionsService.getChartOption("legend."+n);a.setLabel(e.chartTranslationService.translate(i)).setMaxValue(pt(l,s)).setValue(""+l).setTextFieldWidth(45).onValueChange(function(u){e.chartOptionsService.setChartOption("legend."+n,u)})};r("item.marker.size","markerSize",this.markerSizeSlider,40),r("item.marker.strokeWidth","markerStroke",this.markerStrokeSlider,10),r("item.marker.padding","itemSpacing",this.markerPaddingSlider,20),r("item.paddingX","layoutHorizontalSpacing",this.itemPaddingXSlider,50),r("item.paddingY","layoutVerticalSpacing",this.itemPaddingYSlider,50)},t.prototype.initLabelPanel=function(){var e=this,r=this.chartOptionsService,n={family:r.getChartOption("legend.item.label.fontFamily"),style:r.getChartOption("legend.item.label.fontStyle"),weight:r.getChartOption("legend.item.label.fontWeight"),size:r.getChartOption("legend.item.label.fontSize"),color:r.getChartOption("legend.item.label.color")},s=this.createBean(new qa({enabled:!0,suppressEnabledCheckbox:!0,initialFont:n,setFont:function(l){var u=e.chartOptionsService;l.family&&u.setChartOption("legend.item.label.fontFamily",l.family),l.weight&&u.setChartOption("legend.item.label.fontWeight",l.weight),l.style&&u.setChartOption("legend.item.label.fontStyle",l.style),l.size&&u.setChartOption("legend.item.label.fontSize",l.size),l.color&&u.setChartOption("legend.item.label.color",l.color)}}));this.legendGroup.addItem(s),this.activePanels.push(s)},t.prototype.destroyActivePanels=function(){var e=this;this.activePanels.forEach(function(r){f._.removeFromParent(r.getGui()),e.destroyBean(r)})},t.prototype.destroy=function(){this.destroyActivePanels(),o.prototype.destroy.call(this)},t.TEMPLATE='<div>\n            <ag-group-component ref="legendGroup">\n                <ag-select ref="legendPositionSelect"></ag-select>\n                <ag-slider ref="legendPaddingSlider"></ag-slider>\n                <ag-slider ref="markerSizeSlider"></ag-slider>\n                <ag-slider ref="markerStrokeSlider"></ag-slider>\n                <ag-slider ref="markerPaddingSlider"></ag-slider>\n                <ag-slider ref="itemPaddingXSlider"></ag-slider>\n                <ag-slider ref="itemPaddingYSlider"></ag-slider>\n            </ag-group-component>\n        </div>',Fr([(0,f.IzG)("legendGroup")],t.prototype,"legendGroup",void 0),Fr([(0,f.IzG)("legendPositionSelect")],t.prototype,"legendPositionSelect",void 0),Fr([(0,f.IzG)("legendPaddingSlider")],t.prototype,"legendPaddingSlider",void 0),Fr([(0,f.IzG)("markerSizeSlider")],t.prototype,"markerSizeSlider",void 0),Fr([(0,f.IzG)("markerStrokeSlider")],t.prototype,"markerStrokeSlider",void 0),Fr([(0,f.IzG)("markerPaddingSlider")],t.prototype,"markerPaddingSlider",void 0),Fr([(0,f.IzG)("itemPaddingXSlider")],t.prototype,"itemPaddingXSlider",void 0),Fr([(0,f.IzG)("itemPaddingYSlider")],t.prototype,"itemPaddingYSlider",void 0),Fr([(0,f.Qnc)("chartTranslationService")],t.prototype,"chartTranslationService",void 0),Fr([f.QhY],t.prototype,"init",null),t}(f.YlN),BA=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ro=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},jA=function(o){function t(e){var r=o.call(this)||this;return r.chartOptionsService=e,r}return BA(t,o),t.prototype.init=function(){this.setTemplate(t.TEMPLATE,{axisTicksGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0}}),this.initAxisTicks()},t.prototype.initAxisTicks=function(){var e=this;this.axisTicksGroup.setTitle(this.chartTranslationService.translate("ticks")).hideOpenCloseIcons(!0).hideEnabledCheckbox(!0),this.axisTicksColorPicker.setLabel(this.chartTranslationService.translate("color")).setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getAxisProperty("tick.color")).onValueChange(function(n){return e.chartOptionsService.setAxisProperty("tick.color",n)});var r=function(n,i,a,s){var l=e.chartOptionsService.getAxisProperty(n);i.setLabel(a).setMaxValue(pt(l,s)).setValue(""+l).setTextFieldWidth(45).onValueChange(function(u){return e.chartOptionsService.setAxisProperty(n,u)})};r("tick.width",this.axisTicksWidthSlider,this.chartTranslationService.translate("width"),10),r("tick.size",this.axisTicksSizeSlider,this.chartTranslationService.translate("length"),30)},t.TEMPLATE='<div>\n            <ag-group-component ref="axisTicksGroup">\n                <ag-color-picker ref="axisTicksColorPicker"></ag-color-picker>\n                <ag-slider ref="axisTicksWidthSlider"></ag-slider>\n                <ag-slider ref="axisTicksSizeSlider"></ag-slider>\n            </ag-group-component>\n        </div>',Ro([(0,f.IzG)("axisTicksGroup")],t.prototype,"axisTicksGroup",void 0),Ro([(0,f.IzG)("axisTicksColorPicker")],t.prototype,"axisTicksColorPicker",void 0),Ro([(0,f.IzG)("axisTicksWidthSlider")],t.prototype,"axisTicksWidthSlider",void 0),Ro([(0,f.IzG)("axisTicksSizeSlider")],t.prototype,"axisTicksSizeSlider",void 0),Ro([(0,f.Qnc)("chartTranslationService")],t.prototype,"chartTranslationService",void 0),Ro([f.QhY],t.prototype,"init",null),t}(f.YlN),zA=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ja=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},dg=function(o){function t(e){var r=o.call(this,e,t.TEMPLATE)||this;return r.radius=0,r.offsetX=0,r.offsetY=0,r}return zA(t,o),t.prototype.postConstruct=function(){var e=this;o.prototype.postConstruct.call(this),this.dragListener={eElement:this.eParentCircle,dragStartPixels:0,onDragStart:function(r){e.parentCircleRect=e.eParentCircle.getBoundingClientRect()},onDragging:function(r){return e.calculateAngleDrag(r)},onDragStop:function(){}},this.dragService.addDragSource(this.dragListener),this.eAngleValue.setLabel("").setLabelWidth(5).setInputWidth(45).setMin(0).setMax(360).setValue(""+this.degrees).onValueChange(function(r){(null==r||""===r)&&(r="0"),r=e.eAngleValue.normalizeValue(r);var n=parseFloat(r);n>180&&(n-=360),e.setValue(n)}),this.updateNumberInput(),f._.exists(this.getValue())&&this.eAngleValue.setValue(this.normalizeNegativeValue(this.getValue()).toString()),this.addManagedListener(this,f.YFc.EVENT_FIELD_VALUE_CHANGED,function(){var r=e.gridOptionsService.getDocument();e.eAngleValue.getInputElement().contains(r.activeElement)||e.updateNumberInput()})},t.prototype.updateNumberInput=function(){var e=this.normalizeNegativeValue(this.getValue());this.eAngleValue.setValue(e.toString())},t.prototype.positionChildCircle=function(e){var r=this.parentCircleRect||{width:24,height:24},n=this.eChildCircle,a=r.height/2;n.style.left=r.width/2+8*Math.cos(e)+"px",n.style.top=a+8*Math.sin(e)+"px"},t.prototype.calculatePolar=function(){var e=this.offsetX,r=this.offsetY,n=Math.atan2(r,e);this.degrees=this.toDegrees(n),this.radius=Math.sqrt(e*e+r*r),this.positionChildCircle(n)},t.prototype.calculateCartesian=function(){var e=this.toRadians(this.getValue()),r=this.getRadius();this.setOffsetX(Math.cos(e)*r).setOffsetY(Math.sin(e)*r)},t.prototype.setOffsetX=function(e){return this.offsetX!==e&&(this.offsetX=e,this.calculatePolar()),this},t.prototype.setOffsetY=function(e){return this.offsetY!==e&&(this.offsetY=e,this.calculatePolar()),this},t.prototype.calculateAngleDrag=function(e){var r=this.parentCircleRect,c=Math.atan2(e.clientY-r.top-r.height/2,e.clientX-r.left-r.width/2);this.setValue(c,!0)},t.prototype.toDegrees=function(e){return e/Math.PI*180},t.prototype.toRadians=function(e){return e/180*Math.PI},t.prototype.normalizeNegativeValue=function(e){return e<0?360+e:e},t.prototype.normalizeAngle180=function(e){return(e%=2*Math.PI)<-Math.PI?e+=2*Math.PI:e>=Math.PI&&(e-=2*Math.PI),e},t.prototype.getRadius=function(){return this.radius},t.prototype.setRadius=function(e){return this.radius===e||(this.radius=e,this.calculateCartesian()),this},t.prototype.onValueChange=function(e){var r=this;return this.addManagedListener(this,f.YFc.EVENT_FIELD_VALUE_CHANGED,function(){e(r.degrees)}),this},t.prototype.getValue=function(e){return e?this.toRadians(this.degrees):this.degrees},t.prototype.setValue=function(e,r){var n;return n=r?e:this.normalizeAngle180(this.toRadians(e)),e=this.toDegrees(n),this.degrees!==e&&(this.degrees=Math.floor(e),this.calculateCartesian(),this.positionChildCircle(n),this.dispatchEvent({type:f.YFc.EVENT_FIELD_VALUE_CHANGED})),this},t.prototype.setWidth=function(e){return f._.setFixedWidth(this.getGui(),e),this},t.prototype.setDisabled=function(e){return o.prototype.setDisabled.call(this,e),this.eAngleValue.setDisabled(e),this},t.prototype.destroy=function(){this.dragService.removeDragSource(this.dragListener),o.prototype.destroy.call(this)},t.TEMPLATE='<div class="ag-angle-select">\n            <div ref="eLabel"></div>\n            <div class="ag-wrapper ag-angle-select-wrapper">\n                <div ref="eAngleSelectField" class="ag-angle-select-field">\n                    <div ref="eParentCircle" class="ag-angle-select-parent-circle">\n                        <div ref="eChildCircle" class="ag-angle-select-child-circle"></div>\n                    </div>\n                </div>\n                <ag-input-number-field ref="eAngleValue"></ag-input-number-field>\n            </div>\n        </div>',Ja([(0,f.IzG)("eLabel")],t.prototype,"eLabel",void 0),Ja([(0,f.IzG)("eParentCircle")],t.prototype,"eParentCircle",void 0),Ja([(0,f.IzG)("eChildCircle")],t.prototype,"eChildCircle",void 0),Ja([(0,f.IzG)("eAngleValue")],t.prototype,"eAngleValue",void 0),Ja([(0,f.Qnc)("dragService")],t.prototype,"dragService",void 0),t}(f.WYP),HA=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),es=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},UA=function(o){function t(e){var r=e.chartController,n=e.chartOptionsService,i=e.isExpandedOnInit,a=void 0!==i&&i,s=o.call(this)||this;return s.activePanels=[],s.axisLabelUpdateFuncs=[],s.prevXRotation=0,s.prevYRotation=0,s.chartController=r,s.chartOptionsService=n,s.isExpandedOnInit=a,s}return HA(t,o),t.prototype.init=function(){var e=this;this.setTemplate(t.TEMPLATE,{axisGroup:{cssIdentifier:"charts-format-top-level",direction:"vertical"}}),this.initAxis(),this.initAxisTicks(),this.initAxisLabels(),this.addManagedListener(this.chartController,hr.EVENT_CHART_UPDATED,function(){return e.axisLabelUpdateFuncs.forEach(function(i){return i()})})},t.prototype.initAxis=function(){var e=this;this.axisGroup.setTitle(this.translate("axis")).toggleGroupExpand(this.isExpandedOnInit).hideEnabledCheckbox(!0),this.axisColorInput.setLabel(this.translate("color")).setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getAxisProperty("line.color")).onValueChange(function(n){return e.chartOptionsService.setAxisProperty("line.color",n)});var r=this.chartOptionsService.getAxisProperty("line.width");this.axisLineWidthSlider.setMaxValue(pt(r,10)).setLabel(this.translate("thickness")).setTextFieldWidth(45).setValue(""+r).onValueChange(function(n){return e.chartOptionsService.setAxisProperty("line.width",n)})},t.prototype.initAxisTicks=function(){var e=this.createBean(new jA(this.chartOptionsService));this.axisGroup.addItem(e),this.activePanels.push(e)},t.prototype.initAxisLabels=function(){var e=this,r={family:this.chartOptionsService.getAxisProperty("label.fontFamily"),style:this.chartOptionsService.getAxisProperty("label.fontStyle"),weight:this.chartOptionsService.getAxisProperty("label.fontWeight"),size:this.chartOptionsService.getAxisProperty("label.fontSize"),color:this.chartOptionsService.getAxisProperty("label.color")},i={name:this.translate("labels"),enabled:!0,suppressEnabledCheckbox:!0,initialFont:r,setFont:function(s){s.family&&e.chartOptionsService.setAxisProperty("label.fontFamily",s.family),s.weight&&e.chartOptionsService.setAxisProperty("label.fontWeight",s.weight),s.style&&e.chartOptionsService.setAxisProperty("label.fontStyle",s.style),s.size&&e.chartOptionsService.setAxisProperty("label.fontSize",s.size),s.color&&e.chartOptionsService.setAxisProperty("label.color",s.color)}},a=this.createBean(new qa(i));this.axisGroup.addItem(a),this.activePanels.push(a),this.addAdditionalLabelComps(a)},t.prototype.addAdditionalLabelComps=function(e){this.addLabelPadding(e);var r=this.createRotationWidgets(),n=r.xRotationComp,i=r.yRotationComp,a=this.initLabelRotations(n,i);e.addCompToPanel(a),e.addCompToPanel(n),e.addCompToPanel(i)},t.prototype.initLabelRotations=function(e,r){var d,h,n=this,i=function(d){return n.chartOptionsService.getLabelRotation(d)},a=function(d,h){n.chartOptionsService.setLabelRotation(d,h)},u=(d=i("xAxis"),h=i("yAxis"),null==d&&null==h&&n.chartOptionsService.getAxisProperty("label.autoRotate")),c=this.createBean(new f.kDk).setLabel(this.translate("autoRotate")).setValue(u).onValueChange(function(d){n.chartOptionsService.setAxisProperty("label.autoRotate",d),d?(n.prevXRotation=i("xAxis"),n.prevYRotation=i("yAxis"),a("xAxis",void 0),a("yAxis",void 0)):(a("xAxis",n.prevXRotation),a("yAxis",n.prevYRotation)),e.setDisabled(d),r.setDisabled(d)});return e.setDisabled(u),r.setDisabled(u),c},t.prototype.createRotationWidgets=function(){var e=this,n=function(i,a){var s=e.chartTranslationService.translate(i)+" \xb0",l=e.chartOptionsService.getLabelRotation(a),u=(new dg).setLabel(s).setLabelWidth("flex").setValue(l||0).onValueChange(function(c){return e.chartOptionsService.setLabelRotation(a,c)});return e.axisLabelUpdateFuncs.push(function(){var c=e.chartOptionsService.getLabelRotation(a);u.setValue(c||0)}),e.createBean(u)};return{xRotationComp:n("xRotation","xAxis"),yRotationComp:n("yRotation","yAxis")}},t.prototype.addLabelPadding=function(e){var r=this,n=this.createBean(new f.C55),i=this.chartOptionsService.getAxisProperty("label.padding");n.setLabel(this.chartTranslationService.translate("padding")).setMaxValue(pt(i,30)).setValue(""+i).setTextFieldWidth(45).onValueChange(function(a){return r.chartOptionsService.setAxisProperty("label.padding",a)}),e.addCompToPanel(n)},t.prototype.translate=function(e,r){return this.chartTranslationService.translate(e,r)},t.prototype.destroyActivePanels=function(){var e=this;this.activePanels.forEach(function(r){f._.removeFromParent(r.getGui()),e.destroyBean(r)})},t.prototype.destroy=function(){this.destroyActivePanels(),o.prototype.destroy.call(this)},t.TEMPLATE='<div>\n            <ag-group-component ref="axisGroup">\n                <ag-color-picker ref="axisColorInput"></ag-color-picker>\n                <ag-slider ref="axisLineWidthSlider"></ag-slider>\n            </ag-group-component>\n        </div>',es([(0,f.IzG)("axisGroup")],t.prototype,"axisGroup",void 0),es([(0,f.IzG)("axisColorInput")],t.prototype,"axisColorInput",void 0),es([(0,f.IzG)("axisLineWidthSlider")],t.prototype,"axisLineWidthSlider",void 0),es([(0,f.Qnc)("chartTranslationService")],t.prototype,"chartTranslationService",void 0),es([f.QhY],t.prototype,"init",null),t}(f.YlN),WA=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Zl=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},KA=function(o){function t(e){var r=e.chartOptionsService,n=e.isExpandedOnInit,i=void 0!==n&&n,a=o.call(this)||this;return a.chartOptionsService=r,a.isExpandedOnInit=i,a}return WA(t,o),t.prototype.init=function(){this.setTemplate(t.TEMPLATE,{navigatorGroup:{cssIdentifier:"charts-format-top-level",direction:"vertical"}}),this.initNavigator()},t.prototype.initNavigator=function(){var e=this,r=this.chartTranslationService;this.navigatorGroup.setTitle(r.translate("navigator")).hideEnabledCheckbox(!1).setEnabled(this.chartOptionsService.getChartOption("navigator.enabled")||!1).onEnableChange(function(i){e.chartOptionsService.setChartOption("navigator.enabled",i),e.navigatorGroup.toggleGroupExpand(!0)}).toggleGroupExpand(this.isExpandedOnInit);var n=this.chartOptionsService.getChartOption("navigator.height");this.navigatorHeightSlider.setLabel(r.translate("height")).setMinValue(10).setMaxValue(pt(n,60)).setTextFieldWidth(45).setValue(""+(n||30)).onValueChange(function(i){return e.chartOptionsService.setChartOption("navigator.height",i)})},t.prototype.destroy=function(){o.prototype.destroy.call(this)},t.TEMPLATE='<div>\n            <ag-group-component ref="navigatorGroup">\n                <ag-slider ref="navigatorHeightSlider"></ag-slider>\n            </ag-group-component>\n        </div>',Zl([(0,f.IzG)("navigatorGroup")],t.prototype,"navigatorGroup",void 0),Zl([(0,f.IzG)("navigatorHeightSlider")],t.prototype,"navigatorHeightSlider",void 0),Zl([(0,f.Qnc)("chartTranslationService")],t.prototype,"chartTranslationService",void 0),Zl([f.QhY],t.prototype,"init",null),t}(f.YlN),YA=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),pi=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},$A=function(o){function t(e,r){var n=o.call(this)||this;return n.chartOptionsService=e,n.chartController=r,n}return YA(t,o),t.prototype.init=function(){var e=this;this.setTemplate(t.TEMPLATE,{chartPaddingGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0}}),this.addManagedListener(this.eventService,f.YFc.EVENT_CHART_OPTIONS_CHANGED,function(n){e.updateTopPadding(n.chartOptions)}),this.initGroup(),this.initChartPaddingItems()},t.prototype.initGroup=function(){this.chartPaddingGroup.setTitle(this.chartTranslationService.translate("padding")).hideOpenCloseIcons(!0).hideEnabledCheckbox(!0)},t.prototype.initChartPaddingItems=function(){var e=this,r=function(n,i){var a=e.chartOptionsService.getChartOption("padding."+n);i.setLabel(e.chartTranslationService.translate(n)).setMaxValue(pt(a,200)).setValue(""+a).setTextFieldWidth(45).onValueChange(function(s){return e.chartOptionsService.setChartOption("padding."+n,s)})};r("top",this.paddingTopSlider),r("right",this.paddingRightSlider),r("bottom",this.paddingBottomSlider),r("left",this.paddingLeftSlider)},t.prototype.updateTopPadding=function(e){var r,n,a=null===(n=null===(r=e[this.chartController.getChartSeriesTypes()[0]])||void 0===r?void 0:r.padding)||void 0===n?void 0:n.top;null!=a&&this.paddingTopSlider.setValue(a)},t.TEMPLATE='<div>\n            <ag-group-component ref="chartPaddingGroup">\n                <ag-slider ref="paddingTopSlider"></ag-slider>\n                <ag-slider ref="paddingRightSlider"></ag-slider>\n                <ag-slider ref="paddingBottomSlider"></ag-slider>\n                <ag-slider ref="paddingLeftSlider"></ag-slider>\n            </ag-group-component>\n        <div>',pi([(0,f.IzG)("chartPaddingGroup")],t.prototype,"chartPaddingGroup",void 0),pi([(0,f.IzG)("paddingTopSlider")],t.prototype,"paddingTopSlider",void 0),pi([(0,f.IzG)("paddingRightSlider")],t.prototype,"paddingRightSlider",void 0),pi([(0,f.IzG)("paddingBottomSlider")],t.prototype,"paddingBottomSlider",void 0),pi([(0,f.IzG)("paddingLeftSlider")],t.prototype,"paddingLeftSlider",void 0),pi([(0,f.Qnc)("chartTranslationService")],t.prototype,"chartTranslationService",void 0),pi([f.QhY],t.prototype,"init",null),t}(f.YlN),XA=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ql=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},QA=function(o){function t(e){var r=o.call(this)||this;return r.chartOptionsService=e,r}return XA(t,o),t.prototype.init=function(){this.setTemplate(t.TEMPLATE,{chartBackgroundGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0}}),this.initGroup(),this.initColorPicker()},t.prototype.initGroup=function(){var e=this;this.group.setTitle(this.chartTranslationService.translate("background")).setEnabled(this.chartOptionsService.getChartOption("background.visible")).hideOpenCloseIcons(!0).hideEnabledCheckbox(!1).onEnableChange(function(r){return e.chartOptionsService.setChartOption("background.visible",r)})},t.prototype.initColorPicker=function(){var e=this;this.colorPicker.setLabel(this.chartTranslationService.translate("color")).setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getChartOption("background.fill")).onValueChange(function(r){return e.chartOptionsService.setChartOption("background.fill",r)})},t.TEMPLATE='<div>\n            <ag-group-component ref="chartBackgroundGroup">\n                <ag-color-picker ref="colorPicker"></ag-color-picker>\n            </ag-group-component>\n        <div>',ql([(0,f.IzG)("chartBackgroundGroup")],t.prototype,"group",void 0),ql([(0,f.IzG)("colorPicker")],t.prototype,"colorPicker",void 0),ql([(0,f.Qnc)("chartTranslationService")],t.prototype,"chartTranslationService",void 0),ql([f.QhY],t.prototype,"init",null),t}(f.YlN),ZA=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),fg=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},qA=function(o){function t(e){var r=o.call(this,t.TEMPLATE)||this;return r.chartOptionsService=e,r.activePanels=[],r}return ZA(t,o),t.prototype.init=function(){this.initFontPanel(),this.titlePlaceholder=this.chartTranslationService.translate("titlePlaceholder")},t.prototype.hasTitle=function(){var e=this.getOption("title");return e&&e.enabled&&e.text&&e.text.length>0},t.prototype.initFontPanel=function(){var e=this,r=this.hasTitle(),n=function(l,u){l.family&&e.setOption("title.fontFamily",l.family,u),l.weight&&e.setOption("title.fontWeight",l.weight,u),l.style&&e.setOption("title.fontStyle",l.style,u),l.size&&e.setOption("title.fontSize",l.size,u),l.color&&e.setOption("title.color",l.color,u)},i={family:this.getOption("title.fontFamily"),style:this.getOption("title.fontStyle"),weight:this.getOption("title.fontWeight"),size:this.getOption("title.fontSize"),color:this.getOption("title.color")};r||n(i,!0);var a={name:this.chartTranslationService.translate("title"),enabled:r,suppressEnabledCheckbox:!1,initialFont:i,setFont:n,setEnabled:function(l){if(e.toolbarExists()){var u=e.getOption("padding.top");e.setOption("padding.top",l?u-20:u+20)}e.setOption("title.enabled",l);var c=e.getOption("title.text"),d="Title"===c||0===c?.trim().length;l&&d&&e.setOption("title.text",e.titlePlaceholder)}},s=this.createBean(new qa(a));s.addItemToPanel(this.createSpacingSlicer()),this.getGui().appendChild(s.getGui()),this.activePanels.push(s),this.addManagedListener(this.eventService,"chartTitleEdit",function(){s.setEnabled(e.hasTitle())})},t.prototype.createSpacingSlicer=function(){var e=this,r=this.createBean(new f.C55),n=this.chartOptionsService.getChartOption("title.spacing");return r.setLabel(this.chartTranslationService.translate("spacing")).setMaxValue(Math.max(n,100)).setValue(""+n).setTextFieldWidth(45).onValueChange(function(i){return e.chartOptionsService.setChartOption("title.spacing",i)}),r},t.prototype.toolbarExists=function(){var e=this.gridOptionsService.getCallback("getChartToolbarItems");if(!e)return!0;var r={defaultItems:["chartUnlink","chartDownload"]};return["chartLink","chartUnlink","chartDownload"].some(function(i){var a;return null===(a=e&&e(r))||void 0===a?void 0:a.includes(i)})},t.prototype.getOption=function(e){return this.chartOptionsService.getChartOption(e)},t.prototype.setOption=function(e,r,n){this.chartOptionsService.setChartOption(e,r,n)},t.prototype.destroyActivePanels=function(){var e=this;this.activePanels.forEach(function(r){f._.removeFromParent(r.getGui()),e.destroyBean(r)})},t.prototype.destroy=function(){this.destroyActivePanels(),o.prototype.destroy.call(this)},t.TEMPLATE="<div></div>",fg([(0,f.Qnc)("chartTranslationService")],t.prototype,"chartTranslationService",void 0),fg([f.QhY],t.prototype,"init",null),t}(f.YlN),JA=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),fd=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},eD=function(o){function t(e){var r=e.chartController,n=e.chartOptionsService,i=e.isExpandedOnInit,a=void 0!==i&&i,s=o.call(this)||this;return s.activePanels=[],s.chartController=r,s.chartOptionsService=n,s.isExpandedOnInit=a,s}return JA(t,o),t.prototype.init=function(){this.setTemplate(t.TEMPLATE,{chartGroup:{cssIdentifier:"charts-format-top-level",direction:"vertical"}}),this.initGroup(),this.initTitles(),this.initPaddingPanel(),this.initBackgroundPanel()},t.prototype.initGroup=function(){this.chartGroup.setTitle(this.chartTranslationService.translate("chart")).toggleGroupExpand(this.isExpandedOnInit).hideEnabledCheckbox(!0)},t.prototype.initTitles=function(){var e=this.createBean(new qA(this.chartOptionsService));this.chartGroup.addItem(e),this.activePanels.push(e)},t.prototype.initPaddingPanel=function(){var e=this.createBean(new $A(this.chartOptionsService,this.chartController));this.chartGroup.addItem(e),this.activePanels.push(e)},t.prototype.initBackgroundPanel=function(){var e=this.createBean(new QA(this.chartOptionsService));this.chartGroup.addItem(e),this.activePanels.push(e)},t.prototype.destroyActivePanels=function(){var e=this;this.activePanels.forEach(function(r){f._.removeFromParent(r.getGui()),e.destroyBean(r)})},t.prototype.destroy=function(){this.destroyActivePanels(),o.prototype.destroy.call(this)},t.TEMPLATE='<div>\n            <ag-group-component ref="chartGroup"></ag-group-component>\n        </div>',fd([(0,f.IzG)("chartGroup")],t.prototype,"chartGroup",void 0),fd([(0,f.Qnc)("chartTranslationService")],t.prototype,"chartTranslationService",void 0),fd([f.QhY],t.prototype,"init",null),t}(f.YlN),tD=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),vi=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},rD=function(o){function t(e,r){var n=o.call(this)||this;return n.chartOptionsService=e,n.getSelectedSeries=r,n}return tD(t,o),t.prototype.init=function(){this.setTemplate(t.TEMPLATE,{shadowGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0}}),this.shadowBlurSlider.setTextFieldWidth(45),this.shadowXOffsetSlider.setTextFieldWidth(45),this.shadowYOffsetSlider.setTextFieldWidth(45),this.initSeriesShadow()},t.prototype.initSeriesShadow=function(){var e=this;this.shadowGroup.setTitle(this.chartTranslationService.translate("shadow")).setEnabled(this.chartOptionsService.getSeriesOption("shadow.enabled",this.getSelectedSeries())).hideOpenCloseIcons(!0).hideEnabledCheckbox(!1).onEnableChange(function(n){return e.chartOptionsService.setSeriesOption("shadow.enabled",n,e.getSelectedSeries())}),this.shadowColorPicker.setLabel(this.chartTranslationService.translate("color")).setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getSeriesOption("shadow.color",this.getSelectedSeries())).onValueChange(function(n){return e.chartOptionsService.setSeriesOption("shadow.color",n,e.getSelectedSeries())});var r=function(n,i,a,s){var l=e.chartOptionsService.getSeriesOption("shadow."+i,e.getSelectedSeries());n.setLabel(e.chartTranslationService.translate(i)).setMinValue(a).setMaxValue(pt(l,s)).setValue(""+l).onValueChange(function(u){return e.chartOptionsService.setSeriesOption("shadow."+i,u,e.getSelectedSeries())})};r(this.shadowBlurSlider,"blur",0,20),r(this.shadowXOffsetSlider,"xOffset",-10,10),r(this.shadowYOffsetSlider,"yOffset",-10,10)},t.TEMPLATE='<div>\n            <ag-group-component ref="shadowGroup">\n                <ag-color-picker ref="shadowColorPicker"></ag-color-picker>\n                <ag-slider ref="shadowBlurSlider"></ag-slider>\n                <ag-slider ref="shadowXOffsetSlider"></ag-slider>\n                <ag-slider ref="shadowYOffsetSlider"></ag-slider>\n            </ag-group-component>\n        </div>',vi([(0,f.IzG)("shadowGroup")],t.prototype,"shadowGroup",void 0),vi([(0,f.IzG)("shadowColorPicker")],t.prototype,"shadowColorPicker",void 0),vi([(0,f.IzG)("shadowBlurSlider")],t.prototype,"shadowBlurSlider",void 0),vi([(0,f.IzG)("shadowXOffsetSlider")],t.prototype,"shadowXOffsetSlider",void 0),vi([(0,f.IzG)("shadowYOffsetSlider")],t.prototype,"shadowYOffsetSlider",void 0),vi([(0,f.Qnc)("chartTranslationService")],t.prototype,"chartTranslationService",void 0),vi([f.QhY],t.prototype,"init",null),t}(f.YlN);function hg(o){var t=o.labelName,e=o.chartOptionsService,r=o.getSelectedSeries,n=o.seriesOptionLabelProperty,i=function(d){return n+"."+d},a=function(d){var h=i(d);return e.getSeriesOption(h,r())},s=function(d,h){var p=i(d);e.setSeriesOption(p,h,r())},l={family:a("fontFamily"),style:a("fontStyle"),weight:a("fontWeight"),size:a("fontSize"),color:a("color")};return{name:t,enabled:a("enabled")||!1,setEnabled:function(d){return s("enabled",d)},suppressEnabledCheckbox:!1,initialFont:l,setFont:function(d){d.family&&s("fontFamily",d.family),d.weight&&s("fontWeight",d.weight),d.style&&s("fontStyle",d.style),d.size&&s("fontSize",d.size),d.color&&s("color",d.color)}}}var nD=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),gi=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},iD=function(o){function t(e,r){var n=o.call(this)||this;return n.chartOptionsService=e,n.getSelectedSeries=r,n}return nD(t,o),t.prototype.init=function(){this.setTemplate(t.TEMPLATE,{seriesMarkersGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical"}}),this.initMarkers()},t.prototype.initMarkers=function(){var e=this;this.seriesMarkerShapeSelect.addOptions([{value:"square",text:"Square"},{value:"circle",text:"Circle"},{value:"cross",text:"Cross"},{value:"diamond",text:"Diamond"},{value:"plus",text:"Plus"},{value:"triangle",text:"Triangle"},{value:"heart",text:"Heart"}]).setLabel(this.chartTranslationService.translate("shape")).setValue(this.getSeriesOption("marker.shape")).onValueChange(function(s){return e.setSeriesOption("marker.shape",s)});var n=this.chartOptionsService.getChartType(),i=f._.includes(["scatter","bubble"],n);this.seriesMarkersGroup.setTitle(this.chartTranslationService.translate("markers")).hideEnabledCheckbox(i).setEnabled(this.getSeriesOption("marker.enabled")||!1).hideOpenCloseIcons(!0).onEnableChange(function(s){return e.setSeriesOption("marker.enabled",s)});var a=function(s,l,u,c){var d=e.getSeriesOption(s);l.setLabel(e.chartTranslationService.translate(u)).setMaxValue(pt(d,c)).setValue(""+d).setTextFieldWidth(45).onValueChange(function(h){return e.setSeriesOption(s,h)})};"bubble"===n?(a("marker.maxSize",this.seriesMarkerMinSizeSlider,"maxSize",60),a("marker.size",this.seriesMarkerSizeSlider,"minSize",60)):(this.seriesMarkerMinSizeSlider.setDisplayed(!1),a("marker.size",this.seriesMarkerSizeSlider,"size",60)),a("marker.strokeWidth",this.seriesMarkerStrokeWidthSlider,"strokeWidth",10)},t.prototype.getSeriesOption=function(e){return this.chartOptionsService.getSeriesOption(e,this.getSelectedSeries())},t.prototype.setSeriesOption=function(e,r){this.chartOptionsService.setSeriesOption(e,r,this.getSelectedSeries())},t.TEMPLATE='<div>\n            <ag-group-component ref="seriesMarkersGroup">\n                <ag-select ref="seriesMarkerShapeSelect"></ag-select>\n                <ag-slider ref="seriesMarkerMinSizeSlider"></ag-slider>\n                <ag-slider ref="seriesMarkerSizeSlider"></ag-slider>\n                <ag-slider ref="seriesMarkerStrokeWidthSlider"></ag-slider>\n            </ag-group-component>\n        </div>',gi([(0,f.IzG)("seriesMarkersGroup")],t.prototype,"seriesMarkersGroup",void 0),gi([(0,f.IzG)("seriesMarkerShapeSelect")],t.prototype,"seriesMarkerShapeSelect",void 0),gi([(0,f.IzG)("seriesMarkerSizeSlider")],t.prototype,"seriesMarkerSizeSlider",void 0),gi([(0,f.IzG)("seriesMarkerMinSizeSlider")],t.prototype,"seriesMarkerMinSizeSlider",void 0),gi([(0,f.IzG)("seriesMarkerStrokeWidthSlider")],t.prototype,"seriesMarkerStrokeWidthSlider",void 0),gi([(0,f.Qnc)("chartTranslationService")],t.prototype,"chartTranslationService",void 0),gi([f.QhY],t.prototype,"init",null),t}(f.YlN),oD=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Fo=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},aD=function(o){function t(e,r){var n=o.call(this)||this;return n.chartOptionsService=e,n.getSelectedSeries=r,n}return oD(t,o),t.prototype.init=function(){this.setTemplate(t.TEMPLATE,{calloutGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical"}}),this.initCalloutOptions()},t.prototype.initCalloutOptions=function(){var e=this;this.calloutGroup.setTitle(this.chartTranslationService.translate("callout")).setEnabled(!0).hideOpenCloseIcons(!0).hideEnabledCheckbox(!0);var r=function(n,i,a,s){var l=e.chartOptionsService.getSeriesOption(n,e.getSelectedSeries());i.setLabel(e.chartTranslationService.translate(a)).setMaxValue(pt(l,s)).setValue(""+l).setTextFieldWidth(45).onValueChange(function(u){return e.chartOptionsService.setSeriesOption(n,u,e.getSelectedSeries())})};r("calloutLine.length",this.calloutLengthSlider,"length",40),r("calloutLine.strokeWidth",this.calloutStrokeWidthSlider,"strokeWidth",10),r("calloutLabel.offset",this.labelOffsetSlider,"offset",30)},t.TEMPLATE='<div>\n            <ag-group-component ref="calloutGroup">\n                <ag-slider ref="calloutLengthSlider"></ag-slider>\n                <ag-slider ref="calloutStrokeWidthSlider"></ag-slider>\n                <ag-slider ref="labelOffsetSlider"></ag-slider>\n            </ag-group-component>\n        </div>',Fo([(0,f.IzG)("calloutGroup")],t.prototype,"calloutGroup",void 0),Fo([(0,f.IzG)("calloutLengthSlider")],t.prototype,"calloutLengthSlider",void 0),Fo([(0,f.IzG)("calloutStrokeWidthSlider")],t.prototype,"calloutStrokeWidthSlider",void 0),Fo([(0,f.IzG)("labelOffsetSlider")],t.prototype,"labelOffsetSlider",void 0),Fo([(0,f.Qnc)("chartTranslationService")],t.prototype,"chartTranslationService",void 0),Fo([f.QhY],t.prototype,"init",null),t}(f.YlN),sD=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),hd=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},lD=function(o){function t(e){var r=e.chartController,n=e.chartOptionsService,i=e.seriesType,a=e.isExpandedOnInit,s=void 0!==a&&a,l=o.call(this)||this;return l.activePanels=[],l.widgetFuncs={lineWidth:function(){return l.initLineWidth()},strokeWidth:function(){return l.initStrokeWidth()},lineDash:function(){return l.initLineDash()},lineOpacity:function(){return l.initLineOpacity()},fillOpacity:function(){return l.initFillOpacity()},markers:function(){return l.initMarkers()},labels:function(){return l.initLabels()},shadow:function(){return l.initShadow()},tooltips:function(){return l.initTooltips()},bins:function(){return l.initBins()}},l.seriesWidgetMappings={area:["tooltips","lineWidth","lineDash","lineOpacity","fillOpacity","markers","labels","shadow"],bar:["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],column:["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],line:["tooltips","lineWidth","lineDash","lineOpacity","markers","labels"],histogram:["tooltips","bins","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],scatter:["tooltips","markers","labels"],pie:["tooltips","strokeWidth","lineOpacity","fillOpacity","labels","shadow"]},l.chartController=r,l.chartOptionsService=n,l.seriesType=i||l.getChartSeriesType(),l.isExpandedOnInit=s,l}return sD(t,o),t.prototype.init=function(){this.setTemplate(t.TEMPLATE,{seriesGroup:{cssIdentifier:"charts-format-top-level",direction:"vertical"}}),this.seriesGroup.setTitle(this.translate("series")).toggleGroupExpand(this.isExpandedOnInit).hideEnabledCheckbox(!0),this.addManagedListener(this.chartController,hr.EVENT_CHART_SERIES_CHART_TYPE_CHANGED,this.refreshWidgets.bind(this)),this.refreshWidgets()},t.prototype.refreshWidgets=function(){var e=this;this.destroyActivePanels(),this.chartController.getChartProxy().getChart().waitForUpdate().then(function(){e.chartController.isComboChart()&&(e.updateSeriesType(),e.initSeriesSelect()),e.seriesWidgetMappings[e.seriesType].forEach(function(n){return e.widgetFuncs[n]()})}).catch(function(n){return console.error("AG Grid - chart rendering failed",n)})},t.prototype.initSeriesSelect=function(){var e=this,r=this.seriesGroup.createManagedBean(new f.Upw);r.setLabel(this.translate("seriesType")).setLabelAlignment("left").setLabelWidth("flex").setInputWidth(100).addOptions(this.getSeriesSelectOptions()).setValue(""+this.seriesType).onValueChange(function(n){e.seriesType=n,e.refreshWidgets()}),this.seriesGroup.addItem(r),this.activePanels.push(r)},t.prototype.initTooltips=function(){var e=this,r=this.createBean(new f.E$5);r.setLabel(this.translate("tooltips")).setLabelAlignment("left").setLabelWidth("flex").setInputWidth(45).setValue(this.getSeriesOption("tooltip.enabled")||!1).onValueChange(function(n){return e.setSeriesOption("tooltip.enabled",n)}),this.addWidget(r)},t.prototype.initStrokeWidth=function(){var e=this,r=this.getSeriesOption("strokeWidth"),n=this.createBean(new f.C55);n.setLabel(this.translate("strokeWidth")).setMaxValue(pt(r,10)).setTextFieldWidth(45).setValue(""+r).onValueChange(function(i){return e.setSeriesOption("strokeWidth",i)}),this.addWidget(n)},t.prototype.initLineWidth=function(){var e=this,r=this.getSeriesOption("strokeWidth"),n=this.createBean(new f.C55);n.setLabel(this.translate("lineWidth")).setMaxValue(pt(r,10)).setTextFieldWidth(45).setValue(""+r).onValueChange(function(i){return e.setSeriesOption("strokeWidth",i)}),this.addWidget(n)},t.prototype.initLineDash=function(){var e=this,r=this.getSeriesOption("lineDash"),n=r?r[0]:0,i=this.createBean(new f.C55);i.setLabel(this.translate("lineDash")).setMaxValue(pt(n,30)).setTextFieldWidth(45).setValue(""+n).onValueChange(function(a){return e.setSeriesOption("lineDash",[a])}),this.addWidget(i)},t.prototype.initLineOpacity=function(){var e=this,r=this.getSeriesOption("strokeOpacity"),n=this.createBean(new f.C55);n.setLabel(this.translate("strokeOpacity")).setStep(.05).setMaxValue(pt(r,1)).setTextFieldWidth(45).setValue(""+r).onValueChange(function(i){return e.setSeriesOption("strokeOpacity",i)}),this.addWidget(n)},t.prototype.initFillOpacity=function(){var e=this,r=this.getSeriesOption("fillOpacity"),n=this.createBean(new f.C55);n.setLabel(this.translate("fillOpacity")).setStep(.05).setMaxValue(pt(r,1)).setTextFieldWidth(45).setValue(""+r).onValueChange(function(i){return e.setSeriesOption("fillOpacity",i)}),this.addWidget(n)},t.prototype.initLabels=function(){var e=this,r="pie"===this.seriesType?"calloutLabel":"label",i=hg({labelName:this.chartTranslationService.translate("pie"===this.seriesType?"calloutLabels":"labels"),chartOptionsService:this.chartOptionsService,getSelectedSeries:function(){return e.seriesType},seriesOptionLabelProperty:r}),a=this.createBean(new qa(i));if("pie"===this.seriesType){var s=this.createBean(new aD(this.chartOptionsService,function(){return e.seriesType}));a.addCompToPanel(s),this.activePanels.push(s)}if(this.addWidget(a),"pie"===this.seriesType){var l=hg({labelName:this.chartTranslationService.translate("sectorLabels"),chartOptionsService:this.chartOptionsService,getSelectedSeries:function(){return e.seriesType},seriesOptionLabelProperty:"sectorLabel"}),u=this.createBean(new qa(l)),c=this.getSectorLabelPositionRatio();u.addCompToPanel(c),this.addWidget(u)}},t.prototype.getSectorLabelPositionRatio=function(){var e=this,r="sectorLabel.positionRatio",n=this.chartOptionsService.getSeriesOption(r,this.seriesType);return this.createBean(new f.C55).setLabel(this.translate("positionRatio")).setStep(.05).setMaxValue(pt(n,1)).setTextFieldWidth(45).setValue(""+n).onValueChange(function(a){return e.chartOptionsService.setSeriesOption(r,a,e.seriesType)})},t.prototype.initShadow=function(){var e=this,r=this.createBean(new rD(this.chartOptionsService,function(){return e.seriesType}));this.addWidget(r)},t.prototype.initMarkers=function(){var e=this,r=this.createBean(new iD(this.chartOptionsService,function(){return e.seriesType}));this.addWidget(r)},t.prototype.initBins=function(){var r,e=this,n=(null!==(r=this.getSeriesOption("bins"))&&void 0!==r?r:this.getSeriesOption("calculatedBins")).length,i=this.createBean(new f.C55);i.setLabel(this.translate("histogramBinCount")).setMinValue(0).setMaxValue(pt(n,20)).setTextFieldWidth(45).setValue(""+n).onValueChange(function(a){return e.setSeriesOption("binCount",a)}),this.addWidget(i)},t.prototype.addWidget=function(e){this.seriesGroup.addItem(e),this.activePanels.push(e)},t.prototype.getSeriesOption=function(e){return this.chartOptionsService.getSeriesOption(e,this.seriesType)},t.prototype.setSeriesOption=function(e,r){this.chartOptionsService.setSeriesOption(e,r,this.seriesType)},t.prototype.getChartSeriesType=function(){if(0===this.chartController.getSeriesChartTypes().length)return"column";var e=this.chartController.getSeriesChartTypes()[0].chartType;return"columnLineCombo"===e?"column":"areaColumnCombo"===e?"area":Jt(e)},t.prototype.getSeriesSelectOptions=function(){var e=this;this.seriesSelectOptions||(this.seriesSelectOptions=new Map([["area",{value:"area",text:this.translate("area","Area")}],["bar",{value:"bar",text:this.translate("bar","Bar")}],["column",{value:"column",text:this.translate("column","Column")}],["line",{value:"line",text:this.translate("line","Line")}],["scatter",{value:"scatter",text:this.translate("scatter","Scatter")}],["histogram",{value:"histogram",text:this.translate("histogram","Histogram")}],["pie",{value:"pie",text:this.translate("pie","Pie")}]]));var r=new Set;return this.chartController.getActiveSeriesChartTypes().forEach(function(n){var i=Jt(n.chartType);r.add(e.seriesSelectOptions.get(i))}),Array.from(r)},t.prototype.updateSeriesType=function(){var e=this.chartController.getActiveSeriesChartTypes().map(function(n){return Jt(n.chartType)});!e.includes(this.seriesType)&&e.length>0&&(this.seriesType=e[0])},t.prototype.translate=function(e,r){return this.chartTranslationService.translate(e,r)},t.prototype.destroyActivePanels=function(){var e=this;this.activePanels.forEach(function(r){f._.removeFromParent(r.getGui()),e.destroyBean(r)})},t.prototype.destroy=function(){this.destroyActivePanels(),o.prototype.destroy.call(this)},t.TEMPLATE='<div>\n            <ag-group-component ref="seriesGroup">\n            </ag-group-component>\n        </div>',hd([(0,f.IzG)("seriesGroup")],t.prototype,"seriesGroup",void 0),hd([(0,f.Qnc)("chartTranslationService")],t.prototype,"chartTranslationService",void 0),hd([f.QhY],t.prototype,"init",null),t}(f.YlN),uD=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();function pt(o,t){return Math.max(o,t)}var dD={groups:[{type:"chart"},{type:"legend"},{type:"series"},{type:"axis"},{type:"navigator"}]},fD=function(o){function t(e,r){var n=o.call(this,t.TEMPLATE)||this;return n.chartController=e,n.chartOptionsService=r,n.panels=[],n.isGroupPanelShownInSeries=function(i,a){return!!["chart","legend","series"].includes(i)||!(!["axis","navigator"].includes(i)||!["bar","column","line","area","scatter","histogram","cartesian"].includes(a))},n}return uD(t,o),t.prototype.init=function(){var e=this;this.createPanels(),this.addManagedListener(this.chartController,hr.EVENT_CHART_UPDATED,function(){return e.createPanels(!0)}),this.addManagedListener(this.chartController,hr.EVENT_CHART_API_UPDATE,function(){return e.createPanels(!1)})},t.prototype.createPanels=function(e){var n,r=this,i=this.chartController.getChartType(),a=this.chartController.isGrouping(),s=Jt(i);e&&i===this.chartType&&a===this.isGrouping||(this.destroyPanels(),null===(n=this.getFormatPanelDef().groups)||void 0===n||n.forEach(function(l){var u=l.type;if(r.isGroupPanelShownInSeries(u,s)){var c={chartController:r.chartController,chartOptionsService:r.chartOptionsService,isExpandedOnInit:l.isOpen,seriesType:s};"chart"===u?r.addComponent(new eD(c)):"legend"===u?r.addComponent(new VA(c)):"axis"===u?r.addComponent(new UA(c)):"series"===u?r.addComponent(new lD(c)):"navigator"===u?r.addComponent(new KA(c)):console.warn("AG Grid: invalid charts format panel group name supplied: '"+l.type+"'")}}),this.chartType=i,this.isGrouping=a)},t.prototype.getFormatPanelDef=function(){var e;return(null===(e=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===e?void 0:e.formatPanel)||dD},t.prototype.addComponent=function(e){this.createBean(e),this.panels.push(e),e.addCssClass("ag-chart-format-section"),this.getGui().appendChild(e.getGui())},t.prototype.destroyPanels=function(){var e=this;this.panels.forEach(function(r){f._.removeFromParent(r.getGui()),e.destroyBean(r)})},t.prototype.destroy=function(){this.destroyPanels(),o.prototype.destroy.call(this)},t.TEMPLATE='<div class="ag-chart-format-wrapper"></div>',function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);n>3&&i&&Object.defineProperty(t,e,i)}([f.QhY],t.prototype,"init",null),t}(f.YlN),hD=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),pg=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},pd=function(o){function t(e,r){var n=o.call(this)||this;n.size=58,n.padding=5,n.root=new re;var i=new ec({document:window.document,width:n.size,height:n.size});return i.canvas.element.classList.add("ag-chart-mini-thumbnail-canvas"),i.root=n.root,i.container=e,n.scene=i,n.tooltipName=r,n}return hD(t,o),t.prototype.init=function(){this.scene.canvas.element.title=this.chartTranslationService.translate(this.tooltipName),this.scene.render().catch(function(e){return console.error("AG Grid - chart update failed",e)})},pg([(0,f.Qnc)("chartTranslationService")],t.prototype,"chartTranslationService",void 0),pg([f.QhY],t.prototype,"init",null),t}(f.YlN),pD=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),er=function(o){function t(e,r){var n=o.call(this,e,r)||this;return n.stroke="gray",n.axisOvershoot=3,n}return pD(t,o),t.prototype.addAxes=function(){var e=this.size,r=this.padding,n=new Ze;n.x1=r,n.y1=r,n.x2=r,n.y2=e-r+this.axisOvershoot,n.stroke=this.stroke;var i=new Ze;i.x1=r-this.axisOvershoot+1,i.y1=e-r,i.x2=e-r+1,i.y2=e-r,i.stroke=this.stroke;var a=this.root;a.append(n),a.append(i)},function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);n>3&&i&&Object.defineProperty(t,e,i)}([f.QhY],t.prototype,"addAxes",null),t}(pd);function ts(o){var t=o.stacked,e=o.size,r=o.padding,n=o.xScalePadding,i=o.xScaleDomain,a=o.yScaleDomain,s=new bt;s.domain=i,s.range=[r,e-r],s.paddingInner=n,s.paddingOuter=n;var l=new Je;l.domain=a,l.range=[e-r,r];var u=function(c,d,h){return c.map(function(p,v){var g=h.convert(p),y=new fr;return y.x=d.convert(v),y.y=g,y.width=d.bandwidth,y.height=h.convert(0)-g,y.strokeWidth=1,y.crisp=!0,y})};return t?o.data.map(function(c){return u(c,s,l)}):u(o.data,s,l)}function vd(o,t,e,r){var n=new Je;n.domain=[0,4],n.range=[r,e-r];var i=new Je;i.domain=[0,10],i.range=[e-r,r];var a=t.map(function(l){var u=new wt;return u.strokeWidth=3,u.lineCap="round",u.fill=void 0,l.forEach(function(c,d){u.path[d>0?"lineTo":"moveTo"](n.convert(d),i.convert(c))}),u}),s=new re;return s.setClipRectInGroupCoordinateSpace(new me(r,r,e-2*r,e-2*r)),s.append(a),o.append(s),a}var gD=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),yD=function(o){function t(e,r,n){var i=o.call(this,e,"groupedColumnTooltip")||this;i.columnData=[2,3,4];var s=i.root;return i.columns=ts({stacked:!1,root:s,data:i.columnData,size:i.size,padding:i.padding,xScaleDomain:[0,1,2],yScaleDomain:[0,4],xScalePadding:.3}),s.append(i.columns),i.updateColors(r,n),i}return gD(t,o),t.prototype.updateColors=function(e,r){this.columns.forEach(function(n,i){n.fill=e[i],n.stroke=r[i]})},t.chartType="groupedColumn",t}(er),mD=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),vg=function(o){function t(e,r,n,i,a,s){void 0===i&&(i=t.data),void 0===a&&(a=[0,16]),void 0===s&&(s="stackedColumnTooltip");var l=o.call(this,e,s)||this,c=l.root;return l.stackedColumns=ts({stacked:!0,root:c,data:i,size:l.size,padding:l.padding,xScaleDomain:[0,1,2],yScaleDomain:a,xScalePadding:.3}),c.append([].concat.apply([],l.stackedColumns)),l.updateColors(r,n),l}return mD(t,o),t.prototype.updateColors=function(e,r){this.stackedColumns.forEach(function(n,i){return n.forEach(function(a){a.fill=e[i],a.stroke=r[i]})})},t.chartType="stackedColumn",t.data=[[8,12,16],[6,9,12],[2,3,4]],t}(er),SD=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),CD=function(o){function t(e,r,n){return o.call(this,e,r,n,t.data,[0,10],"normalizedColumnTooltip")||this}return SD(t,o),t.chartType="normalizedColumn",t.data=[[10,10,10],[6,7,8],[2,4,6]],t}(vg),_D=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),xD=function(o){function t(e,r,n){var i=o.call(this,e,"groupedBarTooltip")||this,a=i.padding,s=i.size,u=new bt;u.domain=[0,1,2],u.range=[a,s-a],u.paddingInner=.3,u.paddingOuter=.3;var c=new Je;c.domain=[0,4],c.range=[s-a,a];var d=c.convert(0),h=u.bandwidth;return i.bars=[2,3,4].map(function(p,v){var g=new fr;return g.x=a,g.y=u.convert(v),g.width=d-c.convert(p),g.height=h,g.strokeWidth=1,g.crisp=!0,g}),i.updateColors(r,n),i.root.append(i.bars),i}return _D(t,o),t.prototype.updateColors=function(e,r){this.bars.forEach(function(n,i){n.fill=e[i],n.stroke=r[i]})},t.chartType="groupedBar",t}(er),wD=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),gg=function(o){function t(e,r,n,i,a,s){void 0===i&&(i=t.data),void 0===a&&(a=[0,16]),void 0===s&&(s="stackedBarTooltip");var l=o.call(this,e,s)||this,u=l.size,c=l.padding,d=new bt;d.domain=[0,1,2],d.range=[c,u-c],d.paddingInner=.3,d.paddingOuter=.3;var h=new Je;h.domain=a,h.range=[u-c,c];var p=h.convert(0),v=d.bandwidth;return l.bars=i.map(function(g){return g.map(function(y,S){var m=new fr;return m.x=c,m.y=d.convert(S),m.width=p-h.convert(y),m.height=v,m.strokeWidth=1,m.crisp=!0,m})}),l.updateColors(r,n),l.root.append([].concat.apply([],l.bars)),l}return wD(t,o),t.prototype.updateColors=function(e,r){this.bars.forEach(function(n,i){return n.forEach(function(a){a.fill=e[i],a.stroke=r[i]})})},t.chartType="stackedBar",t.data=[[8,12,16],[6,9,12],[2,3,4]],t}(er),bD=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),OD=function(o){function t(e,r,n){return o.call(this,e,r,n,t.data,[0,10],"normalizedBarTooltip")||this}return bD(t,o),t.chartType="normalizedBar",t.data=[[10,10,10],[6,7,8],[2,4,6]],t}(gg),ED=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),tr=Xt,yg=function(o){function t(e,r,n,i,a){void 0===i&&(i=.6),void 0===a&&(a="doughnutTooltip");var s=o.call(this,e,a)||this,l=(s.size-2*s.padding)/2,u=l+s.padding,c=[[tr(-90),tr(30)],[tr(30),tr(120)],[tr(120),tr(180)],[tr(180),tr(210)],[tr(210),tr(240)],[tr(240),tr(270)]];return s.sectors=c.map(function(d){var h=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i}(d,2),p=h[0],v=h[1],g=new Fp;return g.centerX=u,g.centerY=u,g.innerRadius=l*i,g.outerRadius=l,g.startAngle=p,g.endAngle=v,g.stroke=void 0,g.strokeWidth=1,g}),s.updateColors(r,n),s.root.append(s.sectors),s}return ED(t,o),t.prototype.updateColors=function(e,r){this.sectors.forEach(function(n,i){n.fill=e[i%e.length],n.stroke=r[i%r.length]})},t.chartType="doughnut",t}(pd),PD=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),AD=function(o){function t(e,r,n){return o.call(this,e,r,n,0,"pieTooltip")||this}return PD(t,o),t.chartType="pie",t}(yg),DD=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),MD=function(o){function t(e,r,n){var i=o.call(this,e,"lineTooltip")||this;return i.data=[[9,7,8,5,6],[5,6,3,4,1],[1,3,4,8,7]],i.lines=vd(i.root,i.data,i.size,i.padding),i.updateColors(r,n),i}return DD(t,o),t.prototype.updateColors=function(e,r){this.lines.forEach(function(n,i){n.stroke=e[i]})},t.chartType="line",t}(er),RD=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ID=function(o){function t(e,r,n){var i=o.call(this,e,"scatterTooltip")||this,a=i.size,s=i.padding,u=new Je;u.domain=[-.5,4],u.range=[2*s,a-s];var c=new Je;c.domain=[-.5,3.5],c.range=[a-s,s];var d=[];[[[.3,3],[1.1,.9],[2,.4],[3.4,2.4]],[[0,.3],[1,2],[2.4,1.4],[3,0]]].forEach(function(p){p.forEach(function(v){var g=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i}(v,2),y=g[0],S=g[1],m=new ng;m.strokeWidth=1,m.centerX=u.convert(y),m.centerY=c.convert(S),m.radius=2.5,d.push(m)})}),i.points=d,i.updateColors(r,n);var h=new re;return h.setClipRectInGroupCoordinateSpace(new me(s,s,a-2*s,a-2*s)),h.append(i.points),i.root.append(h),i}return RD(t,o),t.prototype.updateColors=function(e,r){this.points.forEach(function(n,i){n.stroke=r[i%r.length],n.fill=e[i%e.length]})},t.chartType="scatter",t}(er),LD=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),kD=function(o){function t(e,r,n){var i=o.call(this,e,"bubbleTooltip")||this,a=i.size,s=i.padding,u=new Je;u.domain=[0,1],u.range=[2*s,a-s];var c=new Je;c.domain=[0,1],c.range=[a-s,s];var d=[];[[[.1,.3,5],[.5,.4,7],[.2,.8,7]],[[.8,.7,5],[.7,.3,9]]].forEach(function(p){p.forEach(function(v){var g=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i}(v,3),y=g[0],S=g[1],m=g[2],C=new ng;C.strokeWidth=1,C.centerX=u.convert(y),C.centerY=c.convert(S),C.radius=m,C.fillOpacity=.7,d.push(C)})}),i.points=d,i.updateColors(r,n);var h=new re;return h.setClipRectInGroupCoordinateSpace(new me(s,s,a-2*s,a-2*s)),h.append(i.points),i.root.append(h),i}return LD(t,o),t.prototype.updateColors=function(e,r){this.points.forEach(function(n,i){n.stroke=r[i%r.length],n.fill=e[i%e.length]})},t.chartType="bubble",t}(er),GD=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),VD=function(o){function t(e,r,n,i){void 0===i&&(i=t.data);var a=o.call(this,e,"groupedAreaTooltip")||this,s=a.size,l=a.padding,u=new bt;u.domain=[0,1,2],u.paddingInner=1,u.paddingOuter=0,u.range=[l+.5,s-l-.5];var c=new Je;c.domain=[0,6],c.range=[s-l+.5,l];var h=2*i.length-1,p=[],v=c.convert(0);return i.forEach(function(g,y){var S=u.convert(y);g.forEach(function(m,C){var _=c.convert(m),w=p[C]||(p[C]=[]);w[y]={x:S,y:_},w[h-y]={x:S,y:v}})}),a.areas=p.reverse().map(function(g){var y=new wt;y.strokeWidth=1,y.fillOpacity=.7;var S=y.path;return S.clear(),g.forEach(function(m,C){return S[C>0?"lineTo":"moveTo"](m.x,m.y)}),S.closePath(),y}),a.updateColors(r,n),a.root.append(a.areas),a}return GD(t,o),t.prototype.updateColors=function(e,r){this.areas.forEach(function(n,i){n.fill=e[i],n.stroke=r[i]})},t.chartType="area",t.data=[[1,3,5],[2,6,4],[5,3,1]],t}(er),BD=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),gd=function(o){function t(e,r,n,i,a){void 0===i&&(i=t.data),void 0===a&&(a="stackedAreaTooltip");var s=o.call(this,e,a)||this,l=s.size,u=s.padding,c=new bt;c.domain=[0,1,2],c.paddingInner=1,c.paddingOuter=0,c.range=[u+.5,l-u-.5];var d=new Je;d.domain=[0,16],d.range=[l-u+.5,u+.5];var p=2*i.length-1,v=[];return i.forEach(function(g,y){var S=c.convert(y),m=0;g.forEach(function(C,_){var w=d.convert(m+C),x=v[_]||(v[_]=[]);x[y]={x:S,y:w},x[p-y]={x:S,y:d.convert(m)},m+=C})}),s.areas=v.map(function(g){var y=new wt;y.strokeWidth=1;var S=y.path;return S.clear(),g.forEach(function(m,C){return S[C>0?"lineTo":"moveTo"](m.x,m.y)}),S.closePath(),y}),s.updateColors(r,n),s.root.append(s.areas),s}return BD(t,o),t.prototype.updateColors=function(e,r){this.areas.forEach(function(n,i){n.fill=e[i],n.stroke=r[i]})},t.chartType="stackedArea",t.data=[[2,3,2],[3,6,5],[6,2,2]],t}(er),jD=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),zD=function(o){function t(e,r,n,i){return void 0===i&&(i=t.data),o.call(this,e,r,n,i,"normalizedAreaTooltip")||this}return jD(t,o),t.chartType="normalizedArea",t.data=gd.data.map(function(e){var r=e.reduce(function(n,i){return n+i},0);return e.map(function(n){return n/r*16})}),t}(gd),HD=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),mg=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},UD=function(o){function t(e,r,n){var i=o.call(this,e,"histogramTooltip")||this,a=i.padding,s=i.size,l=[2,5,11,13,10,6,1],u=new Je;u.domain=[0,l.length],u.range=[a,s-a];var c=new Je;c.domain=[0,l.reduce(function(h,p){return Math.max(h,p)},0)],c.range=[s-a,a];var d=c.convert(0);return i.bars=l.map(function(h,p){var v=c.convert(h),g=u.convert(p),y=u.convert(p+1),S=new fr;return S.x=g,S.y=v,S.width=y-g,S.height=d-v,S.strokeWidth=1,S.crisp=!0,S}),i.updateColors(r,n),i.root.append(i.bars),i}return HD(t,o),t.prototype.updateColors=function(e,r){var i=mg(e,1)[0],s=mg(r,1)[0];this.bars.forEach(function(l){l.fill=i,l.stroke=s})},t.chartType="histogram",t}(er),WD=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),KD=function(o){function t(e,r,n){var i=o.call(this,e,"columnLineComboTooltip")||this;i.columnData=[3,4],i.lineData=[[5,4,6,5,4]];var s=i.root,u=i.lineData,c=i.size,d=i.padding;return i.columns=ts({stacked:!1,root:s,data:i.columnData,size:c,padding:d,xScaleDomain:[0,1],yScaleDomain:[0,4],xScalePadding:.5}),s.append(i.columns),i.lines=vd(s,u,c,d),i.updateColors(r,n),i}return WD(t,o),t.prototype.updateColors=function(e,r){this.columns.forEach(function(n,i){n.fill=e[i],n.stroke=r[i]}),this.lines.forEach(function(n,i){n.stroke=e[i+2]})},t.chartType="columnLineCombo",t}(er),YD=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),$D=function(o){function t(e,r,n){var i=o.call(this,e,"areaColumnComboTooltip")||this;i.columnData=[3,4.5],i.areaData=[[5,4,6,5,4]];var s=i.root,u=i.areaData,c=i.size,d=i.padding;i.columns=ts({stacked:!1,root:s,data:i.columnData,size:c,padding:d,xScaleDomain:[0,1],yScaleDomain:[0,6],xScalePadding:.5});var h=new bt;h.range=[d,c-d],h.domain=[0,1,2,3,4],h.paddingInner=1,h.paddingOuter=0;var p=new Je;p.range=[c-d,d],p.domain=[0,6];var v=[],g=p.convert(0),y=h.convert(0);return u.forEach(function(S,m){var C=v[m]||(v[m]=[]);S.forEach(function(w,x){var b=w,T=h.convert(x),E=p.convert(b);C[x]={x:T,y:E}});var _=h.convert(S.length-1);v[m].push({x:_,y:g},{x:y,y:g})}),i.areas=v.map(function(S){var m=new wt;m.strokeWidth=1,m.fillOpacity=.8;var C=m.path;return S.forEach(function(_,w){return C[w>0?"lineTo":"moveTo"](_.x,_.y)}),m}),s.append(i.areas),s.append([].concat.apply([],i.columns)),i.updateColors(r,n),i}return YD(t,o),t.prototype.updateColors=function(e,r){this.areas.forEach(function(n,i){n.fill=e[i],n.stroke=r[i]}),this.columns.forEach(function(n,i){n.fill=e[i+1],n.stroke=r[i+1]})},t.chartType="areaColumnCombo",t}(er),XD=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),QD=function(o){function t(e,r,n){var i=o.call(this,e,"customComboTooltip")||this;i.columnData=[3,4],i.lineData=[[5,4,6,5,4]];var s=i.root,u=i.lineData,c=i.size,d=i.padding;i.columns=ts({stacked:!1,root:s,data:i.columnData,size:c,padding:d,xScaleDomain:[0,1],yScaleDomain:[0,4],xScalePadding:.5}),s.append(i.columns),i.lines=vd(s,u,c,d);var h="grey",v=new Ze;v.x1=d,v.y1=d,v.x2=d,v.y2=c-d+3,v.stroke=h;var g=new Ze;g.x1=d-3+1,g.y1=c-d,g.x2=c-d+1,g.y2=c-d,g.stroke=h;var y=new wt;return i.buildPenIconPath(y),y.fill="whitesmoke",y.stroke="darkslategrey",y.strokeWidth=1,s.append([g,v,y]),i.updateColors(r,n),i}return XD(t,o),t.prototype.updateColors=function(e,r){this.columns.forEach(function(n,i){n.fill=e[i],n.stroke=r[i]}),this.lines.forEach(function(n,i){n.stroke=e[i+2]})},t.prototype.buildPenIconPath=function(e){var r=e.path;r.moveTo(25.76,43.46),r.lineTo(31.27,48.53),r.moveTo(49.86,22),r.lineTo(49.86,22),r.cubicCurveTo(49.01994659053345,21.317514933510974,47.89593834348529,21.09645997825817,46.86,21.41),r.lineTo(46.86,21.41),r.cubicCurveTo(45.55460035985361,21.77260167850787,44.38777081121966,22.517979360321792,43.51,23.55),r.lineTo(25.51,43.8),r.lineTo(25.43,43.89),r.lineTo(23.01,51.89),r.lineTo(22.83,52.46),r.lineTo(31.02,48.86),r.lineTo(49.02,28.52),r.lineTo(49.02,28.52),r.cubicCurveTo(49.940716461596224,27.521914221246085,50.54302631059587,26.2720342455763,50.75,24.93),r.lineTo(50.75,24.93),r.cubicCurveTo(50.95363374988308,23.866379846512814,50.62080640232334,22.77066734274871,49.86,22),r.closePath(),r.moveTo(41.76,25.5),r.lineTo(47.34,30.5),r.moveTo(40.74,26.65),r.lineTo(46.25,31.71)},t.chartType="customCombo",t}(pd),ZD=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),yd=function(){return yd=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},yd.apply(this,arguments)},Sg=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Cg={columnGroup:{column:yD,stackedColumn:vg,normalizedColumn:CD},barGroup:{bar:xD,stackedBar:gg,normalizedBar:OD},pieGroup:{pie:AD,doughnut:yg},lineGroup:{line:MD},scatterGroup:{scatter:ID,bubble:kD},areaGroup:{area:VD,stackedArea:gd,normalizedArea:zD},histogramGroup:{histogram:UD},combinationGroup:{columnLineCombo:KD,areaColumnCombo:$D,customCombo:QD}},qD=function(o){function t(e,r,n,i){void 0===i&&(i=f.Ylg);var a=o.call(this,t.TEMPLATE)||this;return a.wrappers={},a.chartController=e,a.fills=r,a.strokes=n,a.chartGroups=yd({},i),a}return ZD(t,o),t.prototype.init=function(){var e=this;!this.chartController.customComboExists()&&this.chartGroups.combinationGroup&&(this.chartGroups.combinationGroup=this.chartGroups.combinationGroup.filter(function(n){return"customCombo"!==n}));var r=this.getGui();Object.keys(this.chartGroups).forEach(function(n){var i=e.chartGroups[n],a=e.createBean(new f.SKM({title:e.chartTranslationService.translate(n),suppressEnabledCheckbox:!0,enabled:!0,suppressOpenCloseIcons:!0,cssIdentifier:"charts-settings",direction:"horizontal"}));i.forEach(function(s){var l,u=null===(l=Cg[n])||void 0===l?void 0:l[s];if(u){var c=document.createElement("div");c.classList.add("ag-chart-mini-thumbnail");var d=u.chartType;e.addManagedListener(c,"click",function(){e.chartController.setChartType(d),e.updateSelectedMiniChart()}),e.wrappers[d]=c,e.createBean(new u(c,e.fills,e.strokes)),a.addItem(c)}else Cg[n]?f._.doOnce(function(){return console.warn("AG Grid - invalid chartGroupsDef config '"+n+"."+s+"'")},"invalid_chartGroupsDef"+s+"_"+n):f._.doOnce(function(){return console.warn("AG Grid - invalid chartGroupsDef config '"+n+"'")},"invalid_chartGroupsDef"+n)}),r.appendChild(a.getGui())}),this.updateSelectedMiniChart()},t.prototype.updateSelectedMiniChart=function(){var e=this.chartController.getChartType();for(var r in this.wrappers)this.wrappers[r].classList.toggle("ag-selected",r===e)},t.TEMPLATE='<div class="ag-chart-settings-mini-wrapper"></div>',Sg([(0,f.Qnc)("chartTranslationService")],t.prototype,"chartTranslationService",void 0),Sg([f.QhY],t.prototype,"init",null),t}(f.YlN),JD=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),yi=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},eM=function(o){function t(e){var r=o.call(this,t.TEMPLATE)||this;return r.miniChartsContainers=[],r.cardItems=[],r.activePaletteIndex=0,r.palettes=[],r.themes=[],r.chartController=e,r}return JD(t,o),t.prototype.postConstruct=function(){var e=this;this.resetPalettes(),this.ePrevBtn.insertAdjacentElement("afterbegin",f._.createIconNoSpan("previous",this.gridOptionsService)),this.eNextBtn.insertAdjacentElement("afterbegin",f._.createIconNoSpan("next",this.gridOptionsService)),this.addManagedListener(this.ePrevBtn,"click",function(){return e.setActivePalette(e.getPrev(),"left")}),this.addManagedListener(this.eNextBtn,"click",function(){return e.setActivePalette(e.getNext(),"right")}),this.addManagedListener(this.chartController,hr.EVENT_CHART_TYPE_CHANGED,function(){return e.resetPalettes(!0)}),this.addManagedListener(this.chartController,hr.EVENT_CHART_API_UPDATE,function(){return e.resetPalettes(!0)}),this.scrollSelectedIntoView()},t.prototype.scrollSelectedIntoView=function(){var e=this;setTimeout(function(){var i=e.miniChartsContainers.find(function(s){return!s.getGui().classList.contains("ag-hidden")}).getGui().querySelector(".ag-selected");if(i){var a=i.offsetParent;a&&e.eMiniChartsContainer.scrollTo(0,a.offsetTop)}},250)},t.prototype.resetPalettes=function(e){var n,i,r=this,a=this.chartController.getPalettes(),s=null===(i=null===(n=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===n?void 0:n.settingsPanel)||void 0===i?void 0:i.chartGroupsDef;f._.shallowCompare(a,this.palettes)&&!e||this.isAnimating||(this.palettes=a,this.themes=this.chartController.getThemes(),this.activePaletteIndex=this.themes.findIndex(function(l){return l===r.chartController.getChartThemeName()}),this.cardItems=[],f._.clearElement(this.eCardSelector),this.destroyMiniCharts(),this.palettes.forEach(function(l,u){var c=r.activePaletteIndex===u,p=r.createBean(new qD(r.chartController,l.fills,l.strokes,s));r.miniChartsContainers.push(p),r.eMiniChartsContainer.appendChild(p.getGui()),r.addCardLink(u),c?p.updateSelectedMiniChart():p.setDisplayed(!1)}),f._.setDisplayed(this.eNavBar,this.palettes.length>1),f._.radioCssClass(this.cardItems[this.activePaletteIndex],"ag-selected","ag-not-selected"))},t.prototype.addCardLink=function(e){var r=this,n=document.createElement("div");n.classList.add("ag-chart-settings-card-item"),this.addManagedListener(n,"click",function(){r.setActivePalette(e,e<r.activePaletteIndex?"left":"right")}),this.eCardSelector.appendChild(n),this.cardItems.push(n)},t.prototype.getPrev=function(){var e=this.activePaletteIndex-1;return e<0&&(e=this.palettes.length-1),e},t.prototype.getNext=function(){var e=this.activePaletteIndex+1;return e>=this.palettes.length&&(e=0),e},t.prototype.setActivePalette=function(e,r){var n=this;if(!this.isAnimating&&this.activePaletteIndex!==e){f._.radioCssClass(this.cardItems[e],"ag-selected","ag-not-selected");var i=this.miniChartsContainers[this.activePaletteIndex],a=i.getGui(),s=this.miniChartsContainers[e],l=s.getGui();i.updateSelectedMiniChart(),s.updateSelectedMiniChart();var u="left"===r?-1:1,c=l.style.left=f._.getAbsoluteWidth(this.getGui())*u+"px";this.activePaletteIndex=e,this.isAnimating=!0;var d="ag-animating";s.setDisplayed(!0),i.addCssClass(d),s.addCssClass(d),this.chartController.setChartThemeName(this.themes[e]),window.setTimeout(function(){a.style.left=-parseFloat(c)+"px",l.style.left="0px"},0),window.setTimeout(function(){n.isAnimating=!1,i.removeCssClass(d),s.removeCssClass(d),i.setDisplayed(!1)},300)}},t.prototype.destroyMiniCharts=function(){f._.clearElement(this.eMiniChartsContainer),this.miniChartsContainers=this.destroyBeans(this.miniChartsContainers)},t.prototype.destroy=function(){this.destroyMiniCharts(),o.prototype.destroy.call(this)},t.TEMPLATE='<div class="ag-chart-settings-wrapper">\n            <div ref="eMiniChartsContainer" class="ag-chart-settings-mini-charts-container ag-scrollable-container"></div>\n            <div ref="eNavBar" class="ag-chart-settings-nav-bar">\n                <div ref="ePrevBtn" class="ag-chart-settings-prev">\n                    <button type="button" class="ag-button ag-chart-settings-prev-button"></button>\n                </div>\n                <div ref="eCardSelector" class="ag-chart-settings-card-selector"></div>\n                <div ref="eNextBtn" class="ag-chart-settings-next">\n                    <button type="button" class="ag-button ag-chart-settings-next-button"></button>\n                </div>\n            </div>\n        </div>',yi([(0,f.Qnc)("resizeObserverService")],t.prototype,"resizeObserverService",void 0),yi([(0,f.IzG)("eMiniChartsContainer")],t.prototype,"eMiniChartsContainer",void 0),yi([(0,f.IzG)("eNavBar")],t.prototype,"eNavBar",void 0),yi([(0,f.IzG)("eCardSelector")],t.prototype,"eCardSelector",void 0),yi([(0,f.IzG)("ePrevBtn")],t.prototype,"ePrevBtn",void 0),yi([(0,f.IzG)("eNextBtn")],t.prototype,"eNextBtn",void 0),yi([f.QhY],t.prototype,"postConstruct",null),t}(f.YlN),tM=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),_g=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},rM=function(o){function t(e){var r=o.call(this)||this;r.tabs=[];var i=e.panels,a=e.chartOptionsService;return r.chartController=e.controller,r.chartOptionsService=a,r.panels=i,r}return tM(t,o),t.prototype.init=function(){var e=this;this.panels.forEach(function(r){var n=r.replace("chart","").toLowerCase(),i=e.createTab(r,n,e.getPanelClass(n)),a=i.comp;e.tabs.push(i.tab),e.addDestroyFunc(function(){return e.destroyBean(a)})}),this.tabbedLayout=new f.EpC({items:this.tabs,cssClass:"ag-chart-tabbed-menu",keepScrollPosition:!0}),this.getContext().createBean(this.tabbedLayout)},t.prototype.createTab=function(e,r,n){var i=document.createElement("div");i.classList.add("ag-chart-tab","ag-chart-"+r);var a=new n(this.chartController,this.chartOptionsService);this.getContext().createBean(a),i.appendChild(a.getGui());var s=document.createElement("div"),l=this.chartTranslationService.translate(r);return s.innerText=l,{comp:a,tab:{title:s,titleLabel:l,bodyPromise:f.VVN.resolve(i),getScrollableContainer:function(){return i.querySelector(".ag-scrollable-container")||i},name:e}}},t.prototype.showTab=function(e){this.tabbedLayout.showItem(this.tabs[e])},t.prototype.getGui=function(){return this.tabbedLayout&&this.tabbedLayout.getGui()},t.prototype.destroy=function(){this.parentComponent&&this.parentComponent.isAlive()&&this.destroyBean(this.parentComponent),o.prototype.destroy.call(this)},t.prototype.getPanelClass=function(e){switch(e){case t.TAB_DATA:return NA;case t.TAB_FORMAT:return fD;default:return eM}},t.TAB_DATA="data",t.TAB_FORMAT="format",_g([(0,f.Qnc)("chartTranslationService")],t.prototype,"chartTranslationService",void 0),_g([f.QhY],t.prototype,"init",null),t}(f.YlN),nM=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),rs=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},xg=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},wg=function(o){function t(e,r,n,i){var a=o.call(this,t.TEMPLATE)||this;return a.eChartContainer=e,a.eMenuPanelContainer=r,a.chartController=n,a.chartOptionsService=i,a.buttons={chartSettings:["menu",function(){return a.showMenu(a.defaultPanel)}],chartData:["menu",function(){return a.showMenu("chartData")}],chartFormat:["menu",function(){return a.showMenu("chartFormat")}],chartLink:["linked",function(s){return a.toggleDetached(s)}],chartUnlink:["unlinked",function(s){return a.toggleDetached(s)}],chartDownload:["save",function(){return a.saveChart()}]},a.panels=[],a.buttonListenersDestroyFuncs=[],a.menuVisible=!1,a}return nM(t,o),t.prototype.postConstruct=function(){var e=this;this.createButtons(),this.addManagedListener(this.eventService,f.YFc.EVENT_CHART_CREATED,function(r){var n;r.chartId===e.chartController.getChartId()&&null!==(n=e.gridOptionsService.get("chartToolPanelsDef"))&&void 0!==n&&n.defaultToolPanel&&e.showMenu(e.defaultPanel,!1)}),this.refreshMenuClasses(),!this.gridOptionsService.is("suppressChartToolPanelsButton")&&this.panels.length>0&&(this.getGui().classList.add("ag-chart-tool-panel-button-enable"),this.addManagedListener(this.eHideButton,"click",this.toggleMenu.bind(this))),this.addManagedListener(this.chartController,hr.EVENT_CHART_API_UPDATE,this.createButtons.bind(this))},t.prototype.isVisible=function(){return this.menuVisible},t.prototype.getExtraPaddingDirections=function(){var e=this,i=[];return["chartLink","chartUnlink","chartDownload"].some(function(a){return e.chartToolbarOptions.includes(a)})&&i.push("top"),["chartSettings","chartData","chartFormat"].some(function(a){return e.chartToolbarOptions.includes(a)})&&i.push(this.gridOptionsService.is("enableRtl")?"left":"right"),i},t.prototype.getToolbarOptions=function(){var r,n,i,e=this;if(this.gridOptionsService.get("chartToolPanelsDef")){var s=[this.chartController.isChartLinked()?"chartLink":"chartUnlink","chartDownload"],u={defaultItems:s},c=(l=this.gridOptionsService.getCallback("getChartToolbarItems"))?l(u).filter(function(y){if(!f.aCl.includes(y)){var S=f.KEV.includes(y)?"AG Grid: '"+y+"' is a Chart Tool Panel option and will be ignored since 'chartToolPanelsDef' is used. Please use 'chartToolPanelsDef.panels' grid option instead":"AG Grid: '"+y+"' is not a valid Chart Toolbar Option";return console.warn(S),!1}return!0}):s,d=null===(n=null===(r=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===r?void 0:r.panels)||void 0===n?void 0:n.map(function(y){var S=f._i4[y];return S||console.warn("AG Grid - invalid panel in chartToolPanelsDef.panels: '"+y+"'"),S}).filter(function(y){return!!y});this.panels=d||Object.values(f._i4),this.chartController.isPivotChart()&&(this.panels=this.panels.filter(function(y){return"chartData"!==y}));var h=null===(i=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===i?void 0:i.defaultToolPanel;return this.defaultPanel=h&&f._i4[h]||this.panels[0],this.panels.length>0?function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o}([this.panels[0]],xg(c)):c}var l,p=["chartSettings","chartData","chartFormat",this.chartController.isChartLinked()?"chartLink":"chartUnlink","chartDownload"];if(l=this.gridOptionsService.getCallback("getChartToolbarItems")){var v=this.gridOptionsService.is("suppressChartToolPanelsButton");p=l(u={defaultItems:v?p:f.aCl}).filter(function(m){return e.buttons[m]?!(!v&&f.KEV.includes(m)&&(console.warn("AG Grid: '"+m+"' is a Chart Tool Panel option and will be ignored. Please use 'chartToolPanelsDef.panels' grid option instead"),1)):(console.warn("AG Grid: '"+m+"' is not a valid Chart Toolbar Option"),!1)}),v||(p=p.concat(f.KEV))}this.chartController.isPivotChart()&&(p=p.filter(function(S){return"chartData"!==S}));var g=["chartUnlink","chartLink","chartDownload"];return this.panels=p.filter(function(S){return-1===g.indexOf(S)}),this.defaultPanel=this.panels[0],p.filter(function(S){return-1!==g.indexOf(S)||e.panels.length&&S===e.panels[0]})},t.prototype.toggleDetached=function(e){var r=e.target,n=r.classList.contains("ag-icon-linked");r.classList.toggle("ag-icon-linked",!n),r.classList.toggle("ag-icon-unlinked",n);var a=this.chartTranslationService.translate(n?"chartUnlinkToolbarTooltip":"chartLinkToolbarTooltip");a&&(r.title=a),this.chartController.detachChartRange()},t.prototype.createButtons=function(){var e=this;this.buttonListenersDestroyFuncs.forEach(function(n){return n()}),this.buttonListenersDestroyFuncs=[],this.chartToolbarOptions=this.getToolbarOptions();var r=this.eMenu;f._.clearElement(r),this.chartToolbarOptions.forEach(function(n){var a=xg(e.buttons[n],2),l=a[1],u=f._.createIconNoSpan(a[0],e.gridOptionsService,void 0,!0);u.classList.add("ag-chart-menu-icon");var c=e.chartTranslationService.translate(n+"ToolbarTooltip");c&&u instanceof HTMLElement&&(u.title=c),e.buttonListenersDestroyFuncs.push(e.addManagedListener(u,"click",l)),r.appendChild(u)})},t.prototype.saveChart=function(){this.dispatchEvent({type:t.EVENT_DOWNLOAD_CHART})},t.prototype.createMenuPanel=function(e){var r=this,n=this.environment.chartMenuPanelWidth(),i=this.menuPanel=this.createBean(new f.wXk({minWidth:n,width:n,height:"100%",closable:!0,hideTitleBar:!0,cssIdentifier:"chart-menu"}));return i.setParentComponent(this),this.eMenuPanelContainer.appendChild(i.getGui()),this.tabbedMenu=this.createBean(new rM({controller:this.chartController,type:this.chartController.getChartType(),panels:this.panels,chartOptionsService:this.chartOptionsService})),this.addManagedListener(i,f.YlN.EVENT_DESTROYED,function(){return r.destroyBean(r.tabbedMenu)}),new f.VVN(function(a){window.setTimeout(function(){i.setBodyComponent(r.tabbedMenu),r.tabbedMenu.showTab(e),a(i),r.addManagedListener(r.eChartContainer,"click",function(s){r.getGui().contains(s.target)||r.menuVisible&&r.hideMenu()})},100)})},t.prototype.showContainer=function(){this.menuPanel&&(this.menuVisible=!0,this.showParent(this.menuPanel.getWidth()),this.refreshMenuClasses())},t.prototype.toggleMenu=function(){this.menuVisible?this.hideMenu():this.showMenu()},t.prototype.showMenu=function(e,r){var n=this;if(void 0===r&&(r=!0),r||this.eMenuPanelContainer.classList.add("ag-no-transition"),this.menuPanel&&!e)this.showContainer();else{var a=this.panels.indexOf(e||this.defaultPanel);a<0&&(console.warn("AG Grid: '"+e+"' is not a valid Chart Tool Panel name"),a=this.panels.indexOf(this.defaultPanel)),this.menuPanel?(this.tabbedMenu.showTab(a),this.showContainer()):this.createMenuPanel(a).then(this.showContainer.bind(this))}r||setTimeout(function(){n.isAlive()&&n.eMenuPanelContainer.classList.remove("ag-no-transition")},500)},t.prototype.hideMenu=function(){var e=this;this.hideParent(),window.setTimeout(function(){e.menuVisible=!1,e.refreshMenuClasses()},500)},t.prototype.refreshMenuClasses=function(){this.eChartContainer.classList.toggle("ag-chart-menu-visible",this.menuVisible),this.eChartContainer.classList.toggle("ag-chart-menu-hidden",!this.menuVisible),this.gridOptionsService.is("suppressChartToolPanelsButton")||(this.eHideButtonIcon.classList.toggle("ag-icon-contracted",this.menuVisible),this.eHideButtonIcon.classList.toggle("ag-icon-expanded",!this.menuVisible))},t.prototype.showParent=function(e){this.eMenuPanelContainer.style.minWidth=e+"px"},t.prototype.hideParent=function(){this.eMenuPanelContainer.style.minWidth="0"},t.prototype.destroy=function(){o.prototype.destroy.call(this),this.menuPanel&&this.menuPanel.isAlive()&&this.destroyBean(this.menuPanel),this.tabbedMenu&&this.tabbedMenu.isAlive()&&this.destroyBean(this.tabbedMenu)},t.EVENT_DOWNLOAD_CHART="downloadChart",t.TEMPLATE='<div>\n        <div class="ag-chart-menu" ref="eMenu"></div>\n        <button class="ag-button ag-chart-menu-close" ref="eHideButton">\n            <span class="ag-icon ag-icon-contracted" ref="eHideButtonIcon"></span>\n        </button>\n    </div>',rs([(0,f.Qnc)("chartTranslationService")],t.prototype,"chartTranslationService",void 0),rs([(0,f.IzG)("eMenu")],t.prototype,"eMenu",void 0),rs([(0,f.IzG)("eHideButton")],t.prototype,"eHideButton",void 0),rs([(0,f.IzG)("eHideButtonIcon")],t.prototype,"eHideButtonIcon",void 0),rs([f.QhY],t.prototype,"postConstruct",null),t}(f.YlN),oM=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Jl=function(){return Jl=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},Jl.apply(this,arguments)},bg=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},sM=function(o){function t(e){var r=o.call(this,t.TEMPLATE)||this;return r.chartMenu=e,r.destroyableChartListeners=[],r.editing=!1,r}return oM(t,o),t.prototype.init=function(){var e=this;this.addManagedListener(this.getGui(),"keydown",function(r){e.editing&&"Enter"===r.key&&!r.shiftKey&&(e.handleEndEditing(),r.preventDefault())}),this.addManagedListener(this.getGui(),"input",function(){e.editing&&e.updateHeight()}),this.addManagedListener(this.getGui(),"blur",function(){return e.endEditing()})},t.prototype.refreshTitle=function(e,r){var n,i,a=this;this.chartController=e,this.chartOptionsService=r;try{for(var s=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.destroyableChartListeners),l=s.next();!l.done;l=s.next())(0,l.value)()}catch(y){n={error:y}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}this.destroyableChartListeners=[];var d=this.chartController.getChartProxy().getChart(),h=d.scene.canvas.element,p=this.addManagedListener(h,"dblclick",function(y){var S=d.title;if(S&&S.node.containsPoint(y.offsetX,y.offsetY)){var m=S.node.computeBBox(),C=S.node.inverseTransformPoint(m.x,m.y);a.startEditing(Jl(Jl({},m),C),h.width)}}),v=!1,g=this.addManagedListener(h,"mousemove",function(y){var S=d.title,m=!!(S&&S.enabled&&S.node.containsPoint(y.offsetX,y.offsetY));v!==m&&(h.style.cursor=m?"pointer":""),v=m});this.destroyableChartListeners=[p,g]},t.prototype.startEditing=function(e,r){if(!(this.chartMenu&&this.chartMenu.isVisible()||this.editing)){this.editing=!0;var i=Math.max(Math.min(e.width+20,r),300),a=this.getGui();a.classList.add("currently-editing");var s=a.style;s.fontFamily=this.chartOptionsService.getChartOption("title.fontFamily"),s.fontWeight=this.chartOptionsService.getChartOption("title.fontWeight"),s.fontStyle=this.chartOptionsService.getChartOption("title.fontStyle"),s.fontSize=this.chartOptionsService.getChartOption("title.fontSize")+"px",s.color=this.chartOptionsService.getChartOption("title.color");var l=this.chartOptionsService.getChartOption("title.text"),u=l===this.chartTranslationService.translate("titlePlaceholder");a.value=u?"":l;var c=l.split(/\r?\n/g).length;s.left=Math.round(e.x+e.width/2-i/2-1)+"px",s.top=Math.round(e.y+e.height/2-c*this.getLineHeight()/2-2)+"px",s.width=Math.round(i)+"px",s.lineHeight=this.getLineHeight()+"px",this.updateHeight(),a.focus()}},t.prototype.updateHeight=function(){var e=this.getGui(),r=this.chartOptionsService.getChartOption("title.text").split(/\r?\n/g).length,n=e.value.split(/\r?\n/g).length;e.style.height=Math.round(Math.max(r,n)*this.getLineHeight())+4+"px"},t.prototype.getLineHeight=function(){var e=this.chartOptionsService.getChartOption("title.lineHeight");return e?parseInt(e):Math.round(1.2*parseInt(this.chartOptionsService.getChartOption("title.fontSize")))},t.prototype.handleEndEditing=function(){var e=this,r=this.chartOptionsService.getChartOption("title.color");this.chartOptionsService.setChartOption("title.color","rgba(0, 0, 0, 0)"),this.chartOptionsService.awaitChartOptionUpdate(function(){return e.endEditing()}),this.chartOptionsService.awaitChartOptionUpdate(function(){e.chartOptionsService.setChartOption("title.color",r)})},t.prototype.endEditing=function(){var e=this;if(this.editing){this.editing=!1;var r=this.getGui().value;r&&""!==r.trim()?(this.chartOptionsService.setChartOption("title.text",r),this.chartOptionsService.setChartOption("title.enabled",!0)):(this.chartOptionsService.setChartOption("title.text",""),this.chartOptionsService.setChartOption("title.enabled",!1)),this.getGui().classList.remove("currently-editing"),this.chartOptionsService.awaitChartOptionUpdate(function(){e.eventService.dispatchEvent({type:"chartTitleEdit"})})}},t.TEMPLATE='<textarea\n             class="ag-chart-title-edit"\n             style="padding:0; border:none; border-radius: 0; min-height: 0; text-align: center; resize: none;" />\n        ',bg([(0,f.Qnc)("chartTranslationService")],t.prototype,"chartTranslationService",void 0),bg([f.QhY],t.prototype,"init",null),t}(f.YlN),lM=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Io=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},uM=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return lM(t,o),t.prototype.getData=function(e){if(e.crossFiltering){if(e.grouping)return console.warn("AG Grid: crossing filtering with row grouping is not supported."),{chartData:[],columnNames:{}};if(!this.gridOptionsService.isRowModelType("clientSide"))return console.warn("AG Grid: crossing filtering is only supported in the client side row model."),{chartData:[],columnNames:{}}}this.gridOptionsService.isRowModelType("serverSide")&&e.pivoting&&this.updatePivotKeysForSSRM();var n=this.extractRowsFromGridRowModel(e);return n.chartData=this.aggregateRowsByDimension(e,n.chartData),n},t.prototype.extractRowsFromGridRowModel=function(e){var c,r=this,n=[],i={},a={},s={},l={},u=[];if(e.crossFiltering)l=this.getFilteredRowNodes(),c=(u=this.getAllRowNodes()).length;else{var d=this.gridRowModel.getRowCount()-1;c=(e.endRow>=0?Math.min(e.endRow,d):d)-e.startRow+1}for(var p=function(m){var C={},_=e.crossFiltering?u[m]:v.gridRowModel.getRow(m+e.startRow);e.dimensionCols.forEach(function(w){var x=w.colId,b=r.columnModel.getGridColumn(x);if(b){var O=r.valueService.getValue(b,_);if(e.grouping){var T=O&&O.toString?String(O.toString()):"",E=t.getGroupLabels(_,T);C[x]={labels:E,toString:function(){return this.labels.filter(function(D){return!!D}).reverse().join(" - ")}},_.group&&(a[E.toString()]=m);var P=E.slice(1,E.length).toString();P&&(s[P]=a[P])}else C[x]=O}else C[Sd.DEFAULT_CATEGORY]=m+1}),e.valueCols.forEach(function(w){var x=[],b=w.getColDef().pivotKeys;b&&(x=b.slice());var O=w.getColDef().headerName;O&&x.push(O),x.length>0&&(i[w.getId()]=x);var T=w.getColId();if(e.crossFiltering){var E=T+"-filtered-out",D=null!=(P=r.valueService.getValue(w,_))&&"function"==typeof P.toNumber?P.toNumber():P;l[_.id]?(C[T]=D,C[E]=e.aggFunc||e.isScatter?void 0:0):(C[T]=e.aggFunc||e.isScatter?void 0:0,C[E]=D)}else{var P;(P=r.valueService.getValue(w,_))&&P.hasOwnProperty("toString")&&(P=parseFloat(P.toString())),C[T]=null!=P&&"function"==typeof P.toNumber?P.toNumber():P}}),_.footer&&(C.footer=!0),n.push(C)},v=this,g=0;g<c;g++)p(g);if(e.grouping){var y=f._.values(s);n=n.filter(function(m,C){return!m.footer&&!f._.includes(y,C)})}return{chartData:n,columnNames:i}},t.prototype.aggregateRowsByDimension=function(e,r){var n=this,i=e.dimensionCols;if(!e.aggFunc||0===i.length)return r;var a=f._.last(i),s=a&&a.colId,l={},u=[];return r.forEach(function(c){var d=l;i.forEach(function(h){var p=h.colId,v=c[p];if(p===s){var g=d[v];g||(g={__children:[]},i.forEach(function(y){var S=y.colId;g[S]=c[S]}),d[v]=g,u.push(g)),g.__children.push(c)}else d[v]||(d[v]={}),d=d[v]})}),f.Y5$.__assertRegistered(f.ekS.RowGroupingModule,"Charting Aggregation",this.context.getGridId())&&u.forEach(function(c){return e.valueCols.forEach(function(d){if(e.crossFiltering)e.valueCols.forEach(function(v){var g=v.getColId(),y=c.__children.filter(function(w){return typeof w[g]<"u"}).map(function(w){return w[g]}),S=n.aggregationStage.aggregateValues(y,e.aggFunc);c[v.getId()]=S&&typeof S.value<"u"?S.value:S;var m=g+"-filtered-out",C=c.__children.filter(function(w){return typeof w[m]<"u"}).map(function(w){return w[m]}),_=n.aggregationStage.aggregateValues(C,e.aggFunc);c[m]=_&&typeof _.value<"u"?_.value:_});else{var h=c.__children.map(function(v){return v[d.getId()]}),p=0;f.Y5$.__assertRegistered(f.ekS.RowGroupingModule,"Charting Aggregation",n.context.getGridId())&&(p=n.aggregationStage.aggregateValues(h,e.aggFunc)),c[d.getId()]=p&&typeof p.value<"u"?p.value:p}})}),u},t.prototype.updatePivotKeysForSSRM=function(){var e=this.columnModel.getSecondaryColumns();if(e){var r=this.extractPivotKeySeparator(e);e.forEach(function(n){if(""===r)n.getColDef().pivotKeys=[];else{var i=n.getColId().split(r);n.getColDef().pivotKeys=i.slice(0,i.length-1)}})}},t.prototype.extractPivotKeySeparator=function(e){if(0===e.length)return"";var r=function(i,a){var s=i.getGroupId();return i.getParent()?r(i.getParent(),s):a.split(s)[1][0]},n=e[0];return null==n.getParent()?"":r(n.getParent(),n.getColId())},t.getGroupLabels=function(e,r){for(var n=[r];e&&0!==e.level;)(e=e.parent)&&n.push(e.key);return n},t.prototype.getFilteredRowNodes=function(){var e={};return this.gridRowModel.forEachNodeAfterFilterAndSort(function(r){e[r.id]=r}),e},t.prototype.getAllRowNodes=function(){var e=[];return this.gridRowModel.forEachNode(function(r){e.push(r)}),this.sortRowNodes(e)},t.prototype.sortRowNodes=function(e){var r=this.sortController.getSortOptions();return r&&0!=r.length?this.rowNodeSorter.doFullSort(e,r):e},Io([(0,f.Qnc)("rowModel")],t.prototype,"gridRowModel",void 0),Io([(0,f.Qnc)("valueService")],t.prototype,"valueService",void 0),Io([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),Io([(0,f.Qnc)("rowNodeSorter")],t.prototype,"rowNodeSorter",void 0),Io([(0,f.Qnc)("sortController")],t.prototype,"sortController",void 0),Io([(0,f.T7N)("aggregationStage")],t.prototype,"aggregationStage",void 0),t}(f._QX),cM=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),eu=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},dM=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return cM(t,o),t.prototype.getColumn=function(e){return this.columnModel.getPrimaryColumn(e)},t.prototype.getAllDisplayedColumns=function(){return this.columnModel.getAllDisplayedColumns()},t.prototype.getColDisplayName=function(e){return this.columnModel.getDisplayNameForColumn(e,"chart")},t.prototype.getRowGroupColumns=function(){return this.columnModel.getRowGroupColumns()},t.prototype.getGroupDisplayColumns=function(){return this.columnModel.getGroupDisplayColumns()},t.prototype.isPivotMode=function(){return this.columnModel.isPivotMode()},t.prototype.isPivotActive=function(){return this.columnModel.isPivotActive()},t.prototype.getChartColumns=function(){var e=this,r=this.columnModel.getAllDisplayedColumns(),n=new Set,i=new Set;return r.forEach(function(a){var s=a.getColDef(),l=s.chartDataType;if(l)switch(l){case"category":case"time":return void n.add(a);case"series":return void i.add(a);case"excluded":return;default:console.warn("AG Grid: unexpected chartDataType value '"+l+"' supplied, instead use 'category', 'series' or 'excluded'")}"ag-Grid-AutoColumn"!==s.colId?a.isPrimary()?(e.isNumberCol(a)?i:n).add(a):i.add(a):n.add(a)}),{dimensionCols:n,valueCols:i}},t.prototype.isNumberCol=function(e){if("ag-Grid-AutoColumn"===e.getColId())return!1;var r=this.rowRenderer.getRowNode({rowIndex:0,rowPinned:null});if(!r)return!1;var n=this.valueService.getValue(e,r);return null==n&&(n=this.extractLeafData(r,e)),null!=n&&"function"==typeof n.toNumber&&(n=n.toNumber()),"number"==typeof n},t.prototype.extractLeafData=function(e,r){if(!e.allLeafChildren)return null;for(var n=0;n<e.allLeafChildren.length;n++){var a=this.valueService.getValue(r,e.allLeafChildren[n]);if(null!=a)return a}return null},eu([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),eu([(0,f.Qnc)("valueService")],t.prototype,"valueService",void 0),eu([(0,f.Qnc)("rowRenderer")],t.prototype,"rowRenderer",void 0),eu([(0,f.ekA)("chartColumnService")],t)}(f._QX),fM=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),pM=function(o){function t(e){var r,n=o.call(this)||this;return n.suppressComboChartWarnings=!1,n.chartDataModel=e,n.seriesChartTypes=null!==(r=e.params.seriesChartTypes)&&void 0!==r?r:[],n}return fM(t,o),t.prototype.init=function(){this.initComboCharts()},t.prototype.update=function(e){this.seriesChartTypes=e??this.seriesChartTypes,this.initComboCharts(),this.updateSeriesChartTypes()},t.prototype.initComboCharts=function(){("customCombo"===this.chartDataModel.chartType||this.seriesChartTypes&&this.seriesChartTypes.length>0)&&(this.chartDataModel.chartType="customCombo",this.savedCustomSeriesChartTypes=this.seriesChartTypes||[])},t.prototype.updateSeriesChartTypes=function(){if(this.chartDataModel.isComboChart()){if(this.seriesChartTypes=this.seriesChartTypes.map(function(e){var r=["groupedColumn","stackedColumn","stackedArea"].includes(e.chartType);return e.secondaryAxis=!r&&e.secondaryAxis,e}),"customCombo"===this.chartDataModel.chartType)return void this.updateSeriesChartTypesForCustomCombo();this.updateChartSeriesTypesForBuiltInCombos()}},t.prototype.updateSeriesChartTypesForCustomCombo=function(){var e=this;!(this.seriesChartTypes&&this.seriesChartTypes.length>0)&&!this.suppressComboChartWarnings&&console.warn("AG Grid: 'seriesChartTypes' are required when the 'customCombo' chart type is specified."),this.seriesChartTypes=this.seriesChartTypes.map(function(a){return t.SUPPORTED_COMBO_CHART_TYPES.includes(a.chartType)||(console.warn("AG Grid: invalid chartType '"+a.chartType+"' supplied in 'seriesChartTypes', converting to 'line' instead."),a.chartType="line"),a});var i=this.chartDataModel.valueColState.map(function(a){return(!e.savedCustomSeriesChartTypes||0===e.savedCustomSeriesChartTypes.length)&&(e.savedCustomSeriesChartTypes=e.seriesChartTypes),e.savedCustomSeriesChartTypes.find(function(l){return l.colId===a.colId})||(a.selected&&!e.suppressComboChartWarnings&&console.warn("AG Grid: no 'seriesChartType' found for colId = '"+a.colId+"', defaulting to 'line'."),{colId:a.colId,chartType:"line",secondaryAxis:!1})});this.seriesChartTypes=i,this.savedCustomSeriesChartTypes=i,this.suppressComboChartWarnings=!0},t.prototype.updateChartSeriesTypesForBuiltInCombos=function(){var e=this.chartDataModel,r=e.chartType,i="columnLineCombo"===r?"groupedColumn":"stackedArea",a="columnLineCombo"===r?"line":"groupedColumn",s=e.valueColState.filter(function(u){return u.selected}),l=Math.ceil(s.length/2);this.seriesChartTypes=s.map(function(u,c){return{colId:u.colId,chartType:c>=l?a:i,secondaryAxis:!1}})},t.SUPPORTED_COMBO_CHART_TYPES=["line","groupedColumn","stackedColumn","area","stackedArea"],function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);n>3&&i&&Object.defineProperty(t,e,i)}([f.QhY],t.prototype,"init",null),t}(f._QX),vM=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),tu=function(){return tu=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},tu.apply(this,arguments)},md=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},ns=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},is=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},Sd=function(o){function t(e){var r=o.call(this)||this;return r.unlinked=!1,r.chartData=[],r.valueColState=[],r.dimensionColState=[],r.columnNames={},r.crossFiltering=!1,r.grouping=!1,r.params=e,r.chartId=e.chartId,r.chartType=e.chartType,r.pivotChart=e.pivotChart,r.chartThemeName=e.chartThemeName,r.aggFunc=e.aggFunc,r.referenceCellRange=e.cellRange,r.suppliedCellRange=e.cellRange,r.suppressChartRanges=e.suppressChartRanges,r.unlinked=!!e.unlinkChart,r.crossFiltering=!!e.crossFiltering,r}return vM(t,o),t.prototype.init=function(){this.datasource=this.createManagedBean(new uM),this.chartColumnService=this.createManagedBean(new dM),this.comboChartModel=this.createManagedBean(new pM(this)),this.updateCellRanges(),this.updateData()},t.prototype.updateModel=function(e){var r=e.cellRange,n=e.chartType,i=e.pivotChart,a=e.chartThemeName,s=e.aggFunc,l=e.suppressChartRanges,u=e.unlinkChart,c=e.crossFiltering,d=e.seriesChartTypes;r!==this.suppliedCellRange&&(this.dimensionCellRange=void 0,this.valueCellRange=void 0),this.chartType=n,this.pivotChart=i,this.chartThemeName=a,this.aggFunc=s,this.referenceCellRange=r,this.suppliedCellRange=r,this.suppressChartRanges=l,this.unlinked=!!u,this.crossFiltering=!!c,this.updateSelectedDimension(r?.columns),this.updateCellRanges(),(this.isComboChart()||d)&&this.comboChartModel.update(d),this.unlinked||this.updateData()},t.prototype.updateCellRanges=function(e){this.valueCellRange&&(this.referenceCellRange=this.valueCellRange);var r=this.chartColumnService.getChartColumns(),n=r.dimensionCols,i=r.valueCols,a=this.getAllColumnsFromRanges();e&&this.updateColumnState(e),this.setDimensionCellRange(n,a,e),this.setValueCellRange(i,a,e),e||(this.resetColumnState(),this.syncDimensionCellRange()),this.comboChartModel.updateSeriesChartTypes()},t.prototype.updateData=function(){var e=this.getRowIndexes(),r=e.startRow,n=e.endRow;this.pivotChart&&this.resetColumnState(),this.grouping=this.isGrouping();var i={aggFunc:this.aggFunc,dimensionCols:[this.getSelectedDimension()],grouping:this.grouping,pivoting:this.isPivotActive(),crossFiltering:this.crossFiltering,valueCols:this.getSelectedValueCols(),startRow:r,endRow:n,isScatter:f._.includes(["scatter","bubble"],this.chartType)},a=this.datasource.getData(i),l=a.columnNames;this.chartData=a.chartData,this.columnNames=l},t.prototype.isGrouping=function(){var e=this.gridOptionsService.is("treeData"),r=e?null:this.chartColumnService.getRowGroupColumns(),n=e||r&&r.length>0,i=this.getSelectedDimension().colId,s=this.chartColumnService.getGroupDisplayColumns().map(function(l){return l.getColId()}).some(function(l){return l===i});return!!n&&s},t.prototype.getSelectedValueCols=function(){return this.valueColState.filter(function(e){return e.selected}).map(function(e){return e.column})},t.prototype.getSelectedDimension=function(){return this.dimensionColState.filter(function(e){return e.selected})[0]},t.prototype.getColDisplayName=function(e){return this.chartColumnService.getColDisplayName(e)},t.prototype.isPivotMode=function(){return this.chartColumnService.isPivotMode()},t.prototype.getChartDataType=function(e){var r=this.chartColumnService.getColumn(e);return r?r.getColDef().chartDataType:void 0},t.prototype.isPivotActive=function(){return this.chartColumnService.isPivotActive()},t.prototype.createCellRange=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return{id:this.chartId,startRow:this.referenceCellRange.startRow,endRow:this.referenceCellRange.endRow,columns:r,startColumn:e===f.kVf.DIMENSION?r[0]:this.referenceCellRange.startColumn,type:e}},t.prototype.getAllColumnsFromRanges=function(){if(this.pivotChart)return f._.convertToSet(this.chartColumnService.getAllDisplayedColumns());var e=this.dimensionCellRange||this.valueCellRange?[]:this.referenceCellRange.columns;return this.dimensionCellRange&&e.push.apply(e,is([],ns(this.dimensionCellRange.columns))),this.valueCellRange&&e.push.apply(e,is([],ns(this.valueCellRange.columns))),f._.convertToSet(e)},t.prototype.getRowIndexes=function(){var e=0,r=0,i=this.rangeService,a=this.valueCellRange;if(i&&a){e=i.getRangeStartRow(a).rowIndex;var s=i.getRangeEndRow(a);r="bottom"===s.rowPinned?-1:s.rowIndex}return{startRow:e,endRow:r}},t.prototype.resetColumnState=function(){var e=this,r=this.chartColumnService.getChartColumns(),n=r.dimensionCols,i=r.valueCols,a=this.getAllColumnsFromRanges(),s=this.valueColState.length<1;this.dimensionColState=[],this.valueColState=[];var l=!1,u=1,c=this.suppliedCellRange.columns[0];n.forEach(function(p){var v="ag-Grid-AutoColumn"===p.getColId(),g=!1;e.crossFiltering&&e.aggFunc?c.getColId()===p.getColId()&&(g=!0):g=!!v||!l&&a.has(p),e.dimensionColState.push({column:p,colId:p.getColId(),displayName:e.getColDisplayName(p),selected:g,order:u++}),g&&(l=!0)});var d={colId:t.DEFAULT_CATEGORY,displayName:this.chartTranslationService.translate("defaultCategory"),selected:!l,order:0};this.dimensionColState.unshift(d);var h=this.referenceCellRange.columns.filter(function(p){return i.has(p)});i.forEach(function(p){s&&f._.includes(e.referenceCellRange.columns,p)&&(p=h.shift()),e.valueColState.push({column:p,colId:p.getColId(),displayName:e.getColDisplayName(p),selected:a.has(p),order:u++})})},t.prototype.updateColumnState=function(e){var r=function(u){return u.colId===e.colId},i=this.dimensionColState,a=this.valueColState;i.filter(r).length>0?i.forEach(function(u){return u.selected=r(u)}):a.filter(r).forEach(function(u){return u.selected=e.selected});var s=is(is([],ns(i)),ns(a)),l=[];s.forEach(function(u,c){c===e.order&&l.push(e.colId),u.colId!==e.colId&&l.push(u.colId)}),s.forEach(function(u){var c=l.indexOf(u.colId);u.order=c>=0?l.indexOf(u.colId):s.length-1}),this.reorderColState()},t.prototype.reorderColState=function(){var e=function(r,n){return r.order-n.order};this.dimensionColState.sort(e),this.valueColState.sort(e)},t.prototype.setDimensionCellRange=function(e,r,n){var i=this;if(this.dimensionCellRange=void 0,n||this.dimensionColState.length){var a=n;if(this.crossFiltering&&this.aggFunc){var s=this.suppliedCellRange.columns[0];a=this.dimensionColState.filter(function(l){return l.colId===s.getColId()})[0]}else(!a||!e.has(a.column))&&(a=this.dimensionColState.filter(function(l){return l.selected})[0]);a&&a.colId!==t.DEFAULT_CATEGORY&&(this.dimensionCellRange=this.createCellRange(f.kVf.DIMENSION,a.column))}else e.forEach(function(l){i.dimensionCellRange||!r.has(l)||(i.dimensionCellRange=i.createCellRange(f.kVf.DIMENSION,l))})},t.prototype.setValueCellRange=function(e,r,n){this.valueCellRange=void 0;var i=[];if(e.forEach(function(s){n&&n.colId===s.getColId()?n.selected&&i.push(n.column):r.has(s)&&i.push(s)}),i.length>0){var a=[];this.valueColState.length>0?a=this.valueColState.map(function(s){return s.colId}):r.forEach(function(s){return a.push(s.getColId())}),i.sort(function(s,l){return a.indexOf(s.getColId())-a.indexOf(l.getColId())}),this.valueCellRange=this.createCellRange.apply(this,is([f.kVf.VALUE],ns(i)))}},t.prototype.updateSelectedDimension=function(e){var r=new Set(e.map(function(i){return i.getColId()})),n=this.dimensionColState.find(function(i){return r.has(i.colId)})||this.dimensionColState[0];this.dimensionColState=this.dimensionColState.map(function(i){return tu(tu({},i),{selected:i.colId===n.colId})})},t.prototype.syncDimensionCellRange=function(){var e=this.getSelectedDimension();e&&e.column&&(this.dimensionCellRange=this.createCellRange(f.kVf.DIMENSION,e.column))},t.prototype.isComboChart=function(){return["columnLineCombo","areaColumnCombo","customCombo"].includes(this.chartType)},t.DEFAULT_CATEGORY="AG-GRID-DEFAULT-CATEGORY",md([(0,f.Qnc)("rangeService")],t.prototype,"rangeService",void 0),md([(0,f.Qnc)("chartTranslationService")],t.prototype,"chartTranslationService",void 0),md([f.QhY],t.prototype,"init",null),t}(f._QX);function Og(o){return null!=o.chart?o.chart:o}var mi=function(){return mi=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},mi.apply(this,arguments)},Eg=function(){function o(t){this.chartProxyParams=t,this.clearThemeOverrides=!1,this.chart=t.chartInstance,this.chartType=t.chartType,this.crossFiltering=t.crossFiltering,this.crossFilterCallback=t.crossFilterCallback,this.standaloneChartType=Jt(this.chartType),null==this.chart?this.chart=ci.create(this.getCommonChartOptions()):this.clearThemeOverrides=!0}return o.prototype.getChart=function(){return Og(this.chart)},o.prototype.getChartRef=function(){return this.chart},o.prototype.downloadChart=function(t,e,r){var n=this.chart,i=Og(n),s=t||{};ci.download(n,{width:s.width,height:s.height,fileName:e||(i.title?i.title.text:"chart"),fileFormat:r})},o.prototype.getChartImageDataURL=function(t){return this.getChart().scene.getDataURL(t)},o.prototype.getChartOptions=function(){return this.chart.getOptions()},o.prototype.getChartThemeOverrides=function(){var t;return null!==(t=this.getChartOptions().theme.overrides)&&void 0!==t?t:{}},o.prototype.getChartPalette=function(){return Ua(this.getChartOptions().theme).palette},o.prototype.setPaired=function(t){var e,r=Jt(this.chartProxyParams.chartType);ci.updateDelta(this.chart,{theme:{overrides:(e={},e[r]={paired:t},e)}})},o.prototype.isPaired=function(){var t=Jt(this.chartProxyParams.chartType);return f._.get(this.getChartThemeOverrides(),t+".paired",!0)},o.prototype.lookupCustomChartTheme=function(t){return ag(this.chartProxyParams,t)},o.prototype.transformData=function(t,e,r){return r?t.map(function(n,i){var a=n[e],s=a&&a.toString?a.toString():"",l=mi({},n);return l[e]={id:i,value:a,toString:function(){return s}},l}):t},o.prototype.getCommonChartOptions=function(t){var e,r,n=this.clearThemeOverrides?{}:null!==(r=null===(e=this.chart)||void 0===e?void 0:e.getOptions())&&void 0!==r?r:{},i=null!=this.chart?{overrides:this.getActiveFormattingPanelOverrides()}:{};return this.clearThemeOverrides=!1,mi(mi({},n),{theme:mi(mi({},wA(this.chartProxyParams,this)),t?{overrides:t}:i),container:this.chartProxyParams.parentElement,mode:"integrated"})},o.prototype.getActiveFormattingPanelOverrides=function(){var t,e;if(this.clearThemeOverrides)return{};var r=null===(t=this.chart)||void 0===t?void 0:t.getOptions().theme;return null!==(e=r?.overrides)&&void 0!==e?e:{}},o.prototype.destroy=function(t){var r=(void 0===t?{}:t).keepChartInstance;if(void 0!==r&&r)return this.chart;this.destroyChart()},o.prototype.destroyChart=function(){this.chart&&(this.chart.destroy(),this.chart=void 0)},o}(),gM=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ru=function(){return ru=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},ru.apply(this,arguments)},Lo=function(o){function t(e){var r=o.call(this,e)||this;return r.crossFilteringAllPoints=new Set,r.crossFilteringSelectedPoints=[],r}return gM(t,o),t.prototype.update=function(e){var r=this.getAxes(e),n=ru(ru({},this.getCommonChartOptions(e.updatedOverrides)),{data:this.getData(e,r),axes:r,series:this.getSeries(e)});ci.update(this.getChartRef(),n)},t.prototype.getData=function(e,r){var n,i=["area","line"].includes(this.standaloneChartType),a="bar"===this.standaloneChartType?"left":"bottom",s="category"===(null===(n=r.find(function(l){return l.position===a}))||void 0===n?void 0:n.type);return this.crossFiltering&&i?this.getCrossFilterData(e):this.getDataTransformedData(e,s)},t.prototype.getDataTransformedData=function(e,r){return this.transformData(e.data,e.category.id,r)},t.prototype.getXAxisType=function(e){return e.grouping?"groupedCategory":t.isTimeAxis(e)?"time":"category"},t.isTimeAxis=function(e){if(e.category&&e.category.chartDataType)return"time"===e.category.chartDataType;var r=e.data[0];return(r&&r[e.category.id])instanceof Date},t.prototype.crossFilteringReset=function(){this.crossFilteringSelectedPoints=[],this.crossFilteringAllPoints.clear()},t.prototype.crossFilteringPointSelected=function(e){return 0==this.crossFilteringSelectedPoints.length||this.crossFilteringSelectedPoints.includes(e)},t.prototype.crossFilteringDeselectedPoints=function(){return this.crossFilteringSelectedPoints.length>0&&this.crossFilteringAllPoints.size!==this.crossFilteringSelectedPoints.length},t.prototype.extractLineAreaCrossFilterSeries=function(e,r){var n=this;return e.map(function(a){return a.yKey=function(a){return"area"===n.standaloneChartType?r.getCrossFilteringContext().lastSelectedChartId===r.chartId?a+"-total":a:a+"-total"}(a.yKey),a.listeners={nodeClick:function(s){n.crossFilteringAddSelectedPoint(s.event.metaKey||s.event.ctrlKey,s.datum[a.xKey]),n.crossFilterCallback(s)}},a.marker={formatter:function(s){return{fill:s.highlighted?"yellow":s.fill,size:s.highlighted?14:n.crossFilteringPointSelected(s.datum[r.category.id])?8:0}}},"area"===n.standaloneChartType&&(a.fillOpacity=n.crossFilteringDeselectedPoints()?.3:1),"line"===n.standaloneChartType&&(a.strokeOpacity=n.crossFilteringDeselectedPoints()?.3:1),a})},t.prototype.getCrossFilterData=function(e){var r=this;this.crossFilteringAllPoints.clear();var n=e.fields[0].colId,i=n+"-filtered-out",a=e.getCrossFilteringContext().lastSelectedChartId;return e.data.map(function(s){var l=s[e.category.id];r.crossFilteringAllPoints.add(l);var u=r.crossFilteringPointSelected(l);return"area"===r.standaloneChartType&&a===e.chartId&&(s[n+"-total"]=u?s[n]:s[n]+s[i]),"line"===r.standaloneChartType&&(s[n+"-total"]=u?s[n]:s[n]+s[i]),s})},t.prototype.crossFilteringAddSelectedPoint=function(e,r){e?this.crossFilteringSelectedPoints.push(r):this.crossFilteringSelectedPoints=[r]},t}(Eg);function os(o,t){return!1!==t.clone&&t.isMergeableObject(o)?Si(function yM(o){return Array.isArray(o)?[]:{}}(o),o,t):o}function mM(o,t,e){return o.concat(t).map(function(r){return os(r,e)})}function Tg(o){return Object.keys(o).concat(function CM(o){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(o).filter(function(t){return o.propertyIsEnumerable(t)}):[]}(o))}function Pg(o,t){try{return t in o}catch{return!1}}function wM(o){return function bM(o){return!!o&&"object"==typeof o}(o)&&!function OM(o){var t=Object.prototype.toString.call(o);return"[object RegExp]"===t||"[object Date]"===t}(o)}function Si(o,t,e){(e=e||{}).arrayMerge=e.arrayMerge||mM,e.isMergeableObject=e.isMergeableObject||wM,e.cloneUnlessOtherwiseSpecified=os;var r=Array.isArray(t);return r===Array.isArray(o)?r?e.arrayMerge(o,t,e):function xM(o,t,e){void 0===o&&(o={}),void 0===t&&(t={});var r={};return e.isMergeableObject(o)&&Tg(o).forEach(function(n){r[n]=os(o[n],e)}),Tg(t).forEach(function(n){(function _M(o,t){return Pg(o,t)&&!(Object.hasOwnProperty.call(o,t)&&Object.propertyIsEnumerable.call(o,t))})(o,n)||(r[n]=Pg(o,n)&&e.isMergeableObject(t[n])?function SM(o,t){if(!t.customMerge)return Si;var e=t.customMerge(o);return"function"==typeof e?e:Si}(n,e)(o[n],t[n],e):os(t[n],e))}),r}(o,t,e):os(t,e)}function Ag(o,t){var e=parseInt(o.slice(1,3),16),r=parseInt(o.slice(3,5),16),n=parseInt(o.slice(5,7),16);return t?"rgba("+e+", "+r+", "+n+", "+t+")":"rgba("+e+", "+r+", "+n+")"}function Dg(o,t){return o.map(function(e){var r=Xe.fromString(e);return new Xe(r.r,r.g,r.b,t).toHexString()})}var EM=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Fn=function(){return Fn=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},Fn.apply(this,arguments)},TM=function(o){function t(e){return o.call(this,e)||this}return EM(t,o),t.prototype.getAxes=function(e){var r="bar"===this.standaloneChartType,n=[{type:this.getXAxisType(e),position:r?"left":"bottom"},{type:"number",position:r?"bottom":"left"}];if(this.isNormalised()){var i=n[1];i.label=Fn(Fn({},i.label),{formatter:function(a){return Math.round(a.value)+"%"}})}return n},t.prototype.getSeries=function(e){var r=this,i=!this.crossFiltering&&f._.includes(["groupedColumn","groupedBar"],this.chartType),a=e.fields.map(function(s){return{type:r.standaloneChartType,grouped:i,stacked:["stackedColumn","normalizedColumn","stackedBar","normalizedBar"].includes(r.chartType),normalizedTo:r.isNormalised()?100:void 0,xKey:e.category.id,xName:e.category.name,yKey:s.colId,yName:s.displayName}});return this.crossFiltering?this.extractCrossFilterSeries(a):a},t.prototype.extractCrossFilterSeries=function(e){for(var n=this.getChartPalette(),a=function(c){var d=c.yKey+"-filtered-out";return Fn(Fn({},Si({},c)),{yKey:d,fill:Ag(c.fill,"0.3"),stroke:Ag(c.stroke,"0.3"),showInLegend:!1})},s=[],l=0;l<e.length;l++){var u=(d=l,Fn(Fn({},e[l]),{highlightStyle:{item:{fill:void 0}},fill:n?.fills[d],stroke:n?.strokes[d],listeners:{nodeClick:this.crossFilterCallback}}));s.push(u),s.push(a(u))}var d;return s},t.prototype.isNormalised=function(){return!this.crossFiltering&&f._.includes(["normalizedColumn","normalizedBar"],this.chartType)},t}(Lo),PM=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),nu=function(){return nu=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},nu.apply(this,arguments)},AM=function(o){function t(e){return o.call(this,e)||this}return PM(t,o),t.prototype.getAxes=function(e){var r=[{type:this.getXAxisType(e),position:"bottom"},{type:"number",position:"left"}];if(this.isNormalised()){var n=r[1];n.label=nu(nu({},n.label),{formatter:function(i){return Math.round(i.value)+"%"}})}return r},t.prototype.getSeries=function(e){var r=this,n=e.fields.map(function(i){return{type:r.standaloneChartType,xKey:e.category.id,xName:e.category.name,yKey:i.colId,yName:i.displayName,normalizedTo:"normalizedArea"===r.chartType?100:void 0,stacked:["normalizedArea","stackedArea"].includes(r.chartType)}});return this.crossFiltering?this.extractLineAreaCrossFilterSeries(n,e):n},t.prototype.isNormalised=function(){return!this.crossFiltering&&"normalizedArea"===this.chartType},t}(Lo),DM=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),MM=function(o){function t(e){return o.call(this,e)||this}return DM(t,o),t.prototype.getAxes=function(e){return[{type:this.getXAxisType(e),position:"bottom"},{type:"number",position:"left"}]},t.prototype.getSeries=function(e){var r=this,n=e.fields.map(function(i){return{type:r.standaloneChartType,xKey:e.category.id,xName:e.category.name,yKey:i.colId,yName:i.displayName}});return this.crossFiltering?this.extractLineAreaCrossFilterSeries(n,e):n},t}(Lo),RM=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),rr=function(){return rr=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},rr.apply(this,arguments)},FM=function(o){function t(e){return o.call(this,e)||this}return RM(t,o),t.prototype.update=function(e){var r=e.data,n=e.category,i=rr(rr({},this.getCommonChartOptions(e.updatedOverrides)),{data:this.crossFiltering?this.getCrossFilterData(e):this.transformData(r,n.id),series:this.getSeries(e)});ci.update(this.getChartRef(),i)},t.prototype.getSeries=function(e){var r=this,n=e.fields.length,i={currentOffset:0,offsetAmount:n>1?20:40},a=this.getFields(e).map(function(s){var l,u={type:r.standaloneChartType,angleKey:s.colId,angleName:s.displayName,sectorLabelKey:s.colId,calloutLabelKey:e.category.id,calloutLabelName:e.category.name};if("doughnut"===r.chartType){var c=t.calculateOffsets(i),d=c.outerRadiusOffset,h=c.innerRadiusOffset,p=s.displayName?{title:{text:s.displayName,showInLegend:n>1}}:void 0;return rr(rr(rr(rr({},u),{outerRadiusOffset:d,innerRadiusOffset:h}),p),{calloutLine:{colors:null===(l=r.getChartPalette())||void 0===l?void 0:l.strokes}})}return u});return this.crossFiltering?this.extractCrossFilterSeries(a):a},t.prototype.getCrossFilterData=function(e){var r=e.fields[0].colId,n=r+"-filtered-out";return e.data.map(function(i){var a=i[r]+i[n];return i[r+"-total"]=a,i[n]=1,i[r]=i[r]/a,i})},t.prototype.extractCrossFilterSeries=function(e){var c,n=this.getChartPalette(),s=e[0],l=s.angleKey,u=rr(rr({},c=s),{calloutLabel:{enabled:!1},highlightStyle:{item:{fill:void 0}},radiusKey:c.angleKey,angleKey:c.angleKey+"-total",radiusMin:0,radiusMax:1,listeners:{nodeClick:this.crossFilterCallback}});return[function(c,d){var h,p;return rr(rr({},Si({},u)),{radiusKey:d+"-filtered-out",fills:Dg(null!==(h=c.fills)&&void 0!==h?h:n.fills,.3),strokes:Dg(null!==(p=c.strokes)&&void 0!==p?p:n.strokes,.3),showInLegend:!1})}(s,l),u]},t.calculateOffsets=function(e){var r=e.currentOffset;e.currentOffset-=e.offsetAmount;var n=e.currentOffset;return e.currentOffset-=e.offsetAmount,{outerRadiusOffset:r,innerRadiusOffset:n}},t.prototype.getFields=function(e){return"pie"===this.chartType?e.fields.slice(0,1):e.fields},t.prototype.crossFilteringReset=function(){},t}(Eg),IM=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),nt=function(){return nt=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},nt.apply(this,arguments)},Mg=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Rg=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},NM=function(o){function t(e){return o.call(this,e)||this}return IM(t,o),t.prototype.getAxes=function(e){return[{type:"number",position:"bottom"},{type:"number",position:"left"}]},t.prototype.getSeries=function(e){var r=this,n=this.isPaired(),i=this.getSeriesDefinitions(e.fields,n),a=e.category.id===Sd.DEFAULT_CATEGORY?void 0:e.category,s=i.map(function(l){return{type:r.standaloneChartType,xKey:l.xField.colId,xName:l.xField.displayName,yKey:l.yField.colId,yName:l.yField.displayName,title:l.yField.displayName+" vs "+l.xField.displayName,sizeKey:l.sizeField?l.sizeField.colId:void 0,sizeName:l.sizeField?l.sizeField.displayName:void 0,labelKey:a?a.id:l.yField.colId,labelName:a?a.name:void 0}});return this.crossFiltering?this.extractCrossFilterSeries(s,e):s},t.prototype.extractCrossFilterSeries=function(e,r){var n=this,i=r.data,a=this.getChartPalette(),s=function(h){return h+"-filtered-out"},d=e.map(function(h,p){var v=h.sizeKey,g=a?.fills[p],y=a?.strokes[p],S=function(h,p){var v,g,y,S=[1/0,-1/0];if(null!=p)try{for(var m=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(h),C=m.next();!C.done;C=m.next()){var _=C.value,w=null!==(y=_[p])&&void 0!==y?y:_[s(p)];w<S[0]&&(S[0]=w),w>S[1]&&(S[1]=w)}}catch(x){v={error:x}}finally{try{C&&!C.done&&(g=m.return)&&g.call(m)}finally{if(v)throw v.error}}if(S[0]<=S[1])return S}(i,v),m=nt(nt({},h.marker),{fill:g,stroke:y,domain:S});return nt(nt({},h),{marker:m,highlightStyle:{item:{fill:"yellow"}},listeners:nt(nt({},h.listeners),{nodeClick:n.crossFilterCallback})})});return Rg(Rg([],Mg(d)),Mg(d.map(function(h){var p=h.sizeKey,v=h.yKey,g=h.xKey;return null!=p&&(p=s(p)),nt(nt({},h),{yKey:s(v),xKey:s(g),marker:nt(nt({},h.marker),{fillOpacity:.3,strokeOpacity:.3}),sizeKey:p,showInLegend:!1,listeners:nt(nt({},h.listeners),{nodeClick:function(y){var S,m=y.datum[s(g)],C=nt(nt({},y),{xKey:g,datum:nt(nt({},y.datum),(S={},S[g]=m,S))});n.crossFilterCallback(C)}})})})))},t.prototype.getSeriesDefinitions=function(e,r){if(e.length<2)return[];var n="bubble"===this.chartType;if(r)return n?e.map(function(a,s){return s%3==0?{xField:a,yField:e[s+1],sizeField:e[s+2]}:null}).filter(function(a){return a&&a.yField&&a.sizeField}):e.map(function(a,s){return s%2==0?{xField:a,yField:e[s+1]}:null}).filter(function(a){return a&&a.yField});var i=e[0];return n?e.map(function(a,s){return s%2==1?{xField:i,yField:a,sizeField:e[s+1]}:null}).filter(function(a){return a&&a.sizeField}):e.filter(function(a,s){return s>0}).map(function(a){return{xField:i,yField:a}})},t}(Lo),kM=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),GM=function(o){function t(e){return o.call(this,e)||this}return kM(t,o),t.prototype.getSeries=function(e){var r=e.fields[0];return[{type:this.standaloneChartType,xKey:r.colId,xName:r.displayName,yName:this.chartProxyParams.translate("histogramFrequency"),areaPlot:!1}]},t.prototype.getAxes=function(e){return[{type:"number",position:"bottom"},{type:"number",position:"left"}]},t}(Lo),VM=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),BM=function(o){function t(e){var r=o.call(this)||this;return r.chartController=e,r}return VM(t,o),t.prototype.getChartOption=function(e){return f._.get(this.getChart(),e,void 0)},t.prototype.setChartOption=function(e,r,n){var i=this,a=this.chartController.getChartSeriesTypes();this.chartController.isComboChart()&&a.push("cartesian");var s={};a.forEach(function(l){s=Si(s,i.createChartOptions({seriesType:l,expression:e,value:r}))}),this.updateChart(s),n||this.raiseChartOptionsChangedEvent()},t.prototype.awaitChartOptionUpdate=function(e){this.chartController.getChartProxy().getChart().waitForUpdate().then(function(){return e()}).catch(function(n){return console.error("AG Grid - chart update failed",n)})},t.prototype.getAxisProperty=function(e){var r;return f._.get(null===(r=this.getChart().axes)||void 0===r?void 0:r[0],e,void 0)},t.prototype.setAxisProperty=function(e,r){var i,n=this,a=this.getChart(),s={};null===(i=a.axes)||void 0===i||i.forEach(function(l){s=Si(s,n.getUpdateAxisOptions(l,e,r))}),this.updateChart(s),this.raiseChartOptionsChangedEvent()},t.prototype.getLabelRotation=function(e){var r=this.getAxis(e);return f._.get(r,"label.rotation",void 0)},t.prototype.setLabelRotation=function(e,r){var n=this.getAxis(e);if(n){var i=this.getUpdateAxisOptions(n,"label.rotation",r);this.updateChart(i),this.raiseChartOptionsChangedEvent()}},t.prototype.getSeriesOption=function(e,r){var n=this.getChart().series.find(function(i){return t.isMatchingSeries(r,i)});return f._.get(n,e,void 0)},t.prototype.setSeriesOption=function(e,r,n){var i=this.createChartOptions({seriesType:n,expression:"series."+e,value:r});this.updateChart(i),this.raiseChartOptionsChangedEvent()},t.prototype.getPairedMode=function(){return this.chartController.getChartProxy().isPaired()},t.prototype.setPairedMode=function(e){this.chartController.getChartProxy().setPaired(e)},t.prototype.getAxis=function(e){var r=this.getChart();if(r.axes&&!(r.axes.length<1))return"xAxis"===e?r.axes&&"x"===r.axes[0].direction?r.axes[0]:r.axes[1]:r.axes&&"y"===r.axes[1].direction?r.axes[1]:r.axes[0]},t.prototype.getUpdateAxisOptions=function(e,r,n){var i=Jt(this.getChartType());return["number","category","time","groupedCategory"].includes(e.type)?this.createChartOptions({seriesType:i,expression:"axes."+e.type+"."+r,value:n}):{}},t.prototype.getChartType=function(){return this.chartController.getChartType()},t.prototype.getChart=function(){return this.chartController.getChartProxy().getChart()},t.prototype.updateChart=function(e){var r=this.chartController.getChartProxy().getChartRef();ci.updateDelta(r,e)},t.prototype.createChartOptions=function(e){var a={},s={theme:{overrides:a}};return f._.set(a,e.seriesType+"."+e.expression,e.value),s},t.prototype.raiseChartOptionsChangedEvent=function(){var e=this.chartController.getChartModel(),r={type:f.YFc.EVENT_CHART_OPTIONS_CHANGED,chartId:e.chartId,chartType:e.chartType,chartThemeName:this.chartController.getChartThemeName(),chartOptions:e.chartOptions};this.eventService.dispatchEvent(r)},t.isMatchingSeries=function(e,r){return _A.includes(e)&&r.type===e},t.prototype.destroy=function(){o.prototype.destroy.call(this)},t}(f._QX),jM=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Cd=function(){return Cd=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},Cd.apply(this,arguments)},zM=function(o){function t(e){return o.call(this,e)||this}return jM(t,o),t.prototype.getAxes=function(e){var r=e?e.fields:[],n=new Map(r.map(function(u){return[u.colId,u]})),i=this.getYKeys(r,e.seriesChartTypes),a=i.primaryYKeys,s=i.secondaryYKeys,l=[{type:this.getXAxisType(e),position:"bottom",gridStyle:[{stroke:void 0}]}];return a.length>0&&l.push({type:"number",keys:a,position:"left"}),s.length>0&&s.forEach(function(u,c){var d=n.get(u);if(d&&d.colId===u){var p={type:"number",keys:[u],position:"right"};!a.some(function(y){return!!n.get(y)})&&c===s.length-1||(p.gridStyle=[{stroke:void 0}]),l.push(p)}}),l},t.prototype.getSeries=function(e){var n=e.category,i=e.seriesChartTypes;return e.fields.map(function(a){var s=i.find(function(d){return d.colId===a.colId});if(s){var l=s.chartType,c=["groupedColumn","groupedBar"].includes(l)?{grouped:!0}:{};return Cd({type:Jt(l),xKey:n.id,yKey:a.colId,yName:a.displayName,stacked:["stackedArea","stackedColumn"].includes(l)},c)}})},t.prototype.getYKeys=function(e,r){var n=[],i=[];return e.forEach(function(a){var s=a.colId,l=r.find(function(u){return u.colId===s});l&&(l.secondaryAxis?i.push(s):n.push(s))}),{primaryYKeys:n,secondaryYKeys:i}},t}(Lo),HM=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ir=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Fg=function(o){function t(e){var r=o.call(this,t.TEMPLATE)||this;return r.params=e,r}return HM(t,o),t.prototype.init=function(){var e=this,r=this.gridOptionsService.get("chartThemes")||cg;if(r.length<1)throw new Error("Cannot create chart: no chart themes are available to be used.");var n=this.params.chartThemeName;f._.includes(r,n)||(n=r[0]);var i={chartId:this.params.chartId,pivotChart:this.params.pivotChart,chartType:this.params.chartType,chartThemeName:n,aggFunc:this.params.aggFunc,cellRange:this.params.cellRange,suppressChartRanges:this.params.suppressChartRanges,unlinkChart:this.params.unlinkChart,crossFiltering:this.params.crossFiltering,seriesChartTypes:this.params.seriesChartTypes},a=this.gridOptionsService.is("enableRtl");this.addCssClass(a?"ag-rtl":"ag-ltr");var s=this.createBean(new Sd(i));this.chartController=this.createManagedBean(new hr(s)),this.validateCustomThemes(),this.createChart(),this.params.insideDialog&&this.addDialog(),this.addMenu(),this.addTitleEditComp(),this.addManagedListener(this.getGui(),"focusin",this.setActiveChartCellRange.bind(this)),this.addManagedListener(this.chartController,hr.EVENT_CHART_MODEL_UPDATE,this.update.bind(this)),this.chartMenu&&this.addManagedListener(this.chartMenu,wg.EVENT_DOWNLOAD_CHART,function(){return e.downloadChart()}),this.update(),this.raiseChartCreatedEvent()},t.prototype.validateCustomThemes=function(){var e=this.getChartThemes(),r=this.gridOptionsService.get("customChartThemes");r&&f._.getAllKeysInObjects([r]).forEach(function(n){f._.includes(e,n)||console.warn("AG Grid: a custom chart theme with the name '"+n+"' has been supplied but not added to the 'chartThemes' list")})},t.prototype.createChart=function(){var e=this,r=void 0;this.chartProxy&&(r=this.chartProxy.destroy({keepChartInstance:!0}));var i=this.chartController.getChartType(),a={chartType:i,chartInstance:r,getChartThemeName:this.getChartThemeName.bind(this),getChartThemes:this.getChartThemes.bind(this),customChartThemes:this.gridOptionsService.get("customChartThemes"),getGridOptionsChartThemeOverrides:function(){return e.getGridOptionsChartThemeOverrides()},getExtraPaddingDirections:function(){var l,u;return null!==(u=null===(l=e.chartMenu)||void 0===l?void 0:l.getExtraPaddingDirections())&&void 0!==u?u:[]},apiChartThemeOverrides:this.params.chartThemeOverrides,crossFiltering:this.params.crossFiltering,crossFilterCallback:function(l,u){e.params.crossFilteringContext.lastSelectedChartId=u?"":e.chartController.getChartId(),u&&e.params.crossFilteringResetCallback(),e.crossFilterService.filter(l,u)},parentElement:this.eChart,grouping:this.chartController.isGrouping(),chartThemeToRestore:this.params.chartThemeName,chartOptionsToRestore:this.params.chartOptionsToRestore,chartPaletteToRestore:this.params.chartPaletteToRestore,seriesChartTypes:this.chartController.getSeriesChartTypes(),translate:function(l,u){return e.chartTranslationService.translate(l,u)}};if(this.params.chartOptionsToRestore=void 0,this.chartType=i,this.chartThemeName=this.chartController.getChartThemeName(),this.chartProxy=t.createChartProxy(a),this.chartProxy){var s=this.eChart.querySelector("canvas");s&&s.classList.add("ag-charts-canvas"),this.chartController.setChartProxy(this.chartProxy),this.chartOptionsService=this.createBean(new BM(this.chartController)),this.titleEdit&&this.titleEdit.refreshTitle(this.chartController,this.chartOptionsService)}else console.warn("AG Grid: invalid chart type supplied: ",a.chartType)},t.prototype.getChartThemeName=function(){return this.chartController.getChartThemeName()},t.prototype.getChartThemes=function(){return this.chartController.getThemes()},t.prototype.getGridOptionsChartThemeOverrides=function(){return this.gridOptionsService.get("chartThemeOverrides")},t.createChartProxy=function(e){switch(e.chartType){case"column":case"bar":case"groupedColumn":case"stackedColumn":case"normalizedColumn":case"groupedBar":case"stackedBar":case"normalizedBar":return new TM(e);case"pie":case"doughnut":return new FM(e);case"area":case"stackedArea":case"normalizedArea":return new AM(e);case"line":return new MM(e);case"scatter":case"bubble":return new NM(e);case"histogram":return new GM(e);case"columnLineCombo":case"areaColumnCombo":case"customCombo":return new zM(e);default:throw"AG Grid: Unable to create chart as an invalid chartType = '"+e.chartType+"' was supplied."}},t.prototype.addDialog=function(){var e=this,r=this.chartTranslationService.translate(this.params.pivotChart?"pivotChartTitle":"rangeChartTitle"),n=this.getBestDialogSize();this.chartDialog=new f.MJb({resizable:!0,movable:!0,maximizable:!0,title:r,width:n.width,height:n.height,component:this,centered:!0,closable:!0}),this.getContext().createBean(this.chartDialog),this.chartDialog.addEventListener(f.MJb.EVENT_DESTROYED,function(){return e.destroy()})},t.prototype.getBestDialogSize=function(){var e=this.popupService.getPopupParent(),r=.75*f._.getAbsoluteWidth(e),n=.75*f._.getAbsoluteHeight(e),a=this.chartProxy.getChart(),s=this.params.insideDialog?850:a.width,l=this.params.insideDialog?470:a.height;return(s>r||l>n)&&(s=Math.min(s,r),(l=Math.round(.553*s))>n&&(l=n,s=Math.min(s,Math.round(l/.553)))),{width:s,height:l}},t.prototype.addMenu=function(){this.params.crossFiltering||(this.chartMenu=this.createBean(new wg(this.eChartContainer,this.eMenuContainer,this.chartController,this.chartOptionsService)),this.eChartContainer.appendChild(this.chartMenu.getGui()))},t.prototype.addTitleEditComp=function(){this.titleEdit=this.createBean(new sM(this.chartMenu)),this.eTitleEditContainer.appendChild(this.titleEdit.getGui()),this.chartProxy&&this.titleEdit.refreshTitle(this.chartController,this.chartOptionsService)},t.prototype.update=function(e){var r=this;e?.chartId&&!this.chartController.update(e)||(this.chartTypeChanged(e)&&this.createChart(),this.updateChart(e?.chartThemeOverrides),e?.chartId&&this.chartProxy.getChart().waitForUpdate().then(function(){r.chartController.raiseChartApiUpdateEvent()}))},t.prototype.updateChart=function(e){var r=this,n=this.chartProxy,a=this.chartController.getSelectedValueColState().map(function(c){return{colId:c.colId,displayName:c.displayName}}),s=this.chartController.getChartData();if(!this.handleEmptyChart(s,a)){var u=this.chartController.getChartUpdateParams(e);n.update(u),this.chartProxy.getChart().waitForUpdate().then(function(){r.chartController.raiseChartUpdatedEvent()}),this.titleEdit.refreshTitle(this.chartController,this.chartOptionsService)}},t.prototype.chartTypeChanged=function(e){var r=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i}([this.chartController.getChartType(),e?.chartType],2),i=r[1];return this.chartType!==r[0]||!!i&&this.chartType!==i},t.prototype.getChartModel=function(){return this.chartController.getChartModel()},t.prototype.getChartImageDataURL=function(e){return this.chartProxy.getChartImageDataURL(e)},t.prototype.handleEmptyChart=function(e,r){var n=this.chartController.isPivotChart()&&!this.chartController.isPivotMode(),i=1;this.chartController.isActiveXYChart()&&(i="bubble"===this.chartController.getChartType()?3:2);var a=r.length<i||0===e.length;if(this.eChart){var s=n||a;f._.setDisplayed(this.eChart,!s),f._.setDisplayed(this.eEmpty,s)}return n?(this.eEmpty.innerText=this.chartTranslationService.translate("pivotChartRequiresPivotMode"),!0):!!a&&(this.eEmpty.innerText=this.chartTranslationService.translate("noDataToChart"),!0)},t.prototype.downloadChart=function(e,r,n){this.chartProxy.downloadChart(e,r,n)},t.prototype.openChartToolPanel=function(e){this.chartMenu.showMenu(e&&f._i4[e])},t.prototype.closeChartToolPanel=function(){this.chartMenu.hideMenu()},t.prototype.getChartId=function(){return this.chartController.getChartId()},t.prototype.getUnderlyingChart=function(){return this.chartProxy.getChartRef()},t.prototype.crossFilteringReset=function(){this.chartProxy.crossFilteringReset()},t.prototype.setActiveChartCellRange=function(e){this.getGui().contains(e.relatedTarget)||(this.chartController.setChartRange(!0),this.gridApi.focusService.clearFocusedCell())},t.prototype.raiseChartCreatedEvent=function(){var e=this,r={type:f.YFc.EVENT_CHART_CREATED,chartId:this.chartController.getChartId()};this.chartProxy.getChart().waitForUpdate().then(function(){e.eventService.dispatchEvent(r)})},t.prototype.raiseChartDestroyedEvent=function(){var e={type:f.YFc.EVENT_CHART_DESTROYED,chartId:this.chartController.getChartId()};this.eventService.dispatchEvent(e)},t.prototype.destroy=function(){o.prototype.destroy.call(this),this.chartProxy&&this.chartProxy.destroy(),this.destroyBean(this.chartMenu),this.destroyBean(this.titleEdit),this.chartDialog&&this.chartDialog.isAlive()&&this.destroyBean(this.chartDialog);var e=this.getGui();f._.clearElement(e),f._.removeFromParent(e),this.raiseChartDestroyedEvent()},t.TEMPLATE='<div class="ag-chart" tabindex="-1">\n            <div ref="eChartContainer" tabindex="-1" class="ag-chart-components-wrapper">\n                <div ref="eChart" class="ag-chart-canvas-wrapper"></div>\n                <div ref="eEmpty" class="ag-chart-empty-text ag-unselectable"></div>\n            </div>\n            <div ref="eTitleEditContainer"></div>\n            <div ref="eMenuContainer" class="ag-chart-docked-container"></div>\n        </div>',Ir([(0,f.IzG)("eChart")],t.prototype,"eChart",void 0),Ir([(0,f.IzG)("eChartContainer")],t.prototype,"eChartContainer",void 0),Ir([(0,f.IzG)("eMenuContainer")],t.prototype,"eMenuContainer",void 0),Ir([(0,f.IzG)("eEmpty")],t.prototype,"eEmpty",void 0),Ir([(0,f.IzG)("eTitleEditContainer")],t.prototype,"eTitleEditContainer",void 0),Ir([(0,f.Qnc)("chartCrossFilterService")],t.prototype,"crossFilterService",void 0),Ir([(0,f.Qnc)("chartTranslationService")],t.prototype,"chartTranslationService",void 0),Ir([(0,f.Qnc)("gridApi")],t.prototype,"gridApi",void 0),Ir([(0,f.Qnc)("popupService")],t.prototype,"popupService",void 0),Ir([f.QhY],t.prototype,"init",null),t}(f.YlN),as="30.2.1",Le=function(){return Le=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},Le.apply(this,arguments)},In=function(o,t){var e={};for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&t.indexOf(r)<0&&(e[r]=o[r]);if(null!=o&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(o);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(o,r[n])&&(e[r[n]]=o[r[n]])}return e},Ig=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},WM=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function YM(o){return o=Lr("chartOptions.legend.item.marker.type","shape",o),o=Lr("chartOptions.seriesDefaults.marker.type","shape",o),Lr("chartOptions.legend.padding","spacing",o)}function $M(o){var t,e=o=St("chartOptions.seriesDefaults.marker.minSize",o),r=e.chartType,n=e.chartPalette,i=e.chartOptions,a=i.xAxis,s=i.yAxis,l=In(i,["xAxis","yAxis"]),u=In(e,["chartType","chartPalette","chartOptions"]),c=function xA(o){switch(o){case"bar":case"stackedBar":case"normalizedBar":return["number","category"];case"groupedBar":return["number","groupedCategory"];case"column":case"stackedColumn":case"normalizedColumn":case"line":case"area":case"stackedArea":case"normalizedArea":case"histogram":return["category","number"];case"groupedColumn":return["groupedCategory","number"];case"scatter":case"bubble":return["number","number"];default:return}}(r),d=c?.map(function(h,p){return Le({type:h},0===p?a:s)});return Le({chartType:r,chartThemeName:null!==(t=aR[n])&&void 0!==t?t:"ag-default",chartOptions:Le(Le({},l),{axes:d,xAxis:a,yAxis:s})},u)}function XM(o){return Lr("chartOptions.seriesDefaults.label.minRequiredAngle","minAngle",o)}function QM(o){return o=St("chart",o=on("chartOptions.seriesDefaults.highlightStyle",o,function(e){var r=e.dimOpacity,n=In(e,["dimOpacity"]);return Le(Le({},n),null!=r?{series:{dimOpacity:r}}:{})})),o=St("chartOptions.seriesDefaults.tooltipClass",o),o=Gg("chartOptions.axes[].label.rotation",0,o=St("chartOptions.seriesDefaults.tooltipTracking",o)),Gg("chartOptions.axes[].label.rotation",335,o)}function ZM(o){var t=function(e){var r=e.item,n=e.series,i=In(e,["item","series"]);return Le({item:Le(Le({},i),r)},n?{series:n}:{})};return o=on("chartOptions.seriesDefaults.highlightStyle",o,t),on("chartOptions.series[].highlightStyle",o,t)}function qM(o){o=iu("chartOptions.seriesDefaults.fill.opacity","chartOptions.seriesDefaults.fillOpacity",o),o=iu("chartOptions.seriesDefaults.stroke.opacity","chartOptions.seriesDefaults.strokeOpacity",o),o=St("chartOptions.seriesDefaults.fill",o=iu("chartOptions.seriesDefaults.stroke.width","chartOptions.seriesDefaults.strokeWidth",o)),o=St("chartOptions.seriesDefaults.stroke",o),o=St("chartOptions.seriesDefaults.callout.colors",o),o=St("chartOptions.xAxis",o);var t=o=St("chartOptions.yAxis",o),e=t.chartType,r=t.chartOptions,n=r.axes,i=r.seriesDefaults,a=In(r,["axes","series","seriesDefaults"]),s=In(t,["chartType","chartOptions"]),l=[Jt(e)],u={};if(!l.includes("pie")){var c={top:{},bottom:{},left:{},right:{}},d=n.map(function(p){var v,g=p.type,y=In(p,["type"]);return(v={})[g]=Le(Le({},c),y),v}).reduce(Bg,{});ig.filter(function(p){return null==d[p]}).forEach(function(p){d[p]=Le({},c)}),u.axes=d}var h=l.map(function(p){var v;return(v={})[p]=Le(Le(Le({},u),{series:i}),a),v}).reduce(Bg,{});return Le(Le({},s),{chartType:e,chartOptions:h})}function JM(o){return o=St("chartOptions.*.title.padding",o),o=St("chartOptions.*.subtitle.padding",o),_d("chartOptions.*.axes.*.title.enabled",!1,o=St("chartOptions.*.axes.*.title.padding",o))}function eR(o){return o=Lr("chartOptions.pie.series.callout","calloutLine",o),o=Lr("chartOptions.pie.series.label","calloutLabel",o),o=Lr("chartOptions.pie.series.labelKey","sectorLabelKey",o),Lr("chartOptions.pie.series.labelName","sectorLabelName",o)}function tR(o){return o=ss("chartOptions.scatter.series.fill","chartOptions.scatter.series.marker.fill",o),o=ss("chartOptions.scatter.series.fillOpacity","chartOptions.scatter.series.marker.fillOpacity",o),o=ss("chartOptions.scatter.series.stroke","chartOptions.scatter.series.marker.stroke",o),o=ss("chartOptions.scatter.series.strokeOpacity","chartOptions.scatter.series.marker.strokeOpacity",o),iu("chartOptions.scatter.series.paired","chartOptions.scatter.paired",o=ss("chartOptions.scatter.series.strokeWidth","chartOptions.scatter.series.marker.strokeWidth",o))}function Lg(o){return St("chartOptions.axes[].tick.count",o)}function Ng(o){return on("chartOptions.*.tooltip",o,function(e){var r,n,i,a,s=e.tracking,l=In(e,["tracking"]),u=Le({},l);return!1===s?(null!==(r=u.position)&&void 0!==r||(u.position={type:"pointer"}),null!==(n=u.range)&&void 0!==n||(u.range="nearest")):!0===s&&(null!==(i=u.position)&&void 0!==i||(u.position={type:"node"}),null!==(a=u.range)&&void 0!==a||(u.range="nearest")),u})}function rR(o){return o=Lr("chartOptions.pie.series.labelKey","sectorLabelKey",o),_d("chartOptions.common.legend.position","right",o=Vg("chartOptions.common.legend.enabled",!0,o=St("chartOptions.*.series.flipXY",o=Ng(o=Lg(o=Lr("chartOptions.pie.series.labelName","sectorLabelName",o))))))}function jt(o,t,e){if(kg(o)>kg(t.version)){var r=e(t);return r.version=o,r}return t}function kg(o){var t=function oR(o){var t="string"==typeof o?o.split(".").map(function(e){return Number(e)}):[];if(3!==t.length||t.some(function(e){return isNaN(e)}))throw new Error("AG Grid - Illegal version string: "+o);return{major:t[0],minor:t[1],patch:t[2]}}(o);return 1e4*t.major+100*t.minor+t.patch}function Gg(o,t,e){return Ln(o,!0,e,function(r,n){r[n]===t&&delete r[n]})}function _d(o,t,e){return Ln(o,!1,e,function(r,n){null==r[n]&&(r[n]=t)})}function Vg(o,t,e){var r;"string"==typeof o&&(o=o.split("."));var n=o[0];return o.length>1&&(e[n]=Vg(o.slice(1),t,null!==(r=e[n])&&void 0!==r?r:{})),Object.keys(e).includes(n)||(e[n]=t),e}function iu(o,t,e){var r=void 0,n=!1;return e=Ln(o,!0,e,function(i,a){n=!0,r=i[a],delete i[a]}),n?Ln(t,!1,e,function(i,a){i[a]=r}):e}function ss(o,t,e){var r=void 0,n=!1;return e=Ln(o,!0,e,function(i,a){n=!0,r=i[a],delete i[a]}),n?Ln(t,!1,e,function(i,a){void 0===i[a]&&(i[a]=r)}):e}function Lr(o,t,e){return Ln(o,!0,e,function(r,n){r[t]=r[n],delete r[n]})}function St(o,t){return Ln(o,!0,t,function(e,r){return delete e[r]})}function Ln(o,t,e,r){var n=o instanceof Array?o:o.split("."),i=n.slice(0,n.length-1),a=n[n.length-1];return on(i,e,function(s){var l=Object.keys(s).includes(a);if(t&&!l)return s;var u=Le({},s);return r(u,a),u})}function on(o,t,e){var r,n,i=o instanceof Array?o:o.split(".");if(t=Le({},t),0===i.length)return e(t);if(i[0].startsWith("{")){var a=i[0].substring(1,i[0].lastIndexOf("}")).split(",");try{for(var s=WM(a),l=s.next();!l.done;l=s.next()){var u=l.value;null!=t[u]&&(t[u]=on(i.slice(1),t[u],e))}}catch(h){r={error:h}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}}else if(i[0].endsWith("[]")){var c=i[0].substring(0,o[0].indexOf("["));t[c]instanceof Array&&(t[c]=t[c].map(function(h){return on(i.slice(1),h,e)}))}else if("*"===i[0])for(var d in t)t[d]=on(i.slice(1),t[d],e);else null!=t[i[0]]&&(t[i[0]]=on(i.slice(1),t[i[0]],e));return t}var Bg=function(o,t){return Le(Le({},o),t)},aR={borneo:"ag-default",material:"ag-material",pastel:"ag-pastel",bright:"ag-vivid",flat:"ag-solar"},sR=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ou=function(){return ou=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},ou.apply(this,arguments)},au=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},jg=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.activeCharts=new Set,e.activeChartComps=new Set,e.crossFilteringContext={lastSelectedChartId:""},e}return sR(t,o),t.prototype.updateChart=function(e){if(0!==this.activeChartComps.size){var r=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o}([],function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i}(this.activeChartComps)).find(function(n){return n.getChartId()===e.chartId});r?r.update(e):console.warn("AG Grid - Unable to update chart. No active chart found with ID: "+e.chartId+".")}else console.warn("AG Grid - No active charts to update.")},t.prototype.getChartModels=function(){var e=[];return this.activeChartComps.forEach(function(n){return e.push(function(n){return ou(ou({},n),{version:as})}(n.getChartModel()))}),e},t.prototype.getChartRef=function(e){var r;return this.activeCharts.forEach(function(n){n.chartId===e&&(r=n)}),r},t.prototype.getChartComp=function(e){var r;return this.activeChartComps.forEach(function(n){n.getChartId()===e&&(r=n)}),r},t.prototype.getChartImageDataURL=function(e){var r;return this.activeChartComps.forEach(function(n){n.getChartId()===e.chartId&&(r=n.getChartImageDataURL(e.fileFormat))}),r},t.prototype.downloadChart=function(e){var r=Array.from(this.activeChartComps).find(function(n){return n.getChartId()===e.chartId});r?.downloadChart(e.dimensions,e.fileName,e.fileFormat)},t.prototype.openChartToolPanel=function(e){var r=Array.from(this.activeChartComps).find(function(n){return n.getChartId()===e.chartId});r?.openChartToolPanel(e.panel)},t.prototype.closeChartToolPanel=function(e){var r=Array.from(this.activeChartComps).find(function(n){return n.getChartId()===e});r?.closeChartToolPanel()},t.prototype.createChartFromCurrentRange=function(e){void 0===e&&(e="groupedColumn");var r=this.getSelectedRange();return this.createChart(r,e)},t.prototype.restoreChart=function(e,r){var n=this;if(e){e.version!==as&&(e=function KM(o){return null==o.version&&(o.version=function iR(o){var t,e,r=o;if(null!=o.version)return o.version;var n=function(p){for(var v=[],g=1;g<arguments.length;g++)v[g-1]=arguments[g];return Object.keys(p||{}).some(function(y){return v.includes(y)})},i=r.chartOptions,a=n(i,"seriesDefaults")?i?.seriesDefaults:i?.[Object.keys(i)[0]],s={"27.0.0":n(r,"seriesChartTypes"),"26.2.0":!n(i,"seriesDefaults"),"26.1.0":n(a?.highlightStyle,"item"),"26.0.0":n(a?.highlightStyle,"series"),"25.1.0":n(a?.label,"minAngle"),"25.0.0":n(r,"modelType","aggFunc","unlinkChart","suppressChartRanges")||n(a,"lineDash","lineDashOffset"),"24.0.0":n(r,"chartThemeName","chart")||n(i,"series"),"23.2.0":n(i,"navigator"),"23.0.0":n(null===(e=null===(t=i?.legend)||void 0===t?void 0:t.item)||void 0===e?void 0:e.marker,"shape"),"22.1.0":n(r,"chartPalette","chartType")},u=Object.entries(s).filter(function(p){return Ig(p,2)[1]}),d=Ig(u[0],1)[0];return void 0===d?"27.1.0":d}(o)),o=jt("23.0.0",o,YM),o=jt("24.0.0",o,$M),o=jt("25.1.0",o,XM),o=jt("26.0.0",o,QM),o=jt("26.1.0",o,ZM),o=jt("26.2.0",o,qM),o=jt("28.0.0",o,JM),o=jt("28.2.0",o,eR),o=jt("29.0.0",o,tR),o=jt("29.1.0",o,Lg),o=jt("29.2.0",o,Ng),o=function nR(o){return o=St("chartOptions.*.width",o),_d("chartOptions.*.axes.category.label.autoRotate",!0,o=St("chartOptions.*.height",o))}(o=jt("30.0.0",o,rR)),jt(as,o,function(t){return t})}(e));var i={cellRange:e.cellRange,chartType:e.chartType,chartThemeName:e.chartThemeName,chartContainer:r,suppressChartRanges:e.suppressChartRanges,aggFunc:e.aggFunc,unlinkChart:e.unlinkChart,seriesChartTypes:e.seriesChartTypes},a=function(d){return n.rangeService?n.rangeService.createCellRangeFromCellRangeParams(d):void 0};if("pivot"===e.modelType){this.columnModel.isPivotMode()||this.columnModel.setPivotMode(!0,"pivotChart");var u=a({rowStartIndex:null,rowStartPinned:void 0,rowEndIndex:null,rowEndPinned:void 0,columns:this.columnModel.getAllDisplayedColumns().map(function(d){return d.getColId()})});return u?this.createChart(u,i.chartType,i.chartThemeName,!0,!0,i.chartContainer,void 0,void 0,i.unlinkChart,!1,e.chartOptions):void console.warn("AG Grid - unable to create chart as there are no columns in the grid.")}var c=a(i.cellRange);if(c)return this.createChart(c,i.chartType,i.chartThemeName,!1,i.suppressChartRanges,i.chartContainer,i.aggFunc,void 0,i.unlinkChart,!1,e.chartOptions,e.chartPalette,i.seriesChartTypes);console.warn("AG Grid - unable to create chart as no range is selected")}else console.warn("AG Grid - unable to restore chart as no chart model is provided")},t.prototype.createRangeChart=function(e){var r,n=null===(r=this.rangeService)||void 0===r?void 0:r.createCellRangeFromCellRangeParams(e.cellRange);if(n)return this.createChart(n,e.chartType,e.chartThemeName,!1,e.suppressChartRanges,e.chartContainer,e.aggFunc,e.chartThemeOverrides,e.unlinkChart,void 0,void 0,void 0,e.seriesChartTypes);console.warn("AG Grid - unable to create chart as no range is selected")},t.prototype.createPivotChart=function(e){this.columnModel.isPivotMode()||this.columnModel.setPivotMode(!0,"pivotChart");var r={rowStartIndex:null,rowStartPinned:void 0,rowEndIndex:null,rowEndPinned:void 0,columns:this.columnModel.getAllDisplayedColumns().map(function(i){return i.getColId()})},n=this.rangeService?this.rangeService.createCellRangeFromCellRangeParams(r):void 0;if(n)return this.createChart(n,e.chartType,e.chartThemeName,!0,!0,e.chartContainer,void 0,e.chartThemeOverrides,e.unlinkChart);console.warn("AG Grid - unable to create chart as there are no columns in the grid.")},t.prototype.createCrossFilterChart=function(e){var r,n=null===(r=this.rangeService)||void 0===r?void 0:r.createCellRangeFromCellRangeParams(e.cellRange);if(n)return this.createChart(n,e.chartType,e.chartThemeName,!1,!(typeof e.suppressChartRanges<"u"&&null!==e.suppressChartRanges)||e.suppressChartRanges,e.chartContainer,e.aggFunc,e.chartThemeOverrides,e.unlinkChart,!0);console.warn("AG Grid - unable to create chart as no range is selected")},t.prototype.createChart=function(e,r,n,i,a,s,l,u,c,d,h,p,v){var g=this;void 0===i&&(i=!1),void 0===a&&(a=!1),void 0===c&&(c=!1),void 0===d&&(d=!1);var y=this.gridOptionsService.getCallback("createChartContainer"),S={chartId:this.generateId(),pivotChart:i,cellRange:e,chartType:r,chartThemeName:n,insideDialog:!(s||y),suppressChartRanges:a,aggFunc:l,chartThemeOverrides:u,unlinkChart:c,crossFiltering:d,crossFilteringContext:this.crossFilteringContext,chartOptionsToRestore:h,chartPaletteToRestore:p,seriesChartTypes:v,crossFilteringResetCallback:function(){return g.activeChartComps.forEach(function(w){return w.crossFilteringReset()})}},m=new Fg(S);this.context.createBean(m);var C=this.createChartRef(m);if(s){s.appendChild(m.getGui());var _=this.environment.getTheme();_.el&&!_.el.contains(s)&&s.classList.add(_.theme)}else y?y(C):m.addEventListener(Fg.EVENT_DESTROYED,function(){g.activeChartComps.delete(m),g.activeCharts.delete(C)});return C},t.prototype.createChartRef=function(e){var r=this,n={destroyChart:function(){r.activeCharts.has(n)&&(r.context.destroyBean(e),r.activeChartComps.delete(e),r.activeCharts.delete(n))},chartElement:e.getGui(),chart:e.getUnderlyingChart(),chartId:e.getChartModel().chartId};return this.activeCharts.add(n),this.activeChartComps.add(e),n},t.prototype.getSelectedRange=function(){var e=this.rangeService.getCellRanges();return e.length>0?e[0]:{}},t.prototype.generateId=function(){return"id-"+Math.random().toString(36).substring(2,18)},t.prototype.destroyAllActiveCharts=function(){this.activeCharts.forEach(function(e){return e.destroyChart()})},t.CHARTS_VERSION="8.2.1",au([(0,f.T7N)("rangeService")],t.prototype,"rangeService",void 0),au([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),au([f.sR7],t.prototype,"destroyAllActiveCharts",null),au([(0,f.ekA)("chartService")],t)}(f._QX),cR=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),fR=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}var e;return cR(t,o),e=t,t.prototype.translate=function(r,n){return this.localeService.getLocaleTextFunc()(r,e.DEFAULT_TRANSLATIONS[r]||n)},t.DEFAULT_TRANSLATIONS={pivotChartTitle:"Pivot Chart",rangeChartTitle:"Range Chart",settings:"Settings",data:"Data",format:"Format",categories:"Categories",defaultCategory:"(None)",series:"Series",xyValues:"X Y Values",paired:"Paired Mode",axis:"Axis",navigator:"Navigator",color:"Color",thickness:"Thickness",xType:"X Type",automatic:"Automatic",category:"Category",number:"Number",time:"Time",autoRotate:"Auto Rotate",xRotation:"X Rotation",yRotation:"Y Rotation",ticks:"Ticks",width:"Width",height:"Height",length:"Length",padding:"Padding",spacing:"Spacing",chart:"Chart",title:"Title",titlePlaceholder:"Chart title - double click to edit",background:"Background",font:"Font",top:"Top",right:"Right",bottom:"Bottom",left:"Left",labels:"Labels",calloutLabels:"Callout Labels",sectorLabels:"Sector Labels",positionRatio:"Position Ratio",size:"Size",shape:"Shape",minSize:"Minimum Size",maxSize:"Maximum Size",legend:"Legend",position:"Position",markerSize:"Marker Size",markerStroke:"Marker Stroke",markerPadding:"Marker Padding",itemSpacing:"Item Spacing",itemPaddingX:"Item Padding X",itemPaddingY:"Item Padding Y",layoutHorizontalSpacing:"Horizontal Spacing",layoutVerticalSpacing:"Vertical Spacing",strokeWidth:"Stroke Width",offset:"Offset",offsets:"Offsets",tooltips:"Tooltips",callout:"Callout",markers:"Markers",shadow:"Shadow",blur:"Blur",xOffset:"X Offset",yOffset:"Y Offset",lineWidth:"Line Width",lineDash:"Line Dash",normal:"Normal",bold:"Bold",italic:"Italic",boldItalic:"Bold Italic",predefined:"Predefined",fillOpacity:"Fill Opacity",strokeOpacity:"Line Opacity",histogramBinCount:"Bin count",columnGroup:"Column",barGroup:"Bar",pieGroup:"Pie",lineGroup:"Line",scatterGroup:"X Y (Scatter)",areaGroup:"Area",histogramGroup:"Histogram",combinationGroup:"Combination",groupedColumnTooltip:"Grouped",stackedColumnTooltip:"Stacked",normalizedColumnTooltip:"100% Stacked",groupedBarTooltip:"Grouped",stackedBarTooltip:"Stacked",normalizedBarTooltip:"100% Stacked",pieTooltip:"Pie",doughnutTooltip:"Doughnut",lineTooltip:"Line",groupedAreaTooltip:"Area",stackedAreaTooltip:"Stacked",normalizedAreaTooltip:"100% Stacked",scatterTooltip:"Scatter",bubbleTooltip:"Bubble",histogramTooltip:"Histogram",columnLineComboTooltip:"Column & Line",areaColumnComboTooltip:"Area & Column",customComboTooltip:"Custom Combination",noDataToChart:"No data available to be charted.",pivotChartRequiresPivotMode:"Pivot Chart requires Pivot Mode enabled.",chartSettingsToolbarTooltip:"Menu",chartLinkToolbarTooltip:"Linked to Grid",chartUnlinkToolbarTooltip:"Unlinked from Grid",chartDownloadToolbarTooltip:"Download Chart",histogramFrequency:"Frequency",seriesChartType:"Series Chart Type",seriesType:"Series Type",secondaryAxis:"Secondary Axis"},t=e=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i}([(0,f.ekA)("chartTranslationService")],t),t}(f._QX),hR=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),su=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},pR=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}var e;return hR(t,o),e=t,t.prototype.filter=function(r,n){void 0===n&&(n=!1);var i=this.gridApi.getFilterModel();if(n)this.resetFilters(i);else{var a=e.extractFilterColId(r);this.isValidColumnFilter(a)?this.updateFilters(i,r,a):console.warn("AG Grid: cross filtering requires a 'agSetColumnFilter' or 'agMultiColumnFilter' to be defined on the column with id: '"+a+"'")}},t.prototype.resetFilters=function(r){Object.keys(r).length>0&&(this.gridApi.setFilterModel(null),this.gridApi.onFilterChanged())},t.prototype.updateFilters=function(r,n,i){var a,s=e.extractFilterColId(n),l=n.datum[s];if(void 0!==l){var u=l.toString();if(n.event.metaKey||n.event.ctrlKey){var c=this.getCurrentGridValuesForCategory(i),h=void 0;f._.includes(c,u)?h=c.filter(function(p){return p!==u}):(h=c).push(u),r[i]=this.getUpdatedFilterModel(i,h)}else(a={})[i]=this.getUpdatedFilterModel(i,h=[u]),r=a;this.gridApi.setFilterModel(r)}},t.prototype.getUpdatedFilterModel=function(r,n){return"agMultiColumnFilter"===this.getColumnFilterType(r)?{filterType:"multi",filterModels:[null,{filterType:"set",values:n}]}:{filterType:"set",values:n}},t.prototype.getCurrentGridValuesForCategory=function(r){var n=this,i=[],a=this.getColumnById(r);return this.gridApi.forEachNodeAfterFilter(function(s){if(a&&!s.group){var l=n.valueService.getValue(a,s)+"";i.includes(l)||i.push(l)}}),i},t.extractFilterColId=function(r){return r.xKey||r.calloutLabelKey},t.prototype.isValidColumnFilter=function(r){r.indexOf("-filtered-out")&&(r=r.replace("-filtered-out",""));var n=this.getColumnFilterType(r);return"boolean"==typeof n?n:f._.includes(["agSetColumnFilter","agMultiColumnFilter"],n)},t.prototype.getColumnFilterType=function(r){var n=this.getColumnById(r);if(n)return n.getColDef().filter},t.prototype.getColumnById=function(r){return this.columnModel.getGridColumn(r)},su([(0,f.Qnc)("gridApi")],t.prototype,"gridApi",void 0),su([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),su([(0,f.Qnc)("valueService")],t.prototype,"valueService",void 0),e=su([(0,f.ekA)("chartCrossFilterService")],t)}(f._QX),vR=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Nn=function(){return Nn=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},Nn.apply(this,arguments)},Nr=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},ls=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},No=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},yR=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.cellRanges=[],e.bodyScrollListener=e.onBodyScroll.bind(e),e.dragging=!1,e.intersectionRange=!1,e}return vR(t,o),t.prototype.init=function(){var e=this;this.addManagedListener(this.eventService,f.YFc.EVENT_NEW_COLUMNS_LOADED,function(){return e.onColumnsChanged()}),this.addManagedListener(this.eventService,f.YFc.EVENT_COLUMN_VISIBLE,this.onColumnsChanged.bind(this)),this.addManagedListener(this.eventService,f.YFc.EVENT_COLUMN_VALUE_CHANGED,this.onColumnsChanged.bind(this)),this.addManagedListener(this.eventService,f.YFc.EVENT_COLUMN_PIVOT_MODE_CHANGED,function(){return e.removeAllCellRanges()}),this.addManagedListener(this.eventService,f.YFc.EVENT_COLUMN_ROW_GROUP_CHANGED,function(){return e.removeAllCellRanges()}),this.addManagedListener(this.eventService,f.YFc.EVENT_COLUMN_PIVOT_CHANGED,function(){return e.removeAllCellRanges()}),this.addManagedListener(this.eventService,f.YFc.EVENT_COLUMN_GROUP_OPENED,this.refreshLastRangeStart.bind(this)),this.addManagedListener(this.eventService,f.YFc.EVENT_COLUMN_MOVED,this.refreshLastRangeStart.bind(this)),this.addManagedListener(this.eventService,f.YFc.EVENT_COLUMN_PINNED,this.refreshLastRangeStart.bind(this)),this.ctrlsService.whenReady(function(){var r=e.ctrlsService.getGridBodyCtrl();e.autoScrollService=new f.IHe({scrollContainer:r.getBodyViewportElement(),scrollAxis:"xy",getVerticalPosition:function(){return r.getScrollFeature().getVScrollPosition().top},setVerticalPosition:function(n){return r.getScrollFeature().setVerticalScrollPosition(n)},getHorizontalPosition:function(){return r.getScrollFeature().getHScrollPosition().left},setHorizontalPosition:function(n){return r.getScrollFeature().setHorizontalScrollPosition(n)},shouldSkipVerticalScroll:function(){return!e.gridOptionsService.isDomLayout("normal")},shouldSkipHorizontalScroll:function(){return!r.getScrollFeature().isHorizontalScrollShowing()}})})},t.prototype.onColumnsChanged=function(){var e=this;this.refreshLastRangeStart();var r=this.columnModel.getAllDisplayedColumns();this.cellRanges.forEach(function(i){var a=i.columns;i.columns=i.columns.filter(function(l){return l.isVisible()&&-1!==r.indexOf(l)}),!f._.areEqual(a,i.columns)&&e.dispatchChangedEvent(!1,!0,i.id)});var n=this.cellRanges.length;this.cellRanges=this.cellRanges.filter(function(i){return i.columns.length>0}),n>this.cellRanges.length&&this.dispatchChangedEvent(!1,!0)},t.prototype.refreshLastRangeStart=function(){var e=f._.last(this.cellRanges);e&&this.refreshRangeStart(e)},t.prototype.isContiguousRange=function(e){var r=e.columns;if(!r.length)return!1;var n=this.columnModel.getAllDisplayedColumns(),i=r.map(function(a){return n.indexOf(a)}).sort(function(a,s){return a-s});return f._.last(i)-i[0]+1===r.length},t.prototype.getRangeStartRow=function(e){return e.startRow&&e.endRow?this.rowPositionUtils.before(e.startRow,e.endRow)?e.startRow:e.endRow:{rowIndex:0,rowPinned:this.pinnedRowModel.getPinnedTopRowCount()>0?"top":null}},t.prototype.getRangeEndRow=function(e){if(e.startRow&&e.endRow)return this.rowPositionUtils.before(e.startRow,e.endRow)?e.endRow:e.startRow;var r=this.pinnedRowModel.getPinnedBottomRowCount();return r>0?{rowIndex:r-1,rowPinned:"bottom"}:{rowIndex:this.rowModel.getRowCount()-1,rowPinned:null}},t.prototype.setRangeToCell=function(e,r){if(void 0===r&&(r=!1),this.gridOptionsService.is("enableRangeSelection")){var n=this.calculateColumnsBetween(e.column,e.column);if(n){(this.gridOptionsService.is("suppressMultiRangeSelection")||!r||f._.missing(this.cellRanges))&&this.removeAllCellRanges(!0);var a={rowIndex:e.rowIndex,rowPinned:e.rowPinned};this.cellRanges.push({startRow:a,endRow:a,columns:n,startColumn:e.column}),this.setNewestRangeStartCell(e),this.onDragStop(),this.dispatchChangedEvent(!0,!0)}}},t.prototype.extendLatestRangeToCell=function(e){if(!this.isEmpty()&&this.newestRangeStartCell){var r=f._.last(this.cellRanges);this.updateRangeEnd(r,e)}},t.prototype.updateRangeEnd=function(e,r,n){void 0===n&&(n=!1);var a=this.calculateColumnsBetween(e.startColumn,r.column);!a||this.isLastCellOfRange(e,r)||(e.columns=a,e.endRow={rowIndex:r.rowIndex,rowPinned:r.rowPinned},n||this.dispatchChangedEvent(!0,!0,e.id))},t.prototype.refreshRangeStart=function(e){var r=e.startColumn,n=e.columns,i=function(d,h){var p=e.columns.filter(function(v){return v!==d});d?(e.startColumn=d,e.columns=h?No([d],ls(p)):No(No([],ls(p)),[d])):e.columns=p},a=this.getRangeEdgeColumns(e),s=a.left,l=a.right;r===n[0]&&r!==s?i(s,!0):r===f._.last(n)&&r===l&&i(l,!1)},t.prototype.getRangeEdgeColumns=function(e){var r=this.columnModel.getAllDisplayedColumns(),n=e.columns.map(function(i){return r.indexOf(i)}).filter(function(i){return i>-1}).sort(function(i,a){return i-a});return{left:r[n[0]],right:r[f._.last(n)]}},t.prototype.extendLatestRangeInDirection=function(e){if(!this.isEmpty()&&this.newestRangeStartCell){var r=e.key,n=e.ctrlKey||e.metaKey,i=f._.last(this.cellRanges),a=this.newestRangeStartCell,s=i.columns[0],l=f._.last(i.columns),p=this.cellNavigationService.getNextCellToFocus(r,{column:a.column===s?l:s,rowIndex:i.endRow.rowIndex,rowPinned:i.endRow.rowPinned},n);if(p)return this.setCellRange({rowStartIndex:a.rowIndex,rowStartPinned:a.rowPinned,rowEndIndex:p.rowIndex,rowEndPinned:p.rowPinned,columnStart:a.column,columnEnd:p.column}),p}},t.prototype.setCellRange=function(e){this.gridOptionsService.is("enableRangeSelection")&&(this.removeAllCellRanges(!0),this.addCellRange(e))},t.prototype.setCellRanges=function(e){var r=this;f._.shallowCompare(this.cellRanges,e)||(this.removeAllCellRanges(!0),e.forEach(function(n){n.columns&&n.startRow&&r.setNewestRangeStartCell({rowIndex:n.startRow.rowIndex,rowPinned:n.startRow.rowPinned,column:n.columns[0]}),r.cellRanges.push(n)}),this.dispatchChangedEvent(!1,!0))},t.prototype.setNewestRangeStartCell=function(e){this.newestRangeStartCell=e},t.prototype.clearCellRangeCellValues=function(e){var r=this,n=e.cellRanges,i=e.cellEventSource,a=void 0===i?"rangeService":i,s=e.dispatchWrapperEvents,l=e.wrapperEventSource,u=void 0===l?"deleteKey":l;s&&this.eventService.dispatchEvent({type:f.YFc.EVENT_RANGE_DELETE_START,source:u}),n||(n=this.cellRanges),n.forEach(function(h){r.forEachRowInRange(h,function(p){var v=r.rowPositionUtils.getRowNode(p);if(v)for(var g=0;g<h.columns.length;g++){var y=r.columnModel.getGridColumn(h.columns[g]);if(!y||!y.isCellEditable(v))return;v.setDataValue(y,null,a)}})}),s&&this.eventService.dispatchEvent({type:f.YFc.EVENT_RANGE_DELETE_END,source:u})},t.prototype.createCellRangeFromCellRangeParams=function(e){var n,r=this,i=!1;if(e.columns)n=e.columns.map(function(c){return r.columnModel.getColumnWithValidation(c)}).filter(function(c){return c});else{var a=this.columnModel.getColumnWithValidation(e.columnStart),s=this.columnModel.getColumnWithValidation(e.columnEnd);if(!a||!s)return;(n=this.calculateColumnsBetween(a,s))&&n.length&&(i=n[0]!==a)}if(n)return{startRow:null!=e.rowStartIndex?{rowIndex:e.rowStartIndex,rowPinned:e.rowStartPinned||null}:void 0,endRow:null!=e.rowEndIndex?{rowIndex:e.rowEndIndex,rowPinned:e.rowEndPinned||null}:void 0,columns:n,startColumn:i?f._.last(n):n[0]}},t.prototype.addCellRange=function(e){if(this.gridOptionsService.is("enableRangeSelection")){var r=this.createCellRangeFromCellRangeParams(e);r&&(r.startRow&&this.setNewestRangeStartCell({rowIndex:r.startRow.rowIndex,rowPinned:r.startRow.rowPinned,column:r.startColumn}),this.cellRanges.push(r),this.dispatchChangedEvent(!1,!0,r.id))}},t.prototype.getCellRanges=function(){return this.cellRanges},t.prototype.isEmpty=function(){return 0===this.cellRanges.length},t.prototype.isMoreThanOneCell=function(){var e=this.cellRanges.length;if(0===e)return!1;if(e>1)return!0;var r=this.cellRanges[0],n=this.getRangeStartRow(r),i=this.getRangeEndRow(r);return n.rowPinned!==i.rowPinned||n.rowIndex!==i.rowIndex||1!==r.columns.length},t.prototype.areAllRangesAbleToMerge=function(){var e,r,s,n=this,i=new Map;if(this.cellRanges.length<=1)return!0;this.cellRanges.forEach(function(h){n.forEachRowInRange(h,function(p){var v=(p.rowPinned||"normal")+"_"+p.rowIndex,g=i.get(v),y=h.columns.map(function(m){return m.getId()});if(g){var S=y.filter(function(m){return-1===g.indexOf(m)});g.push.apply(g,No([],ls(S)))}else i.set(v,y)})});try{for(var l=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(i.values()),u=l.next();!u.done;u=l.next()){var d=u.value.sort().join();if(void 0!==s){if(s!==d)return!1}else s=d}}catch(h){e={error:h}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}return!0},t.prototype.forEachRowInRange=function(e,r){for(var n=this.getRangeStartRow(e),i=this.getRangeEndRow(e),a=n;a&&(r(a),!this.rowPositionUtils.sameRow(a,i));)a=this.cellNavigationService.getRowBelow(a)},t.prototype.removeAllCellRanges=function(e){this.isEmpty()||(this.onDragStop(),this.cellRanges.length=0,e||this.dispatchChangedEvent(!1,!0))},t.prototype.onBodyScroll=function(){this.dragging&&this.lastMouseEvent&&this.onDragging(this.lastMouseEvent)},t.prototype.isCellInAnyRange=function(e){return this.getCellRangeCount(e)>0},t.prototype.isCellInSpecificRange=function(e,r){var n=null!==r.columns&&f._.includes(r.columns,e.column),i=this.isRowInRange(e.rowIndex,e.rowPinned,r);return n&&i},t.prototype.isLastCellOfRange=function(e,r){var n=e.startRow,i=e.endRow,a=this.rowPositionUtils.before(n,i)?i:n,s=r.rowIndex===a.rowIndex&&r.rowPinned===a.rowPinned,l=e.columns[0],u=f._.last(e.columns);return r.column===(e.startColumn===l?u:l)&&s},t.prototype.isBottomRightCell=function(e,r){var n=this.columnModel.getAllDisplayedColumns(),i=e.columns.map(function(d){return n.indexOf(d)}).sort(function(d,h){return d-h}),a=e.startRow,s=e.endRow,l=this.rowPositionUtils.before(a,s)?s:a,u=n.indexOf(r.column)===f._.last(i),c=r.rowIndex===l.rowIndex&&f._.makeNull(r.rowPinned)===f._.makeNull(l.rowPinned);return u&&c},t.prototype.getCellRangeCount=function(e){var r=this;return this.isEmpty()?0:this.cellRanges.filter(function(n){return r.isCellInSpecificRange(e,n)}).length},t.prototype.isRowInRange=function(e,r,n){var i=this.getRangeStartRow(n),a=this.getRangeEndRow(n),s={rowIndex:e,rowPinned:r||null};if(s.rowIndex===i.rowIndex&&s.rowPinned==i.rowPinned||s.rowIndex===a.rowIndex&&s.rowPinned==a.rowPinned)return!0;var c=!this.rowPositionUtils.before(s,i),d=this.rowPositionUtils.before(s,a);return c&&d},t.prototype.getDraggingRange=function(){return this.draggingRange},t.prototype.onDragStart=function(e){if(this.gridOptionsService.is("enableRangeSelection")){var i=e.shiftKey,a=e.ctrlKey||e.metaKey,l=!this.gridOptionsService.is("suppressMultiRangeSelection")&&a,u=i&&f._.existsAndNotEmpty(this.cellRanges);!l&&(!u||f._.exists(f._.last(this.cellRanges).type))&&this.removeAllCellRanges(!0);var c=this.dragService.getStartTarget();if(c&&this.updateValuesOnMove(c),this.lastCellHovered){if(this.dragging=!0,this.lastMouseEvent=e,this.intersectionRange=l&&this.getCellRangeCount(this.lastCellHovered)>1,u||this.setNewestRangeStartCell(this.lastCellHovered),this.cellRanges.length>0)this.draggingRange=f._.last(this.cellRanges);else{var d={rowIndex:this.lastCellHovered.rowIndex,rowPinned:this.lastCellHovered.rowPinned};this.draggingRange={startRow:d,endRow:d,columns:[this.lastCellHovered.column],startColumn:this.newestRangeStartCell.column},this.cellRanges.push(this.draggingRange)}this.ctrlsService.getGridBodyCtrl().addScrollEventListener(this.bodyScrollListener),this.dispatchChangedEvent(!0,!1,this.draggingRange.id)}}},t.prototype.intersectLastRange=function(e){var r=this;if(!(e&&this.dragging||this.gridOptionsService.is("suppressMultiRangeSelection")||this.isEmpty())){var n=f._.last(this.cellRanges),i=this.getRangeStartRow(n),a=this.getRangeEndRow(n),s=[];this.cellRanges.slice(0,-1).forEach(function(l){var u=r.getRangeStartRow(l),c=r.getRangeEndRow(l),d=l.columns,h=d.filter(function(y){return-1===n.columns.indexOf(y)});if(h.length!==d.length)if(r.rowPositionUtils.before(a,u)||r.rowPositionUtils.before(c,i))s.push(l);else{var p=s.length;if(r.rowPositionUtils.before(u,i)){var v={columns:No([],ls(d)),startColumn:n.startColumn,startRow:Nn({},u),endRow:r.cellNavigationService.getRowAbove(i)};s.push(v)}if(h.length>0){var g={columns:h,startColumn:f._.includes(h,n.startColumn)?n.startColumn:h[0],startRow:r.rowPositionUtils.rowMax([Nn({},i),Nn({},u)]),endRow:r.rowPositionUtils.rowMin([Nn({},a),Nn({},c)])};s.push(g)}r.rowPositionUtils.before(a,c)&&s.push({columns:No([],ls(d)),startColumn:n.startColumn,startRow:r.cellNavigationService.getRowBelow(a),endRow:Nn({},c)}),s.length-p==1&&(s[s.length-1].id=l.id)}else s.push(l)}),this.cellRanges=s,e&&this.dispatchChangedEvent(!1,!0)}},t.prototype.updateValuesOnMove=function(e){var r=f._.getCtrlForEventTarget(this.gridOptionsService,e,f.Kcc.DOM_DATA_KEY_CELL_CTRL),n=r?.getCellPosition();this.cellHasChanged=!1,!(!n||this.lastCellHovered&&this.cellPositionUtils.equals(n,this.lastCellHovered))&&(this.lastCellHovered&&(this.cellHasChanged=!0),this.lastCellHovered=n)},t.prototype.onDragging=function(e){var r=this;if(this.dragging&&e){this.updateValuesOnMove(e.target),this.lastMouseEvent=e;var n=this.lastCellHovered,i=function(l){return n&&n.rowPinned===l&&r.newestRangeStartCell.rowPinned===l},a=i("top")||i("bottom");if(this.autoScrollService.check(e,a),this.cellHasChanged){var s=this.calculateColumnsBetween(this.newestRangeStartCell.column,n.column);s&&(this.draggingRange.endRow={rowIndex:n.rowIndex,rowPinned:n.rowPinned},this.draggingRange.columns=s,this.dispatchChangedEvent(!1,!1,this.draggingRange.id))}}},t.prototype.onDragStop=function(){if(this.dragging){var e=this.draggingRange.id;this.autoScrollService.ensureCleared(),this.ctrlsService.getGridBodyCtrl().removeScrollEventListener(this.bodyScrollListener),this.lastMouseEvent=null,this.dragging=!1,this.draggingRange=void 0,this.lastCellHovered=void 0,this.intersectionRange&&(this.intersectionRange=!1,this.intersectLastRange()),this.dispatchChangedEvent(!1,!0,e)}},t.prototype.dispatchChangedEvent=function(e,r,n){this.eventService.dispatchEvent({type:f.YFc.EVENT_RANGE_SELECTION_CHANGED,started:e,finished:r,id:n})},t.prototype.calculateColumnsBetween=function(e,r){var n=this.columnModel.getAllDisplayedColumns(),i=e===r,a=n.indexOf(e);if(a<0)console.warn("AG Grid: column "+e.getId()+" is not visible");else{var s=i?a:n.indexOf(r);if(!(s<0)){if(i)return[e];for(var l=Math.min(a,s),u=l===a?s:a,c=[],d=l;d<=u;d++)c.push(n[d]);return c}console.warn("AG Grid: column "+r.getId()+" is not visible")}},Nr([(0,f.Qnc)("rowModel")],t.prototype,"rowModel",void 0),Nr([(0,f.Qnc)("dragService")],t.prototype,"dragService",void 0),Nr([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),Nr([(0,f.Qnc)("cellNavigationService")],t.prototype,"cellNavigationService",void 0),Nr([(0,f.Qnc)("pinnedRowModel")],t.prototype,"pinnedRowModel",void 0),Nr([(0,f.Qnc)("rowPositionUtils")],t.prototype,"rowPositionUtils",void 0),Nr([(0,f.Qnc)("cellPositionUtils")],t.prototype,"cellPositionUtils",void 0),Nr([(0,f.Qnc)("ctrlsService")],t.prototype,"ctrlsService",void 0),Nr([f.QhY],t.prototype,"init",null),Nr([(0,f.ekA)("rangeService")],t)}(f._QX),mR=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),pr=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},zg=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.changedCalculatedValues=!1,e.dragging=!1,e.shouldDestroyOnEndDragging=!1,e}return mR(t,o),t.prototype.init=function(){var e=this;this.dragService.addDragSource({dragStartPixels:0,eElement:this.getGui(),onDragStart:this.onDragStart.bind(this),onDragging:function(r){e.dragging=!0,e.rangeService.autoScrollService.check(r),e.changedCalculatedValues&&(e.onDrag(r),e.changedCalculatedValues=!1)},onDragStop:function(r){e.dragging=!1,e.onDragEnd(r),e.clearValues(),e.rangeService.autoScrollService.ensureCleared(),document.body.classList.remove(e.getDraggingCssClass()),e.shouldDestroyOnEndDragging&&e.destroy()}}),this.addManagedListener(this.getGui(),"mousedown",this.preventRangeExtension.bind(this))},t.prototype.isDragging=function(){return this.dragging},t.prototype.getCellCtrl=function(){return this.cellCtrl},t.prototype.setCellCtrl=function(e){this.cellCtrl=e},t.prototype.getCellRange=function(){return this.cellRange},t.prototype.setCellRange=function(e){this.cellRange=e},t.prototype.getRangeStartRow=function(){return this.rangeStartRow},t.prototype.setRangeStartRow=function(e){this.rangeStartRow=e},t.prototype.getRangeEndRow=function(){return this.rangeEndRow},t.prototype.setRangeEndRow=function(e){this.rangeEndRow=e},t.prototype.getLastCellHovered=function(){return this.lastCellHovered},t.prototype.preventRangeExtension=function(e){e.stopPropagation()},t.prototype.onDragStart=function(e){this.cellHoverListener=this.addManagedListener(this.ctrlsService.getGridCtrl().getGui(),"mousemove",this.updateValuesOnMove.bind(this)),document.body.classList.add(this.getDraggingCssClass())},t.prototype.getDraggingCssClass=function(){return"ag-dragging-"+(this.type===f.Gez.FILL?"fill":"range")+"-handle"},t.prototype.updateValuesOnMove=function(e){var r=this.mouseEventService.getCellPositionForEvent(e);!r||this.lastCellHovered&&this.cellPositionUtils.equals(r,this.lastCellHovered)||(this.lastCellHovered=r,this.changedCalculatedValues=!0)},t.prototype.getType=function(){return this.type},t.prototype.refresh=function(e){var r=this.getCellCtrl(),n=this.getGui(),i=f._.last(this.rangeService.getCellRanges()),a=i.startRow,s=i.endRow;if(a&&s&&(this.rowPositionUtils.before(s,a)?(this.setRangeStartRow(s),this.setRangeEndRow(a)):(this.setRangeStartRow(a),this.setRangeEndRow(s))),r!==e||!f._.isVisible(n)){this.setCellCtrl(e);var u=e.getComp().getParentOfValue();u&&u.appendChild(n)}this.setCellRange(i)},t.prototype.clearValues=function(){this.lastCellHovered=void 0,this.removeListeners()},t.prototype.removeListeners=function(){this.cellHoverListener&&(this.cellHoverListener(),this.cellHoverListener=void 0)},t.prototype.destroy=function(){if(!this.shouldDestroyOnEndDragging&&this.isDragging())return f._.setDisplayed(this.getGui(),!1),void(this.shouldDestroyOnEndDragging=!0);this.shouldDestroyOnEndDragging=!1,o.prototype.destroy.call(this),this.removeListeners();var e=this.getGui();e.parentElement&&e.parentElement.removeChild(e)},pr([(0,f.Qnc)("rowRenderer")],t.prototype,"rowRenderer",void 0),pr([(0,f.Qnc)("dragService")],t.prototype,"dragService",void 0),pr([(0,f.Qnc)("rangeService")],t.prototype,"rangeService",void 0),pr([(0,f.Qnc)("mouseEventService")],t.prototype,"mouseEventService",void 0),pr([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),pr([(0,f.Qnc)("cellNavigationService")],t.prototype,"cellNavigationService",void 0),pr([(0,f.Qnc)("navigationService")],t.prototype,"navigationService",void 0),pr([(0,f.Qnc)("rowPositionUtils")],t.prototype,"rowPositionUtils",void 0),pr([(0,f.Qnc)("cellPositionUtils")],t.prototype,"cellPositionUtils",void 0),pr([(0,f.Qnc)("ctrlsService")],t.prototype,"ctrlsService",void 0),pr([f.QhY],t.prototype,"init",null),t}(f.YlN);function SR(o){var t=o.length,e=0;if(t<=1)return o;for(var r=0;r<o.length;r++){var n=o[r],i=n.toString().split("e-");i.length>1?e=Math.max(e,parseInt(i[1],10)):Math.floor(n)!==n&&(e=Math.max(e,n.toString().split(".")[1].length))}for(var a=0,s=0,l=0,u=0,c=0,d=0;d<t;d++)a+=d,s+=c=o[d],u+=d*d,l+=d*c;var h=(t*l-a*s)/(t*u-a*a),p=s/t-h*a/t,v=[];for(d=0;d<=t;d++)v.push(parseFloat((d*h+p).toFixed(e)));return v}var CR=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ko=function(){return ko=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},ko.apply(this,arguments)},xd=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Hg=function(o){function t(){var e=o.call(this,t.TEMPLATE)||this;return e.markedCells=[],e.cellValues=[],e.isUp=!1,e.isLeft=!1,e.isReduce=!1,e.type=f.Gez.FILL,e}return CR(t,o),t.prototype.updateValuesOnMove=function(e){o.prototype.updateValuesOnMove.call(this,e),this.initialXY||(this.initialXY=this.mouseEventService.getNormalisedPosition(e));var h,r=this.initialXY,n=r.x,i=r.y,a=this.mouseEventService.getNormalisedPosition(e),l=a.y,u=Math.abs(n-a.x),c=Math.abs(i-l),d=this.getFillHandleDirection();(h="xy"===d?u>c?"x":"y":d)!==this.dragAxis&&(this.dragAxis=h,this.changedCalculatedValues=!0)},t.prototype.onDrag=function(e){if(!this.initialPosition){var r=this.getCellCtrl();if(!r)return;this.initialPosition=r.getCellPosition()}var n=this.getLastCellHovered();n&&this.markPathFrom(this.initialPosition,n)},t.prototype.onDragEnd=function(e){if(this.initialXY=null,this.markedCells.length){var l,r="x"===this.dragAxis,n=this.getCellRange(),i=n.columns.length,a=this.getRangeStartRow(),s=this.getRangeEndRow();if(this.isUp||this.isLeft){var u=r?a:this.lastCellMarked;l=this.rangeService.createCellRangeFromCellRangeParams({rowStartIndex:u.rowIndex,rowStartPinned:u.rowPinned,columnStart:r?this.lastCellMarked.column:n.columns[0],rowEndIndex:s.rowIndex,rowEndPinned:s.rowPinned,columnEnd:n.columns[i-1]})}else l=this.rangeService.createCellRangeFromCellRangeParams({rowStartIndex:a.rowIndex,rowStartPinned:a.rowPinned,columnStart:n.columns[0],rowEndIndex:r?s.rowIndex:this.lastCellMarked.rowIndex,rowEndPinned:r?s.rowPinned:this.lastCellMarked.rowPinned,columnEnd:r?this.lastCellMarked.column:n.columns[i-1]});l&&(this.raiseFillStartEvent(),this.handleValueChanged(n,l,e),this.rangeService.setCellRanges([l]),this.raiseFillEndEvent(n,l))}},t.prototype.getFillHandleDirection=function(){var e=this.gridOptionsService.get("fillHandleDirection");return e?"x"!==e&&"y"!==e&&"xy"!==e?(f._.doOnce(function(){return console.warn("AG Grid: valid values for fillHandleDirection are 'x', 'y' and 'xy'. Default to 'xy'.")},"warn invalid fill direction"),"xy"):e:"xy"},t.prototype.raiseFillStartEvent=function(){this.eventService.dispatchEvent({type:f.YFc.EVENT_FILL_START})},t.prototype.raiseFillEndEvent=function(e,r){this.eventService.dispatchEvent({type:f.YFc.EVENT_FILL_END,initialRange:e,finalRange:r})},t.prototype.handleValueChanged=function(e,r,n){var i=this,a=this.rangeService.getRangeEndRow(e),s=this.rangeService.getRangeStartRow(e),l=this.rangeService.getRangeEndRow(r),u=this.rangeService.getRangeStartRow(r),c="y"===this.dragAxis;if(!this.isReduce||this.gridOptionsService.is("suppressClearOnFillReduction")){var p=!0,v=[],g=[],y=0,S=function(){v.length=0,g.length=0,y=0},m=function(_,w){var x=i.isUp?a:s,b=!1;c&&(p=!0,S());for(var O=function(){var E=i.rowPositionUtils.getRowNode(x);if(!E)return"break";c&&_?C(v,_,E,function(){return!i.rowPositionUtils.sameRow(x,i.isUp?s:a)}):w&&(p=!0,S(),w.forEach(function(P){return C(v,P,E,function(){return P!==(i.isLeft?e.columns[0]:f._.last(e.columns))})})),b=i.rowPositionUtils.sameRow(x,i.isUp?u:l),x=i.isUp?i.cellNavigationService.getRowAbove(x):i.cellNavigationService.getRowBelow(x)};!b&&x&&"break"!==O(););},C=function(_,w,x,b){var O,T,E,P=!1;if(p)E=i.valueService.getValue(w,x),g.push(E),p=b();else{var D=i.processValues(n,_,g,w,x,y++),M=D.fromUserFunction,F=D.sourceCol,I=D.sourceRowNode;if(E=D.value,w.isCellEditable(x)){var L=i.valueService.getValue(w,x);M||(!(null===(O=F?.getColDef())||void 0===O)&&O.useValueFormatterForExport&&(E=null!==(T=i.valueFormatterService.formatValue(F,I,E))&&void 0!==T?T:E),w.getColDef().useValueParserForImport&&(E=i.valueParserService.parseValue(w,x,F?E:f._.toStringOrNull(E),L))),M&&L===E?P=!0:x.setDataValue(w,E,"rangeService")}}P||_.push({value:E,column:w,rowNode:x})};c?e.columns.forEach(function(_){m(_)}):(d=this.isLeft?function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o}([],function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i}(r.columns)).reverse():r.columns,m(void 0,d))}else{var d=c?e.columns:e.columns.filter(function(_){return r.columns.indexOf(_)<0}),h=c?this.cellNavigationService.getRowBelow(l):u;h&&this.clearCellsInRange(h,a,d)}},t.prototype.clearCellsInRange=function(e,r,n){this.rangeService.clearCellRangeCellValues({cellRanges:[{startRow:e,endRow:r,columns:n,startColumn:n[0]}]})},t.prototype.processValues=function(e,r,n,i,a,s){var c,l=this.gridOptionsService.getCallback("fillOperation");if(c="y"===this.dragAxis?this.isUp?"up":"down":this.isLeft?"left":"right",l){var h=l({event:e,values:r.map(function(C){return C.value}),initialValues:n,currentIndex:s,currentCellValue:this.valueService.getValue(i,a),direction:c,column:i,rowNode:a});if(!1!==h)return{value:h,fromUserFunction:!0}}var p=!r.some(function(C){var _=C.value,w=parseFloat(_);return isNaN(w)||w.toString()!==_.toString()});if(e.altKey||!p){if(p&&1===n.length){var v=this.isUp||this.isLeft?-1:1;return{value:parseFloat(f._.last(r).value)+1*v,fromUserFunction:!1}}var g=r[s%r.length];return{value:g.value,fromUserFunction:!1,sourceCol:g.column,sourceRowNode:g.rowNode}}return{value:f._.last(SR(r.map(function(C){return Number(C.value)}))),fromUserFunction:!1}},t.prototype.clearValues=function(){this.clearMarkedPath(),this.clearCellValues(),this.lastCellMarked=void 0,o.prototype.clearValues.call(this)},t.prototype.clearMarkedPath=function(){this.markedCells.forEach(function(e){if(e.isAlive()){var r=e.getComp();r.addOrRemoveCssClass("ag-selection-fill-top",!1),r.addOrRemoveCssClass("ag-selection-fill-right",!1),r.addOrRemoveCssClass("ag-selection-fill-bottom",!1),r.addOrRemoveCssClass("ag-selection-fill-left",!1)}}),this.markedCells.length=0,this.isUp=!1,this.isLeft=!1,this.isReduce=!1},t.prototype.clearCellValues=function(){this.cellValues.length=0},t.prototype.markPathFrom=function(e,r){if(this.clearMarkedPath(),this.clearCellValues(),"y"===this.dragAxis){if(this.rowPositionUtils.sameRow(r,e))return;var n=this.rowPositionUtils.before(r,e),i=this.getRangeStartRow(),a=this.getRangeEndRow();n&&(r.rowPinned==i.rowPinned&&r.rowIndex>=i.rowIndex||i.rowPinned!=a.rowPinned&&r.rowPinned==a.rowPinned&&r.rowIndex<=a.rowIndex)?(this.reduceVertical(e,r),this.isReduce=!0):(this.extendVertical(e,r,n),this.isReduce=!1)}else{var s=e.column,l=r.column;if(s===l)return;var u=this.columnModel.getAllDisplayedColumns(),c=u.indexOf(s),d=u.indexOf(l);d<=c&&d>=u.indexOf(this.getCellRange().columns[0])?(this.reduceHorizontal(e,r),this.isReduce=!0):(this.extendHorizontal(e,r,d<c),this.isReduce=!1)}this.lastCellMarked=r},t.prototype.extendVertical=function(e,r,n){var a=this.navigationService,s=this.rangeService,l=e;do{for(var u=this.getCellRange(),c=u.columns.length,d=0;d<c;d++){var h=u.columns[d],v=ko(ko({},{rowIndex:l.rowIndex,rowPinned:l.rowPinned}),{column:h}),g=s.isCellInSpecificRange(v,u),y=this.rowPositionUtils.sameRow(l,e);if(n&&(this.isUp=!0),!y){var S=a.getCellByPosition(v);if(S){this.markedCells.push(S);var m=S.getComp();g||(m.addOrRemoveCssClass("ag-selection-fill-left",0===d),m.addOrRemoveCssClass("ag-selection-fill-right",d===c-1)),m.addOrRemoveCssClass(n?"ag-selection-fill-top":"ag-selection-fill-bottom",this.rowPositionUtils.sameRow(l,r))}}}if(this.rowPositionUtils.sameRow(l,r))break}while(l=n?this.cellNavigationService.getRowAbove(l):this.cellNavigationService.getRowBelow(l))},t.prototype.reduceVertical=function(e,r){var n=e;do{for(var i=this.getCellRange(),a=i.columns.length,s=this.rowPositionUtils.sameRow(n,r),l=0;l<a;l++){var c=ko(ko({},{rowIndex:n.rowIndex,rowPinned:n.rowPinned}),{column:i.columns[l]}),d=this.navigationService.getCellByPosition(c);d&&(this.markedCells.push(d),d.getComp().addOrRemoveCssClass("ag-selection-fill-bottom",this.rowPositionUtils.sameRow(n,r)))}if(s)break}while(n=this.cellNavigationService.getRowAbove(n))},t.prototype.extendHorizontal=function(e,r,n){var i=this,a=this.columnModel.getAllDisplayedColumns(),s=a.indexOf(n?r.column:e.column),l=a.indexOf(n?this.getCellRange().columns[0]:r.column),u=n?0:1,c=a.slice(s+u,l+u),d=this.getRangeStartRow(),h=this.getRangeEndRow();c.forEach(function(p){var v=d,g=!1;do{g=i.rowPositionUtils.sameRow(v,h);var y=i.navigationService.getCellByPosition({rowIndex:v.rowIndex,rowPinned:v.rowPinned,column:p});if(y){i.markedCells.push(y);var S=y.getComp();S.addOrRemoveCssClass("ag-selection-fill-top",i.rowPositionUtils.sameRow(v,d)),S.addOrRemoveCssClass("ag-selection-fill-bottom",i.rowPositionUtils.sameRow(v,h)),n?(i.isLeft=!0,S.addOrRemoveCssClass("ag-selection-fill-left",p===c[0])):S.addOrRemoveCssClass("ag-selection-fill-right",p===f._.last(c))}v=i.cellNavigationService.getRowBelow(v)}while(!g)})},t.prototype.reduceHorizontal=function(e,r){var n=this,i=this.columnModel.getAllDisplayedColumns(),a=i.indexOf(r.column),s=i.indexOf(e.column),l=i.slice(a,s),u=this.getRangeStartRow(),c=this.getRangeEndRow();l.forEach(function(d){var h=u,p=!1;do{p=n.rowPositionUtils.sameRow(h,c);var v=n.navigationService.getCellByPosition({rowIndex:h.rowIndex,rowPinned:h.rowPinned,column:d});v&&(n.markedCells.push(v),v.getComp().addOrRemoveCssClass("ag-selection-fill-right",d===l[0])),h=n.cellNavigationService.getRowBelow(h)}while(!p)})},t.prototype.refresh=function(e){var r=this.rangeService.getCellRanges()[0];r.startRow&&r.endRow?o.prototype.refresh.call(this,e):this.destroy()},t.TEMPLATE='<div class="ag-fill-handle"></div>',xd([(0,f.Qnc)("valueService")],t.prototype,"valueService",void 0),xd([(0,f.Qnc)("valueParserService")],t.prototype,"valueParserService",void 0),xd([(0,f.Qnc)("valueFormatterService")],t.prototype,"valueFormatterService",void 0),t}(zg),wR=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),lu=function(){return lu=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},lu.apply(this,arguments)},Ug=function(o){function t(){var e=o.call(this,t.TEMPLATE)||this;return e.type=f.Gez.RANGE,e.rangeFixed=!1,e}return wR(t,o),t.prototype.onDrag=function(e){var r=this.getLastCellHovered();if(r){var n=this.rangeService.getCellRanges(),i=f._.last(n);this.rangeFixed||(this.fixRangeStartEnd(i),this.rangeFixed=!0),this.endPosition={rowIndex:r.rowIndex,rowPinned:r.rowPinned,column:r.column},2===n.length&&n[0].type===f.kVf.DIMENSION&&i.type===f.kVf.VALUE&&!this.rowPositionUtils.sameRow(this.endPosition,this.rangeService.getRangeEndRow(i))&&this.rangeService.updateRangeEnd(n[0],lu(lu({},this.endPosition),{column:n[0].columns[0]}),!0),this.rangeService.extendLatestRangeToCell(this.endPosition)}},t.prototype.onDragEnd=function(e){var r=f._.last(this.rangeService.getCellRanges());this.fixRangeStartEnd(r),this.rangeFixed=!1},t.prototype.fixRangeStartEnd=function(e){var r=this.rangeService.getRangeStartRow(e),n=this.rangeService.getRangeEndRow(e),i=e.columns[0];e.startRow=r,e.endRow=n,e.startColumn=i},t.TEMPLATE='<div class="ag-range-handle"></div>',t}(zg),bR=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ER=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return bR(t,o),t.prototype.createSelectionHandle=function(e){return this.createBean(e===f.Gez.RANGE?new Ug:new Hg)},t=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i}([(0,f.ekA)("selectionHandleFactory")],t),t}(f._QX),Wg={version:"30.2.1",moduleName:f.ekS.RangeSelectionModule,beans:[yR,ER],agStackComponents:[{componentName:"AgFillHandle",componentClass:Hg},{componentName:"AgRangeHandle",componentClass:Ug}],dependantModules:[Ue]},PR=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),an=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},DR=function(o){function t(e){var r=o.call(this,t.TEMPLATE)||this;return r.H=1,r.S=1,r.B=1,r.A=1,r.isSpectrumDragging=!1,r.isSpectrumHueDragging=!1,r.isSpectrumAlphaDragging=!1,r.colorChanged=!1,r.picker=e.picker,r}return PR(t,o),t.prototype.postConstruct=function(){var e=this;this.initTabIndex(),this.initRecentColors(),this.addGuiEventListener("focus",function(){return e.spectrumColor.focus()}),this.addGuiEventListener("keydown",function(r){r.key===f.Axe.ENTER&&!r.defaultPrevented&&e.destroy()}),this.addManagedListener(this.spectrumColor,"keydown",function(r){return e.moveDragger(r)}),this.addManagedListener(this.spectrumAlphaSlider,"keydown",function(r){return e.moveAlphaSlider(r)}),this.addManagedListener(this.spectrumHueSlider,"keydown",function(r){return e.moveHueSlider(r)}),this.addManagedListener(this.spectrumVal,"mousedown",this.onSpectrumDraggerDown.bind(this)),this.addManagedListener(this.spectrumHue,"mousedown",this.onSpectrumHueDown.bind(this)),this.addManagedListener(this.spectrumAlpha,"mousedown",this.onSpectrumAlphaDown.bind(this)),this.addGuiEventListener("mousemove",function(r){e.onSpectrumDraggerMove(r),e.onSpectrumHueMove(r),e.onSpectrumAlphaMove(r)}),this.addManagedListener(document,"mouseup",this.onMouseUp.bind(this)),this.addManagedListener(this.recentColors,"click",this.onRecentColorClick.bind(this)),this.addManagedListener(this.recentColors,"keydown",function(r){(r.key===f.Axe.ENTER||r.key===f.Axe.SPACE)&&(r.preventDefault(),e.onRecentColorClick(r))})},t.prototype.initTabIndex=function(){var e=this.tabIndex=(this.gridOptionsService.getNum("tabIndex")||0).toString();this.spectrumColor.setAttribute("tabindex",e),this.spectrumHueSlider.setAttribute("tabindex",e),this.spectrumAlphaSlider.setAttribute("tabindex",e)},t.prototype.refreshSpectrumRect=function(){return this.spectrumValRect=this.spectrumVal.getBoundingClientRect()},t.prototype.refreshHueRect=function(){return this.spectrumHueRect=this.spectrumHue.getBoundingClientRect()},t.prototype.refreshAlphaRect=function(){return this.spectrumAlphaRect=this.spectrumAlpha.getBoundingClientRect()},t.prototype.onSpectrumDraggerDown=function(e){this.refreshSpectrumRect(),this.isSpectrumDragging=!0,this.moveDragger(e)},t.prototype.onSpectrumDraggerMove=function(e){this.isSpectrumDragging&&this.moveDragger(e)},t.prototype.onSpectrumHueDown=function(e){this.refreshHueRect(),this.isSpectrumHueDragging=!0,this.moveHueSlider(e)},t.prototype.onSpectrumHueMove=function(e){this.isSpectrumHueDragging&&this.moveHueSlider(e)},t.prototype.onSpectrumAlphaDown=function(e){this.refreshAlphaRect(),this.isSpectrumAlphaDragging=!0,this.moveAlphaSlider(e)},t.prototype.onSpectrumAlphaMove=function(e){this.isSpectrumAlphaDragging&&this.moveAlphaSlider(e)},t.prototype.onMouseUp=function(){this.isSpectrumDragging=!1,this.isSpectrumHueDragging=!1,this.isSpectrumAlphaDragging=!1},t.prototype.moveDragger=function(e){var r=this.spectrumValRect;if(r){var n,i;if(e instanceof MouseEvent)n=e.clientX-r.left,i=e.clientY-r.top;else{var a=e.key===f.Axe.LEFT,l=e.key===f.Axe.UP,c=l||e.key===f.Axe.DOWN,d=a||e.key===f.Axe.RIGHT;if(!c&&!d)return;e.preventDefault();var h=this.getSpectrumValue();n=h.x+(d?a?-5:5:0),i=h.y+(c?l?-5:5:0)}n=Math.max(n,0),n=Math.min(n,r.width),i=Math.max(i,0),i=Math.min(i,r.height),this.setSpectrumValue(n/r.width,1-i/r.height)}},t.prototype.moveHueSlider=function(e){var r=this.spectrumHueRect;if(r){var n=this.moveSlider(this.spectrumHueSlider,e);null!=n&&(this.H=1-n/r.width,this.update())}},t.prototype.moveAlphaSlider=function(e){var r=this.spectrumAlphaRect;if(r){var n=this.moveSlider(this.spectrumAlphaSlider,e);null!=n&&(this.A=n/r.width,this.update())}},t.prototype.moveSlider=function(e,r){var n,s,i=e.getBoundingClientRect(),a=null===(n=e.parentElement)||void 0===n?void 0:n.getBoundingClientRect();if(!e||!a)return null;if(r instanceof MouseEvent)s=r.clientX-a.left;else{var l=r.key===f.Axe.LEFT;if(!l&&r.key!==f.Axe.RIGHT)return null;r.preventDefault();var c=l?-5:5;s=parseFloat(e.style.left)-i.width/2+c}return s=Math.max(s,0),s=Math.min(s,a.width),e.style.left=s+i.width/2+"px",s},t.prototype.update=function(){var e=Xe.fromHSB(360*this.H,this.S,this.B,this.A),r=Xe.fromHSB(360*this.H,1,1),n=e.toRgbaString(),i=this.picker;Xe.fromString(i.getValue()).toRgbaString()!==n&&(this.colorChanged=!0),i.setValue(n),this.spectrumColor.style.backgroundColor=r.toRgbaString(),this.spectrumDragger.style.backgroundColor=n},t.prototype.setSpectrumValue=function(e,r){var n=this.spectrumValRect||this.refreshSpectrumRect();if(null!=n){var i=this.spectrumDragger,a=i.getBoundingClientRect();e=Math.max(0,e),e=Math.min(1,e),r=Math.max(0,r),r=Math.min(1,r),this.S=e,this.B=r,i.style.left=e*n.width-a.width/2+"px",i.style.top=(1-r)*n.height-a.height/2+"px",this.update()}},t.prototype.getSpectrumValue=function(){var e=this.spectrumDragger,r=e.getBoundingClientRect();return{x:parseFloat(e.style.left)+r.width/2,y:parseFloat(e.style.top)+r.height/2}},t.prototype.initRecentColors=function(){var e=this,n=t.recentColors.map(function(i,a){return'<div class="ag-recent-color" id='+a+' style="background-color: '+i+'; width: 15px; height: 15px;" recent-color="'+i+'" tabIndex="'+e.tabIndex+'"></div>'});this.recentColors.innerHTML=n.join("")},t.prototype.setValue=function(e){var r=Xe.fromString(e),n=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i}(r.toHSB(),3),i=n[0],a=n[1],s=n[2];this.H=(isNaN(i)?0:i)/360,this.A=r.a;var l=this.spectrumHueRect||this.refreshHueRect(),u=this.spectrumAlphaRect||this.refreshAlphaRect();this.spectrumHueSlider.style.left=(this.H-1)*-l.width+"px",this.spectrumAlphaSlider.style.left=this.A*u.width+"px",this.setSpectrumValue(a,s)},t.prototype.onRecentColorClick=function(e){var r=e.target;if(f._.exists(r.id)){var n=parseInt(r.id,10);this.setValue(t.recentColors[n]),this.destroy()}},t.prototype.addRecentColor=function(){var r=Xe.fromHSB(360*this.H,this.S,this.B,this.A).toRgbaString(),n=t.recentColors;!this.colorChanged||n[0]===r||(n=n.filter(function(i){return i!=r}),(n=[r].concat(n)).length>t.maxRecentColors&&(n=n.slice(0,t.maxRecentColors)),t.recentColors=n)},t.prototype.destroy=function(){this.addRecentColor(),o.prototype.destroy.call(this)},t.maxRecentColors=8,t.recentColors=[],t.TEMPLATE='<div class="ag-color-panel" tabindex="-1">\n            <div ref="spectrumColor" class="ag-spectrum-color">\n                <div class="ag-spectrum-sat ag-spectrum-fill">\n                    <div ref="spectrumVal" class="ag-spectrum-val ag-spectrum-fill">\n                        <div ref="spectrumDragger" class="ag-spectrum-dragger"></div>\n                    </div>\n                </div>\n            </div>\n            <div class="ag-spectrum-tools">\n                <div ref="spectrumHue" class="ag-spectrum-hue ag-spectrum-tool">\n                    <div class="ag-spectrum-hue-background"></div>\n                    <div ref="spectrumHueSlider" class="ag-spectrum-slider"></div>\n                </div>\n                <div ref="spectrumAlpha" class="ag-spectrum-alpha ag-spectrum-tool">\n                    <div class="ag-spectrum-alpha-background"></div>\n                    <div ref="spectrumAlphaSlider" class="ag-spectrum-slider"></div>\n                </div>\n                <div ref="recentColors" class="ag-recent-colors"></div>\n            </div>\n        </div>',an([(0,f.IzG)("spectrumColor")],t.prototype,"spectrumColor",void 0),an([(0,f.IzG)("spectrumVal")],t.prototype,"spectrumVal",void 0),an([(0,f.IzG)("spectrumDragger")],t.prototype,"spectrumDragger",void 0),an([(0,f.IzG)("spectrumHue")],t.prototype,"spectrumHue",void 0),an([(0,f.IzG)("spectrumHueSlider")],t.prototype,"spectrumHueSlider",void 0),an([(0,f.IzG)("spectrumAlpha")],t.prototype,"spectrumAlpha",void 0),an([(0,f.IzG)("spectrumAlphaSlider")],t.prototype,"spectrumAlphaSlider",void 0),an([(0,f.IzG)("recentColors")],t.prototype,"recentColors",void 0),an([f.QhY],t.prototype,"postConstruct",null),t}(f.YlN),MR=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),wd=function(){return wd=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},wd.apply(this,arguments)},RR=function(o){function t(e){var r=o.call(this,wd({pickerAriaLabelKey:"ariaLabelColorPicker",pickerAriaLabelValue:"Color Picker",pickerType:"ag-list",className:"ag-color-picker",pickerIcon:"colorPicker"},e))||this;return e&&e.color&&(r.value=e.color),r}return MR(t,o),t.prototype.postConstruct=function(){o.prototype.postConstruct.call(this),this.value&&this.setValue(this.value)},t.prototype.createPickerComponent=function(){var e=this.getGui().getBoundingClientRect();return this.createBean(new f.MJb({closable:!1,modal:!0,hideTitleBar:!0,minWidth:190,width:190,height:250,x:e.right-190,y:e.top-250}))},t.prototype.renderAndPositionPicker=function(){var e=this,r=this.pickerComponent,n=this.createBean(new DR({picker:this}));return r.addCssClass("ag-color-dialog"),n.addDestroyFunc(function(){r.isAlive()&&e.destroyBean(r)}),r.setParentComponent(this),r.setBodyComponent(n),n.setValue(this.getValue()),n.getGui().focus(),r.addDestroyFunc(function(){e.isDestroyingPicker?e.isDestroyingPicker=!1:(e.beforeHidePicker(),e.isDestroyingPicker=!0,n.isAlive()&&e.destroyBean(n),e.isAlive()&&e.getFocusableElement().focus())}),function(){var i;return null===(i=e.pickerComponent)||void 0===i?void 0:i.close()}},t.prototype.setValue=function(e){return this.value===e?this:(this.eDisplayField.style.backgroundColor=e,o.prototype.setValue.call(this,e))},t.prototype.getValue=function(){return this.value},t}(f.sTj),bd=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Kg=28,Yg=6;function Od(o){return o&&o.match(/\d+\.\d+\.\d+/)}function uu(o){var t=o.type,e=o.gridVersion,r=o.chartsVersion,n="AG Grid: AG Grid version is incompatible. Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.";if(!e)return n;var i=function IR(o){if(o&&Od(o)){var t=bd(o.split(".")||[],2),e=t[0],r=t[1],n=e+"."+r+".x",a=parseInt(e,10)-Kg+Yg;if(!(a<0))return{gridMajorMinor:n,chartsMajorMinor:a+"."+r+".x"}}}(e);if(!i)return n;var a=i.gridMajorMinor,s=i.chartsMajorMinor;return"incompatible"===t?"AG Grid version "+e+" and AG Charts version "+r+" is not supported. AG Grid version "+a+" should be used with AG Chart "+s+". Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.":"invalidCharts"===t?"AG Grid version "+a+" should be used with AG Chart "+s+". Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.":n}var NR={version:as,validate:function(){return function LR(o){var t=o.gridVersion,e=o.chartsVersion;if(!Od(e))return{isValid:!1,message:uu({type:"invalidCharts",gridVersion:t,chartsVersion:e})};if(!Od(t))return{isValid:!1,message:uu({type:"invalidGrid",gridVersion:t,chartsVersion:e})};var r=bd(t.split(".")||[],2),n=r[0],i=r[1],a=bd(e.split(".")||[],2),l=a[1],u=function FR(o){var e=o.chartsMajorVersion,r=parseInt(o.gridMajorVersion,10),n=parseInt(e,10),i=r-Kg;return i===n-Yg&&i>=0}({gridMajorVersion:n,chartsMajorVersion:a[0]});return u&&i===l?{isValid:!0}:u&&i===l?{isValid:!1,message:uu({type:"invalid",gridVersion:t,chartsVersion:e})}:{isValid:!1,message:uu({type:"incompatible",gridVersion:t,chartsVersion:e})}}({gridVersion:as,chartsVersion:jg.CHARTS_VERSION})},moduleName:f.ekS.GridChartsModule,beans:[jg,fR,pR],agStackComponents:[{componentName:"AgColorPicker",componentClass:RR},{componentName:"AgAngleSelect",componentClass:dg}],dependantModules:[Wg,Ue]},kR=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ed=function(){return Ed=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},Ed.apply(this,arguments)},$g=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Xg=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.loadRowDataVersion=0,e}return kR(t,o),t.prototype.init=function(e,r){this.params=r,this.comp=e,null!=r.pinned||(this.setAutoHeightClasses(),this.setupRefreshStrategy(),this.addThemeToDetailGrid(),this.createDetailGrid(),this.loadRowData(),this.addManagedListener(this.eventService,f.YFc.EVENT_FULL_WIDTH_ROW_FOCUSED,this.onFullWidthRowFocused.bind(this)))},t.prototype.onFullWidthRowFocused=function(e){var r=this.params;this.rowPositionUtils.sameRow({rowIndex:r.node.rowIndex,rowPinned:r.node.rowPinned},{rowIndex:e.rowIndex,rowPinned:e.rowPinned})&&this.focusService.focusInto(this.comp.getGui(),e.fromBelow)},t.prototype.setAutoHeightClasses=function(){var e=this.gridOptionsService.is("detailRowAutoHeight"),n=e?"ag-details-grid-auto-height":"ag-details-grid-fixed-height";this.comp.addOrRemoveCssClass(e?"ag-details-row-auto-height":"ag-details-row-fixed-height",!0),this.comp.addOrRemoveDetailGridCssClass(n,!0)},t.prototype.setupRefreshStrategy=function(){var e=this.params.refreshStrategy;"everything"==e||"nothing"==e||"rows"==e?this.refreshStrategy=e:(null!=e&&console.warn("AG Grid: invalid cellRendererParams.refreshStrategy = '"+e+"' supplied, defaulting to refreshStrategy = 'rows'."),this.refreshStrategy="rows")},t.prototype.addThemeToDetailGrid=function(){var e=this.environment.getTheme().theme;e&&this.comp.addOrRemoveDetailGridCssClass(e,!0)},t.prototype.createDetailGrid=function(){if(f._.missing(this.params.detailGridOptions))console.warn("AG Grid: could not find detail grid options for master detail, please set gridOptions.detailCellRendererParams.detailGridOptions");else{var e=this.gridOptionsService.is("detailRowAutoHeight"),r=Ed({},this.params.detailGridOptions);e&&(r.domLayout="autoHeight"),this.comp.setDetailGrid(r)}},t.prototype.registerDetailWithMaster=function(e,r){var n=this.params.node.id,i=this.params.api,a={id:n,api:e,columnApi:r},s=this.params.node;i.addDetailGridInfo(n,a),s.detailGridInfo=a,this.addDestroyFunc(function(){s.detailGridInfo===a&&(i.removeDetailGridInfo(n),s.detailGridInfo=null)})},t.prototype.loadRowData=function(){var e=this;this.loadRowDataVersion++;var r=this.loadRowDataVersion,n=this.params.getDetailRowData;n?n({node:this.params.node,data:this.params.node.data,successCallback:function(s){e.loadRowDataVersion===r&&e.comp.setRowData(s)},context:this.gridOptionsService.context}):console.warn("AG Grid: could not find getDetailRowData for master / detail, please set gridOptions.detailCellRendererParams.getDetailRowData")},t.prototype.refresh=function(){switch(this.refreshStrategy){case"nothing":return!0;case"everything":return!1}return this.loadRowData(),!0},$g([(0,f.Qnc)("rowPositionUtils")],t.prototype,"rowPositionUtils",void 0),$g([(0,f.Qnc)("focusService")],t.prototype,"focusService",void 0),t}(f._QX),GR=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),BR=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return GR(t,o),t.prototype.init=function(e){var r=this;this.params=e,this.selectAndSetTemplate();var n={addOrRemoveCssClass:function(i,a){return r.addOrRemoveCssClass(i,a)},addOrRemoveDetailGridCssClass:function(i,a){return r.eDetailGrid.classList.toggle(i,a)},setDetailGrid:function(i){return r.setDetailGrid(i)},setRowData:function(i){return r.setRowData(i)},getGui:function(){return r.eDetailGrid}};this.ctrl=this.createManagedBean(new Xg),this.ctrl.init(n,e)},t.prototype.refresh=function(){return this.ctrl&&this.ctrl.refresh()},t.prototype.destroy=function(){o.prototype.destroy.call(this)},t.prototype.selectAndSetTemplate=function(){var e=this;if(this.params.pinned)this.setTemplate('<div class="ag-details-row"></div>');else{var r=function(){e.setTemplate(t.TEMPLATE)};if(f._.missing(this.params.template))r();else if("string"==typeof this.params.template)this.setTemplate(this.params.template);else if("function"==typeof this.params.template){var i=(0,this.params.template)(this.params);this.setTemplate(i)}else console.warn("AG Grid: detailCellRendererParams.template should be function or string"),r();null==this.eDetailGrid&&console.warn('AG Grid: reference to eDetailGrid was missing from the details template. Please add ref="eDetailGrid" to the template.')}},t.prototype.setDetailGrid=function(e){if(this.eDetailGrid){var r=this.context.getBean("agGridReact"),n=r?f._.cloneObject(r):void 0,i=this.context.getBean("frameworkComponentWrapper"),a=this.getFrameworkOverrides();new f.yeN(this.eDetailGrid,e,{frameworkOverrides:a,providedBeanInstances:{agGridReact:n,frameworkComponentWrapper:i},modules:f.Y5$.__getGridRegisteredModules(this.params.api.getGridId())}),this.detailApi=e.api,this.ctrl.registerDetailWithMaster(e.api,e.columnApi),this.addDestroyFunc(function(){e.api&&e.api.destroy()})}},t.prototype.setRowData=function(e){this.detailApi&&this.detailApi.setRowData(e)},t.TEMPLATE='<div class="ag-details-row" role="gridcell">\n            <div ref="eDetailGrid" class="ag-details-grid" role="presentation"></div>\n        </div>',function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);n>3&&i&&Object.defineProperty(t,e,i)}([(0,f.IzG)("eDetailGrid")],t.prototype,"eDetailGrid",void 0),t}(f.YlN),zR={version:"30.2.1",moduleName:f.ekS.MasterDetailModule,beans:[],userComponents:[{componentName:"agDetailCellRenderer",componentClass:BR}],controllers:[{controllerName:"detailCellRenderer",controllerClass:Xg}],dependantModules:[Ue]},Qg=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Tt=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},HR=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return Qg(t,o),t.prototype.hideActiveMenu=function(){this.destroyBean(this.activeMenu)},t.prototype.showMenuAfterMouseEvent=function(e,r,n){var i=this;this.showMenu(e,function(a){var s=a.getGui();i.popupService.positionPopupUnderMouseEvent({type:"columnMenu",column:e,mouseEvent:r,ePopup:s}),n&&a.showTab(n)},"columnMenu",n,void 0,r.target)},t.prototype.showMenuAfterButtonClick=function(e,r,n,i,a){var s=this,l=-1,u="left";this.gridOptionsService.is("enableRtl")&&(l=1,u="right"),this.showMenu(e,function(c){var d=c.getGui();s.popupService.positionPopupByComponent({type:n,column:e,eventSource:r,ePopup:d,alignSide:u,nudgeX:9*l,nudgeY:-23,position:"under",keepWithinBounds:!0}),i&&c.showTab(i)},n,i,a,r)},t.prototype.showMenu=function(e,r,n,i,a,s){var l=this,u=this.getMenuParams(e,a,s),c=u.menu,d=u.eMenuGui,v=u.anchorToElement,g=[];g.push(this.getClosedCallback(e,c,u.currentHeaderPosition,u.currentColumnIndex,s));var y=this.localeService.getLocaleTextFunc();this.popupService.addPopup({modal:!0,eChild:d,closeOnEsc:!0,closedCallback:function(m){g.forEach(function(C){return C(m)})},afterGuiAttached:function(m){return c.afterGuiAttached(Object.assign({},{container:n},m))},positionCallback:i?function(){return r(c)}:void 0,ariaLabel:y("ariaLabelColumnMenu","Column Menu")}),i||(c.showTabBasedOnPreviousSelection(),r(c));var S=this.popupService.setPopupPositionRelatedToElement(d,v);S&&this.addStopAnchoring(S,e,g),c.addEventListener(Td.EVENT_TAB_SELECTED,function(m){l.lastSelectedTab=m.key}),e.setMenuVisible(!0,"contextMenu"),this.activeMenu=c,c.addEventListener(f._QX.EVENT_DESTROYED,function(){l.activeMenu===c&&(l.activeMenu=null)})},t.prototype.addStopAnchoring=function(e,r,n){e.then(function(i){r.addEventListener("leftChanged",i),r.addEventListener("visibleChanged",i),n.push(function(){r.removeEventListener("leftChanged",i),r.removeEventListener("visibleChanged",i)})})},t.prototype.getClosedCallback=function(e,r,n,i,a){var s=this;return function(l){if(s.destroyBean(r),e.setMenuVisible(!1,"contextMenu"),l instanceof KeyboardEvent&&a)if(s.columnModel.getAllDisplayedColumns().some(function(v){return v===e})&&f._.isVisible(a)){var d=s.focusService.findTabbableParent(a);d&&(e&&s.headerNavigationService.scrollToColumn(e),d.focus())}else if(n&&-1!==i){var h=s.columnModel.getAllDisplayedColumns(),p=h[i]||f._.last(h);p&&s.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:n.headerRowIndex,column:p}})}}},t.prototype.getMenuParams=function(e,r,n){var i=this.createBean(new Td(e,this.lastSelectedTab,r));return{menu:i,eMenuGui:i.getGui(),currentHeaderPosition:this.focusService.getFocusedHeader(),currentColumnIndex:this.columnModel.getAllDisplayedColumns().indexOf(e),anchorToElement:n||this.ctrlsService.getGridBodyCtrl().getGui()}},t.prototype.isMenuEnabled=function(e){return e.getMenuTabs(Td.TABS_DEFAULT).length>0},Tt([(0,f.Qnc)("popupService")],t.prototype,"popupService",void 0),Tt([(0,f.Qnc)("focusService")],t.prototype,"focusService",void 0),Tt([(0,f.Qnc)("headerNavigationService")],t.prototype,"headerNavigationService",void 0),Tt([(0,f.Qnc)("ctrlsService")],t.prototype,"ctrlsService",void 0),Tt([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),Tt([(0,f.ekA)("menuFactory")],t)}(f._QX),Td=function(o){function t(e,r,n){var i=o.call(this)||this;return i.tabFactories={},i.includeChecks={},i.column=e,i.initialSelection=r,i.tabFactories[t.TAB_GENERAL]=i.createMainPanel.bind(i),i.tabFactories[t.TAB_FILTER]=i.createFilterPanel.bind(i),i.tabFactories[t.TAB_COLUMNS]=i.createColumnsPanel.bind(i),i.includeChecks[t.TAB_GENERAL]=function(){return!0},i.includeChecks[t.TAB_FILTER]=function(){return i.filterManager.isFilterAllowed(e)},i.includeChecks[t.TAB_COLUMNS]=function(){return!0},i.restrictTo=n,i}return Qg(t,o),t.prototype.init=function(){var e=this,r=this.getTabsToCreate().map(function(n){return e.createTab(n)});this.tabbedLayout=new f.EpC({items:r,cssClass:"ag-menu",onActiveItemClicked:this.onHidePopup.bind(this),onItemClicked:this.onTabItemClicked.bind(this)}),this.createBean(this.tabbedLayout),this.mainMenuList&&this.mainMenuList.setParentComponent(this.tabbedLayout),this.addDestroyFunc(function(){return e.destroyBean(e.tabbedLayout)})},t.prototype.getTabsToCreate=function(){var e=this;return this.restrictTo?this.restrictTo:this.column.getMenuTabs(t.TABS_DEFAULT).filter(function(r){return e.isValidMenuTabItem(r)}).filter(function(r){return e.isNotSuppressed(r)}).filter(function(r){return e.isModuleLoaded(r)})},t.prototype.isModuleLoaded=function(e){return e!==t.TAB_COLUMNS||f.Y5$.__isRegistered(f.ekS.ColumnsToolPanelModule,this.context.getGridId())},t.prototype.isValidMenuTabItem=function(e){var r=!0,n=t.TABS_DEFAULT;return null!=this.restrictTo&&(r=this.restrictTo.indexOf(e)>-1,n=this.restrictTo),(r=r&&t.TABS_DEFAULT.indexOf(e)>-1)||console.warn("AG Grid: Trying to render an invalid menu item '"+e+"'. Check that your 'menuTabs' contains one of ["+n+"]"),r},t.prototype.isNotSuppressed=function(e){return this.includeChecks[e]()},t.prototype.createTab=function(e){return this.tabFactories[e]()},t.prototype.showTabBasedOnPreviousSelection=function(){this.showTab(this.initialSelection)},t.prototype.showTab=function(e){this.tabItemColumns&&e===t.TAB_COLUMNS?this.tabbedLayout.showItem(this.tabItemColumns):this.tabItemFilter&&e===t.TAB_FILTER?this.tabbedLayout.showItem(this.tabItemFilter):this.tabItemGeneral&&e===t.TAB_GENERAL?this.tabbedLayout.showItem(this.tabItemGeneral):this.tabbedLayout.showFirstItem()},t.prototype.onTabItemClicked=function(e){var r=null;switch(e.item){case this.tabItemColumns:r=t.TAB_COLUMNS;break;case this.tabItemFilter:r=t.TAB_FILTER;break;case this.tabItemGeneral:r=t.TAB_GENERAL}r&&this.activateTab(r)},t.prototype.activateTab=function(e){this.dispatchEvent({type:t.EVENT_TAB_SELECTED,key:e})},t.prototype.getMenuItems=function(){var r,e=this.getDefaultMenuOptions(),n=this.gridOptionsService.getCallback("getMainMenuItems");return r=n?n({column:this.column,defaultItems:e}):e,f._.removeRepeatsFromArray(r,t.MENU_ITEM_SEPARATOR),r},t.prototype.getDefaultMenuOptions=function(){var e=[],r=!this.column.getColDef().lockPinned,n=this.columnModel.getRowGroupColumns().length,i=n>0,a=this.columnModel.getRowGroupColumns().indexOf(this.column)>=0,s=this.column.isAllowValue(),l=this.column.isAllowRowGroup(),u=this.column.isPrimary(),c=this.columnModel.isPivotMode(),d="clientSide"===this.rowModel.getType(),h=this.gridOptionsService.is("treeData"),p=u&&i&&s||!u;return r&&e.push("pinSubMenu"),p&&e.push("valueAggSubMenu"),(r||p)&&e.push(t.MENU_ITEM_SEPARATOR),e.push("autoSizeThis"),e.push("autoSizeAll"),e.push(t.MENU_ITEM_SEPARATOR),this.column.getColDef().showRowGroup&&e.push("rowUnGroup"),l&&this.column.isPrimary()&&e.push(a?"rowUnGroup":"rowGroup"),e.push(t.MENU_ITEM_SEPARATOR),e.push("resetColumns"),d&&(h||n>(c?1:0))&&(e.push("expandAll"),e.push("contractAll")),e},t.prototype.createMainPanel=function(){this.mainMenuList=this.createManagedBean(new f.gbx);var e=this.getMenuItems(),r=this.menuItemMapper.mapWithStockItems(e,this.column);return this.mainMenuList.addMenuItems(r),this.mainMenuList.addEventListener(f.GUU.EVENT_MENU_ITEM_SELECTED,this.onHidePopup.bind(this)),this.tabItemGeneral={title:f._.createIconNoSpan("menu",this.gridOptionsService,this.column),titleLabel:t.TAB_GENERAL.replace("MenuTab",""),bodyPromise:f.VVN.resolve(this.mainMenuList.getGui()),name:t.TAB_GENERAL},this.tabItemGeneral},t.prototype.onHidePopup=function(e){var r;e&&e.event&&e.event instanceof KeyboardEvent&&(r=e.event),this.hidePopupFunc(r&&{keyboardEvent:r});var n=this.focusService.getFocusedCell(),i=this.gridOptionsService.getDocument();i.activeElement===i.body&&n&&this.focusService.setFocusedCell({rowIndex:n.rowIndex,column:n.column,rowPinned:n.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})},t.prototype.createFilterPanel=function(){var e=this.filterManager.getOrCreateFilterWrapper(this.column,"COLUMN_MENU");if(!e)throw new Error("AG Grid - Unable to instantiate filter");return this.tabItemFilter={title:f._.createIconNoSpan("filter",this.gridOptionsService,this.column),titleLabel:t.TAB_FILTER.replace("MenuTab",""),bodyPromise:e?.guiPromise,afterAttachedCallback:function(i){e?.filterPromise&&e.filterPromise.then(function(a){a&&a.afterGuiAttached&&a.afterGuiAttached(i)})},afterDetachedCallback:function(){var i;return null===(i=e?.filterPromise)||void 0===i?void 0:i.then(function(a){var s;return null===(s=a?.afterGuiDetached)||void 0===s?void 0:s.call(a)})},name:t.TAB_FILTER},this.tabItemFilter},t.prototype.createColumnsPanel=function(){var e=document.createElement("div");e.classList.add("ag-menu-column-select-wrapper");var r=this.createManagedBean(new Vu),n=this.column.getColDef().columnsMenuParams;n||(n={});var c=n.columnLayout;r.init(!1,{suppressColumnMove:!1,suppressValues:!1,suppressPivots:!1,suppressRowGroups:!1,suppressPivotMode:!1,contractColumnSelection:!!n.contractColumnSelection,suppressColumnExpandAll:!!n.suppressColumnExpandAll,suppressColumnFilter:!!n.suppressColumnFilter,suppressColumnSelectAll:!!n.suppressColumnSelectAll,suppressSyncLayoutWithGrid:!!c||!!n.suppressSyncLayoutWithGrid,api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsService.context},"columnMenu"),c&&r.setColumnLayout(c);var d=r.getGui();return d.classList.add("ag-menu-column-select"),e.appendChild(d),this.tabItemColumns={title:f._.createIconNoSpan("columns",this.gridOptionsService,this.column),titleLabel:t.TAB_COLUMNS.replace("MenuTab",""),bodyPromise:f.VVN.resolve(e),name:t.TAB_COLUMNS},this.tabItemColumns},t.prototype.afterGuiAttached=function(e){var n=e.hidePopup;this.tabbedLayout.setAfterAttachedParams({container:e.container,hidePopup:n}),n&&(this.hidePopupFunc=n,this.addDestroyFunc(n))},t.prototype.getGui=function(){return this.tabbedLayout.getGui()},t.EVENT_TAB_SELECTED="tabSelected",t.TAB_FILTER="filterMenuTab",t.TABS_DEFAULT=[t.TAB_GENERAL="generalMenuTab",t.TAB_FILTER,t.TAB_COLUMNS="columnsMenuTab"],t.MENU_ITEM_SEPARATOR="separator",Tt([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),Tt([(0,f.Qnc)("filterManager")],t.prototype,"filterManager",void 0),Tt([(0,f.Qnc)("gridApi")],t.prototype,"gridApi",void 0),Tt([(0,f.Qnc)("columnApi")],t.prototype,"columnApi",void 0),Tt([(0,f.Qnc)("menuItemMapper")],t.prototype,"menuItemMapper",void 0),Tt([(0,f.Qnc)("rowModel")],t.prototype,"rowModel",void 0),Tt([(0,f.Qnc)("focusService")],t.prototype,"focusService",void 0),Tt([f.QhY],t.prototype,"init",null),t}(f._QX),Zg=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),cu=function(){return cu=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},cu.apply(this,arguments)},sn=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},qg="ag-context-menu-open",WR=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return Zg(t,o),t.prototype.hideActiveMenu=function(){this.destroyBean(this.activeMenu)},t.prototype.getMenuItems=function(e,r,n){var i=[];if(f._.exists(e)&&f.Y5$.__isRegistered(f.ekS.ClipboardModule,this.context.getGridId())&&r&&(this.gridOptionsService.is("suppressCutToClipboard")||i.push("cut"),i.push("copy","copyWithHeaders","copyWithGroupHeaders","paste","separator")),this.gridOptionsService.is("enableCharts")&&f.Y5$.__isRegistered(f.ekS.GridChartsModule,this.context.getGridId())&&(this.columnModel.isPivotMode()&&i.push("pivotChart"),this.rangeService&&!this.rangeService.isEmpty()&&i.push("chartRange")),f._.exists(e)){var a=!f.Y5$.__isRegistered(f.ekS.CsvExportModule,this.context.getGridId()),s=!f.Y5$.__isRegistered(f.ekS.ExcelExportModule,this.context.getGridId()),l=this.gridOptionsService.is("suppressExcelExport")||s,u=this.gridOptionsService.is("suppressCsvExport")||a;!(f._.isIOSUserAgent()||l&&u)&&i.push("export")}var h=this.gridOptionsService.getCallback("getContextMenuItems");return h?h({node:e,column:r,value:n,defaultItems:i.length?i:void 0}):i},t.prototype.onContextMenu=function(e,r,n,i,a,s){!this.gridOptionsService.is("allowContextMenuWithControlKey")&&e&&(e.ctrlKey||e.metaKey)||(e&&this.blockMiddleClickScrollsIfNeeded(e),this.gridOptionsService.is("suppressContextMenu"))||this.showMenu(n,i,a,e||r.touches[0],s)&&(e||r).preventDefault()},t.prototype.blockMiddleClickScrollsIfNeeded=function(e){var n=e.which;this.gridOptionsService.is("suppressMiddleClickScrolls")&&2===n&&e.preventDefault()},t.prototype.showMenu=function(e,r,n,i,a){var s=this,l=this.getMenuItems(e,r,n),u=this.ctrlsService.getGridBodyCtrl().getGui();if(void 0===l||f._.missingOrEmpty(l))return!1;var c=new KR(l);this.createBean(c);var d=c.getGui(),h={column:r,rowNode:e,type:"contextMenu",mouseEvent:i,ePopup:d,nudgeY:1},p=this.localeService.getLocaleTextFunc(),v=this.popupService.addPopup({modal:!0,eChild:d,closeOnEsc:!0,closedCallback:function(){u.classList.remove(qg),s.destroyBean(c)},click:i,positionCallback:function(){var g=s.gridOptionsService.is("enableRtl");s.popupService.positionPopupUnderMouseEvent(cu(cu({},h),{nudgeX:g?-1*(d.offsetWidth+1):1}))},anchorToElement:a,ariaLabel:p("ariaLabelContextMenu","Context Menu")});return v&&(u.classList.add(qg),c.afterGuiAttached({container:"contextMenu",hidePopup:v.hideFunc})),this.activeMenu&&this.hideActiveMenu(),this.activeMenu=c,c.addEventListener(f._QX.EVENT_DESTROYED,function(){s.activeMenu===c&&(s.activeMenu=null)}),v&&c.addEventListener(f.GUU.EVENT_MENU_ITEM_SELECTED,v.hideFunc),!0},sn([(0,f.Qnc)("popupService")],t.prototype,"popupService",void 0),sn([(0,f.T7N)("rangeService")],t.prototype,"rangeService",void 0),sn([(0,f.Qnc)("ctrlsService")],t.prototype,"ctrlsService",void 0),sn([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),sn([(0,f.ekA)("contextMenuFactory")],t)}(f._QX),KR=function(o){function t(e){var r=o.call(this,'<div class="ag-menu" role="presentation"></div>')||this;return r.menuList=null,r.focusedCell=null,r.menuItems=e,r}return Zg(t,o),t.prototype.addMenuItems=function(){var e=this,r=this.createManagedBean(new f.gbx),n=this.menuItemMapper.mapWithStockItems(this.menuItems,null);r.addMenuItems(n),this.appendChild(r),this.menuList=r,r.addEventListener(f.GUU.EVENT_MENU_ITEM_SELECTED,function(i){return e.dispatchEvent(i)})},t.prototype.afterGuiAttached=function(e){e.hidePopup&&this.addDestroyFunc(e.hidePopup),this.focusedCell=this.focusService.getFocusedCell(),this.menuList&&this.focusService.focusInto(this.menuList.getGui())},t.prototype.restoreFocusedCell=function(){var e=this.focusService.getFocusedCell();if(e&&this.focusedCell&&this.cellPositionUtils.equals(e,this.focusedCell)){var r=this.focusedCell,n=r.rowIndex,i=r.rowPinned,a=r.column,s=this.gridOptionsService.getDocument();s.activeElement===s.body&&this.focusService.setFocusedCell({rowIndex:n,column:a,rowPinned:i,forceBrowserFocus:!0})}},t.prototype.destroy=function(){this.restoreFocusedCell(),o.prototype.destroy.call(this)},sn([(0,f.Qnc)("menuItemMapper")],t.prototype,"menuItemMapper",void 0),sn([(0,f.Qnc)("focusService")],t.prototype,"focusService",void 0),sn([(0,f.Qnc)("cellPositionUtils")],t.prototype,"cellPositionUtils",void 0),sn([f.QhY],t.prototype,"addMenuItems",null),t}(f.YlN),YR=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Pd=function(){return Pd=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},Pd.apply(this,arguments)},kn=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},$R=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return YR(t,o),t.prototype.mapWithStockItems=function(e,r){var n=this;if(!e)return[];var i=[];return e.forEach(function(a){var s;if(s="string"==typeof a?n.getStockMenuItem(a,r):Pd({},a)){var u=s.subMenu;u&&u instanceof Array&&(s.subMenu=n.mapWithStockItems(u,r)),null!=s&&i.push(s)}}),i},t.prototype.getStockMenuItem=function(e,r){var i,a,n=this,s=this.localeService.getLocaleTextFunc(),l=this.gridOptionsService.is("skipHeaderOnAutoSize");switch(e){case"pinSubMenu":return{name:s("pinColumn","Pin Column"),icon:f._.createIconNoSpan("menuPin",this.gridOptionsService,null),subMenu:["clearPinned","pinLeft","pinRight"]};case"pinLeft":return{name:s("pinLeft","Pin Left"),action:function(){return n.columnModel.setColumnPinned(r,"left","contextMenu")},checked:!!r&&r.isPinnedLeft()};case"pinRight":return{name:s("pinRight","Pin Right"),action:function(){return n.columnModel.setColumnPinned(r,"right","contextMenu")},checked:!!r&&r.isPinnedRight()};case"clearPinned":return{name:s("noPin","No Pin"),action:function(){return n.columnModel.setColumnPinned(r,null,"contextMenu")},checked:!!r&&!r.isPinned()};case"valueAggSubMenu":return f.Y5$.__assertRegistered(f.ekS.RowGroupingModule,"Aggregation from Menu",this.context.getGridId())&&(r?.isPrimary()||r?.getColDef().pivotValueColumn)?{name:s("valueAggregation","Value Aggregation"),icon:f._.createIconNoSpan("menuValue",this.gridOptionsService,null),subMenu:this.createAggregationSubMenu(r)}:null;case"autoSizeThis":return{name:s("autosizeThiscolumn","Autosize This Column"),action:function(){return n.columnModel.autoSizeColumn(r,l,"contextMenu")}};case"autoSizeAll":return{name:s("autosizeAllColumns","Autosize All Columns"),action:function(){return n.columnModel.autoSizeAllColumns(l,"contextMenu")}};case"rowGroup":return{name:s("groupBy","Group by")+" "+f._.escapeString(this.columnModel.getDisplayNameForColumn(r,"header")),disabled:r?.isRowGroupActive()||!r?.getColDef().enableRowGroup,action:function(){return n.columnModel.addRowGroupColumn(r,"contextMenu")},icon:f._.createIconNoSpan("menuAddRowGroup",this.gridOptionsService,null)};case"rowUnGroup":var u=f._.createIconNoSpan("menuRemoveRowGroup",this.gridOptionsService,null),c=r?.getColDef().showRowGroup;if(!0===c)return{name:s("ungroupAll","Un-Group All"),disabled:!r?.getColDef().showRowGroup,action:function(){return n.columnModel.setRowGroupColumns([],"contextMenu")},icon:u};if("string"==typeof c){var d=null===(i=this.columnModel.getSourceColumnsForGroupColumn(r))||void 0===i?void 0:i[0],h=null!=d?f._.escapeString(this.columnModel.getDisplayNameForColumn(d,"header")):c;return{name:s("ungroupBy","Un-Group by")+" "+h,disabled:!r?.getColDef().showRowGroup,action:function(){return n.columnModel.removeRowGroupColumn(c,"contextMenu")},icon:u}}return{name:s("ungroupBy","Un-Group by")+" "+f._.escapeString(this.columnModel.getDisplayNameForColumn(r,"header")),disabled:!r?.isRowGroupActive()||!r?.getColDef().enableRowGroup,action:function(){return n.columnModel.removeRowGroupColumn(r,"contextMenu")},icon:u};case"resetColumns":return{name:s("resetColumns","Reset Columns"),action:function(){return n.columnModel.resetColumnState("contextMenu")}};case"expandAll":return{name:s("expandAll","Expand All Row Groups"),action:function(){return n.gridApi.expandAll()}};case"contractAll":return{name:s("collapseAll","Collapse All Row Groups"),action:function(){return n.gridApi.collapseAll()}};case"copy":return f.Y5$.__assertRegistered(f.ekS.ClipboardModule,"Copy from Menu",this.context.getGridId())?{name:s("copy","Copy"),shortcut:s("ctrlC","Ctrl+C"),icon:f._.createIconNoSpan("clipboardCopy",this.gridOptionsService,null),action:function(){return n.clipboardService.copyToClipboard()}}:null;case"copyWithHeaders":return f.Y5$.__assertRegistered(f.ekS.ClipboardModule,"Copy with Headers from Menu",this.context.getGridId())?{name:s("copyWithHeaders","Copy with Headers"),icon:f._.createIconNoSpan("clipboardCopy",this.gridOptionsService,null),action:function(){return n.clipboardService.copyToClipboard({includeHeaders:!0})}}:null;case"copyWithGroupHeaders":return f.Y5$.__assertRegistered(f.ekS.ClipboardModule,"Copy with Group Headers from Menu",this.context.getGridId())?{name:s("copyWithGroupHeaders","Copy with Group Headers"),icon:f._.createIconNoSpan("clipboardCopy",this.gridOptionsService,null),action:function(){return n.clipboardService.copyToClipboard({includeHeaders:!0,includeGroupHeaders:!0})}}:null;case"cut":if(f.Y5$.__assertRegistered(f.ekS.ClipboardModule,"Cut from Menu",this.context.getGridId())){var p=this.focusService.getFocusedCell(),v=p?this.rowPositionUtils.getRowNode(p):null,g=!!v&&p?.column.isCellEditable(v);return{name:s("cut","Cut"),shortcut:s("ctrlX","Ctrl+X"),icon:f._.createIconNoSpan("clipboardCut",this.gridOptionsService,null),disabled:!g||this.gridOptionsService.is("suppressCutToClipboard"),action:function(){return n.clipboardService.cutToClipboard(void 0,"contextMenu")}}}return null;case"paste":return f.Y5$.__assertRegistered(f.ekS.ClipboardModule,"Paste from Clipboard",this.context.getGridId())?{name:s("paste","Paste"),shortcut:s("ctrlV","Ctrl+V"),disabled:!0,icon:f._.createIconNoSpan("clipboardPaste",this.gridOptionsService,null),action:function(){return n.clipboardService.pasteFromClipboard()}}:null;case"export":var y=[],S=f.Y5$.__isRegistered(f.ekS.CsvExportModule,this.context.getGridId()),m=f.Y5$.__isRegistered(f.ekS.ExcelExportModule,this.context.getGridId());return!this.gridOptionsService.is("suppressCsvExport")&&S&&y.push("csvExport"),!this.gridOptionsService.is("suppressExcelExport")&&m&&y.push("excelExport"),{name:s("export","Export"),subMenu:y,icon:f._.createIconNoSpan("save",this.gridOptionsService,null)};case"csvExport":return{name:s("csvExport","CSV Export"),icon:f._.createIconNoSpan("csvExport",this.gridOptionsService,null),action:function(){return n.gridApi.exportDataAsCsv({})}};case"excelExport":return{name:s("excelExport","Excel Export"),icon:f._.createIconNoSpan("excelExport",this.gridOptionsService,null),action:function(){return n.gridApi.exportDataAsExcel()}};case"separator":return"separator";case"pivotChart":case"chartRange":return null!==(a=this.chartMenuItemMapper.getChartItems(e))&&void 0!==a?a:null;default:return console.warn("AG Grid: unknown menu item type "+e),null}},t.prototype.createAggregationSubMenu=function(e){var i,r=this,n=this.localeService.getLocaleTextFunc();if(e.isPrimary())i=e;else{var a=e.getColDef().pivotValueColumn;i=f._.exists(a)?a:void 0}var s=[];if(i){var l=i.isValueActive(),u=this.aggFuncService.getFuncNames(i);s.push({name:n("noAggregation","None"),action:function(){r.columnModel.removeValueColumn(i,"contextMenu"),r.columnModel.setColumnAggFunc(i,void 0,"contextMenu")},checked:!l}),u.forEach(function(c){s.push({name:n(c,f._.capitalise(c)),action:function(){r.columnModel.setColumnAggFunc(i,c,"contextMenu"),r.columnModel.addValueColumn(i,"contextMenu")},checked:l&&i.getAggFunc()===c})})}return s},kn([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),kn([(0,f.Qnc)("gridApi")],t.prototype,"gridApi",void 0),kn([(0,f.T7N)("clipboardService")],t.prototype,"clipboardService",void 0),kn([(0,f.T7N)("aggFuncService")],t.prototype,"aggFuncService",void 0),kn([(0,f.Qnc)("focusService")],t.prototype,"focusService",void 0),kn([(0,f.Qnc)("rowPositionUtils")],t.prototype,"rowPositionUtils",void 0),kn([(0,f.Qnc)("chartMenuItemMapper")],t.prototype,"chartMenuItemMapper",void 0),kn([(0,f.ekA)("menuItemMapper")],t)}(f._QX),QR=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),du=function(){return du=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},du.apply(this,arguments)},Jg=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},qR=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}var e;return QR(t,o),e=t,t.prototype.getChartItems=function(r){var n,i;if(this.chartService){var a="pivotChart"===r?new JR(this.gridOptionsService,this.chartService,this.localeService):new eF(this.gridOptionsService,this.chartService,this.localeService),s=a.getMenuItem(),l=null===(i=null===(n=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===n?void 0:n.settingsPanel)||void 0===i?void 0:i.chartGroupsDef;return l&&(s=e.filterAndOrderChartMenu(s,l,a.getConfigLookup())),this.cleanInternals(s)}f.Y5$.__assertRegistered(f.ekS.GridChartsModule,'the Context Menu key "'+r+'"',this.context.getGridId())},t.prototype.cleanInternals=function(r){if(!r)return r;var n=function(i){var a;return null==i||delete i._key,null===(a=i?.subMenu)||void 0===a||a.forEach(function(s){return n(s)}),i};return n(r)},t.buildLookup=function(r){var n={},i=function(a){n[a._key]=a,a.subMenu&&a.subMenu.forEach(function(s){return i(s)})};return i(r),n},t.filterAndOrderChartMenu=function(r,n,i){var a,s=this.buildLookup(r),l=du(du({},r),{subMenu:[]});if(Object.entries(n).forEach(function(u){var c,d,h=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i}(u,2),p=h[0],g=i[p];if(null!=g){var y=s[g._key];if(y)if(y.subMenu){var S=h[1].map(function(m){var C=g[m];if(null!=C)return s[C];f._.doOnce(function(){return console.warn("AG Grid - invalid chartGroupsDef config '"+p+"."+m+"'")},"invalid_chartGroupsDef"+m+"_"+p)}).filter(function(m){return void 0!==m});S.length>0&&(y.subMenu=S,null===(c=l.subMenu)||void 0===c||c.push(y))}else null===(d=l.subMenu)||void 0===d||d.push(y)}else f._.doOnce(function(){return console.warn("AG Grid - invalid chartGroupsDef config '"+p+"'")},"invalid_chartGroupsDef"+p)}),0!=(null===(a=l.subMenu)||void 0===a?void 0:a.length))return l},Jg([(0,f.T7N)("chartService")],t.prototype,"chartService",void 0),e=Jg([(0,f.ekA)("chartMenuItemMapper")],t)}(f._QX),JR=function(){function o(t,e,r){this.gridOptionsService=t,this.chartService=e,this.localeService=r}return o.prototype.getMenuItem=function(){var t=this,e=this.localeService.getLocaleTextFunc(),r=function(n,i,a,s){return{name:e(n,i),action:function(){return t.chartService.createPivotChart({chartType:a})},_key:s}};return{name:e("pivotChart","Pivot Chart"),_key:"pivotChart",subMenu:[{_key:"pivotColumnChart",name:e("columnChart","Column"),subMenu:[r("groupedColumn","Grouped&lrm;","groupedColumn","pivotGroupedColumn"),r("stackedColumn","Stacked&lrm;","stackedColumn","pivotStackedColumn"),r("normalizedColumn","100% Stacked&lrm;","normalizedColumn","pivotNormalizedColumn")]},{_key:"pivotBarChart",name:e("barChart","Bar"),subMenu:[r("groupedBar","Grouped&lrm;","groupedBar","pivotGroupedBar"),r("stackedBar","Stacked&lrm;","stackedBar","pivotStackedBar"),r("normalizedBar","100% Stacked&lrm;","normalizedBar","pivotNormalizedBar")]},{_key:"pivotPieChart",name:e("pieChart","Pie"),subMenu:[r("pie","Pie&lrm;","pie","pivotPie"),r("doughnut","Doughnut&lrm;","doughnut","pivotDoughnut")]},r("line","Line&lrm;","line","pivotLineChart"),{_key:"pivotXYChart",name:e("xyChart","X Y (Scatter)"),subMenu:[r("scatter","Scatter&lrm;","scatter","pivotScatter"),r("bubble","Bubble&lrm;","bubble","pivotBubble")]},{_key:"pivotAreaChart",name:e("areaChart","Area"),subMenu:[r("area","Area&lrm;","area","pivotArea"),r("stackedArea","Stacked&lrm;","stackedArea","pivotStackedArea"),r("normalizedArea","100% Stacked&lrm;","normalizedArea","pivotNormalizedArea")]},r("histogramChart","Histogram&lrm;","histogram","pivotHistogramChart"),{_key:"pivotCombinationChart",name:e("combinationChart","Combination"),subMenu:[r("columnLineCombo","Column & Line&lrm;","columnLineCombo","pivotColumnLineCombo"),r("AreaColumnCombo","Area & Column&lrm;","areaColumnCombo","pivotAreaColumnCombo")]}],icon:f._.createIconNoSpan("chart",this.gridOptionsService,void 0)}},o.prototype.getConfigLookup=function(){return{columnGroup:{_key:"pivotColumnChart",column:"pivotGroupedColumn",stackedColumn:"pivotStackedColumn",normalizedColumn:"pivotNormalizedColumn"},barGroup:{_key:"pivotBarChart",bar:"pivotGroupedBar",stackedBar:"pivotStackedBar",normalizedBar:"pivotNormalizedBar"},pieGroup:{_key:"pivotPieChart",pie:"pivotPie",doughnut:"pivotDoughnut"},lineGroup:{_key:"pivotLineChart",line:"pivotLineChart"},scatterGroup:{_key:"pivotXYChart",bubble:"pivotBubble",scatter:"pivotScatter"},areaGroup:{_key:"pivotAreaChart",area:"pivotArea",stackedArea:"pivotStackedArea",normalizedArea:"pivotNormalizedArea"},histogramGroup:{_key:"pivotHistogramChart",histogram:"pivotHistogramChart"},combinationGroup:{_key:"pivotCombinationChart",columnLineCombo:"pivotColumnLineCombo",areaColumnCombo:"pivotAreaColumnCombo",customCombo:""}}},o}(),eF=function(){function o(t,e,r){this.gridOptionsService=t,this.chartService=e,this.localeService=r}return o.prototype.getMenuItem=function(){var t=this,e=this.localeService.getLocaleTextFunc(),r=function(n,i,a,s){return{name:e(n,i),action:function(){return t.chartService.createChartFromCurrentRange(a)},_key:s}};return{name:e("chartRange","Chart Range"),_key:"chartRange",subMenu:[{name:e("columnChart","Column"),subMenu:[r("groupedColumn","Grouped&lrm;","groupedColumn","rangeGroupedColumn"),r("stackedColumn","Stacked&lrm;","stackedColumn","rangeStackedColumn"),r("normalizedColumn","100% Stacked&lrm;","normalizedColumn","rangeNormalizedColumn")],_key:"rangeColumnChart"},{name:e("barChart","Bar"),subMenu:[r("groupedBar","Grouped&lrm;","groupedBar","rangeGroupedBar"),r("stackedBar","Stacked&lrm;","stackedBar","rangeStackedBar"),r("normalizedBar","100% Stacked&lrm;","normalizedBar","rangeNormalizedBar")],_key:"rangeBarChart"},{name:e("pieChart","Pie"),subMenu:[r("pie","Pie&lrm;","pie","rangePie"),r("doughnut","Doughnut&lrm;","doughnut","rangeDoughnut")],_key:"rangePieChart"},r("line","Line&lrm;","line","rangeLineChart"),{name:e("xyChart","X Y (Scatter)"),subMenu:[r("scatter","Scatter&lrm;","scatter","rangeScatter"),r("bubble","Bubble&lrm;","bubble","rangeBubble")],_key:"rangeXYChart"},{name:e("areaChart","Area"),subMenu:[r("area","Area&lrm;","area","rangeArea"),r("stackedArea","Stacked&lrm;","stackedArea","rangeStackedArea"),r("normalizedArea","100% Stacked&lrm;","normalizedArea","rangeNormalizedArea")],_key:"rangeAreaChart"},r("histogramChart","Histogram&lrm;","histogram","rangeHistogramChart"),{name:e("combinationChart","Combination"),subMenu:[r("columnLineCombo","Column & Line&lrm;","columnLineCombo","rangeColumnLineCombo"),r("AreaColumnCombo","Area & Column&lrm;","areaColumnCombo","rangeAreaColumnCombo")],_key:"rangeCombinationChart"}],icon:f._.createIconNoSpan("chart",this.gridOptionsService,void 0)}},o.prototype.getConfigLookup=function(){return{columnGroup:{_key:"rangeColumnChart",column:"rangeGroupedColumn",stackedColumn:"rangeStackedColumn",normalizedColumn:"rangeNormalizedColumn"},barGroup:{_key:"rangeBarChart",bar:"rangeGroupedBar",stackedBar:"rangeStackedBar",normalizedBar:"rangeNormalizedBar"},pieGroup:{_key:"rangePieChart",pie:"rangePie",doughnut:"rangeDoughnut"},lineGroup:{_key:"rangeLineChart",line:"rangeLineChart"},scatterGroup:{_key:"rangeXYChart",bubble:"rangeBubble",scatter:"rangeScatter"},areaGroup:{_key:"rangeAreaChart",area:"rangeArea",stackedArea:"rangeStackedArea",normalizedArea:"rangeNormalizedArea"},histogramGroup:{_key:"rangeHistogramChart",histogram:"rangeHistogramChart"},combinationGroup:{_key:"rangeCombinationChart",columnLineCombo:"rangeColumnLineCombo",areaColumnCombo:"rangeAreaColumnCombo",customCombo:""}}},o}(),tF={version:"30.2.1",moduleName:f.ekS.MenuModule,beans:[HR,WR,$R,qR],dependantModules:[Ue]},rF=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Go=function(){return Go=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},Go.apply(this,arguments)},Ad=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Dd=function(o){function t(){var e=o.call(this,'<div class="ag-multi-filter ag-menu-list-compact"></div>')||this;return e.filterDefs=[],e.filters=[],e.guiDestroyFuncs=[],e.activeFilterIndices=[],e.lastActivatedMenuItem=null,e.afterFiltersReadyFuncs=[],e}return rF(t,o),t.prototype.postConstruct=function(){var e=this;this.initialiseTabGuard({onFocusIn:function(r){return e.onFocusIn(r)}})},t.getFilterDefs=function(e){var r=e.filters;return r&&r.length>0?r:[{filter:"agTextColumnFilter"},{filter:"agSetColumnFilter"}]},t.prototype.init=function(e){var r=this;this.params=e,this.filterDefs=t.getFilterDefs(e);var i=e.filterChangedCallback;this.column=e.column,this.filterChangedCallback=i;var a=[];return this.filterDefs.forEach(function(s,l){var u=r.createFilter(s,l);null!=u&&a.push(u)}),f.VVN.all(a).then(function(s){r.filters=s,r.refreshGui("columnMenu"),r.afterFiltersReadyFuncs.forEach(function(l){return l()}),r.afterFiltersReadyFuncs.length=0})},t.prototype.refreshGui=function(e){var r=this;e!==this.lastOpenedInContainer&&(this.removeAllChildrenExceptTabGuards(),this.destroyChildren(),this.filters.forEach(function(n,i){i>0&&r.appendChild(f._.loadTemplate('<div class="ag-filter-separator"></div>'));var l,a=r.filterDefs[i],s=r.getFilterTitle(n,a);l="subMenu"===a.display&&"toolPanel"!==e?r.insertFilterMenu(n,s).getGui():"subMenu"===a.display||"accordion"===a.display?r.insertFilterGroup(n,s).getGui():n.getGui(),r.appendChild(l)}),this.lastOpenedInContainer=e)},t.prototype.getFilterTitle=function(e,r){return null!=r.title?r.title:"function"==typeof e.getFilterTitle?e.getFilterTitle():"Filter"},t.prototype.destroyChildren=function(){this.guiDestroyFuncs.forEach(function(e){return e()}),this.guiDestroyFuncs.length=0},t.prototype.insertFilterMenu=function(e,r){var n=this,i=this.createBean(new f.GUU({name:r,subMenu:e,cssClasses:["ag-multi-filter-menu-item"],isCompact:!0,isAnotherSubMenuOpen:function(){return!1}}));return i.setParentComponent(this),this.guiDestroyFuncs.push(function(){return n.destroyBean(i)}),this.addManagedListener(i,f.GUU.EVENT_MENU_ITEM_ACTIVATED,function(a){n.lastActivatedMenuItem&&n.lastActivatedMenuItem!==a.menuItem&&n.lastActivatedMenuItem.deactivate(),n.lastActivatedMenuItem=a.menuItem}),i.addGuiEventListener("focusin",function(){return i.activate()}),i.addGuiEventListener("focusout",function(){i.isSubMenuOpen()||i.deactivate()}),i},t.prototype.insertFilterGroup=function(e,r){var n=this,i=this.createBean(new f.SKM({title:r,cssIdentifier:"multi-filter"}));return this.guiDestroyFuncs.push(function(){return n.destroyBean(i)}),i.addItem(e.getGui()),i.toggleGroupExpand(!1),e.afterGuiAttached&&i.addManagedListener(i,f.SKM.EVENT_EXPANDED,function(){return e.afterGuiAttached({container:n.lastOpenedInContainer,suppressFocus:!0,hidePopup:n.hidePopup})}),i},t.prototype.isFilterActive=function(){return this.filters.some(function(e){return e.isFilterActive()})},t.prototype.getLastActiveFilterIndex=function(){return this.activeFilterIndices.length>0?this.activeFilterIndices[this.activeFilterIndices.length-1]:null},t.prototype.doesFilterPass=function(e,r){var n=!0;return this.filters.forEach(function(i){!n||i===r||!i.isFilterActive()||(n=i.doesFilterPass(e))}),n},t.prototype.getFilterType=function(){return"multi"},t.prototype.getModelFromUi=function(){return{filterType:this.getFilterType(),filterModels:this.filters.map(function(r){return"function"==typeof r.getModelFromUi?r.getModelFromUi():null})}},t.prototype.getModel=function(){return this.isFilterActive()?{filterType:this.getFilterType(),filterModels:this.filters.map(function(r){return r.isFilterActive()?r.getModel():null})}:null},t.prototype.setModel=function(e){var r=this,n=function(a,s){return new f.VVN(function(l){var u=a.setModel(s);u?u.then(function(){return l()}):l()})},i=[];return null==e?i=this.filters.map(function(a,s){return n(a,null).then(function(){r.updateActiveList(s)})}):this.filters.forEach(function(a,s){var u=n(a,e.filterModels.length>s?e.filterModels[s]:null).then(function(){r.updateActiveList(s)});i.push(u)}),f.VVN.all(i).then(function(){})},t.prototype.applyModel=function(e){void 0===e&&(e="api");var r=!1;return this.filters.forEach(function(n){n instanceof f.gPE&&(r=n.applyModel(e)||r)}),r},t.prototype.getChildFilterInstance=function(e){return this.filters[e]},t.prototype.afterGuiAttached=function(e){e?(this.hidePopup=e.hidePopup,this.refreshGui(e.container)):this.hidePopup=void 0;var r=this.params.filters,n=r&&r.some(function(s){return s.display&&"inline"!==s.display});this.executeFunctionIfExists("afterGuiAttached",Go(Go({},e||{}),{suppressFocus:n}));var i=this.gridOptionsService.getDocument(),a=i.activeElement;n&&(a===i.body||this.getGui().contains(a))&&this.forceFocusOutOfContainer(!0)},t.prototype.afterGuiDetached=function(){this.executeFunctionIfExists("afterGuiDetached")},t.prototype.onAnyFilterChanged=function(){this.executeFunctionIfExists("onAnyFilterChanged")},t.prototype.onNewRowsLoaded=function(){this.executeFunctionIfExists("onNewRowsLoaded")},t.prototype.destroy=function(){var e=this;this.filters.forEach(function(r){r.setModel(null),e.destroyBean(r)}),this.filters.length=0,this.destroyChildren(),this.hidePopup=void 0,o.prototype.destroy.call(this)},t.prototype.executeFunctionIfExists=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];f._.forEachReverse(this.filters,function(i){var a=i[e];"function"==typeof a&&a.apply(i,r)})},t.prototype.createFilter=function(e,r){var l,n=this,i=this.params,a=i.filterModifiedCallback,s=i.doesRowPassOtherFilter,u=Go(Go({},this.filterManager.createFilterParams(this.column,this.column.getColDef())),{filterModifiedCallback:a,filterChangedCallback:function(h){n.executeWhenAllFiltersReady(function(){return n.filterChanged(r,h)})},doesRowPassOtherFilter:function(h){return s(h)&&n.doesFilterPass({node:h,data:h.data},l)}}),c=this.userComponentFactory.getFilterDetails(e,u,"agTextColumnFilter");if(!c)return null;var d=c.newAgStackInstance();return d&&d.then(function(h){return l=h}),d},t.prototype.executeWhenAllFiltersReady=function(e){this.filters&&this.filters.length>0?e():this.afterFiltersReadyFuncs.push(e)},t.prototype.updateActiveList=function(e){var r=this.filters[e];f._.removeFromArray(this.activeFilterIndices,e),r.isFilterActive()&&this.activeFilterIndices.push(e)},t.prototype.filterChanged=function(e,r){this.updateActiveList(e),this.filterChangedCallback(r);var n=this.filters[e];this.filters.forEach(function(i){i!==n&&"function"==typeof i.onAnyFilterChanged&&i.onAnyFilterChanged()})},t.prototype.onFocusIn=function(e){return null!=this.lastActivatedMenuItem&&!this.lastActivatedMenuItem.getGui().contains(e.target)&&(this.lastActivatedMenuItem.deactivate(),this.lastActivatedMenuItem=null),!0},t.prototype.getModelAsString=function(e){var r,n,i,a;if(!this.filters||null===(r=e?.filterModels)||void 0===r||!r.length)return"";var s=null!==(n=this.getLastActiveFilterIndex())&&void 0!==n?n:0,l=this.filters[s];return null!==(a=null===(i=l.getModelAsString)||void 0===i?void 0:i.call(l,e.filterModels[s]))&&void 0!==a?a:""},Ad([(0,f.Qnc)("filterManager")],t.prototype,"filterManager",void 0),Ad([(0,f.Qnc)("userComponentFactory")],t.prototype,"userComponentFactory",void 0),Ad([f.QhY],t.prototype,"postConstruct",null),t}(f._0_),nF=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),fu=function(){return fu=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},fu.apply(this,arguments)},ey=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},iF=function(o){function t(){var e=o.call(this,'<div class="ag-multi-floating-filter ag-floating-filter-input"></div>')||this;return e.floatingFilters=[],e.compDetailsList=[],e}return nF(t,o),t.prototype.init=function(e){this.params=e;var r=this.getCompDetailsList(e).compDetailsList;return this.setParams(r)},t.prototype.setParams=function(e){var r=this,n=[];return e.forEach(function(i){var a=i?.newAgStackInstance();null!=a&&(r.compDetailsList.push(i),n.push(a))}),f.VVN.all(n).then(function(i){i.forEach(function(a,s){r.floatingFilters.push(a);var l=a.getGui();r.appendChild(l),s>0&&f._.setDisplayed(l,!1)})})},t.prototype.onParamsUpdated=function(e){var r=this;this.params=e;var n=this.getCompDetailsList(e),i=n.compDetailsList,a=n.floatingFilterParamsList;i.length===this.compDetailsList.length&&i.every(function(l,u){return!r.filterManager.areFilterCompsDifferent(r.compDetailsList[u],l)})?a.forEach(function(l,u){var c,d=r.floatingFilters[u];null===(c=d.onParamsUpdated)||void 0===c||c.call(d,l)}):(f._.clearElement(this.getGui()),this.destroyBeans(this.floatingFilters),this.floatingFilters=[],this.compDetailsList=[],this.setParams(i))},t.prototype.getCompDetailsList=function(e){var r=this,n=[],i=[];return Dd.getFilterDefs(e.filterParams).forEach(function(s,l){var u=fu(fu({},e),{parentFilterInstance:function(d){r.parentMultiFilterInstance(function(h){var p=h.getChildFilterInstance(l);null!=p&&d(p)})}});f._.mergeDeep(u.filterParams,s.filterParams);var c=r.getCompDetails(s,u);c&&(n.push(c),i.push(u))}),{compDetailsList:n,floatingFilterParamsList:i}},t.prototype.onParentModelChanged=function(e,r){var n=this;r&&r.afterFloatingFilter||this.parentMultiFilterInstance(function(i){if(null==e)n.floatingFilters.forEach(function(s,l){s.onParentModelChanged(null,r),f._.setDisplayed(s.getGui(),0===l)});else{var a=i.getLastActiveFilterIndex();n.floatingFilters.forEach(function(s,l){s.onParentModelChanged(e.filterModels.length>l?e.filterModels[l]:null,r);var c=null==a?0===l:l===a;f._.setDisplayed(s.getGui(),c)})}})},t.prototype.destroy=function(){this.destroyBeans(this.floatingFilters),this.floatingFilters.length=0,o.prototype.destroy.call(this)},t.prototype.getCompDetails=function(e,r){var i,n=this,a=null!==(i=this.userComponentFactory.getDefaultFloatingFilterType(e,function(){return n.filterManager.getDefaultFloatingFilter(n.params.column)}))&&void 0!==i?i:"agReadOnlyFloatingFilter";return this.userComponentFactory.getFloatingFilterCompDetails(e,r,a)},t.prototype.parentMultiFilterInstance=function(e){this.params.parentFilterInstance(function(r){if(!(r instanceof Dd))throw new Error("AG Grid - MultiFloatingFilterComp expects MultiFilter as its parent");e(r)})},ey([(0,f.Qnc)("userComponentFactory")],t.prototype,"userComponentFactory",void 0),ey([(0,f.Qnc)("filterManager")],t.prototype,"filterManager",void 0),t}(f.YlN),aF={version:"30.2.1",moduleName:f.ekS.MultiFilterModule,beans:[],userComponents:[{componentName:"agMultiColumnFilter",componentClass:Dd},{componentName:"agMultiColumnFloatingFilter",componentClass:iF}],dependantModules:[Ue]},sF=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ty=function(o){function t(){return o.call(this,'<div class="ag-cell-edit-wrapper"></div>')||this}return sF(t,o),t.prototype.init=function(e){var r=this;this.params=e;var n=e.cellStartedEdit,i=e.cellHeight;if(f._.missing(e.values))console.warn("AG Grid: richSelectCellEditor requires values for it to work");else{var s=this.buildRichSelectParams(),u=s.valuesPromise;this.richSelect=this.createManagedBean(new f.K8H(s.params)),this.appendChild(this.richSelect),u&&u.then(function(c){r.richSelect.setValueList({valueList:c,refresh:!0});var d=r.getSearchStringCallback(c);d&&r.richSelect.setSearchStringCreator(d)}),this.addManagedListener(this.richSelect,f.YFc.EVENT_FIELD_PICKER_VALUE_SELECTED,this.onEditorPickerValueSelected.bind(this)),this.addManagedListener(this.richSelect.getGui(),"focusout",this.onEditorFocusOut.bind(this)),this.focusAfterAttached=n,f._.exists(i)&&this.richSelect.setRowHeight(i)}},t.prototype.onEditorPickerValueSelected=function(e){this.params.stopEditing(!e.fromEnterKey)},t.prototype.onEditorFocusOut=function(e){this.richSelect.getGui().contains(e.relatedTarget)||this.params.stopEditing(!0)},t.prototype.buildRichSelectParams=function(){var S,m,e=this.params,i=e.values,y={value:e.value,cellRenderer:e.cellRenderer,searchDebounceDelay:e.searchDebounceDelay,valueFormatter:e.formatValue,pickerAriaLabelKey:"ariaLabelRichSelectField",pickerAriaLabelValue:"Rich Select Field",pickerType:"virtual-list",pickerGap:e.valueListGap,allowTyping:e.allowTyping,filterList:e.filterList,searchType:e.searchType,highlightMatch:e.highlightMatch,maxPickerHeight:e.valueListMaxHeight,maxPickerWidth:e.valueListMaxWidth,placeholder:e.valuePlaceholder};return S="function"==typeof i?i(this.params):i,Array.isArray(S)?(y.valueList=S,y.searchStringCreator=this.getSearchStringCallback(S)):m=S,{params:y,valuesPromise:m}},t.prototype.getSearchStringCallback=function(e){var r=this,n=this.params.colDef;if("object"==typeof e[0]&&n.keyCreator)return function(i){return i.map(function(a){return n.keyCreator({value:a,colDef:r.params.colDef,column:r.params.column,node:r.params.node,data:r.params.data,api:r.gridOptionsService.api,columnApi:r.gridOptionsService.columnApi,context:r.gridOptionsService.context})})}},t.prototype.afterGuiAttached=function(){var e=this,n=this.focusAfterAttached,i=this.params;setTimeout(function(){if(e.isAlive()){n&&e.richSelect.getFocusableElement().focus(),e.richSelect.showPicker();var a=i.eventKey;a&&1===a?.length&&e.richSelect.searchTextFromString(a)}})},t.prototype.getValue=function(){return this.richSelect.getValue()},t.prototype.isPopup=function(){return!1},t}(f.WUm),uF={version:"30.2.1",moduleName:f.ekS.RichSelectModule,beans:[],userComponents:[{componentName:"agRichSelect",componentClass:ty},{componentName:"agRichSelectCellEditor",componentClass:ty}],dependantModules:[Ue]},cF=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),zt=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Md=function(o){function t(e,r,n){var i=o.call(this,0)||this;return i.nodeIdSequence=new f.Gxi,i.info={},i.ssrmParams=e,i.parentRowNode=n,i.level=n.level+1,i.groupLevel=e.rowGroupCols?i.level<e.rowGroupCols.length:void 0,i.leafGroup=!!e.rowGroupCols&&i.level===e.rowGroupCols.length-1,i}return cF(t,o),t.prototype.postConstruct=function(){var e=this;this.usingTreeData=this.gridOptionsService.is("treeData"),this.nodeIdPrefix=this.blockUtils.createNodeIdPrefix(this.parentRowNode),!this.usingTreeData&&this.groupLevel&&(this.groupField=this.ssrmParams.rowGroupCols[this.level].field,this.rowGroupColumn=this.columnModel.getRowGroupColumns()[this.level]);var n=1,i=-1===this.parentRowNode.level,a=this.storeUtils.getServerSideInitialRowCount();i&&void 0!==a&&(n=a),this.initialiseRowNodes(n),this.rowNodeBlockLoader.addBlock(this),this.addDestroyFunc(function(){return e.rowNodeBlockLoader.removeBlock(e)}),this.postSortFunc=this.gridOptionsService.getCallback("postSortRows")},t.prototype.destroyRowNodes=function(){this.blockUtils.destroyRowNodes(this.allRowNodes),this.allRowNodes=[],this.nodesAfterSort=[],this.nodesAfterFilter=[],this.allNodesMap={}},t.prototype.initialiseRowNodes=function(e,r){void 0===r&&(r=!1),this.destroyRowNodes();for(var n=0;n<e;n++){var i=this.blockUtils.createRowNode({field:this.groupField,group:this.groupLevel,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn});r&&(i.failedLoad=!0),this.allRowNodes.push(i),this.nodesAfterFilter.push(i),this.nodesAfterSort.push(i)}},t.prototype.getBlockStateJson=function(){return{id:this.nodeIdPrefix?this.nodeIdPrefix:"",state:this.getState()}},t.prototype.loadFromDatasource=function(){this.storeUtils.loadFromDatasource({startRow:void 0,endRow:void 0,parentBlock:this,parentNode:this.parentRowNode,storeParams:this.ssrmParams,successCallback:this.pageLoaded.bind(this,this.getVersion()),success:this.success.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),fail:this.pageLoadFailed.bind(this,this.getVersion())})},t.prototype.getStartRow=function(){return 0},t.prototype.getEndRow=function(){return this.nodesAfterSort.length},t.prototype.createDataNode=function(e,r){var n=this.blockUtils.createRowNode({field:this.groupField,group:this.groupLevel,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn});null!=r?f._.insertIntoArray(this.allRowNodes,n,r):this.allRowNodes.push(n);var i=this.prefixId(this.nodeIdSequence.next());return this.blockUtils.setDataIntoRowNode(n,e,i,void 0),this.nodeManager.addRowNode(n),this.blockUtils.checkOpenByDefault(n),this.allNodesMap[n.id]=n,n},t.prototype.prefixId=function(e){return this.nodeIdPrefix?this.nodeIdPrefix+"-"+e:e.toString()},t.prototype.processServerFail=function(){this.initialiseRowNodes(1,!0),this.fireStoreUpdatedEvent(),this.flushAsyncTransactions()},t.prototype.processServerResult=function(e){if(this.isAlive()){var r=e.storeInfo||e.groupLevelInfo;r&&Object.assign(this.info,r),e.pivotResultFields&&this.serverSideRowModel.generateSecondaryColumns(e.pivotResultFields);var n=this.allRowNodes.length>0?this.allNodesMap:void 0;this.allRowNodes=[],this.nodesAfterSort=[],this.nodesAfterFilter=[],this.allNodesMap={},e.rowData||f._.doOnce(function(){return console.warn('AG Grid: "params.data" is missing from Server-Side Row Model success() callback. Please use the "data" attribute. If no data is returned, set an empty list.',e)},"FullStore.noData"),this.createOrRecycleNodes(n,e.rowData),n&&this.blockUtils.destroyRowNodes(f._.getAllValuesInObject(n)),this.filterAndSortNodes(),this.fireStoreUpdatedEvent(),this.flushAsyncTransactions()}},t.prototype.createOrRecycleNodes=function(e,r){var n=this;r&&r.forEach(function(s){var l=function(s){if(e){var l=n.gridOptionsService.getCallback("getRowId");if(l){var u=n.parentRowNode.getGroupKeys(),d=l({data:s,parentKeys:u.length>0?u:void 0,level:n.level}),h=e[d];if(h)return delete e[d],h}}}(s);l?function(s,l){n.allNodesMap[s.id]=s,n.blockUtils.updateDataIntoRowNode(s,l),n.allRowNodes.push(s)}(l,s):n.createDataNode(s)})},t.prototype.flushAsyncTransactions=function(){var e=this;window.setTimeout(function(){return e.transactionManager.flushAsyncTransactions()},0)},t.prototype.filterAndSortNodes=function(){this.filterRowNodes(),this.sortRowNodes()},t.prototype.sortRowNodes=function(){var e=this.storeUtils.isServerSideSortAllLevels()||this.storeUtils.isServerSideSortOnServer(),r=this.sortController.getSortOptions();e||!r||0==r.length?this.nodesAfterSort=this.nodesAfterFilter:(this.nodesAfterSort=this.rowNodeSorter.doFullSort(this.nodesAfterFilter,r),this.postSortFunc&&this.postSortFunc({nodes:this.nodesAfterSort}))},t.prototype.filterRowNodes=function(){var e=this;this.nodesAfterFilter=!this.storeUtils.isServerSideOnlyRefreshFilteredGroups()||this.storeUtils.isServerSideFilterOnServer()||this.groupLevel?this.allRowNodes:this.allRowNodes.filter(function(i){return e.filterManager.doesRowPassFilter({rowNode:i})})},t.prototype.clearDisplayIndexes=function(){var e=this;this.displayIndexStart=void 0,this.displayIndexEnd=void 0,this.allRowNodes.forEach(function(r){return e.blockUtils.clearDisplayIndex(r)})},t.prototype.getDisplayIndexEnd=function(){return this.displayIndexEnd},t.prototype.isDisplayIndexInStore=function(e){return 0!==this.getRowCount()&&e>=this.displayIndexStart&&e<this.displayIndexEnd},t.prototype.setDisplayIndexes=function(e,r){var n=this;this.displayIndexStart=e.peek(),this.topPx=r.value;var i={};this.nodesAfterSort.forEach(function(a){n.blockUtils.setDisplayIndex(a,e,r),i[a.id]=!0}),this.allRowNodes.forEach(function(a){i[a.id]||n.blockUtils.clearDisplayIndex(a)}),this.displayIndexEnd=e.peek(),this.heightPx=r.value-this.topPx},t.prototype.forEachStoreDeep=function(e,r){void 0===r&&(r=new f.Gxi),e(this,r.next()),this.allRowNodes.forEach(function(n){var i=n.childStore;i&&i.forEachStoreDeep(e,r)})},t.prototype.forEachNodeDeep=function(e,r){void 0===r&&(r=new f.Gxi),this.allRowNodes.forEach(function(n){e(n,r.next());var i=n.childStore;i&&i.forEachNodeDeep(e,r)})},t.prototype.forEachNodeDeepAfterFilterAndSort=function(e,r,n){void 0===r&&(r=new f.Gxi),void 0===n&&(n=!1),this.nodesAfterSort.forEach(function(i){e(i,r.next());var a=i.childStore;a&&a.forEachNodeDeepAfterFilterAndSort(e,r,n)}),n&&this.parentRowNode.sibling&&e(this.parentRowNode.sibling,r.next())},t.prototype.getRowUsingDisplayIndex=function(e){if(this.isDisplayIndexInStore(e))return this.blockUtils.binarySearchForDisplayIndex(e,this.nodesAfterSort)},t.prototype.getRowBounds=function(e){for(var r=0;r<this.nodesAfterSort.length;r++){var i=this.blockUtils.extractRowBounds(this.nodesAfterSort[r],e);if(i)return i}return null},t.prototype.isPixelInRange=function(e){return e>=this.topPx&&e<this.topPx+this.heightPx},t.prototype.getRowIndexAtPixel=function(e){var r=this;if(e<=this.topPx)return this.nodesAfterSort[0].rowIndex;if(e>=this.topPx+this.heightPx){var s=this.nodesAfterSort[this.nodesAfterSort.length-1];if(e>=s.rowTop+s.rowHeight&&s.expanded){if(s.childStore&&s.childStore.getRowCount()>0)return s.childStore.getRowIndexAtPixel(e);if(s.detailNode)return s.detailNode.rowIndex}return s.rowIndex}var u=null;return this.nodesAfterSort.forEach(function(d){var h=r.blockUtils.getIndexAtPixel(d,e);null!=h&&(u=h)}),null==u?this.displayIndexEnd-1:u},t.prototype.getChildStore=function(e){var r=this;return this.storeUtils.getChildStore(e,this,function(n){return r.allRowNodes.find(function(a){return a.key==n})})},t.prototype.forEachChildStoreShallow=function(e){this.allRowNodes.forEach(function(r){var n=r.childStore;n&&e(n)})},t.prototype.refreshAfterFilter=function(e){var r=this.storeUtils.isServerSideFilterOnServer(),n=this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,e);if(!this.storeUtils.isServerSideOnlyRefreshFilteredGroups()||r&&n)return this.refreshStore(!0),void this.sortRowNodes();this.filterRowNodes(),this.sortRowNodes(),this.forEachChildStoreShallow(function(a){return a.refreshAfterFilter(e)})},t.prototype.refreshAfterSort=function(e){var r=this.storeUtils.isServerSideSortOnServer(),n=this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,e);if(this.storeUtils.isServerSideSortAllLevels()||r&&n)return this.refreshStore(!0),void this.filterRowNodes();this.filterRowNodes(),this.sortRowNodes(),this.forEachChildStoreShallow(function(a){return a.refreshAfterSort(e)})},t.prototype.applyTransaction=function(e){switch(this.getState()){case f.uCH.STATE_FAILED:return{status:f.OgV.StoreLoadingFailed};case f.uCH.STATE_LOADING:return{status:f.OgV.StoreLoading};case f.uCH.STATE_WAITING_TO_LOAD:return{status:f.OgV.StoreWaitingToLoad}}var r=this.gridOptionsService.getCallback("isApplyServerSideTransaction");if(r&&!r({transaction:e,parentNode:this.parentRowNode,storeInfo:this.info,groupLevelInfo:this.info}))return{status:f.OgV.Cancelled};var a={status:f.OgV.Applied,remove:[],update:[],add:[]},s=[];return this.executeAdd(e,a),this.executeRemove(e,a,s),this.executeUpdate(e,a,s),this.filterAndSortNodes(),this.updateSelection(s),a},t.prototype.updateSelection=function(e){e.length>0&&(this.selectionService.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,clearSelection:!1,source:"rowDataChanged"}),this.eventService.dispatchEvent({type:f.YFc.EVENT_SELECTION_CHANGED,source:"rowDataChanged"}))},t.prototype.executeAdd=function(e,r){var n=this,i=e.add,a=e.addIndex;f._.missingOrEmpty(i)||("number"==typeof a&&a>=0?i.reverse().forEach(function(l){var u=n.createDataNode(l,a);r.add.push(u)}):i.forEach(function(l){var u=n.createDataNode(l);r.add.push(u)}))},t.prototype.executeRemove=function(e,r,n){var i=this,a=e.remove;if(null!=a){var s={};a.forEach(function(l){var u=i.lookupRowNode(l);u&&(u.isSelected()&&n.push(u),u.clearRowTopAndRowIndex(),s[u.id]=!0,delete i.allNodesMap[u.id],r.remove.push(u),i.nodeManager.removeNode(u))}),this.allRowNodes=this.allRowNodes.filter(function(l){return!s[l.id]})}},t.prototype.executeUpdate=function(e,r,n){var i=this,a=e.update;a?.forEach(function(s){var l=i.lookupRowNode(s);l&&(i.blockUtils.updateDataIntoRowNode(l,s),!l.selectable&&l.isSelected()&&n.push(l),r.update.push(l))})},t.prototype.lookupRowNode=function(e){var n,r=this.gridOptionsService.getCallback("getRowId");if(null!=r){var i=this.level,a=this.parentRowNode.getGroupKeys(),s=r({data:e,parentKeys:a.length>0?a:void 0,level:i});if(!(n=this.allNodesMap[s]))return console.error("AG Grid: could not find row id="+s+", data item was not found for this id"),null}else if(!(n=this.allRowNodes.find(function(l){return l.data===e})))return console.error("AG Grid: could not find data item as object was not found",e),null;return n},t.prototype.addStoreStates=function(e){e.push({suppressInfiniteScroll:!0,route:this.parentRowNode.getGroupKeys(),rowCount:this.allRowNodes.length,info:this.info}),this.forEachChildStoreShallow(function(r){return r.addStoreStates(e)})},t.prototype.refreshStore=function(e){e&&this.initialiseRowNodes(this.nodesAfterSort?this.nodesAfterSort.length:1),this.scheduleLoad(),this.fireStoreUpdatedEvent()},t.prototype.retryLoads=function(){this.getState()===f.uCH.STATE_FAILED&&(this.initialiseRowNodes(1),this.scheduleLoad()),this.forEachChildStoreShallow(function(e){return e.retryLoads()})},t.prototype.scheduleLoad=function(){this.setStateWaitingToLoad(),this.rowNodeBlockLoader.checkBlockToLoad()},t.prototype.fireStoreUpdatedEvent=function(){this.eventService.dispatchEvent({type:f.YFc.EVENT_STORE_UPDATED})},t.prototype.getRowCount=function(){return this.nodesAfterSort.length},t.prototype.getTopLevelRowDisplayedIndex=function(e){return this.nodesAfterSort[e].rowIndex},t.prototype.isLastRowIndexKnown=function(){return this.getState()==f.uCH.STATE_LOADED},t.prototype.getRowNodesInRange=function(e,r){var n=[],i=!1;return f._.missing(e)&&(i=!0),this.nodesAfterSort.forEach(function(s){var l=s===e||s===r;(i||l)&&n.push(s),l&&(i=!i)}),i?[]:n},t.prototype.getStoreBounds=function(){return{topPx:this.topPx,heightPx:this.heightPx}},zt([(0,f.Qnc)("ssrmStoreUtils")],t.prototype,"storeUtils",void 0),zt([(0,f.Qnc)("ssrmBlockUtils")],t.prototype,"blockUtils",void 0),zt([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),zt([(0,f.Qnc)("rowNodeBlockLoader")],t.prototype,"rowNodeBlockLoader",void 0),zt([(0,f.Qnc)("rowNodeSorter")],t.prototype,"rowNodeSorter",void 0),zt([(0,f.Qnc)("sortController")],t.prototype,"sortController",void 0),zt([(0,f.Qnc)("selectionService")],t.prototype,"selectionService",void 0),zt([(0,f.Qnc)("ssrmNodeManager")],t.prototype,"nodeManager",void 0),zt([(0,f.Qnc)("filterManager")],t.prototype,"filterManager",void 0),zt([(0,f.Qnc)("ssrmTransactionManager")],t.prototype,"transactionManager",void 0),zt([(0,f.Qnc)("rowModel")],t.prototype,"serverSideRowModel",void 0),zt([f.QhY],t.prototype,"postConstruct",null),zt([f.sR7],t.prototype,"destroyRowNodes",null),t}(f.uCH),dF=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),hu=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},hF=function(o){function t(e,r,n){var i=o.call(this)||this;return i.loadingNodes=new Set,i.checkForLoadQueued=!1,i.loaderTimeout=void 0,i.nextBlockToLoad=void 0,i.parentNode=r,i.cache=e,i.storeParams=n,i}return dF(t,o),t.prototype.init=function(){var e=this;this.addManagedListener(this.rowNodeBlockLoader,f.mZu.BLOCK_LOADED_EVENT,function(){return e.queueLoadAction()})},t.prototype.isRowLoading=function(e){return this.loadingNodes.has(e)},t.prototype.getBlockToLoad=function(){for(var r,e=this,n=this.api.getFirstDisplayedRow(),i=this.api.getLastDisplayedRow(),a=n;a<=i;a++){var s=this.cache.getNodeCachedByDisplayIndex(a);if(s){var l=this.cache.getNodes().getBy("node",s);if(l&&!this.isRowLoading(l.index)&&(s.__needsRefreshWhenVisible||s.stub&&!s.failedLoad))return this.getBlockStartIndexForIndex(l.index)}}var u=this.cache.getNodesToRefresh(),c=null,d=Number.MAX_SAFE_INTEGER;u.forEach(function(p){if(null!=p.rowIndex){if(!e.isRowLoading(p.rowIndex)){var v=Math.abs(n-p.rowIndex),g=Math.abs(p.rowIndex-i);v<d&&(c=p,d=v),g<d&&(c=p,d=g)}}else c=p});var h=null===(r=this.cache.getNodes().getBy("node",c))||void 0===r?void 0:r.index;return null==h?void 0:this.getBlockStartIndexForIndex(h)},t.prototype.reset=function(){this.loadingNodes.clear(),clearTimeout(this.loaderTimeout),this.loaderTimeout=void 0},t.prototype.executeLoad=function(e,r){var i,n=this,a=this.cache.getSsrmParams(),s={startRow:e,endRow:r,rowGroupCols:a.rowGroupCols,valueCols:a.valueCols,pivotCols:a.pivotCols,pivotMode:a.pivotMode,groupKeys:this.parentNode.getGroupKeys(),filterModel:a.filterModel,sortModel:a.sortModel},l=function(){for(var p=0;p<r-e;p++)n.loadingNodes.delete(e+p)},c=function(p){n.rowNodeBlockLoader.loadComplete(),n.cache.onLoadSuccess(e,r-e,p),l(),n.queueLoadAction()},d=function(){n.rowNodeBlockLoader.loadComplete(),n.cache.onLoadFailed(e,r-e),l(),n.queueLoadAction()},h={request:s,successCallback:function(p,v){return c({rowData:p,rowCount:v})},success:c,failCallback:d,fail:d,parentNode:this.parentNode,api:this.api,columnApi:this.columnApi,context:this.gridOptionsService.context};(function(){for(var p=0;p<r-e;p++)n.loadingNodes.add(e+p)})(),null===(i=this.cache.getSsrmParams().datasource)||void 0===i||i.getRows(h)},t.prototype.getNextBlockToLoad=function(){var e=this.getBlockToLoad();return null!=e?[String(e),e+this.getBlockSize()]:null},t.prototype.queueLoadCheck=function(){var e=this;this.checkForLoadQueued||(this.checkForLoadQueued=!0,window.queueMicrotask(function(){e.checkForLoadQueued=!1,e.queueLoadAction()}))},t.prototype.queueLoadAction=function(){var r,e=this,n=this.getNextBlockToLoad();if(!n)return window.clearTimeout(this.loaderTimeout),this.loaderTimeout=void 0,void(this.nextBlockToLoad=void 0);if(!this.nextBlockToLoad||this.nextBlockToLoad[0]!==n[0]&&this.nextBlockToLoad[1]!==n[1]){this.nextBlockToLoad=n,window.clearTimeout(this.loaderTimeout);var i=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i}(this.nextBlockToLoad,2),s=i[1],l=Number(i[0]);this.loaderTimeout=window.setTimeout(function(){e.cache.isAlive()&&(e.loaderTimeout=void 0,e.attemptLoad(l,s),e.nextBlockToLoad=void 0)},null!==(r=this.gridOptionsService.getNum("blockLoadDebounceMillis"))&&void 0!==r?r:0)}},t.prototype.attemptLoad=function(e,r){var n=this.rowNodeBlockLoader.getAvailableLoadingCount();null!=n&&0===n||(this.rowNodeBlockLoader.registerLoads(1),this.executeLoad(e,r),this.queueLoadAction())},t.prototype.getBlockSize=function(){return this.storeParams.cacheBlockSize||t.DEFAULT_BLOCK_SIZE},t.prototype.getBlockStartIndexForIndex=function(e){return e-e%this.getBlockSize()},t.prototype.getBlockBoundsForIndex=function(e){var r=this.getBlockStartIndexForIndex(e);return[r,r+this.getBlockSize()]},t.DEFAULT_BLOCK_SIZE=100,hu([(0,f.Qnc)("gridApi")],t.prototype,"api",void 0),hu([(0,f.Qnc)("columnApi")],t.prototype,"columnApi",void 0),hu([(0,f.Qnc)("rowNodeBlockLoader")],t.prototype,"rowNodeBlockLoader",void 0),hu([f.QhY],t.prototype,"init",null),t}(f._QX),pF=function(){function o(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t.length<1)throw new Error("AG Grid: At least one index must be provided.");this.indexes=t,this.maps=new Map(this.indexes.map(function(r){return[r,new Map]}))}return o.prototype.getBy=function(t,e){var r=this.maps.get(t);if(!r)throw new Error("AG Grid: "+String(t)+" not found");return r.get(e)},o.prototype.set=function(t){var e=this;this.indexes.forEach(function(r){var n=e.maps.get(r);if(!n)throw new Error("AG Grid: "+String(r)+" not found");n.set(t[r],t)})},o.prototype.delete=function(t){var e=this;this.indexes.forEach(function(r){var n=e.maps.get(r);if(!n)throw new Error("AG Grid: "+String(r)+" not found");n.delete(t[r])})},o.prototype.clear=function(){this.maps.forEach(function(t){return t.clear()})},o.prototype.getIterator=function(t){var e=this.maps.get(t);if(!e)throw new Error("AG Grid: "+String(t)+" not found");return e.values()},o.prototype.forEach=function(t){for(var r,e=this.getIterator(this.indexes[0]);(r=e.next())&&!r.done;)t(r.value)},o.prototype.find=function(t){for(var r,e=this.getIterator(this.indexes[0]);(r=e.next())&&!r.done;)if(t(r.value))return r.value},o.prototype.filter=function(t){for(var r,e=this.getIterator(this.indexes[0]),n=[];(r=e.next())&&!r.done;)t(r.value)&&n.push(r.value);return n},o}(),vF=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ci=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},_i=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Rd=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},Fd=function(o){function t(e,r,n){var i=o.call(this)||this;return i.live=!0,i.removedNodeCache=new Map,i.store=e,i.numberOfRows=r,i.isLastRowKnown=!1,i.storeParams=n,i}return vF(t,o),t.prototype.init=function(){this.nodeMap=new pF("index","id","node"),this.nodeDisplayIndexMap=new Map,this.nodesToRefresh=new Set,this.defaultNodeIdPrefix=this.blockUtils.createNodeIdPrefix(this.store.getParentNode()),this.rowLoader=this.createManagedBean(new hF(this,this.store.getParentNode(),this.storeParams)),this.getRowIdFunc=this.gridOptionsService.getCallback("getRowId"),this.isMasterDetail=this.gridOptionsService.is("masterDetail")},t.prototype.destroyRowNodes=function(){var e=this;this.numberOfRows=0,this.nodeMap.forEach(function(r){return e.blockUtils.destroyRowNode(r.node)}),this.nodeMap.clear(),this.nodeDisplayIndexMap.clear(),this.nodesToRefresh.clear(),this.live=!1},t.prototype.getRowByDisplayIndex=function(e){var r,n,i,a;if(this.store.isDisplayIndexInStore(e)){var s=this.nodeDisplayIndexMap.get(e);if(s)return(s.stub||s.__needsRefreshWhenVisible)&&this.rowLoader.queueLoadCheck(),s;if(e===this.store.getDisplayIndexStart())return this.createStubNode(0,e);var l=this.nodeDisplayIndexMap.get(e-1);if(l){if(this.isMasterDetail&&l.master&&l.expanded)return l.detailNode;if(l.expanded&&null!==(r=l.childStore)&&void 0!==r&&r.isDisplayIndexInStore(e))return null===(n=l.childStore)||void 0===n?void 0:n.getRowUsingDisplayIndex(e);var u=this.nodeMap.getBy("node",l);return this.createStubNode(u.index+1,e)}var c=this.getSurroundingNodesByDisplayIndex(e);if(null==c){var d=this.store.getRowCount()-(this.store.getDisplayIndexEnd()-e);return this.createStubNode(d,e)}var h=c.previousNode,p=c.nextNode;if(h&&h.node.expanded&&null!==(i=h.node.childStore)&&void 0!==i&&i.isDisplayIndexInStore(e))return null===(a=h.node.childStore)||void 0===a?void 0:a.getRowUsingDisplayIndex(e);if(p)return this.createStubNode(p.index-(p.node.rowIndex-e),e);var y=this.store.getRowCount()-(this.store.getDisplayIndexEnd()-e);return this.createStubNode(y,e)}},t.prototype.createStubNode=function(e,r){var n=this,i=this.store.getRowBounds(r),a=this.createRowAtIndex(e,null,function(s){s.setRowIndex(r),s.setRowTop(i.rowTop),n.nodeDisplayIndexMap.set(r,s)});return this.rowLoader.queueLoadCheck(),a},t.prototype.getRowByStoreIndex=function(e){var r;return null===(r=this.nodeMap.getBy("index",e))||void 0===r?void 0:r.node},t.prototype.skipDisplayIndexes=function(e,r,n){if(0!==e){var i=this.gridOptionsService.getRowHeightAsNumber();r.skip(e),n.value+=e*i}},t.prototype.setDisplayIndexes=function(e,r){this.nodeDisplayIndexMap.clear();var n={};this.nodeMap.forEach(function(d){n[d.index]=d.node});var i=-1;for(var a in n){var s=n[a],l=Number(a);this.skipDisplayIndexes(l-1-i,e,r),this.blockUtils.setDisplayIndex(s,e,r),this.nodeDisplayIndexMap.set(s.rowIndex,s),i=l}this.skipDisplayIndexes(this.numberOfRows-1-i,e,r),this.purgeExcessRows()},t.prototype.getRowCount=function(){return this.numberOfRows},t.prototype.setRowCount=function(e,r){if(e<0)throw new Error("AG Grid: setRowCount can only accept a positive row count.");this.numberOfRows=e,null!=r&&(this.isLastRowKnown=r,!1===r&&(this.numberOfRows+=1)),this.fireStoreUpdatedEvent()},t.prototype.getNodes=function(){return this.nodeMap},t.prototype.getNodeCachedByDisplayIndex=function(e){var r;return null!==(r=this.nodeDisplayIndexMap.get(e))&&void 0!==r?r:null},t.prototype.getNodesToRefresh=function(){return this.nodesToRefresh},t.prototype.getSurroundingNodesByDisplayIndex=function(e){var r,n;return this.nodeMap.forEach(function(i){e>i.node.rowIndex?(null==n||n.node.rowIndex<i.node.rowIndex)&&(n=i):(null==r||r.node.rowIndex>i.node.rowIndex)&&(r=i)}),n||r?{previousNode:n,nextNode:r}:null},t.prototype.getDisplayIndexFromStoreIndex=function(e){var r,n,a,s,i=this.nodeMap.getBy("index",e);if(i)return i.node.rowIndex;if(this.nodeMap.forEach(function(c){e>c.index?(null==s||s.index<c.index)&&(s=c):(null==a||a.index>c.index)&&(a=c)}),!a)return this.store.getDisplayIndexEnd()-(this.numberOfRows-e);if(!s)return this.store.getDisplayIndexStart()+e;var l=e-s.index;return(null!==(n=null===(r=s.node.childStore)||void 0===r?void 0:r.getDisplayIndexEnd())&&void 0!==n?n:s.node.rowIndex)+l},t.prototype.createRowAtIndex=function(e,r,n){var i,a,s=this.nodeMap.getBy("index",e);if(s){if((l=s.node).__needsRefreshWhenVisible=!1,this.doesNodeMatch(r,l))return this.blockUtils.updateDataIntoRowNode(l,r),this.nodesToRefresh.delete(l),l;if(null==this.getRowIdFunc&&l.hasChildren()&&l.expanded)return this.nodesToRefresh.delete(l),l;this.destroyRowAtIndex(e)}if(r&&null!=this.getRowIdFunc){var u=this.getRowId(r),c=u&&(null===(i=this.removedNodeCache)||void 0===i?void 0:i.get(u));if(c)return null===(a=this.removedNodeCache)||void 0===a||a.delete(u),this.blockUtils.updateDataIntoRowNode(c,r),this.nodeMap.set({id:c.id,node:c,index:e}),c;var d=this.nodeMap.getBy("id",u);if(d){this.nodeMap.delete(d);var l,h=d.index;return this.blockUtils.updateDataIntoRowNode(l=d.node,r),this.nodeMap.set({id:l.id,node:l,index:e}),this.nodesToRefresh.delete(l),this.rowLoader.getBlockStartIndexForIndex(h)===this.rowLoader.getBlockStartIndexForIndex(e)||this.markBlockForVerify(h),l}}var p=this.blockUtils.createRowNode(this.store.getRowDetails());if(null!=r){var v=this.getPrefixedId(this.store.getIdSequence().next());this.blockUtils.setDataIntoRowNode(p,r,v,void 0),this.blockUtils.checkOpenByDefault(p),this.nodeManager.addRowNode(p)}return this.nodeMap.set({id:p.id,node:p,index:e}),n&&n(p),p},t.prototype.getBlockStates=function(){var e=this,r={},n={};this.nodeMap.forEach(function(l){var u,c=l.node,h=e.rowLoader.getBlockStartIndexForIndex(l.index);!c.stub&&!c.failedLoad&&(r[h]=(null!==(u=r[h])&&void 0!==u?u:0)+1);var p="loaded";c.failedLoad?p="failed":e.rowLoader.isRowLoading(h)?p="loading":(e.nodesToRefresh.has(c)||c.stub)&&(p="needsLoading"),n[h]||(n[h]=new Set),n[h].add(p)});var i={loading:4,failed:3,needsLoading:2,loaded:1},a=this.blockUtils.createNodeIdPrefix(this.store.getParentNode()),s={};return Object.entries(n).forEach(function(l){var u,c=_i(l,2),d=c[0],v=Rd([],_i(c[1])).sort(function(S,m){var C,_;return(null!==(C=i[S])&&void 0!==C?C:0)-(null!==(_=i[m])&&void 0!==_?_:0)})[0],g=Number(d)/e.rowLoader.getBlockSize(),y=a?a+"-"+g:String(g);s[y]={blockNumber:g,startRow:Number(d),endRow:Number(d)+e.rowLoader.getBlockSize(),pageStatus:v,loadedRowCount:null!==(u=r[d])&&void 0!==u?u:0}}),s},t.prototype.destroyRowAtIndex=function(e){var r=this.nodeMap.getBy("index",e);r&&(this.nodeMap.delete(r),this.nodeDisplayIndexMap.delete(r.node.rowIndex),r.node.hasChildren()&&this.nodesToRefresh.size>0?this.removedNodeCache.set(r.node.id,r.node):this.blockUtils.destroyRowNode(r.node),this.nodesToRefresh.delete(r.node))},t.prototype.getSsrmParams=function(){return this.store.getSsrmParams()},t.prototype.getPrefixedId=function(e){return this.defaultNodeIdPrefix?this.defaultNodeIdPrefix+"-"+e:e.toString()},t.prototype.markBlockForVerify=function(e){var r=_i(this.rowLoader.getBlockBoundsForIndex(e),2),n=r[0],i=r[1];this.nodeMap.filter(function(s){return s.index>=n&&s.index<i}).forEach(function(s){s.node.__needsRefreshWhenVisible=!0})},t.prototype.doesNodeMatch=function(e,r){if(r.stub)return!1;if(null!=this.getRowIdFunc){var n=this.getRowId(e);return r.id===n}return r.data===e},t.prototype.purgeStubsOutsideOfViewport=function(){var e=this,r=this.api.getFirstDisplayedRow(),n=this.api.getLastDisplayedRow(),i=this.rowLoader.getBlockStartIndexForIndex(r),s=_i(this.rowLoader.getBlockBoundsForIndex(n),2)[1];this.nodeMap.forEach(function(l){e.rowLoader.isRowLoading(l.index)||l.node.failedLoad||l.node.stub&&(l.index<i||l.index>s)&&e.destroyRowAtIndex(l.index)})},t.prototype.getBlocksDistanceFromRow=function(e,r){var n=this,i={};return e.forEach(function(a){var s=a.node,u=_i(n.rowLoader.getBlockBoundsForIndex(a.index),2),c=u[0],d=u[1];if(!(c in i)){var p,h=Math.abs(s.rowIndex-r),v=n.nodeMap.getBy("index",[d-1]);v&&(p=Math.abs(v.node.rowIndex-r)),i[c]=null==p||h<p?h:p}}),Object.entries(i)},t.prototype.purgeExcessRows=function(){var r,e=this;if(this.purgeStubsOutsideOfViewport(),null!=this.store.getDisplayIndexEnd()&&null!=this.storeParams.maxBlocksInCache){var n=this.api.getFirstDisplayedRow(),i=this.api.getLastDisplayedRow(),a=new Set,s=new Set;this.nodeMap.forEach(function(w){var b=w.node,O=e.rowLoader.getBlockStartIndexForIndex(w.index);a.add(O),b.rowIndex>=n&&b.rowIndex<=i&&s.add(O)});var l=Math.max(s.size,null!==(r=this.storeParams.maxBlocksInCache)&&void 0!==r?r:0),c=a.size-l;if(!(c<=0)){var d=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;s.forEach(function(w){d>w&&(d=w),h<w&&(h=w)});var p=this.nodeMap.filter(function(w){var x=w.node,O=e.rowLoader.getBlockStartIndexForIndex(w.index);return!(O>=d&&O<=h||e.isNodeCached(x))});if(0!==p.length){var g=this.getBlocksDistanceFromRow(p,n+(i-n)/2),y=this.rowLoader.getBlockSize();g.sort(function(w,x){return Math.sign(x[1]-w[1])});for(var S=0;S<Math.min(c,g.length);S++)for(var m=Number(g[S][0]),C=m;C<m+y;C++){var _=this.nodeMap.getBy("index",C);!_||this.isNodeCached(_.node)||this.destroyRowAtIndex(C)}}}}},t.prototype.isNodeFocused=function(e){var r=this.focusService.getFocusCellToUseAfterRefresh();return!(!r||null!=r.rowPinned)&&r.rowIndex===e.rowIndex},t.prototype.isNodeCached=function(e){return e.isExpandable()&&e.expanded||this.isNodeFocused(e)},t.prototype.extractDuplicateIds=function(e){var r=this;if(null!=this.getRowIdFunc)return[];var n=new Set,i=new Set;return e.forEach(function(a){var s=r.getRowId(a);n.has(s)?i.add(s):n.add(s)}),Rd([],_i(i))},t.prototype.onLoadSuccess=function(e,r,n){var a,i=this;if(this.live){var s=null!==(a=n.groupLevelInfo)&&void 0!==a?a:n.storeInfo;if(this.store.setStoreInfo(s),null!=this.getRowIdFunc){var l=this.extractDuplicateIds(n.rowData);if(l.length>0){var u=l.join(", ");return console.warn("AG Grid: Unable to display rows as duplicate row ids ("+u+") were returned by the getRowId callback. Please modify the getRowId callback to provide unique ids."),void this.onLoadFailed(e,r)}}n.pivotResultFields&&this.serverSideRowModel.generateSecondaryColumns(n.pivotResultFields);var c=this.nodesToRefresh.size>0;if(n.rowData.forEach(function(v,g){var y,S=e+g,m=i.nodeMap.getBy("index",S);if(null===(y=m?.node)||void 0===y||!y.stub)return m&&i.doesNodeMatch(v,m.node)?(i.blockUtils.updateDataIntoRowNode(m.node,v),i.nodesToRefresh.delete(m.node),void(m.node.__needsRefreshWhenVisible=!1)):void i.createRowAtIndex(S,v);i.createRowAtIndex(S,v)}),c&&0===this.nodesToRefresh.size&&this.fireRefreshFinishedEvent(),null!=n.rowCount&&-1!==n.rowCount)this.numberOfRows=n.rowCount,this.isLastRowKnown=!0;else if(r>n.rowData.length)this.numberOfRows=e+n.rowData.length,this.isLastRowKnown=!0;else if(!this.isLastRowKnown){var h=e+n.rowData.length+1;h>this.numberOfRows&&(this.numberOfRows=h)}this.isLastRowKnown&&this.nodeMap.filter(function(v){return v.index>=i.numberOfRows}).forEach(function(v){return i.destroyRowAtIndex(v.index)}),this.fireStoreUpdatedEvent()}},t.prototype.fireRefreshFinishedEvent=function(){var e=this;0===this.nodesToRefresh.size&&(this.removedNodeCache.forEach(function(n){e.blockUtils.destroyRowNode(n)}),this.removedNodeCache=new Map,this.store.fireRefreshFinishedEvent())},t.prototype.isLastRowIndexKnown=function(){return this.isLastRowKnown},t.prototype.onLoadFailed=function(e,r){var n;if(this.live){for(var i=this.nodesToRefresh.size>0,a=e;a<e+r&&a<this.getRowCount();a++){var s=(null!==(n=this.nodeMap.getBy("index",a))&&void 0!==n?n:{}).node;s&&this.nodesToRefresh.delete(s),(!s||!s.stub)&&(s&&!s.stub&&this.destroyRowAtIndex(a),s=this.createRowAtIndex(a)),s.__needsRefreshWhenVisible=!1,s.failedLoad=!0}i&&0===this.nodesToRefresh.size&&this.fireRefreshFinishedEvent(),this.fireStoreUpdatedEvent()}},t.prototype.markNodesForRefresh=function(){var e=this;this.nodeMap.forEach(function(r){r.node.stub&&!r.node.failedLoad||e.nodesToRefresh.add(r.node)}),this.rowLoader.queueLoadCheck(),this.isLastRowKnown&&0===this.numberOfRows&&(this.numberOfRows=1,this.isLastRowKnown=!1,this.fireStoreUpdatedEvent())},t.prototype.isNodeInCache=function(e){return!!this.nodeMap.getBy("id",e)},t.prototype.fireStoreUpdatedEvent=function(){this.live&&this.store.fireStoreUpdatedEvent()},t.prototype.getRowId=function(e){if(null==this.getRowIdFunc)return null;var r=this.store.getRowDetails().level,n=this.store.getParentNode().getGroupKeys(),i=this.getRowIdFunc({data:e,parentKeys:n.length>0?n:void 0,level:r});return String(i)},t.prototype.updateRowNodes=function(e){var r=this;if(null==this.getRowIdFunc)throw new Error("AG Grid: Transactions can only be applied when row ids are supplied.");var n=[];return e.forEach(function(i){var a=r.getRowId(i),s=r.nodeMap.getBy("id",a);s&&(r.blockUtils.updateDataIntoRowNode(s.node,i),n.push(s.node))}),n},t.prototype.insertRowNodes=function(e,r){var n=this,i=this.store.getRowCount()-(this.store.getParentNode().sibling?1:0),a=null==r&&this.isLastRowKnown?i:r;if(null==a||i<a)return[];if(null==this.getRowIdFunc)throw new Error("AG Grid: Transactions can only be applied when row ids are supplied.");var s={};e.forEach(function(d){var h=n.getRowId(d);h&&n.isNodeInCache(h)||(s[h]=d)});var l=Object.values(s),u=l.length;if(0===u)return[];var c=this.nodeMap.filter(function(d){return d.index>=a});return c.forEach(function(d){return n.nodeMap.delete(d)}),c.forEach(function(d){n.nodeMap.set({node:d.node,index:d.index+u,id:d.id})}),this.numberOfRows+=u,l.map(function(d,h){return n.createRowAtIndex(a+h,d)})},t.prototype.getOrderedNodeMap=function(){var e={};return this.nodeMap.forEach(function(r){return e[r.index]=r}),e},t.prototype.clearDisplayIndexes=function(){this.nodeDisplayIndexMap.clear()},t.prototype.removeRowNodes=function(e){if(null==this.getRowIdFunc)throw new Error("AG Grid: Transactions can only be applied when row ids are supplied.");var r=[],n=[],i=0,a=Rd([],_i(e)),s=this.getOrderedNodeMap(),l=-1,u=function(h){l+=1;var p=s[h],v=a.findIndex(function(y){return y===p.id});if(-1!==v)return a.splice(v,1),c.destroyRowAtIndex(Number(h)),r.push(p.node),i+=1,"continue";if(0===i)return"continue";var g=Number(h);l!==g&&n.push(p.node),c.nodeMap.delete(s[h]),c.nodeMap.set({id:p.id,node:p.node,index:g-i})},c=this;for(var d in s)u(d);return this.numberOfRows-=this.isLastRowIndexKnown()?e.length:i,a.length>0&&n.length>0&&(n.forEach(function(h){return h.__needsRefreshWhenVisible=!0}),this.rowLoader.queueLoadCheck()),r},Ci([(0,f.Qnc)("gridApi")],t.prototype,"api",void 0),Ci([(0,f.Qnc)("ssrmBlockUtils")],t.prototype,"blockUtils",void 0),Ci([(0,f.Qnc)("focusService")],t.prototype,"focusService",void 0),Ci([(0,f.Qnc)("ssrmNodeManager")],t.prototype,"nodeManager",void 0),Ci([(0,f.Qnc)("rowModel")],t.prototype,"serverSideRowModel",void 0),Ci([f.QhY],t.prototype,"init",null),Ci([f.sR7],t.prototype,"destroyRowNodes",null),t}(f._QX),gF=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Vo=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},pu=function(o){function t(e,r,n){var i=o.call(this)||this;return i.idSequence=new f.Gxi,i.ssrmParams=e,i.parentRowNode=n,i.storeParams=r,i.level=n.level+1,i.group=!!e.rowGroupCols&&i.level<e.rowGroupCols.length,i.leafGroup=!!e.rowGroupCols&&i.level===e.rowGroupCols.length-1,i.info={},i}return gF(t,o),t.prototype.init=function(){var e=1;0===this.level&&(e=this.storeUtils.getServerSideInitialRowCount()),this.cache=this.createManagedBean(new Fd(this,e,this.storeParams)),!this.gridOptionsService.is("treeData")&&this.group&&(this.groupField=this.ssrmParams.rowGroupCols[this.level].field,this.rowGroupColumn=this.columnModel.getRowGroupColumns()[this.level])},t.prototype.destroyRowNodes=function(){this.displayIndexStart=void 0,this.displayIndexEnd=void 0,this.destroyBean(this.cache)},t.prototype.applyRowData=function(e,r,n){this.cache.onLoadSuccess(r,n,e)},t.prototype.applyTransaction=function(e){var n,i,a,r=this,s=this.gridOptionsService.getCallback("getRowId");if(!s)return console.warn("AG Grid: getRowId callback must be implemented for transactions to work. Transaction was ignored."),{status:f.OgV.Cancelled};var l=this.gridOptionsService.getCallback("isApplyServerSideTransaction");if(l&&!l({transaction:e,parentNode:this.parentRowNode,storeInfo:this.info,groupLevelInfo:this.info}))return{status:f.OgV.Cancelled};var d=void 0;null!==(n=e.update)&&void 0!==n&&n.length&&(d=this.cache.updateRowNodes(e.update));var h=void 0;if(null!==(i=e.add)&&void 0!==i&&i.length){var p=e.addIndex;null!=p&&p<0&&(p=void 0),h=this.cache.insertRowNodes(e.add,p)}var v=void 0;if(null!==(a=e.remove)&&void 0!==a&&a.length){var g=e.remove.map(function(S){return s({level:r.level,parentKeys:r.parentRowNode.getGroupKeys(),data:S})}),y=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o}([],function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i}(new Set(g)));v=this.cache.removeRowNodes(y)}return this.updateSelectionAfterTransaction(d,v),{status:f.OgV.Applied,update:d,add:h,remove:v}},t.prototype.updateSelectionAfterTransaction=function(e,r){var n=[];e?.forEach(function(i){i.isSelected()&&!i.selectable&&n.push(i)}),r?.forEach(function(i){i.isSelected()&&n.push(i)}),n.length&&this.selectionService.setNodesSelected({newValue:!1,clearSelection:!1,nodes:n,source:"rowDataChanged"})},t.prototype.clearDisplayIndexes=function(){var e=this;this.displayIndexStart=void 0,this.displayIndexEnd=void 0,this.cache.getNodes().forEach(function(r){return e.blockUtils.clearDisplayIndex(r.node)}),this.parentRowNode.sibling&&this.blockUtils.clearDisplayIndex(this.parentRowNode.sibling),this.cache.clearDisplayIndexes()},t.prototype.getDisplayIndexStart=function(){return this.displayIndexStart},t.prototype.getDisplayIndexEnd=function(){return this.displayIndexEnd},t.prototype.getRowCount=function(){return this.parentRowNode.sibling?this.cache.getRowCount()+1:this.cache.getRowCount()},t.prototype.setRowCount=function(e,r){this.cache.setRowCount(e,r)},t.prototype.isDisplayIndexInStore=function(e){return 0!==this.cache.getRowCount()&&this.displayIndexStart<=e&&e<this.getDisplayIndexEnd()},t.prototype.setDisplayIndexes=function(e,r){this.displayIndexStart=e.peek(),this.topPx=r.value,this.cache.setDisplayIndexes(e,r),this.parentRowNode.sibling&&this.blockUtils.setDisplayIndex(this.parentRowNode.sibling,e,r),this.displayIndexEnd=e.peek(),this.heightPx=r.value-this.topPx},t.prototype.forEachStoreDeep=function(e,r){void 0===r&&(r=new f.Gxi),e(this,r.next()),this.cache.getNodes().forEach(function(n){var i=n.node.childStore;i&&i.forEachStoreDeep(e,r)})},t.prototype.forEachNodeDeep=function(e,r){void 0===r&&(r=new f.Gxi),this.cache.getNodes().forEach(function(n){e(n.node,r.next());var i=n.node.childStore;i&&i.forEachNodeDeep(e,r)})},t.prototype.forEachNodeDeepAfterFilterAndSort=function(e,r,n){void 0===r&&(r=new f.Gxi),void 0===n&&(n=!1);var i=this.cache.getOrderedNodeMap();for(var a in i){var s=i[a];e(s.node,r.next());var l=s.node.childStore;l&&l.forEachNodeDeepAfterFilterAndSort(e,r,n)}n&&this.parentRowNode.sibling&&e(this.parentRowNode.sibling,r.next())},t.prototype.retryLoads=function(){this.cache.getNodes().forEach(function(e){var r=e.node;r.failedLoad&&(r.failedLoad=!1,r.__needsRefreshWhenVisible=!0,r.stub=!0)}),this.forEachChildStoreShallow(function(e){return e.retryLoads()}),this.fireStoreUpdatedEvent()},t.prototype.getRowUsingDisplayIndex=function(e){return this.parentRowNode.sibling&&e===this.parentRowNode.sibling.rowIndex?this.parentRowNode.sibling:this.cache.getRowByDisplayIndex(e)},t.prototype.getRowBounds=function(e){var r;if(!this.isDisplayIndexInStore(e))return null;var n=this.cache.getNodeCachedByDisplayIndex(e);if(n&&(i=this.blockUtils.extractRowBounds(n,e)))return i;var i,a=null!==(r=this.cache.getSurroundingNodesByDisplayIndex(e))&&void 0!==r?r:{},s=a.previousNode,l=a.nextNode;if(s&&null!=(i=this.blockUtils.extractRowBounds(s.node,e)))return i;var u=this.gridOptionsService.getRowHeightAsNumber();return l?{rowTop:l.node.rowTop-(l.node.rowIndex-e)*u,rowHeight:u}:{rowTop:this.topPx+this.heightPx-(this.getDisplayIndexEnd()-e)*u,rowHeight:u}},t.prototype.isPixelInRange=function(e){return e>=this.topPx&&e<this.topPx+this.heightPx},t.prototype.getRowIndexAtPixel=function(e){if(e<this.topPx)return this.getDisplayIndexStart();if(e>=this.topPx+this.heightPx)return this.getDisplayIndexEnd()-1;var r=Number.MAX_SAFE_INTEGER,n=null,i=Number.MAX_SAFE_INTEGER,a=null;if(this.cache.getNodes().forEach(function(p){var v=p.node,g=Math.abs(e-v.rowTop);v.rowTop<e?g<r&&(r=g,n=v):g<i&&(i=g,a=v)}),n){var s=this.blockUtils.getIndexAtPixel(n,e);if(null!=s)return s}var l=this.gridOptionsService.getRowHeightAsNumber();if(a){var c=Math.ceil((a.rowTop-e)/l);return a.rowIndex-c}var h=Math.floor((this.topPx+this.heightPx-e)/l);return this.getDisplayIndexEnd()-h},t.prototype.getChildStore=function(e){var r=this;return this.storeUtils.getChildStore(e,this,function(n){var i=r.cache.getNodes().find(function(a){return a.node.key==n});return i?i.node:null})},t.prototype.forEachChildStoreShallow=function(e){this.cache.getNodes().forEach(function(r){var n=r.node;n.childStore&&e(n.childStore)})},t.prototype.refreshAfterSort=function(e){if(this.storeUtils.isServerSideSortAllLevels()||this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,e)){var n=this.cache.getRowCount();return this.destroyBean(this.cache),this.cache=this.createManagedBean(new Fd(this,n,this.storeParams)),void this.fireStoreUpdatedEvent()}this.forEachChildStoreShallow(function(i){return i.refreshAfterSort(e)})},t.prototype.refreshAfterFilter=function(e){!this.storeUtils.isServerSideOnlyRefreshFilteredGroups()||this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,e)?this.refreshStore(!0):this.forEachChildStoreShallow(function(n){return n.refreshAfterFilter(e)})},t.prototype.refreshStore=function(e){if(e)return this.destroyBean(this.cache),this.cache=this.createManagedBean(new Fd(this,1,this.storeParams)),void this.fireStoreUpdatedEvent();this.cache.markNodesForRefresh()},t.prototype.getTopLevelRowDisplayedIndex=function(e){return this.cache.getDisplayIndexFromStoreIndex(e)??e},t.prototype.isLastRowIndexKnown=function(){return this.cache.isLastRowIndexKnown()},t.prototype.getRowNodesInRange=function(e,r){return f._.missing(e),this.cache.getNodes().filter(function(n){var i=n.node;return i.rowIndex>=e.rowIndex&&i.rowIndex<=r.rowIndex}).map(function(n){return n.node})},t.prototype.addStoreStates=function(e){e.push({suppressInfiniteScroll:!1,route:this.parentRowNode.getGroupKeys(),rowCount:this.getRowCount(),lastRowIndexKnown:this.isLastRowIndexKnown(),info:this.info,maxBlocksInCache:this.storeParams.maxBlocksInCache,cacheBlockSize:this.storeParams.cacheBlockSize}),this.forEachChildStoreShallow(function(r){return r.addStoreStates(e)})},t.prototype.getIdSequence=function(){return this.idSequence},t.prototype.getParentNode=function(){return this.parentRowNode},t.prototype.getRowDetails=function(){return{field:this.groupField,group:this.group,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn}},t.prototype.getSsrmParams=function(){return this.ssrmParams},t.prototype.setStoreInfo=function(e){e&&Object.assign(this.info,e)},t.prototype.fireStoreUpdatedEvent=function(){this.eventService.dispatchEvent({type:f.YFc.EVENT_STORE_UPDATED})},t.prototype.fireRefreshFinishedEvent=function(){var e={type:f.YFc.EVENT_STORE_REFRESHED,route:this.parentRowNode.getRoute()};this.eventService.dispatchEvent(e)},t.prototype.getBlockStates=function(){return this.cache.getBlockStates()},t.prototype.getStoreBounds=function(){return{topPx:this.topPx,heightPx:this.heightPx}},Vo([(0,f.Qnc)("ssrmBlockUtils")],t.prototype,"blockUtils",void 0),Vo([(0,f.Qnc)("ssrmStoreUtils")],t.prototype,"storeUtils",void 0),Vo([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),Vo([(0,f.Qnc)("selectionService")],t.prototype,"selectionService",void 0),Vo([f.QhY],t.prototype,"init",null),Vo([f.sR7],t.prototype,"destroyRowNodes",null),t}(f._QX),SF=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),nr=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},ry=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},CF=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.onRowHeightChanged_debounced=f._.debounce(e.onRowHeightChanged.bind(e),100),e.pauseStoreUpdateListening=!1,e.started=!1,e.managingPivotResultColumns=!1,e}return SF(t,o),t.prototype.ensureRowHeightsValid=function(){return!1},t.prototype.start=function(){this.started=!0;var e=this.gridOptionsService.get("serverSideDatasource");e&&this.setDatasource(e)},t.prototype.destroyDatasource=function(){this.datasource&&(this.datasource.destroy&&this.datasource.destroy(),this.rowRenderer.datasourceChanged(),this.datasource=void 0)},t.prototype.addEventListeners=function(){this.addManagedListener(this.eventService,f.YFc.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverything.bind(this)),this.addManagedListener(this.eventService,f.YFc.EVENT_STORE_UPDATED,this.onStoreUpdated.bind(this));var e=this.resetRootStore.bind(this);this.addManagedListener(this.eventService,f.YFc.EVENT_COLUMN_VALUE_CHANGED,e),this.addManagedListener(this.eventService,f.YFc.EVENT_COLUMN_PIVOT_CHANGED,e),this.addManagedListener(this.eventService,f.YFc.EVENT_COLUMN_ROW_GROUP_CHANGED,e),this.addManagedListener(this.eventService,f.YFc.EVENT_COLUMN_PIVOT_MODE_CHANGED,e),this.addManagedPropertyListener("treeData",e),this.verifyProps()},t.prototype.verifyProps=function(){this.gridOptionsService.exists("initialGroupOrderComparator")&&f._.doOnce(function(){return console.warn("AG Grid: initialGroupOrderComparator cannot be used with Server Side Row Model. If using Full Store, then provide the rows to the grid in the desired sort order. If using Infinite Scroll, then sorting is done on the server side, nothing to do with the client.")},"SSRM.InitialGroupOrderComparator"),this.gridOptionsService.isRowSelection()&&!this.gridOptionsService.exists("getRowId")&&f._.doOnce(function(){return console.warn("AG Grid: getRowId callback must be provided for Server Side Row Model selection to work correctly.")},"SSRM.SelectionNeedsRowNodeIdFunc")},t.prototype.setDatasource=function(e){this.started&&(this.destroyDatasource(),this.datasource=e,this.resetRootStore())},t.prototype.applyRowData=function(e,r,n){var i=this.getRootStore();if(i){var a=i.getChildStore(n);a&&(a instanceof pu?a.applyRowData(e,r,e.rowData.length):a instanceof Md&&a.processServerResult(e))}},t.prototype.isLastRowIndexKnown=function(){var e=this.getRootStore();return!!e&&e.isLastRowIndexKnown()},t.prototype.onColumnEverything=function(){if(this.storeParams){var e=this.columnsToValueObjects(this.columnModel.getRowGroupColumns()),r=this.columnsToValueObjects(this.columnModel.getValueColumns()),n=this.columnsToValueObjects(this.columnModel.getPivotColumns()),i=function(h){var p={};h.oldCols.forEach(function(y){return p[y.id]=y});var v=h.newCols.every(function(y){var S=p[y.id];return S&&delete p[y.id],S&&S.field===y.field&&S.aggFunc===y.aggFunc}),g=!h.allowRemovedColumns&&!!Object.values(p).length;return v&&!g},a=!f._.jsonEquals(this.storeParams.sortModel,this.sortListener.extractSortModel()),s=!i({oldCols:this.storeParams.rowGroupCols,newCols:e}),l=!i({oldCols:this.storeParams.pivotCols,newCols:n}),u=!!e?.length&&!i({oldCols:this.storeParams.valueCols,newCols:r,allowRemovedColumns:!0});if(a||s||l||u)this.resetRootStore();else{var d=this.createStoreParams();this.storeParams.rowGroupCols=d.rowGroupCols,this.storeParams.pivotCols=d.pivotCols,this.storeParams.valueCols=d.valueCols}}else this.resetRootStore()},t.prototype.destroyRootStore=function(){!this.rootNode||!this.rootNode.childStore||(this.rootNode.childStore=this.destroyBean(this.rootNode.childStore),this.nodeManager.clear())},t.prototype.refreshAfterSort=function(e,r){this.storeParams&&(this.storeParams.sortModel=e);var n=this.getRootStore();n&&(n.refreshAfterSort(r),this.onStoreUpdated())},t.prototype.generateSecondaryColumns=function(e){var r=this.pivotColDefService.createColDefsFromFields(e);this.managingPivotResultColumns=!0,this.columnModel.setSecondaryColumns(r,"rowModelUpdated")},t.prototype.resetRootStore=function(){this.destroyRootStore(),this.rootNode=new f.w$i(this.beans),this.rootNode.group=!0,this.rootNode.level=-1,this.datasource&&(this.storeParams=this.createStoreParams(),this.rootNode.childStore=this.createBean(this.storeFactory.createStore(this.storeParams,this.rootNode)),this.updateRowIndexesAndBounds()),this.managingPivotResultColumns&&(this.columnModel.setSecondaryColumns(null),this.managingPivotResultColumns=!1),this.eventService.dispatchEvent({type:f.YFc.EVENT_ROW_DATA_UPDATED}),this.dispatchModelUpdated(!0)},t.prototype.columnsToValueObjects=function(e){var r=this;return e.map(function(n){return{id:n.getId(),aggFunc:n.getAggFunc(),displayName:r.columnModel.getDisplayNameForColumn(n,"model"),field:n.getColDef().field}})},t.prototype.createStoreParams=function(){var e=this.columnsToValueObjects(this.columnModel.getRowGroupColumns()),r=this.columnsToValueObjects(this.columnModel.getValueColumns()),n=this.columnsToValueObjects(this.columnModel.getPivotColumns()),i=this.gridOptionsService.isGetRowHeightFunction();return{valueCols:r,rowGroupCols:e,pivotCols:n,pivotMode:this.columnModel.isPivotMode(),filterModel:this.filterManager.getFilterModel(),sortModel:this.sortListener.extractSortModel(),datasource:this.datasource,lastAccessedSequence:new f.Gxi,dynamicRowHeight:i}},t.prototype.getParams=function(){return this.storeParams},t.prototype.dispatchModelUpdated=function(e){void 0===e&&(e=!1),this.eventService.dispatchEvent({type:f.YFc.EVENT_MODEL_UPDATED,animate:!e,keepRenderedRows:!e,newPage:!1,newData:!1})},t.prototype.onStoreUpdated=function(){this.pauseStoreUpdateListening||(this.updateRowIndexesAndBounds(),this.dispatchModelUpdated())},t.prototype.onRowHeightChangedDebounced=function(){this.onRowHeightChanged_debounced()},t.prototype.onRowHeightChanged=function(){this.updateRowIndexesAndBounds(),this.dispatchModelUpdated()},t.prototype.updateRowIndexesAndBounds=function(){var e=this.getRootStore();e&&e.setDisplayIndexes(new f.Gxi,{value:0})},t.prototype.retryLoads=function(){var e=this.getRootStore();e&&(e.retryLoads(),this.onStoreUpdated())},t.prototype.getRow=function(e){var r=this.getRootStore();if(r)return r.getRowUsingDisplayIndex(e)},t.prototype.expandAll=function(e){this.pauseStoreUpdateListening=!0,this.forEachNode(function(r){r.stub||r.hasChildren()&&r.setExpanded(e)}),this.pauseStoreUpdateListening=!1,this.onStoreUpdated()},t.prototype.refreshAfterFilter=function(e,r){this.storeParams&&(this.storeParams.filterModel=e);var n=this.getRootStore();n&&(n.refreshAfterFilter(r),this.onStoreUpdated())},t.prototype.getRootStore=function(){if(this.rootNode&&this.rootNode.childStore)return this.rootNode.childStore},t.prototype.getRowCount=function(){var e=this.getRootStore();return e?e.getDisplayIndexEnd():0},t.prototype.getTopLevelRowCount=function(){var e=this.getRootStore();return e?e.getRowCount():1},t.prototype.getTopLevelRowDisplayedIndex=function(e){var r=this.getRootStore();return r?r.getTopLevelRowDisplayedIndex(e):e},t.prototype.getRowBounds=function(e){var r=this.getRootStore();return r?r.getRowBounds(e):{rowTop:0,rowHeight:this.gridOptionsService.getRowHeightAsNumber()}},t.prototype.getBlockStates=function(){var e=this.getRootStore();if(e){var r={};return e.forEachStoreDeep(function(n){if(n instanceof Md){var i=n.getBlockStateJson();r[i.id]=i.state}else{if(!(n instanceof pu))throw new Error("AG Grid: Unsupported store type");Object.entries(n.getBlockStates()).forEach(function(l){var u=ry(l,2);r[u[0]]=u[1]})}}),r}},t.prototype.getRowIndexAtPixel=function(e){var r=this.getRootStore();return e<=0||!r?0:r.getRowIndexAtPixel(e)},t.prototype.isEmpty=function(){return!1},t.prototype.isRowsToRender=function(){return null!=this.getRootStore()&&this.getRowCount()>0},t.prototype.getType=function(){return"serverSide"},t.prototype.forEachNode=function(e){var r=this.getRootStore();r&&r.forEachNodeDeep(e)},t.prototype.forEachNodeAfterFilterAndSort=function(e,r){void 0===r&&(r=!1);var n=this.getRootStore();n&&n.forEachNodeDeepAfterFilterAndSort(e,void 0,r)},t.prototype.executeOnStore=function(e,r){var n=this.getRootStore();if(n){var i=n.getChildStore(e);i&&r(i)}},t.prototype.refreshStore=function(e){void 0===e&&(e={}),this.executeOnStore(e.route?e.route:[],function(n){return n.refreshStore(1==e.purge)})},t.prototype.getStoreState=function(){var e=[],r=this.getRootStore();return r&&r.addStoreStates(e),e},t.prototype.getNodesInRangeForSelection=function(e,r){if(!f._.exists(e))return[];if(!r)return[e];var n=e.rowIndex,i=r.rowIndex;if(null===n||null===i)return[e];var a=[],s=ry([n,i].sort(function(c,d){return c-d}),2),l=s[0],u=s[1];return this.forEachNode(function(c){var d=c.rowIndex;null==d||c.stub||d>=l&&d<=u&&a.push(c)}),a.length!==u-l+1?[e]:a},t.prototype.getRowNode=function(e){var r;return this.forEachNode(function(n){n.id===e&&(r=n),n.detailNode&&n.detailNode.id===e&&(r=n.detailNode)}),r},t.prototype.isRowPresent=function(e){return!!this.getRowNode(e.id)},t.prototype.setRowCount=function(e,r){var n=this.getRootStore();if(n){if(n instanceof pu)return void n.setRowCount(e,r);console.error("AG Grid: Infinite scrolling must be enabled in order to set the row count.")}},nr([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),nr([(0,f.Qnc)("filterManager")],t.prototype,"filterManager",void 0),nr([(0,f.Qnc)("rowRenderer")],t.prototype,"rowRenderer",void 0),nr([(0,f.Qnc)("ssrmSortService")],t.prototype,"sortListener",void 0),nr([(0,f.Qnc)("ssrmNodeManager")],t.prototype,"nodeManager",void 0),nr([(0,f.Qnc)("ssrmStoreFactory")],t.prototype,"storeFactory",void 0),nr([(0,f.Qnc)("beans")],t.prototype,"beans",void 0),nr([(0,f.T7N)("pivotColDefService")],t.prototype,"pivotColDefService",void 0),nr([f.sR7],t.prototype,"destroyDatasource",null),nr([f.QhY],t.prototype,"addEventListeners",null),nr([f.sR7],t.prototype,"destroyRootStore",null),nr([(0,f.ekA)("rowModel")],t)}(f._QX),_F=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Bo=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},xF=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return _F(t,o),t.prototype.loadFromDatasource=function(e){var r=e.storeParams,n=e.parentBlock,a=e.parentNode.getGroupKeys();if(r.datasource){var l={successCallback:e.successCallback,success:e.success,failCallback:e.failCallback,fail:e.fail,request:{startRow:e.startRow,endRow:e.endRow,rowGroupCols:r.rowGroupCols,valueCols:r.valueCols,pivotCols:r.pivotCols,pivotMode:r.pivotMode,groupKeys:a,filterModel:r.filterModel,sortModel:r.sortModel},parentNode:e.parentNode,api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsService.context};window.setTimeout(function(){r.datasource&&n.isAlive()?r.datasource.getRows(l):e.failCallback()},0)}},t.prototype.getChildStore=function(e,r,n){if(f._.missingOrEmpty(e))return r;var a=n(e[0]);if(a){if(1===e.length&&!a.childStore){var s=this.serverSideRowModel.getParams();a.childStore=this.createBean(this.storeFactory.createStore(s,a))}var l=e.slice(1,e.length),u=a.childStore;return u?u.getChildStore(l):null}return null},t.prototype.isServerRefreshNeeded=function(e,r,n){if(n.valueColChanged||n.secondaryColChanged)return!0;var i=e.level+1;if(!(i<r.length))return!0;var l=r[i].id;return n.changedColumns.indexOf(l)>-1||this.columnModel.getAllGridColumns().filter(function(h){return h.getColDef().showRowGroup&&n.changedColumns.includes(h.getId())}).map(function(h){return h.getColDef().showRowGroup}).some(function(h){return!0===h||h===l})},t.prototype.getServerSideInitialRowCount=function(){var e=this.gridOptionsService.getNum("serverSideInitialRowCount");return"number"==typeof e&&e>0?e:1},t.prototype.assertRowModelIsServerSide=function(e){return!!this.gridOptionsService.isRowModelType("serverSide")||(f._.doOnce(function(){return console.warn("AG Grid: The '"+e+"' property can only be used with the Server Side Row Model.")},e),!1)},t.prototype.assertNotTreeData=function(e){return!this.gridOptionsService.is("treeData")||(f._.doOnce(function(){return console.warn("AG Grid: The '"+e+"' property cannot be used while using tree data.")},e+"_TreeData"),!1)},t.prototype.isServerSideSortAllLevels=function(){return this.gridOptionsService.is("serverSideSortAllLevels")&&this.assertRowModelIsServerSide("serverSideSortAllLevels")},t.prototype.isServerSideOnlyRefreshFilteredGroups=function(){return this.gridOptionsService.is("serverSideOnlyRefreshFilteredGroups")&&this.assertRowModelIsServerSide("serverSideOnlyRefreshFilteredGroups")},t.prototype.isServerSideSortOnServer=function(){return this.gridOptionsService.is("serverSideSortOnServer")&&this.assertRowModelIsServerSide("serverSideSortOnServer")&&this.assertNotTreeData("serverSideSortOnServer")},t.prototype.isServerSideFilterOnServer=function(){return this.gridOptionsService.is("serverSideFilterOnServer")&&this.assertRowModelIsServerSide("serverSideFilterOnServer")&&this.assertNotTreeData("serverSideFilterOnServer")},Bo([(0,f.Qnc)("columnApi")],t.prototype,"columnApi",void 0),Bo([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),Bo([(0,f.Qnc)("gridApi")],t.prototype,"gridApi",void 0),Bo([(0,f.Qnc)("rowModel")],t.prototype,"serverSideRowModel",void 0),Bo([(0,f.Qnc)("ssrmStoreFactory")],t.prototype,"storeFactory",void 0),Bo([(0,f.ekA)("ssrmStoreUtils")],t)}(f._QX),wF=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),jo=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},OF=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return wF(t,o),t.prototype.postConstruct=function(){this.rowHeight=this.gridOptionsService.getRowHeightAsNumber(),this.usingMasterDetail=this.gridOptionsService.is("masterDetail")},t.prototype.createRowNode=function(e){var r=new f.w$i(this.beans);return r.setRowHeight(null!=e.rowHeight?e.rowHeight:this.rowHeight),r.group=e.group,r.leafGroup=e.leafGroup,r.level=e.level,r.uiLevel=e.level,r.parent=e.parent,r.stub=!0,r.__needsRefreshWhenVisible=!1,r.group&&(r.expanded=!1,r.field=e.field,r.rowGroupColumn=e.rowGroupColumn),r},t.prototype.destroyRowNodes=function(e){var r=this;e&&e.forEach(function(n){return r.destroyRowNode(n)})},t.prototype.destroyRowNode=function(e,r){void 0===r&&(r=!1),e.childStore&&!r&&(this.destroyBean(e.childStore),e.childStore=null),e.sibling&&!e.footer&&this.destroyRowNode(e.sibling,!1),e.clearRowTopAndRowIndex(),null!=e.id&&this.nodeManager.removeNode(e)},t.prototype.setTreeGroupInfo=function(e){e.updateHasChildren();var r=this.gridOptionsService.get("getServerSideGroupKey");e.hasChildren()&&null!=r&&(e.key=r(e.data)),!e.hasChildren()&&null!=e.childStore&&(this.destroyBean(e.childStore),e.childStore=null,e.expanded=!1)},t.prototype.setRowGroupInfo=function(e){e.key=this.valueService.getValue(e.rowGroupColumn,e),null==e.key&&f._.doOnce(function(){console.warn("AG Grid: null and undefined values are not allowed for server side row model keys"),e.rowGroupColumn&&console.warn("column = "+e.rowGroupColumn.getId()),console.warn("data is ",e.data)},"ServerSideBlock-CannotHaveNullOrUndefinedForKey"),this.beans.gridOptionsService.getGroupIncludeFooter()({node:e})&&(e.createFooter(),e.sibling&&(e.sibling.uiLevel=e.uiLevel+1))},t.prototype.setMasterDetailInfo=function(e){var r=this.gridOptionsService.get("isRowMaster");e.master=null==r||r(e.data)},t.prototype.updateDataIntoRowNode=function(e,r){e.updateData(r),this.gridOptionsService.is("treeData")?(this.setTreeGroupInfo(e),this.setChildCountIntoRowNode(e)):e.group&&(this.setChildCountIntoRowNode(e),e.footer||(this.beans.gridOptionsService.getGroupIncludeFooter()({node:e})?e.sibling?e.sibling.updateData(r):e.createFooter():e.sibling&&e.destroyFooter()))},t.prototype.setDataIntoRowNode=function(e,r,n,i){var a;e.stub=!1;var s=this.gridOptionsService.is("treeData");f._.exists(r)?(e.setDataAndId(r,n),s?this.setTreeGroupInfo(e):e.group?this.setRowGroupInfo(e):this.usingMasterDetail&&this.setMasterDetailInfo(e)):(e.setDataAndId(void 0,void 0),e.key=null),(s||e.group)&&(this.setGroupDataIntoRowNode(e),this.setChildCountIntoRowNode(e)),f._.exists(r)&&(e.setRowHeight(this.gridOptionsService.getRowHeightForNode(e,!1,i).height),null===(a=e.sibling)||void 0===a||a.setRowHeight(this.gridOptionsService.getRowHeightForNode(e.sibling,!1,i).height))},t.prototype.setChildCountIntoRowNode=function(e){var r=this.gridOptionsService.get("getChildCount");r&&e.setAllChildrenCount(r(e.data))},t.prototype.setGroupDataIntoRowNode=function(e){var r=this,n=this.columnModel.getGroupDisplayColumns(),i=this.gridOptionsService.is("treeData");n.forEach(function(a){if(null==e.groupData&&(e.groupData={}),i)e.groupData[a.getColId()]=e.key;else if(a.isRowGroupDisplayed(e.rowGroupColumn.getId())){var s=r.valueService.getValue(e.rowGroupColumn,e);e.groupData[a.getColId()]=s}})},t.prototype.clearDisplayIndex=function(e){e.clearRowTopAndRowIndex(),e.hasChildren()&&f._.exists(e.childStore)&&e.childStore.clearDisplayIndexes(),e.master&&e.detailNode&&e.detailNode.clearRowTopAndRowIndex()},t.prototype.setDisplayIndex=function(e,r,n){if(e.setRowIndex(r.next()),e.setRowTop(n.value),n.value+=e.rowHeight,!e.footer&&(e.master&&(e.expanded&&e.detailNode?(e.detailNode.setRowIndex(r.next()),e.detailNode.setRowTop(n.value),n.value+=e.detailNode.rowHeight):e.detailNode&&e.detailNode.clearRowTopAndRowIndex()),e.hasChildren()&&f._.exists(e.childStore))){var s=e.childStore;e.expanded?s.setDisplayIndexes(r,n):s.clearDisplayIndexes()}},t.prototype.binarySearchForDisplayIndex=function(e,r){var n=0,i=r.length-1;if(f._.missing(i)||f._.missing(n))console.warn("AG Grid: error: topPointer = "+i+", bottomPointer = "+n);else for(;;){var a=Math.floor((n+i)/2),s=r[a];if(s.rowIndex===e)return s;var u=s.detailNode;if(s.master&&s.expanded&&u&&u.rowIndex===e)return s.detailNode;var c=s.childStore;if(s.expanded&&c&&c.isDisplayIndexInStore(e))return c.getRowUsingDisplayIndex(e);if(s.rowIndex<e)n=a+1;else{if(!(s.rowIndex>e))return void console.warn("AG Grid: error: unable to locate rowIndex = "+e+" in cache");i=a-1}}},t.prototype.extractRowBounds=function(e,r){var n=function(a){return{rowHeight:a.rowHeight,rowTop:a.rowTop}};if(e.rowIndex===r)return n(e);if(e.hasChildren()&&e.expanded&&f._.exists(e.childStore)){var i=e.childStore;if(i.isDisplayIndexInStore(r))return i.getRowBounds(r)}else if(e.master&&e.expanded&&f._.exists(e.detailNode)&&e.detailNode.rowIndex===r)return n(e.detailNode)},t.prototype.getIndexAtPixel=function(e,r){if(e.isPixelInRange(r))return e.rowIndex;var i=e.detailNode;if(e.master&&e.expanded&&i&&i.isPixelInRange(r))return e.detailNode.rowIndex;if(e.hasChildren()&&e.expanded&&f._.exists(e.childStore)){var a=e.childStore;if(a.isPixelInRange(r))return a.getRowIndexAtPixel(r)}return null},t.prototype.createNodeIdPrefix=function(e){for(var r=[],n=e;n&&n.level>=0;)r.push(""===n.key?"ag-Grid-MissingKey":n.key),n=n.parent;if(r.length>0)return r.reverse().join("-")},t.prototype.checkOpenByDefault=function(e){if(e.isExpandable()){var r=this.gridOptionsService.getCallback("isServerSideGroupOpenByDefault");r&&r({data:e.data,rowNode:e})&&window.setTimeout(function(){return e.setExpanded(!0)},0)}},jo([(0,f.Qnc)("valueService")],t.prototype,"valueService",void 0),jo([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),jo([(0,f.Qnc)("ssrmNodeManager")],t.prototype,"nodeManager",void 0),jo([(0,f.Qnc)("beans")],t.prototype,"beans",void 0),jo([f.QhY],t.prototype,"postConstruct",null),jo([(0,f.ekA)("ssrmBlockUtils")],t)}(f._QX),ny=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},EF=function(){function o(){this.rowNodes={}}return o.prototype.addRowNode=function(t){var e=t.id;this.rowNodes[e]&&(console.warn("AG Grid: Duplicate node id "+t.id+". Row ID's are provided via the getRowId() callback. Please modify the getRowId() callback code to provide unique row id values."),console.warn("first instance",this.rowNodes[e].data),console.warn("second instance",t.data)),this.rowNodes[e]=t},o.prototype.removeNode=function(t){var e=t.id;this.rowNodes[e]&&(this.rowNodes[e]=void 0)},o.prototype.clear=function(){this.rowNodes={}},ny([f.sR7],o.prototype,"clear",null),ny([(0,f.ekA)("ssrmNodeManager")],o)}(),TF=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),xi=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},PF=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.asyncTransactions=[],e}return TF(t,o),t.prototype.postConstruct=function(){this.gridOptionsService.isRowModelType("serverSide")},t.prototype.applyTransactionAsync=function(e,r){null==this.asyncTransactionsTimeout&&this.scheduleExecuteAsync(),this.asyncTransactions.push({transaction:e,callback:r})},t.prototype.scheduleExecuteAsync=function(){var e=this,r=this.gridOptionsService.getAsyncTransactionWaitMillis();this.asyncTransactionsTimeout=window.setTimeout(function(){e.executeAsyncTransactions()},r)},t.prototype.executeAsyncTransactions=function(){var e=this;if(this.asyncTransactions){var r=[],n=[],i=[],a=!1;this.asyncTransactions.forEach(function(l){var u;e.serverSideRowModel.executeOnStore(l.transaction.route,function(d){u=d.applyTransaction(l.transaction)}),null==u&&(u={status:f.OgV.StoreNotFound}),n.push(u),u.status==f.OgV.StoreLoading?i.push(l):(l.callback&&r.push(function(){return l.callback(u)}),u.status===f.OgV.Applied&&(a=!0))}),r.length>0&&window.setTimeout(function(){r.forEach(function(l){return l()})},0),this.asyncTransactionsTimeout=void 0,this.asyncTransactions=i,a&&(this.valueCache.onDataChanged(),this.eventService.dispatchEvent({type:f.YFc.EVENT_STORE_UPDATED})),n.length>0&&this.eventService.dispatchEvent({type:f.YFc.EVENT_ASYNC_TRANSACTIONS_FLUSHED,results:n})}},t.prototype.flushAsyncTransactions=function(){null!=this.asyncTransactionsTimeout&&clearTimeout(this.asyncTransactionsTimeout),this.executeAsyncTransactions()},t.prototype.applyTransaction=function(e){var r;if(this.serverSideRowModel.executeOnStore(e.route,function(i){r=i.applyTransaction(e)}),r){if(this.valueCache.onDataChanged(),r.remove){var n=r.remove.map(function(i){return i.id});this.selectionService.deleteSelectionStateFromParent(e.route||[],n)}return this.eventService.dispatchEvent({type:f.YFc.EVENT_STORE_UPDATED}),r}return{status:f.OgV.StoreNotFound}},xi([(0,f.Qnc)("rowNodeBlockLoader")],t.prototype,"rowNodeBlockLoader",void 0),xi([(0,f.Qnc)("valueCache")],t.prototype,"valueCache",void 0),xi([(0,f.Qnc)("rowModel")],t.prototype,"serverSideRowModel",void 0),xi([(0,f.Qnc)("rowRenderer")],t.prototype,"rowRenderer",void 0),xi([(0,f.Qnc)("selectionService")],t.prototype,"selectionService",void 0),xi([f.QhY],t.prototype,"postConstruct",null),xi([(0,f.ekA)("ssrmTransactionManager")],t)}(f._QX),AF=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),us=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},DF=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return AF(t,o),t.prototype.postConstruct=function(){this.gridOptionsService.isRowModelType("serverSide")&&this.addManagedListener(this.eventService,f.YFc.EVENT_ROW_GROUP_OPENED,this.onRowGroupOpened.bind(this))},t.prototype.onRowGroupOpened=function(e){var r=e.node;if(r.expanded){if(r.master)this.createDetailNode(r);else if(f._.missing(r.childStore)){var n=this.serverSideRowModel.getParams();r.childStore=this.createBean(this.storeFactory.createStore(n,r))}}else this.gridOptionsService.is("purgeClosedRowNodes")&&f._.exists(r.childStore)&&(r.childStore=this.destroyBean(r.childStore));this.eventService.dispatchEvent({type:f.YFc.EVENT_STORE_UPDATED})},t.prototype.createDetailNode=function(e){if(f._.exists(e.detailNode))return e.detailNode;var r=new f.w$i(this.beans);r.detail=!0,r.selectable=!1,r.parent=e,f._.exists(e.id)&&(r.id="detail_"+e.id),r.data=e.data,r.level=e.level+1;var i=this.gridOptionsService.getRowHeightForNode(r).height;return r.rowHeight=i||200,e.detailNode=r,r},us([(0,f.Qnc)("rowModel")],t.prototype,"serverSideRowModel",void 0),us([(0,f.Qnc)("ssrmStoreFactory")],t.prototype,"storeFactory",void 0),us([(0,f.Qnc)("beans")],t.prototype,"beans",void 0),us([f.QhY],t.prototype,"postConstruct",null),us([(0,f.ekA)("ssrmExpandListener")],t)}(f._QX),MF=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),zo=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},RF=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return MF(t,o),t.prototype.postConstruct=function(){this.gridOptionsService.isRowModelType("serverSide")&&this.addManagedListener(this.eventService,f.YFc.EVENT_SORT_CHANGED,this.onSortChanged.bind(this))},t.prototype.extractSortModel=function(){var e=this.sortController.getSortModel();return this.gridOptionsService.is("treeData")||(this.replaceAutoGroupColumnWithActualRowGroupColumns(e),this.removeMultiColumnPrefixOnColumnIds(e)),e},t.prototype.removeMultiColumnPrefixOnColumnIds=function(e){if(this.gridOptionsService.isGroupMultiAutoColumn())for(var r=f.Yx9+"-",n=0;n<e.length;++n)e[n].colId.indexOf(r)>-1&&(e[n].colId=e[n].colId.substr(r.length))},t.prototype.replaceAutoGroupColumnWithActualRowGroupColumns=function(e){var r=e.find(function(l){return l.colId==f.Yx9});if(r){var n=e.indexOf(r);f._.removeFromArray(e,r);var s=this.columnModel.getRowGroupColumns().filter(function(l){return 0==e.filter(function(u){return u.colId===l.getColId()}).length}).map(function(l){return{colId:l.getId(),sort:r.sort}});f._.insertArrayIntoArray(e,s,n)}},t.prototype.onSortChanged=function(){var e=this.serverSideRowModel.getParams();if(e){var r=this.extractSortModel(),i=this.findChangedColumnsInSort(r,e.sortModel),a=this.listenerUtils.isSortingWithValueColumn(i),s=this.listenerUtils.isSortingWithSecondaryColumn(i);this.serverSideRowModel.refreshAfterSort(r,{valueColChanged:a,secondaryColChanged:s,changedColumns:i})}},t.prototype.findChangedColumnsInSort=function(e,r){var n=[];return[e,r].forEach(function(s){if(s){var l=s.map(function(u){return u.colId});n=n.concat(l)}}),n.filter(function(s){var l=r.find(function(c){return c.colId===s}),u=e.find(function(c){return c.colId===s});return function(s,l){return(s?s.sort:null)!==(l?l.sort:null)}(l,u)||function(s,l){return(s?r.indexOf(s):-1)!==(l?e.indexOf(l):-1)}(l,u)})},zo([(0,f.Qnc)("sortController")],t.prototype,"sortController",void 0),zo([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),zo([(0,f.Qnc)("rowModel")],t.prototype,"serverSideRowModel",void 0),zo([(0,f.Qnc)("ssrmListenerUtils")],t.prototype,"listenerUtils",void 0),zo([f.QhY],t.prototype,"postConstruct",null),zo([(0,f.ekA)("ssrmSortService")],t)}(f._QX),FF=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),cs=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},IF=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return FF(t,o),t.prototype.postConstruct=function(){this.gridOptionsService.isRowModelType("serverSide")&&this.addManagedListener(this.eventService,f.YFc.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this))},t.prototype.onFilterChanged=function(){var e=this.serverSideRowModel.getParams();if(e){var r=this.filterManager.getFilterModel(),i=this.findChangedColumns(r,e?e.filterModel:{}),a=this.listenerUtils.isSortingWithValueColumn(i),s=this.listenerUtils.isSortingWithSecondaryColumn(i);this.serverSideRowModel.refreshAfterFilter(r,{valueColChanged:a,secondaryColChanged:s,changedColumns:i})}},t.prototype.findChangedColumns=function(e,r){var n={};Object.keys(e).forEach(function(a){return n[a]=!0}),Object.keys(r).forEach(function(a){return n[a]=!0});var i=[];return Object.keys(n).forEach(function(a){JSON.stringify(e[a])!=JSON.stringify(r[a])&&i.push(a)}),i},cs([(0,f.Qnc)("rowModel")],t.prototype,"serverSideRowModel",void 0),cs([(0,f.Qnc)("filterManager")],t.prototype,"filterManager",void 0),cs([(0,f.Qnc)("ssrmListenerUtils")],t.prototype,"listenerUtils",void 0),cs([f.QhY],t.prototype,"postConstruct",null),cs([(0,f.ekA)("ssrmFilterListener")],t)}(f._QX),Id=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},LF=function(){function o(){}return o.prototype.createStore=function(t,e){var r=this.getStoreParams(t,e);return new(r.suppressInfiniteScroll?Md:pu)(t,r,e)},o.prototype.getStoreParams=function(t,e){var r=this.getLevelSpecificParams(e),n=this.isInfiniteScroll(r);return{suppressInfiniteScroll:!n,cacheBlockSize:this.getBlockSize(n,r),maxBlocksInCache:this.getMaxBlocksInCache(n,t,r)}},o.prototype.getMaxBlocksInCache=function(t,e,r){if(t){var n=r&&null!=r.maxBlocksInCache?r.maxBlocksInCache:this.gridOptionsService.getNum("maxBlocksInCache");if(null!=n&&n>=0)return e.dynamicRowHeight?void f._.doOnce(function(){return console.warn("AG Grid: Server Side Row Model does not support Dynamic Row Height and Cache Purging. Either a) remove getRowHeight() callback or b) remove maxBlocksInCache property. Purging has been disabled.")},"storeFactory.maxBlocksInCache.dynamicRowHeight"):this.columnModel.isAutoRowHeightActive()?void f._.doOnce(function(){return console.warn("AG Grid: Server Side Row Model does not support Auto Row Height and Cache Purging. Either a) remove colDef.autoHeight or b) remove maxBlocksInCache property. Purging has been disabled.")},"storeFactory.maxBlocksInCache.autoRowHeightActive"):n}},o.prototype.getBlockSize=function(t,e){if(t){var r=e&&null!=e.cacheBlockSize?e.cacheBlockSize:this.gridOptionsService.getNum("cacheBlockSize");return null!=r&&r>0?r:100}},o.prototype.getLevelSpecificParams=function(t){var e=this.gridOptionsService.getCallback("getServerSideGroupLevelParams");if(e){var n=e({level:t.level+1,parentRowNode:t.level>=0?t:void 0,rowGroupColumns:this.columnModel.getRowGroupColumns(),pivotColumns:this.columnModel.getPivotColumns(),pivotMode:this.columnModel.isPivotMode()});return null!=n.storeType&&(n.suppressInfiniteScroll="partial"!==n.storeType),n}},o.prototype.isInfiniteScroll=function(t){return!(t&&null!=t.suppressInfiniteScroll?t.suppressInfiniteScroll:this.isSuppressServerSideInfiniteScroll())},o.prototype.isSuppressServerSideInfiniteScroll=function(){return this.gridOptionsService.is("suppressServerSideInfiniteScroll")},Id([(0,f.Qnc)("gridOptionsService")],o.prototype,"gridOptionsService",void 0),Id([(0,f.Qnc)("columnModel")],o.prototype,"columnModel",void 0),Id([(0,f.ekA)("ssrmStoreFactory")],o)}(),iy=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},NF=function(){function o(){}return o.prototype.isSortingWithValueColumn=function(t){for(var e=this.columnModel.getValueColumns().map(function(n){return n.getColId()}),r=0;r<t.length;r++)if(e.indexOf(t[r])>-1)return!0;return!1},o.prototype.isSortingWithSecondaryColumn=function(t){if(!this.columnModel.getSecondaryColumns())return!1;for(var e=this.columnModel.getSecondaryColumns().map(function(n){return n.getColId()}),r=0;r<t.length;r++)if(e.indexOf(t[r])>-1)return!0;return!1},iy([(0,f.Qnc)("columnModel")],o.prototype,"columnModel",void 0),iy([(0,f.ekA)("ssrmListenerUtils")],o)}(),kF=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),oy=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},GF=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},VF=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},ay=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.selectedState={selectAll:!1,toggledNodes:new Set},e.lastSelected=null,e.selectAllUsed=!1,e.selectedNodes={},e}return kF(t,o),t.prototype.init=function(){var e=this;this.rowSelection=this.gridOptionsService.get("rowSelection"),this.addManagedPropertyListener("rowSelection",function(r){e.rowSelection=r.currentValue})},t.prototype.getSelectedState=function(){return{selectAll:this.selectedState.selectAll,toggledNodes:VF([],GF(this.selectedState.toggledNodes))}},t.prototype.setSelectedState=function(e){var r={selectAll:!1,toggledNodes:new Set};"object"==typeof e?"selectAll"in e&&"boolean"==typeof e.selectAll?(r.selectAll=e.selectAll,"toggledNodes"in e&&Array.isArray(e.toggledNodes)?(e.toggledNodes.forEach(function(n){"string"==typeof n?r.toggledNodes.add(n):console.warn("AG Grid: Provided ids must be of string type. Invalid id provided: "+n)}),this.selectedState=r):console.error("AG Grid: `toggledNodes` must be an array of string ids.")):console.error("AG Grid: Select all status should be of boolean type."):console.error("AG Grid: The provided selection state should be an object.")},t.prototype.deleteSelectionStateFromParent=function(e,r){var n=this;if(0===this.selectedState.toggledNodes.size)return!1;var i=!1;return r.forEach(function(a){n.selectedState.toggledNodes.delete(a)&&(i=!0)}),i},t.prototype.setNodesSelected=function(e){var r,n=this;if(0===e.nodes.length)return 0;if("multiple"!==this.rowSelection||e.clearSelection&&e.newValue&&!e.rangeSelect){if(e.nodes.length>1)throw new Error("AG Grid: cannot select multiple rows when rowSelection is set to 'single'");var a=e.nodes[0];return e.newValue?(this.selectedNodes=((r={})[a.id]=a,r),this.selectedState={selectAll:!1,toggledNodes:new Set([a.id])}):(this.selectedNodes={},this.selectedState={selectAll:!1,toggledNodes:new Set}),this.lastSelected=a.id,1}var s=function(u){e.newValue?n.selectedNodes[u.id]=u:delete n.selectedNodes[u.id],e.newValue!==n.selectedState.selectAll&&u.selectable?n.selectedState.toggledNodes.add(u.id):n.selectedState.toggledNodes.delete(u.id)};if(e.rangeSelect&&this.lastSelected){if(e.nodes.length>1)throw new Error("AG Grid: cannot select multiple rows when using rangeSelect");a=e.nodes[0];var l=this.rowModel.getRowNode(this.lastSelected);return this.rowModel.getNodesInRangeForSelection(a,l??null).forEach(s),this.lastSelected=a.id,1}return e.nodes.forEach(s),this.lastSelected=e.nodes[e.nodes.length-1].id,1},t.prototype.processNewRow=function(e){this.selectedNodes[e.id]&&(this.selectedNodes[e.id]=e)},t.prototype.isNodeSelected=function(e){var r=this.selectedState.toggledNodes.has(e.id);return this.selectedState.selectAll?!r:r},t.prototype.getSelectedNodes=function(){return this.selectAllUsed&&console.warn("AG Grid: getSelectedNodes and getSelectedRows functions cannot be used with select all functionality with the server-side row model.\n                Use `api.getServerSideSelectionState()` instead."),Object.values(this.selectedNodes)},t.prototype.getSelectedRows=function(){return this.getSelectedNodes().map(function(e){return e.data})},t.prototype.getSelectionCount=function(){return this.selectedState.selectAll?-1:this.selectedState.toggledNodes.size},t.prototype.clearOtherNodes=function(e,r){var n=this.selectedState.selectAll?1:this.selectedState.toggledNodes.size-1;return this.selectedState={selectAll:!1,toggledNodes:new Set([e.id])},this.rowModel.forEachNode(function(a){a!==e&&a.selectThisNode(!1,void 0,r)}),this.eventService.dispatchEvent({type:f.YFc.EVENT_SELECTION_CHANGED,source:r}),n},t.prototype.isEmpty=function(){var e;return!(this.selectedState.selectAll||null!==(e=this.selectedState.toggledNodes)&&void 0!==e&&e.size)},t.prototype.selectAllRowNodes=function(e){this.selectedState={selectAll:!0,toggledNodes:new Set},this.selectedNodes={},this.selectAllUsed=!0},t.prototype.deselectAllRowNodes=function(e){this.selectedState={selectAll:!1,toggledNodes:new Set},this.selectedNodes={}},t.prototype.getSelectAllState=function(e,r){return this.selectedState.selectAll?!(this.selectedState.toggledNodes.size>0)||null:this.selectedState.toggledNodes.size>0&&null},oy([(0,f.Qnc)("rowModel")],t.prototype,"rowModel",void 0),oy([f.QhY],t.prototype,"init",null),t}(f._QX),BF=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ds=function(){return ds=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},ds.apply(this,arguments)},Ho=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},vu=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},sy=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.selectedState={selectAllChildren:!1,toggledNodes:new Map},e.lastSelected=null,e}return BF(t,o),t.prototype.init=function(){var e=this;this.addManagedListener(this.eventService,f.YFc.EVENT_MODEL_UPDATED,function(){return e.removeRedundantState()}),this.addManagedListener(this.eventService,f.YFc.EVENT_COLUMN_ROW_GROUP_CHANGED,function(){return e.selectionService.reset()})},t.prototype.getSelectedState=function(){var e=this,r=function(n,i,a){var s={nodeId:a};if(i<=e.columnModel.getRowGroupColumns().length&&(s.selectAllChildren=n.selectAllChildren),n.toggledNodes.size){var l=[];n.toggledNodes.forEach(function(u,c){var d=r(u,i+1,c);l.push(d)}),s.toggledNodes=l}return s};return r(this.selectedState,0)},t.prototype.setSelectedState=function(e){var r=function(n,i){var a,s;if("object"!=typeof n)throw new Error("AG Grid: Each provided state object must be an object.");if("selectAllChildren"in n&&"boolean"!=typeof n.selectAllChildren)throw new Error("AG Grid: `selectAllChildren` must be a boolean value or undefined.");if("toggledNodes"in n){if(!Array.isArray(n.toggledNodes))throw new Error("AG Grid: `toggledNodes` must be an array.");if(!n.toggledNodes.every(function(h){return"object"==typeof h&&"nodeId"in h&&"string"==typeof h.nodeId}))throw new Error("AG Grid: Every `toggledNode` requires an associated string id.")}var u=null!==(a=n.selectAllChildren)&&void 0!==a?a:!i,c=null===(s=n.toggledNodes)||void 0===s?void 0:s.map(function(h){return[h.nodeId,r(h,u)]}),d=c?.some(function(h){var v=vu(h,2)[1];return u===v.selectAllChildren&&0===v.toggledNodes.size});if(d)throw new Error("\n                    AG Grid: AG Grid: Row selection state could not be parsed due to invalid data. Ensure all child state has toggledNodes or does not conform with the parent rule.\n                    Please rebuild the selection state and reapply it.\n                ");return{selectAllChildren:u,toggledNodes:new Map(c)}};try{this.selectedState=r(e,!!e.selectAllChildren)}catch(n){console.error(n.message)}},t.prototype.deleteSelectionStateFromParent=function(e,r){for(var n=this.selectedState,i=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o}([],vu(e));n&&i.length;)n=n.toggledNodes.get(i.pop());if(!n)return!1;var a=!1;return r.forEach(function(s){n?.toggledNodes.delete(s)&&(a=!0)}),a&&this.removeRedundantState(),a},t.prototype.setNodesSelected=function(e){var r=this,n=e.nodes,i=function(o,t){var e={};for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&t.indexOf(r)<0&&(e[r]=o[r]);if(null!=o&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(o);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(o,r[n])&&(e[r[n]]=o[r[n]])}return e}(e,["nodes"]);if(0===n.length)return 0;if(e.rangeSelect){if(n.length>1)throw new Error("AG Grid: cannot select multiple rows when using rangeSelect");var a=n[0],l=this.rowModel.getNodesInRangeForSelection(a,this.lastSelected).map(this.getRouteToNode).sort(function(c,d){return d.length-c.length}),u=new Set;return l.forEach(function(c){u.has(c[c.length-1])||(c.forEach(function(d){return u.add(d)}),r.recursivelySelectNode(c,r.selectedState,ds({node:a},i)))}),this.removeRedundantState(),this.lastSelected=a,1}return e.nodes.forEach(function(c){var d=r.getRouteToNode(c);r.recursivelySelectNode(d,r.selectedState,ds(ds({},i),{node:c}))}),this.removeRedundantState(),this.lastSelected=e.nodes[e.nodes.length-1],1},t.prototype.isNodeSelected=function(e){var r=this.getRouteToNode(e);return this.isNodePathSelected(r,this.selectedState)},t.prototype.isNodePathSelected=function(e,r){var n=vu(e),i=n[0],a=n.slice(1);if(0===a.length){var s=r.toggledNodes.has(i.id);if(i.hasChildren()){var l=r.toggledNodes.get(i.id);if(l&&l.toggledNodes.size)return}return r.selectAllChildren?!s:s}if(r.toggledNodes.has(i.id)){var u=r.toggledNodes.get(i.id);if(u)return this.isNodePathSelected(a,u)}return!!r.selectAllChildren},t.prototype.getRouteToNode=function(e){for(var r=[],n=e;n.parent;)r.push(n),n=n.parent;return r.reverse()},t.prototype.removeRedundantState=function(){var e=this;if(!this.filterManager.isAnyFilterPresent()){var r=function(n,i,a){void 0===n&&(n=e.selectedState),void 0===i&&(i=e.serverSideRowModel.getRootStore());var s=!0,l=!0;return n.toggledNodes.forEach(function(u,c){var d=e.rowModel.getRowNode(c);d||(s=!1);var h=d?.childStore;h?(r(u,h,d)&&n.selectAllChildren===u.selectAllChildren&&n.toggledNodes.delete(c),u.toggledNodes.size>0&&(l=!1)):u.toggledNodes.size>0&&(l=!1)}),!(!i||!i.isLastRowIndexKnown()||i.getRowCount()!==n.toggledNodes.size||!l||!s||(n.toggledNodes.clear(),n.selectAllChildren=!n.selectAllChildren,a&&a?.isSelected()!==n.selectAllChildren&&a.selectThisNode(n.selectAllChildren,void 0,"api"),0))};r()}},t.prototype.recursivelySelectNode=function(e,r,n){var i=vu(e),a=i[0],s=i.slice(1);if(a){if(!s.length)return r.selectAllChildren!==n.newValue&&a.selectable?void r.toggledNodes.set(a.id,{selectAllChildren:n.newValue,toggledNodes:new Map}):void r.toggledNodes.delete(a.id);var h=r.toggledNodes.has(a.id),p=h?r.toggledNodes.get(a.id):{selectAllChildren:r.selectAllChildren,toggledNodes:new Map};h||r.toggledNodes.set(a.id,p),this.recursivelySelectNode(s,p,n),r.selectAllChildren===p.selectAllChildren&&0===p.toggledNodes.size&&r.toggledNodes.delete(a.id)}},t.prototype.getSelectedNodes=function(){console.warn("AG Grid: `getSelectedNodes` and `getSelectedRows` functions cannot be used with `groupSelectsChildren` and the server-side row model.\n            Use `api.getServerSideSelectionState()` instead.");var e=[];return this.rowModel.forEachNode(function(r){r.isSelected()&&e.push(r)}),e},t.prototype.processNewRow=function(e){},t.prototype.getSelectedRows=function(){return this.getSelectedNodes().map(function(e){return e.data})},t.prototype.getSelectionCount=function(){return-1},t.prototype.isEmpty=function(){var e;return!(this.selectedState.selectAllChildren||null!==(e=this.selectedState.toggledNodes)&&void 0!==e&&e.size)},t.prototype.selectAllRowNodes=function(e){this.selectedState={selectAllChildren:!0,toggledNodes:new Map}},t.prototype.deselectAllRowNodes=function(e){this.selectedState={selectAllChildren:!1,toggledNodes:new Map}},t.prototype.getSelectAllState=function(e,r){return this.selectedState.selectAllChildren?!(this.selectedState.toggledNodes.size>0)||null:this.selectedState.toggledNodes.size>0&&null},Ho([(0,f.Qnc)("rowModel")],t.prototype,"rowModel",void 0),Ho([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),Ho([(0,f.Qnc)("filterManager")],t.prototype,"filterManager",void 0),Ho([(0,f.Qnc)("rowModel")],t.prototype,"serverSideRowModel",void 0),Ho([(0,f.Qnc)("selectionService")],t.prototype,"selectionService",void 0),Ho([f.QhY],t.prototype,"init",null),t}(f._QX),HF=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ld=function(){return Ld=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},Ld.apply(this,arguments)},Nd=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},WF=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return HF(t,o),t.prototype.init=function(){var e=this,r=this.gridOptionsService.is("groupSelectsChildren");this.addManagedPropertyListener("groupSelectsChildren",function(i){e.destroyBean(e.selectionStrategy),e.selectionStrategy=e.createManagedBean(new(i.currentValue?sy:ay)),e.shotgunResetNodeSelectionState(),e.eventService.dispatchEvent({type:f.YFc.EVENT_SELECTION_CHANGED,source:"api"})}),this.rowSelection=this.gridOptionsService.get("rowSelection"),this.addManagedPropertyListener("rowSelection",function(i){return e.rowSelection=i.currentValue}),this.selectionStrategy=this.createManagedBean(new(r?sy:ay))},t.prototype.getServerSideSelectionState=function(){return this.selectionStrategy.getSelectedState()},t.prototype.setServerSideSelectionState=function(e){this.selectionStrategy.setSelectedState(e),this.shotgunResetNodeSelectionState(),this.eventService.dispatchEvent({type:f.YFc.EVENT_SELECTION_CHANGED,source:"api"})},t.prototype.setNodesSelected=function(e){var r=e.nodes,n=function(o,t){var e={};for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&t.indexOf(r)<0&&(e[r]=o[r]);if(null!=o&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(o);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(o,r[n])&&(e[r[n]]=o[r[n]])}return e}(e,["nodes"]);if(r.length>1&&"multiple"!==this.rowSelection)return console.warn("AG Grid: cannot multi select while rowSelection='single'"),0;if(r.length>1&&e.rangeSelect)return console.warn("AG Grid: cannot use range selection when multi selecting rows"),0;var i=Ld({nodes:r.filter(function(l){return l.selectable})},n);if(!i.nodes.length)return 0;var a=this.selectionStrategy.setNodesSelected(i);return this.shotgunResetNodeSelectionState(i.source),this.eventService.dispatchEvent({type:f.YFc.EVENT_SELECTION_CHANGED,source:i.source}),a},t.prototype.deleteSelectionStateFromParent=function(e,r){this.selectionStrategy.deleteSelectionStateFromParent(e,r)&&(this.shotgunResetNodeSelectionState(),this.eventService.dispatchEvent({type:f.YFc.EVENT_SELECTION_CHANGED,source:"api"}))},t.prototype.shotgunResetNodeSelectionState=function(e){var r=this;this.rowModel.forEachNode(function(n){if(!n.stub){var i=r.selectionStrategy.isNodeSelected(n);i!==n.isSelected()&&n.selectThisNode(i,void 0,e)}})},t.prototype.getSelectedNodes=function(){return this.selectionStrategy.getSelectedNodes()},t.prototype.getSelectedRows=function(){return this.selectionStrategy.getSelectedRows()},t.prototype.getSelectionCount=function(){return this.selectionStrategy.getSelectionCount()},t.prototype.syncInRowNode=function(e,r){this.selectionStrategy.processNewRow(e);var n=this.selectionStrategy.isNodeSelected(e);if(0!=n&&!e.selectable)return this.selectionStrategy.setNodesSelected({nodes:[e],newValue:!1,source:"api"}),this.shotgunResetNodeSelectionState(),void this.eventService.dispatchEvent({type:f.YFc.EVENT_SELECTION_CHANGED,source:"api"});e.setSelectedInitialValue(n)},t.prototype.reset=function(){this.selectionStrategy.deselectAllRowNodes({source:"api"})},t.prototype.isEmpty=function(){return this.selectionStrategy.isEmpty()},t.prototype.selectAllRowNodes=function(e){(e.justCurrentPage||e.justFiltered)&&console.warn("AG Grid: selecting just filtered only works when gridOptions.rowModelType='clientSide'"),this.selectionStrategy.selectAllRowNodes(e),this.rowModel.forEachNode(function(n){n.stub||n.selectThisNode(!0,void 0,e.source)}),this.eventService.dispatchEvent({type:f.YFc.EVENT_SELECTION_CHANGED,source:e.source})},t.prototype.deselectAllRowNodes=function(e){(e.justCurrentPage||e.justFiltered)&&console.warn("AG Grid: selecting just filtered only works when gridOptions.rowModelType='clientSide'"),this.selectionStrategy.deselectAllRowNodes(e),this.rowModel.forEachNode(function(n){n.stub||n.selectThisNode(!1,void 0,e.source)}),this.eventService.dispatchEvent({type:f.YFc.EVENT_SELECTION_CHANGED,source:e.source})},t.prototype.getSelectAllState=function(e,r){return this.selectionStrategy.getSelectAllState(e,r)},t.prototype.updateGroupsFromChildrenSelections=function(e,r){return!1},t.prototype.getBestCostNodeSelection=function(){console.warn("AG Grid: calling gridApi.getBestCostNodeSelection() is only possible when using rowModelType=`clientSide`.")},t.prototype.filterFromSelection=function(){},Nd([(0,f.Qnc)("rowModel")],t.prototype,"rowModel",void 0),Nd([f.QhY],t.prototype,"init",null),Nd([(0,f.ekA)("selectionService")],t)}(f._QX),YF={version:"30.2.1",moduleName:f.ekS.ServerSideRowModelModule,rowModel:"serverSide",beans:[CF,DF,RF,xF,OF,EF,PF,IF,LF,NF,WF],dependantModules:[Ue]},$F=function(){function o(t,e,r,n,i,a,s,l,u,c){this.rowModel=t,this.filterParams=e,this.createKey=r,this.caseFormat=n,this.columnModel=i,this.valueService=a,this.treeDataOrGrouping=s,this.treeData=l,this.getDataPath=u,this.groupAllowUnbalanced=c}return o.prototype.extractUniqueValues=function(t,e){var r=this,n=new Map,i=this.extractExistingFormattedKeys(e),a=new Set,s=this.treeData&&!!this.getDataPath,l=this.columnModel.getRowGroupColumns(),u=function(c,d){var h=r.caseFormat(c);if(!a.has(h)){a.add(h);var p=c,v=f._.makeNull(d),g=i?.get(h);null!=g&&(p=g,v=e.get(g)),n.set(p,v)}};return this.rowModel.forEachLeafNode(function(c){if(c.data&&t(c)){if(r.treeDataOrGrouping)return void r.addValueForTreeDataOrGrouping(c,s,l,u);var d=r.getValue(c);if(r.filterParams.convertValuesToStrings)return void r.addValueForConvertValuesToString(c,d,u);null!=d&&Array.isArray(d)?(d.forEach(function(h){u(r.createKey(h,c),h)}),0===d.length&&u(null,null)):u(r.createKey(d,c),d)}}),n},o.prototype.addValueForConvertValuesToString=function(t,e,r){var n=this.createKey(e,t);null!=n&&Array.isArray(n)?(n.forEach(function(i){var a=f._.toStringOrNull(f._.makeNull(i));r(a,a)}),0===n.length&&r(null,null)):r(n,n)},o.prototype.addValueForTreeDataOrGrouping=function(t,e,r,n){var a,s,i=this;if(e){if(null!==(a=t.childrenAfterGroup)&&void 0!==a&&a.length)return;s=this.getDataPath(t.data)}else(s=r.map(function(l){return i.valueService.getKeyForNode(l,t)})).push(this.getValue(t));s&&(s=s.map(function(l){return f._.toStringOrNull(f._.makeNull(l))})),!e&&this.groupAllowUnbalanced&&s?.some(function(l){return null==l})&&(s=s.filter(function(l){return null!=l})),n(this.createKey(s),s)},o.prototype.getValue=function(t){var e=this.filterParams;return this.filterParams.valueGetter({api:e.api,colDef:e.colDef,column:e.column,columnApi:e.columnApi,context:e.context,data:t.data,getValue:function(l){return t.data[l]},node:t})},o.prototype.extractExistingFormattedKeys=function(t){var e=this;if(!t)return null;var r=new Map;return t.forEach(function(n,i){r.set(e.caseFormat(i),i)}),r},o}(),Pt=function(){function o(){}return o.SELECT_ALL="__AG_SELECT_ALL__",o.ADD_SELECTION_TO_FILTER="__AG_ADD_SELECTION_TO_FILTER__",o}(),QF=function(){function o(t,e,r,n){this.valueFormatterService=t,this.valueFormatter=e,this.formatter=r,this.column=n,this.displayedKeys=[]}return o.prototype.updateDisplayedValuesToAllAvailable=function(t,e,r){this.displayedKeys=Array.from(r)},o.prototype.updateDisplayedValuesToMatchMiniFilter=function(t,e,r,n,i){var a,s;this.displayedKeys=[];try{for(var l=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(r),u=l.next();!u.done;u=l.next()){var c=u.value;if(null==c)i&&this.displayedKeys.push(c);else{var d=t(c),h=this.valueFormatterService.formatValue(this.column,null,d,this.valueFormatter,!1);n(this.formatter(h))&&this.displayedKeys.push(c)}}}catch(v){a={error:v}}finally{try{u&&!u.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}},o.prototype.getDisplayedValueCount=function(){return this.displayedKeys.length},o.prototype.getDisplayedItem=function(t){return this.displayedKeys[t]},o.prototype.getSelectAllItem=function(){return Pt.SELECT_ALL},o.prototype.getAddSelectionToFilterItem=function(){return Pt.ADD_SELECTION_TO_FILTER},o.prototype.getDisplayedKeys=function(){return this.displayedKeys},o.prototype.forEachDisplayedKey=function(t){this.displayedKeys.forEach(t)},o.prototype.someDisplayedKey=function(t){return this.displayedKeys.some(t)},o.prototype.hasGroups=function(){return!1},o.prototype.refresh=function(){},o}(),ly=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},kd=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},qF=function(){function o(t,e,r,n){this.formatter=t,this.treeListPathGetter=e,this.treeListFormatter=r,this.treeDataOrGrouping=n,this.allDisplayedItemsTree=[],this.activeDisplayedItemsFlat=[],this.selectAllItem={depth:0,filterPasses:!0,available:!0,treeKey:Pt.SELECT_ALL,children:this.allDisplayedItemsTree,expanded:!0,key:Pt.SELECT_ALL,parentTreeKeys:[]},this.addSelectionToFilterItem={depth:0,filterPasses:!0,available:!0,treeKey:Pt.ADD_SELECTION_TO_FILTER,expanded:!0,key:Pt.ADD_SELECTION_TO_FILTER,parentTreeKeys:[]}}return o.prototype.updateDisplayedValuesToAllAvailable=function(t,e,r,n){"reload"===n?this.generateItemTree(t,e,r):"otherFilter"===n?(this.updateAvailable(r),this.updateExpandAll()):"miniFilter"===n&&(this.resetFilter(),this.updateExpandAll()),this.flattenItems()},o.prototype.updateDisplayedValuesToMatchMiniFilter=function(t,e,r,n,i,a){"reload"===a?this.generateItemTree(t,e,r):"otherFilter"===a&&this.updateAvailable(r),this.updateFilter(n,i),this.updateExpandAll(),this.flattenItems()},o.prototype.generateItemTree=function(t,e,r){var n,i,a;this.allDisplayedItemsTree=[],this.groupsExist=!1;var s=this.getTreeListPathGetter(t,r),l=function(p){var v=t(p),g=null!==(a=s(v))&&void 0!==a?a:[null];g.length>1&&(u.groupsExist=!0);var m,y=r.has(p),S=u.allDisplayedItemsTree,C=[];g.forEach(function(_,w){S||(m.children=S=[]),(m=S.find(function(x){var b;return(null===(b=x.treeKey)||void 0===b?void 0:b.toUpperCase())===_?.toUpperCase()}))||(m={treeKey:_,depth:w,filterPasses:!0,expanded:!1,available:y,parentTreeKeys:C},w===g.length-1&&(m.key=p),S.push(m)),S=m.children,C=ly(ly([],function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i}(C)),[_])})},u=this;try{for(var c=kd(e),d=c.next();!d.done;d=c.next())l(d.value)}catch(p){n={error:p}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}this.updateAvailable(r),this.selectAllItem.children=this.allDisplayedItemsTree,this.selectAllItem.expanded=!1},o.prototype.getTreeListPathGetter=function(t,e){var r,n;if(this.treeListPathGetter)return this.treeListPathGetter;if(this.treeDataOrGrouping)return function(c){return c};var i=!1;try{for(var a=kd(e),s=a.next();!s.done;s=a.next()){var u=t(s.value);if(u instanceof Date){i=!0;break}if(null!=u)break}}catch(c){r={error:c}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i?o.DATE_TREE_LIST_PATH_GETTER:(f._.doOnce(function(){return console.warn("AG Grid: property treeList=true for Set Filter params, but you did not provide a treeListPathGetter or values of type Date.")},"getTreeListPathGetter"),function(c){return[String(c)]})},o.prototype.flattenItems=function(){var t=this;this.activeDisplayedItemsFlat=[];var e=function(r){r.forEach(function(n){!n.filterPasses||!n.available||(t.activeDisplayedItemsFlat.push(n),n.children&&n.expanded&&e(n.children))})};e(this.allDisplayedItemsTree)},o.prototype.resetFilter=function(){var t=function(e){e.children&&e.children.forEach(function(r){t(r)}),e.filterPasses=!0};this.allDisplayedItemsTree.forEach(function(e){return t(e)})},o.prototype.updateFilter=function(t,e){var r=this,n=function(i){return!!i.available&&(null==i.treeKey?e:t(r.formatter(r.treeListFormatter?r.treeListFormatter(i.treeKey,i.depth,i.parentTreeKeys):i.treeKey)))};this.allDisplayedItemsTree.forEach(function(i){return r.recursiveItemCheck(i,!1,n,"filterPasses")})},o.prototype.getDisplayedValueCount=function(){return this.activeDisplayedItemsFlat.length},o.prototype.getDisplayedItem=function(t){return this.activeDisplayedItemsFlat[t]},o.prototype.getSelectAllItem=function(){return this.selectAllItem},o.prototype.getAddSelectionToFilterItem=function(){return this.addSelectionToFilterItem},o.prototype.getDisplayedKeys=function(){var t=[];return this.forEachDisplayedKey(function(e){return t.push(e)}),t},o.prototype.forEachDisplayedKey=function(t){var e=function(r,n){r.children?(!r.expanded||!n)&&r.children.forEach(function(i){i.filterPasses&&e(i,!1)}):t(r.key)};this.activeDisplayedItemsFlat.forEach(function(r){return e(r,!0)})},o.prototype.someDisplayedKey=function(t){var e=function(r,n){return r.children?(!r.expanded||!n)&&r.children.some(function(i){return!!i.filterPasses&&e(i,!1)}):t(r.key)};return this.activeDisplayedItemsFlat.some(function(r){return e(r,!0)})},o.prototype.hasGroups=function(){return this.groupsExist},o.prototype.refresh=function(){this.updateExpandAll(),this.flattenItems()},o.prototype.updateExpandAll=function(){var t=function(r,n,i){var a,s;try{for(var l=kd(r),u=l.next();!u.done;u=l.next()){var c=u.value;if(c.filterPasses&&c.available&&c.children){if(i=i||!c.expanded,(n=n||!!c.expanded)&&i)return;var d=t(c.children,n,i);if(void 0===d)return;d?n=!0:i=!0}}}catch(h){a={error:h}}finally{try{u&&!u.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}return n&&i?void 0:n},e=this.getSelectAllItem();e.expanded=t(e.children,!1,!1)},o.prototype.recursiveItemCheck=function(t,e,r,n){var i=this,a=!1;t.children&&t.children.forEach(function(l){var u=i.recursiveItemCheck(l,e||r(t),r,n);a=a||u});var s=e||a||r(t);return t[n]=s,s},o.prototype.updateAvailable=function(t){var e=this,r=function(n){return t.has(n.key)};this.allDisplayedItemsTree.forEach(function(n){return e.recursiveItemCheck(n,!1,r,"available")})},o.DATE_TREE_LIST_PATH_GETTER=function(t){return t?[String(t.getFullYear()),String(t.getMonth()+1),String(t.getDate())]:null},o}(),JF=function(){function o(t){var e=t.caseFormat;this.filteringKeys=null,this.filteringKeysCaseFormatted=null,this.hasNoAppliedFilteringKeys=!1,this.caseFormat=e}return o.prototype.allFilteringKeys=function(){return this.filteringKeys},o.prototype.allFilteringKeysCaseFormatted=function(){return this.filteringKeysCaseFormatted},o.prototype.noAppliedFilteringKeys=function(){return this.hasNoAppliedFilteringKeys},o.prototype.setFilteringKeys=function(t){var e=this;this.filteringKeys=new Set(t),this.hasNoAppliedFilteringKeys=!this.filteringKeys||0===this.filteringKeys.size,this.filteringKeysCaseFormatted=new Set,this.filteringKeys.forEach(function(r){return e.filteringKeysCaseFormatted.add(e.caseFormat(r))})},o.prototype.addFilteringKey=function(t){null==this.filteringKeys&&(this.filteringKeys=new Set,this.filteringKeysCaseFormatted=new Set),this.filteringKeys.add(t),this.filteringKeysCaseFormatted.add(this.caseFormat(t)),this.hasNoAppliedFilteringKeys&&(this.hasNoAppliedFilteringKeys=!1)},o.prototype.hasCaseFormattedFilteringKey=function(t){return this.filteringKeysCaseFormatted.has(this.caseFormat(t))},o.prototype.hasFilteringKey=function(t){return this.filteringKeys.has(t)},o.prototype.reset=function(){this.filteringKeys=null,this.filteringKeysCaseFormatted=null,this.hasNoAppliedFilteringKeys=!1},o}(),ln=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},uy=function(o,t){for(var e=0,r=t.length,n=o.length;e<r;e++,n++)o[n]=t[e];return o},ir=function(o){return o[o.PROVIDED_LIST=0]="PROVIDED_LIST",o[o.PROVIDED_CALLBACK=1]="PROVIDED_CALLBACK",o[o.TAKEN_FROM_GRID_VALUES=2]="TAKEN_FROM_GRID_VALUES",o}(ir||{}),cy=function(){function o(t){var r,e=this;this.localEventService=new f.ys,this.miniFilterText=null,this.addCurrentSelectionToFilter=!1,this.providedValues=null,this.allValues=new Map,this.availableKeys=new Set,this.selectedKeys=new Set,this.initialised=!1;var n=t.usingComplexObjects,i=t.columnModel,a=t.valueService,s=t.treeDataTreeList,l=t.groupingTreeList,u=t.filterParams,c=t.gridOptionsService,d=t.valueFormatterService,h=t.valueFormatter,p=u.column,v=u.colDef,g=u.textFormatter,y=u.doesRowPassOtherFilter,S=u.suppressSorting,m=u.comparator,C=u.rowModel,_=u.values,w=u.caseSensitive,x=u.convertValuesToStrings,b=u.treeList,O=u.treeListPathGetter,T=u.treeListFormatter;this.filterParams=u,this.setIsLoading=t.setIsLoading,this.translate=t.translate,this.caseFormat=t.caseFormat,this.createKey=t.createKey,this.usingComplexObjects=!!t.usingComplexObjects,this.formatter=g||f.Qf1.DEFAULT_FORMATTER,this.doesRowPassOtherFilters=y,this.suppressSorting=S||!1,this.convertValuesToStrings=!!x,this.filteringKeys=new JF({caseFormat:this.caseFormat});var E=m??v.comparator,P=!!s||!!l;this.compareByValue=!!(n&&E||P||b&&!O),this.entryComparator=P&&!E?this.createTreeDataOrGroupingComparator():!b||O||E?function(M,F){var L=ln(M,2)[1],N=ln(F,2);return E(L,N[1])}:function(M,F){var L=ln(M,2)[1],N=ln(F,2);return f._.defaultComparator(L,N[1])},this.keyComparator=null!==(r=E)&&void 0!==r?r:f._.defaultComparator,this.caseSensitive=!!w;var D=c.get("getDataPath"),R=c.is("groupAllowUnbalanced");"clientSide"===C.getType()&&(this.clientSideValuesExtractor=new $F(C,this.filterParams,this.createKey,this.caseFormat,i,a,P,!!s,D,R)),null==_?this.valuesType=ir.TAKEN_FROM_GRID_VALUES:(this.valuesType=Array.isArray(_)?ir.PROVIDED_LIST:ir.PROVIDED_CALLBACK,this.providedValues=_),this.displayValueModel=b?new qF(this.formatter,O,T,s||l):new QF(d,h,this.formatter,p),this.updateAllValues().then(function(M){return e.resetSelectionState(M||[])})}return o.prototype.addEventListener=function(t,e,r){this.localEventService.addEventListener(t,e,r)},o.prototype.removeEventListener=function(t,e,r){this.localEventService.removeEventListener(t,e,r)},o.prototype.refreshValues=function(){var t=this.getModel();return this.updateAllValues(),this.setModel(t)},o.prototype.overrideValues=function(t){var e=this;return new f.VVN(function(r){e.allValuesPromise.then(function(){e.valuesType=ir.PROVIDED_LIST,e.providedValues=t,e.refreshValues().then(function(){return r()})})})},o.prototype.refreshAfterAnyFilterChanged=function(){var t=this;return this.showAvailableOnly()?this.allValuesPromise.then(function(e){return t.updateAvailableKeys(e??[],"otherFilter"),!0}):f.VVN.resolve(!1)},o.prototype.isInitialised=function(){return this.initialised},o.prototype.updateAllValues=function(){var t=this;return this.allValuesPromise=new f.VVN(function(e){switch(t.valuesType){case ir.TAKEN_FROM_GRID_VALUES:case ir.PROVIDED_LIST:e(t.processAllKeys(t.valuesType===ir.TAKEN_FROM_GRID_VALUES,t.providedValues));break;case ir.PROVIDED_CALLBACK:t.setIsLoading(!0);var r=t.providedValues,n=t.filterParams,c={success:function(d){t.setIsLoading(!1),e(t.processAllKeys(!1,d))},colDef:n.colDef,column:n.column,columnApi:n.columnApi,api:n.api,context:n.context};window.setTimeout(function(){return r(c)},0);break;default:throw new Error("Unrecognised valuesType")}}),this.allValuesPromise.then(function(e){return t.updateAvailableKeys(e||[],"reload")}).then(function(){return t.initialised=!0}),this.allValuesPromise},o.prototype.processAllKeys=function(t,e){var r=t?this.getValuesFromRows(!1):this.uniqueValues(this.validateProvidedValues(e)),n=this.sortKeys(r);return this.allValues=r??new Map,n},o.prototype.validateProvidedValues=function(t){if(this.usingComplexObjects&&t?.length){var e=t[0];e&&"object"!=typeof e&&"function"!=typeof e&&(null==this.createKey(e)?f._.doOnce(function(){return console.warn("Set Filter Key Creator is returning null for provided values and provided values are primitives. Please provide complex objects or set convertValuesToStrings=true in the filterParams. See https://www.ag-grid.com/javascript-data-grid/filter-set-filter-list/#filter-value-types")},"setFilterComplexObjectsProvidedNull"):f._.doOnce(function(){return console.warn("AG Grid: Set Filter has a Key Creator, but provided values are primitives. Did you mean to provide complex objects or enable convertValuesToStrings?")},"setFilterComplexObjectsProvidedPrimitive"))}return t},o.prototype.setValuesType=function(t){this.valuesType=t},o.prototype.getValuesType=function(){return this.valuesType},o.prototype.isKeyAvailable=function(t){return this.availableKeys.has(t)},o.prototype.showAvailableOnly=function(){return this.valuesType===ir.TAKEN_FROM_GRID_VALUES},o.prototype.updateAvailableKeys=function(t,e){var r=this.showAvailableOnly()?this.sortKeys(this.getValuesFromRows(!0)):t;this.availableKeys=new Set(r),this.localEventService.dispatchEvent({type:o.EVENT_AVAILABLE_VALUES_CHANGED}),this.updateDisplayedValues(e,t)},o.prototype.sortKeys=function(t){var r,e=t??new Map;return this.suppressSorting?Array.from(e.keys()):(r=this.compareByValue?Array.from(e.entries()).sort(this.entryComparator).map(function(n){return ln(n,1)[0]}):Array.from(e.keys()).sort(this.keyComparator),this.filterParams.excelMode&&e.has(null)&&(r=r.filter(function(n){return null!=n})).push(null),r)},o.prototype.getValuesFromRows=function(t){var e=this;return void 0===t&&(t=!1),this.clientSideValuesExtractor?this.clientSideValuesExtractor.extractUniqueValues(function(n){return!t||e.doesRowPassOtherFilters(n)},t&&!this.caseSensitive?this.allValues:void 0):(console.error("AG Grid: Set Filter cannot initialise because you are using a row model that does not contain all rows in the browser. Either use a different filter type, or configure Set Filter such that you provide it with values"),null)},o.prototype.setMiniFilter=function(t){return t=f._.makeNull(t),this.miniFilterText!==t&&(null===t&&this.setAddCurrentSelectionToFilter(!1),this.miniFilterText=t,this.updateDisplayedValues("miniFilter"),!0)},o.prototype.getMiniFilter=function(){return this.miniFilterText},o.prototype.updateDisplayedValues=function(t,e){var r=this;if("expansion"!==t)if(null!=this.miniFilterText){var n=this.caseFormat(this.formatter(this.miniFilterText)||""),i=function(s){return null!=s&&r.caseFormat(s).indexOf(n)>=0},a=!!this.filterParams.excelMode&&i(this.translate("blanks"));this.displayValueModel.updateDisplayedValuesToMatchMiniFilter(function(s){return r.getValue(s)},e,this.availableKeys,i,a,t)}else this.displayValueModel.updateDisplayedValuesToAllAvailable(function(s){return r.getValue(s)},e,this.availableKeys,t);else this.displayValueModel.refresh()},o.prototype.getDisplayedValueCount=function(){return this.displayValueModel.getDisplayedValueCount()},o.prototype.getDisplayedItem=function(t){return this.displayValueModel.getDisplayedItem(t)},o.prototype.getSelectAllItem=function(){return this.displayValueModel.getSelectAllItem()},o.prototype.getAddSelectionToFilterItem=function(){return this.displayValueModel.getAddSelectionToFilterItem()},o.prototype.hasSelections=function(){return this.filterParams.defaultToNothingSelected?this.selectedKeys.size>0:this.allValues.size!==this.selectedKeys.size},o.prototype.getKeys=function(){return Array.from(this.allValues.keys())},o.prototype.getValues=function(){return Array.from(this.allValues.values())},o.prototype.getValue=function(t){return this.allValues.get(t)},o.prototype.setAddCurrentSelectionToFilter=function(t){this.addCurrentSelectionToFilter=t},o.prototype.isInWindowsExcelMode=function(){return"windows"===this.filterParams.excelMode},o.prototype.isAddCurrentSelectionToFilterChecked=function(){return this.isInWindowsExcelMode()&&this.addCurrentSelectionToFilter},o.prototype.showAddCurrentSelectionToFilter=function(){return this.isInWindowsExcelMode()&&f._.exists(this.miniFilterText)&&this.miniFilterText.length>0},o.prototype.selectAllMatchingMiniFilter=function(t){var e=this;void 0===t&&(t=!1),null==this.miniFilterText?this.selectedKeys=new Set(this.allValues.keys()):(t&&this.selectedKeys.clear(),this.displayValueModel.forEachDisplayedKey(function(r){return e.selectedKeys.add(r)}))},o.prototype.deselectAllMatchingMiniFilter=function(){var t=this;null==this.miniFilterText?this.selectedKeys.clear():this.displayValueModel.forEachDisplayedKey(function(e){return t.selectedKeys.delete(e)})},o.prototype.selectKey=function(t){this.selectedKeys.add(t)},o.prototype.deselectKey=function(t){this.filterParams.excelMode&&this.isEverythingVisibleSelected()&&this.resetSelectionState(this.displayValueModel.getDisplayedKeys()),this.selectedKeys.delete(t)},o.prototype.isKeySelected=function(t){return this.selectedKeys.has(t)},o.prototype.isEverythingVisibleSelected=function(){var t=this;return!this.displayValueModel.someDisplayedKey(function(e){return!t.isKeySelected(e)})},o.prototype.isNothingVisibleSelected=function(){var t=this;return!this.displayValueModel.someDisplayedKey(function(e){return t.isKeySelected(e)})},o.prototype.getModel=function(){if(!this.hasSelections())return null;var t=this.isAddCurrentSelectionToFilterChecked()?this.filteringKeys.allFilteringKeys():null;if(t&&t.size>0){if(this.selectedKeys){var e=new Set(uy(uy([],ln(Array.from(t))),ln(Array.from(this.selectedKeys).filter(function(r){return!t.has(r)}))));return Array.from(e)}return Array.from(t)}return Array.from(this.selectedKeys)},o.prototype.setModel=function(t){var e=this;return this.allValuesPromise.then(function(r){if(null==t)e.resetSelectionState(r??[]);else{e.selectedKeys.clear();var n=new Map;e.allValues.forEach(function(i,a){n.set(e.caseFormat(a),a)}),t.forEach(function(i){var a=e.caseFormat(f._.makeNull(i)),s=n.get(a);void 0!==s&&e.selectKey(s)})}})},o.prototype.uniqueValues=function(t){var e=this,r=new Map,n=new Set;return(t??[]).forEach(function(i){var a=f._.makeNull(i),s=e.convertAndGetKey(a),l=e.caseFormat(s);n.has(l)||(n.add(l),r.set(s,a))}),r},o.prototype.convertAndGetKey=function(t){return this.convertValuesToStrings?t:this.createKey(t)},o.prototype.resetSelectionState=function(t){this.filterParams.defaultToNothingSelected?this.selectedKeys.clear():this.selectedKeys=new Set(t)},o.prototype.hasGroups=function(){return this.displayValueModel.hasGroups()},o.prototype.createTreeDataOrGroupingComparator=function(){return function(t,e){var n=ln(t,2)[1],a=ln(e,2)[1];if(null==n)return null==a?0:-1;if(null==a)return 1;for(var s=0;s<n.length;s++){if(s>=a.length)return 1;var l=f._.defaultComparator(n[s],a[s]);if(0!==l)return l}return 0}},o.prototype.setAppliedModelKeys=function(t){this.filteringKeys.setFilteringKeys(t)},o.prototype.addToAppliedModelKeys=function(t){this.filteringKeys.addFilteringKey(t)},o.prototype.getAppliedModelKeys=function(){return this.filteringKeys.allFilteringKeys()},o.prototype.getCaseFormattedAppliedModelKeys=function(){return this.filteringKeys.allFilteringKeysCaseFormatted()},o.prototype.hasAppliedModelKey=function(t){return this.filteringKeys.hasCaseFormattedFilteringKey(t)},o.prototype.hasAnyAppliedModelKey=function(){return!this.filteringKeys.noAppliedFilteringKeys()},o.EVENT_AVAILABLE_VALUES_CHANGED="availableValuesChanged",o}(),eI=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),wi=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Gd=function(o){function t(e){var r,n=o.call(this,e.isGroup?t.GROUP_TEMPLATE:t.TEMPLATE)||this;return n.focusWrapper=e.focusWrapper,n.value=e.value,n.params=e.params,n.translate=e.translate,n.valueFormatter=e.valueFormatter,n.item=e.item,n.isSelected=e.isSelected,n.isTree=e.isTree,n.depth=null!==(r=e.depth)&&void 0!==r?r:0,n.isGroup=e.isGroup,n.groupsExist=e.groupsExist,n.isExpanded=e.isExpanded,n.hasIndeterminateExpandState=e.hasIndeterminateExpandState,n}return eI(t,o),t.prototype.init=function(){var e=this;this.addDestroyFunc(function(){var r;return null===(r=e.destroyCellRendererComponent)||void 0===r?void 0:r.call(e)}),this.render(),this.eCheckbox.setLabelEllipsis(!0),this.eCheckbox.setValue(this.isSelected,!0),this.eCheckbox.setDisabled(!!this.params.readOnly),this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.refreshVariableAriaLabels(),this.isTree&&(this.depth>0&&this.addCssClass("ag-set-filter-indent-"+this.depth),this.isGroup?this.setupExpansion():this.groupsExist&&this.addCssClass("ag-set-filter-add-group-indent"),f._.setAriaLevel(this.focusWrapper,this.depth+1)),!this.params.readOnly&&this.eCheckbox.onValueChange(function(r){return e.onCheckboxChanged(!!r)})},t.prototype.setupExpansion=function(){this.eGroupClosedIcon.appendChild(f._.createIcon("setFilterGroupClosed",this.gridOptionsService,null)),this.eGroupOpenedIcon.appendChild(f._.createIcon("setFilterGroupOpen",this.gridOptionsService,null)),this.addManagedListener(this.eGroupClosedIcon,"click",this.onExpandOrContractClicked.bind(this)),this.addManagedListener(this.eGroupOpenedIcon,"click",this.onExpandOrContractClicked.bind(this)),this.hasIndeterminateExpandState&&(this.eGroupIndeterminateIcon.appendChild(f._.createIcon("setFilterGroupIndeterminate",this.gridOptionsService,null)),this.addManagedListener(this.eGroupIndeterminateIcon,"click",this.onExpandOrContractClicked.bind(this))),this.setExpandedIcons(),this.refreshAriaExpanded()},t.prototype.onExpandOrContractClicked=function(){this.setExpanded(!this.isExpanded)},t.prototype.setExpanded=function(e,r){this.isGroup&&e!==this.isExpanded&&(this.isExpanded=e,r||this.dispatchEvent({type:t.EVENT_EXPANDED_CHANGED,isExpanded:!!e,item:this.item}),this.setExpandedIcons(),this.refreshAriaExpanded())},t.prototype.refreshAriaExpanded=function(){f._.setAriaExpanded(this.focusWrapper,!!this.isExpanded)},t.prototype.setExpandedIcons=function(){f._.setDisplayed(this.eGroupClosedIcon,this.hasIndeterminateExpandState?!1===this.isExpanded:!this.isExpanded),f._.setDisplayed(this.eGroupOpenedIcon,!0===this.isExpanded),this.hasIndeterminateExpandState&&f._.setDisplayed(this.eGroupIndeterminateIcon,void 0===this.isExpanded)},t.prototype.onCheckboxChanged=function(e){this.isSelected=e,this.dispatchEvent({type:t.EVENT_SELECTION_CHANGED,isSelected:e,item:this.item}),this.refreshVariableAriaLabels()},t.prototype.toggleSelected=function(){this.params.readOnly||this.setSelected(!this.isSelected)},t.prototype.setSelected=function(e,r){this.isSelected=e,this.eCheckbox.setValue(this.isSelected,r)},t.prototype.refreshVariableAriaLabels=function(){if(this.isTree){var e=this.localeService.getLocaleTextFunc(),r=this.eCheckbox.getValue(),n=void 0===r?e("ariaIndeterminate","indeterminate"):r?e("ariaVisible","visible"):e("ariaHidden","hidden"),i=e("ariaToggleVisibility","Press SPACE to toggle visibility");f._.setAriaLabelledBy(this.eCheckbox.getInputElement(),void 0),this.eCheckbox.setInputAriaLabel(i+" ("+n+")")}},t.prototype.setupFixedAriaLabels=function(e){if(this.isTree){var n=this.localeService.getLocaleTextFunc()("ariaFilterValue","Filter Value");f._.setAriaLabel(this.focusWrapper,e+" "+n),f._.setAriaDescribedBy(this.focusWrapper,this.eCheckbox.getInputElement().id)}},t.prototype.refresh=function(e,r,n){var i,a;if(this.item=e,r!==this.isSelected&&this.setSelected(r,!0),this.setExpanded(n,!0),this.valueFunction){var s=this.valueFunction();this.setTooltipAndCellRendererParams(s,s),this.cellRendererComponent||this.renderCellWithoutCellRenderer()}if(this.cellRendererComponent&&!(null===(a=(i=this.cellRendererComponent).refresh)||void 0===a?void 0:a.call(i,this.cellRendererParams))){var u=this.cellRendererComponent;this.renderCell(),this.destroyBean(u)}},t.prototype.render=function(){var e=this.params.column,r=this.value,n=null;"function"==typeof r?(this.valueFunction=r,r=n=this.valueFunction()):n=this.isTree?f._.toStringOrNull(r):this.getFormattedValue(e,r),this.setTooltipAndCellRendererParams(r,n),this.renderCell()},t.prototype.setTooltipAndCellRendererParams=function(e,r){if(this.params.showTooltips){var n=r??f._.toStringOrNull(e);this.setTooltip(n)}this.cellRendererParams={value:e,valueFormatted:r,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,colDef:this.params.colDef,column:this.params.column}},t.prototype.getTooltipParams=function(){var e=o.prototype.getTooltipParams.call(this);return e.location="setFilterValue",e.colDef=this.getComponentHolder(),this.isTree&&(e.level=this.depth),e},t.prototype.getFormattedValue=function(e,r){return this.valueFormatterService.formatValue(e,null,r,this.valueFormatter,!1)},t.prototype.renderCell=function(){var e=this,r=this.userComponentFactory.getSetFilterCellRendererDetails(this.params,this.cellRendererParams),n=r?r.newAgStackInstance():void 0;null!=n?n.then(function(i){i&&(e.cellRendererComponent=i,e.eCheckbox.setLabel(i.getGui()),e.destroyCellRendererComponent=function(){return e.destroyBean(i)})}):this.renderCellWithoutCellRenderer()},t.prototype.renderCellWithoutCellRenderer=function(){var e,r=null!==(e=null==this.cellRendererParams.valueFormatted?this.cellRendererParams.value:this.cellRendererParams.valueFormatted)&&void 0!==e?e:this.translate("blanks");"string"!=typeof r&&(f._.doOnce(function(){return console.warn("AG Grid: Set Filter Value Formatter must return string values. Please ensure the Set Filter Value Formatter returns string values for complex objects, or set convertValuesToStrings=true in the filterParams. See https://www.ag-grid.com/javascript-data-grid/filter-set-filter-list/#filter-value-types")},"setFilterComplexObjectsValueFormatter"),r=""),this.eCheckbox.setLabel(r),this.setupFixedAriaLabels(r)},t.prototype.getComponentHolder=function(){return this.params.column.getColDef()},t.EVENT_SELECTION_CHANGED="selectionChanged",t.EVENT_EXPANDED_CHANGED="expandedChanged",t.GROUP_TEMPLATE='\n        <div class="ag-set-filter-item" aria-hidden="true">\n            <span class="ag-set-filter-group-icons">\n                <span class="ag-set-filter-group-closed-icon" ref="eGroupClosedIcon"></span>\n                <span class="ag-set-filter-group-opened-icon" ref="eGroupOpenedIcon"></span>\n                <span class="ag-set-filter-group-indeterminate-icon" ref="eGroupIndeterminateIcon"></span>\n            </span>\n            <ag-checkbox ref="eCheckbox" class="ag-set-filter-item-checkbox"></ag-checkbox>\n        </div>',t.TEMPLATE='\n        <div class="ag-set-filter-item">\n            <ag-checkbox ref="eCheckbox" class="ag-set-filter-item-checkbox"></ag-checkbox>\n        </div>',wi([(0,f.Qnc)("valueFormatterService")],t.prototype,"valueFormatterService",void 0),wi([(0,f.Qnc)("userComponentFactory")],t.prototype,"userComponentFactory",void 0),wi([(0,f.IzG)("eCheckbox")],t.prototype,"eCheckbox",void 0),wi([(0,f.IzG)("eGroupOpenedIcon")],t.prototype,"eGroupOpenedIcon",void 0),wi([(0,f.IzG)("eGroupClosedIcon")],t.prototype,"eGroupClosedIcon",void 0),wi([(0,f.IzG)("eGroupIndeterminateIcon")],t.prototype,"eGroupIndeterminateIcon",void 0),wi([f.QhY],t.prototype,"init",null),t}(f.YlN),tI={loadingOoo:"Loading...",blanks:"(Blanks)",searchOoo:"Search...",selectAll:"(Select All)",selectAllSearchResults:"(Select All Search Results)",addCurrentSelectionToFilter:"Add current selection to filter",noMatches:"No matches."},dy=function(){function o(){}return o.prototype.getModelAsString=function(t,e){var r=(t||e.getModel()||{}).values,n=e.getValueModel();if(null==r||null==n)return"";var i=r.filter(function(l){return n.isKeyAvailable(l)}),a=i.length;return"("+a+") "+i.slice(0,10).map(function(l){return e.getFormattedValue(l)}).join(",")+(a>10?",...":"")},o}(),rI=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),bi=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},fy=function(o){function t(){var e=o.call(this,"setFilter")||this;return e.valueModel=null,e.setFilterParams=null,e.virtualList=null,e.caseSensitive=!1,e.convertValuesToStrings=!1,e.treeDataTreeList=!1,e.groupingTreeList=!1,e.hardRefreshVirtualList=!1,e.noValueFormatterSupplied=!1,e.filterModelFormatter=new dy,e}return rI(t,o),t.prototype.postConstruct=function(){o.prototype.postConstruct.call(this)},t.prototype.updateUiVisibility=function(){},t.prototype.createBodyTemplate=function(){return'\n            <div class="ag-set-filter">\n                <div ref="eFilterLoading" class="ag-filter-loading ag-hidden">'+this.translateForSetFilter("loadingOoo")+'</div>\n                <ag-input-text-field class="ag-mini-filter" ref="eMiniFilter"></ag-input-text-field>\n                <div ref="eFilterNoMatches" class="ag-filter-no-matches ag-hidden">'+this.translateForSetFilter("noMatches")+'</div>\n                <div ref="eSetFilterList" class="ag-set-filter-list" role="presentation"></div>\n            </div>'},t.prototype.handleKeyDown=function(e){if(o.prototype.handleKeyDown.call(this,e),!e.defaultPrevented)switch(e.key){case f.Axe.SPACE:this.handleKeySpace(e);break;case f.Axe.ENTER:this.handleKeyEnter(e);break;case f.Axe.LEFT:this.handleKeyLeft(e);break;case f.Axe.RIGHT:this.handleKeyRight(e)}},t.prototype.handleKeySpace=function(e){var r;null===(r=this.getComponentForKeyEvent(e))||void 0===r||r.toggleSelected()},t.prototype.handleKeyEnter=function(e){if(this.setFilterParams){var r=this.setFilterParams||{};!r.excelMode||r.readOnly||(e.preventDefault(),this.onBtApply(!1,!1,e),"mac"===this.setFilterParams.excelMode&&this.eMiniFilter.getInputElement().select())}},t.prototype.handleKeyLeft=function(e){var r;null===(r=this.getComponentForKeyEvent(e))||void 0===r||r.setExpanded(!1)},t.prototype.handleKeyRight=function(e){var r;null===(r=this.getComponentForKeyEvent(e))||void 0===r||r.setExpanded(!0)},t.prototype.getComponentForKeyEvent=function(e){var r,n=this.gridOptionsService.getDocument();if(this.eSetFilterList.contains(n.activeElement)&&this.virtualList){var i=this.virtualList.getLastFocusedRow();if(null!=i){var a=this.virtualList.getComponentAt(i);if(null!=a&&(e.preventDefault(),!(null!==(r=this.setFilterParams)&&void 0!==r?r:{}).readOnly))return a}}},t.prototype.getCssIdentifier=function(){return"set-filter"},t.prototype.setModel=function(e){var r;return null==e&&null==(null===(r=this.valueModel)||void 0===r?void 0:r.getModel())?(this.setMiniFilter(null),f.VVN.resolve()):o.prototype.setModel.call(this,e)},t.prototype.setModelAndRefresh=function(e){var r=this;return this.valueModel?this.valueModel.setModel(e).then(function(){return r.refresh()}):f.VVN.resolve()},t.prototype.resetUiToDefaults=function(){return this.setMiniFilter(null),this.setModelAndRefresh(null)},t.prototype.setModelIntoUi=function(e){return this.setMiniFilter(null),this.setModelAndRefresh(null==e?null:e.values)},t.prototype.getModelFromUi=function(){if(!this.valueModel)throw new Error("Value model has not been created.");var e=this.valueModel.getModel();return e?{values:e,filterType:this.getFilterType()}:null},t.prototype.getFilterType=function(){return"set"},t.prototype.getValueModel=function(){return this.valueModel},t.prototype.areModelsEqual=function(e,r){return null==e&&null==r||null!=e&&null!=r&&f._.areEqual(e.values,r.values)},t.prototype.setParams=function(e){var n,r=this;this.applyExcelModeOptions(e),o.prototype.setParams.call(this,e),this.setFilterParams=e,this.convertValuesToStrings=!!e.convertValuesToStrings,this.caseSensitive=!!e.caseSensitive;var i=null!==(n=e.keyCreator)&&void 0!==n?n:e.colDef.keyCreator;this.setValueFormatter(e.valueFormatter,i,this.convertValuesToStrings,!!e.treeList,!!e.colDef.refData);var a=e.column.getId().startsWith(f.Yx9);this.treeDataTreeList=this.gridOptionsService.is("treeData")&&!!e.treeList&&a,this.getDataPath=this.gridOptionsService.get("getDataPath"),this.groupingTreeList=!!this.columnModel.getRowGroupColumns().length&&!!e.treeList&&a,this.createKey=this.generateCreateKey(i,this.convertValuesToStrings,this.treeDataTreeList||this.groupingTreeList),this.valueModel=new cy({filterParams:e,setIsLoading:function(s){return r.setIsLoading(s)},valueFormatterService:this.valueFormatterService,translate:function(s){return r.translateForSetFilter(s)},caseFormat:function(s){return r.caseFormat(s)},createKey:this.createKey,valueFormatter:this.valueFormatter,usingComplexObjects:!!i,gridOptionsService:this.gridOptionsService,columnModel:this.columnModel,valueService:this.valueService,treeDataTreeList:this.treeDataTreeList,groupingTreeList:this.groupingTreeList}),this.initialiseFilterBodyUi(),this.addEventListenersForDataChanges()},t.prototype.onAddCurrentSelectionToFilterChange=function(e){if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.setAddCurrentSelectionToFilter(e)},t.prototype.setValueFormatter=function(e,r,n,i,a){var s=e;if(!s){if(r&&!n&&!i)throw new Error("AG Grid: Must supply a Value Formatter in Set Filter params when using a Key Creator unless convertValuesToStrings is enabled");this.noValueFormatterSupplied=!0,a||(s=function(l){return f._.toStringOrNull(l.value)})}this.valueFormatter=s},t.prototype.generateCreateKey=function(e,r,n){var i=this;if(n&&!e)throw new Error("AG Grid: Must supply a Key Creator in Set Filter params when `treeList = true` on a group column, and Tree Data or Row Grouping is enabled.");return e?function(a,s){void 0===s&&(s=null);var l=i.getKeyCreatorParams(a,s);return f._.makeNull(e(l))}:r?function(a){return Array.isArray(a)?a:f._.makeNull(f._.toStringOrNull(a))}:function(a){return f._.makeNull(f._.toStringOrNull(a))}},t.prototype.getFormattedValue=function(e){var r,n=this.valueModel.getValue(e);return this.noValueFormatterSupplied&&(this.treeDataTreeList||this.groupingTreeList)&&Array.isArray(n)&&(n=f._.last(n)),null!==(r=this.valueFormatterService.formatValue(this.setFilterParams.column,null,n,this.valueFormatter,!1)??f._.toStringOrNull(n))&&void 0!==r?r:this.translateForSetFilter("blanks")},t.prototype.applyExcelModeOptions=function(e){"windows"===e.excelMode?(e.buttons||(e.buttons=["apply","cancel"]),null==e.closeOnApply&&(e.closeOnApply=!0)):"mac"===e.excelMode&&(e.buttons||(e.buttons=["reset"]),null==e.applyMiniFilterWhileTyping&&(e.applyMiniFilterWhileTyping=!0),null==e.debounceMs&&(e.debounceMs=500)),e.excelMode&&e.defaultToNothingSelected&&(e.defaultToNothingSelected=!1,f._.doOnce(function(){return console.warn('AG Grid: The Set Filter Parameter "defaultToNothingSelected" value was ignored because it does not work when "excelMode" is used.')},"setFilterExcelModeDefaultToNothingSelect"))},t.prototype.addEventListenersForDataChanges=function(){var e=this;this.isValuesTakenFromGrid()&&this.addManagedListener(this.eventService,f.YFc.EVENT_CELL_VALUE_CHANGED,function(r){e.setFilterParams&&r.column===e.setFilterParams.column&&e.syncAfterDataChange()})},t.prototype.syncAfterDataChange=function(){var e=this;if(!this.valueModel)throw new Error("Value model has not been created.");return this.valueModel.refreshValues().then(function(){e.refresh(),e.onBtApply(!1,!0)})},t.prototype.setIsLoading=function(e){f._.setDisplayed(this.eFilterLoading,e),e||(this.hardRefreshVirtualList=!0)},t.prototype.initialiseFilterBodyUi=function(){this.initVirtualList(),this.initMiniFilter()},t.prototype.initVirtualList=function(){var e=this;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var n=this.localeService.getLocaleTextFunc()("ariaFilterList","Filter List"),i=!!this.setFilterParams.treeList,a=this.virtualList=this.createBean(new f.aSq({cssIdentifier:"filter",ariaRole:i?"tree":"listbox",listName:n})),s=this.getRefElement("eSetFilterList");i&&s.classList.add("ag-set-filter-tree-list"),s&&s.appendChild(a.getGui());var d,l=this.setFilterParams.cellHeight;null!=l&&a.setRowHeight(l),a.setComponentCreator(function(h,p){return e.createSetListItem(h,i,p)}),a.setComponentUpdater(function(h,p){return e.updateSetListItem(h,p)}),d=this.setFilterParams.suppressSelectAll?new nI(this.valueModel):new iI(this.valueModel,function(){return e.isSelectAllSelected()}),i&&(d=new oI(d)),a.setModel(d)},t.prototype.getSelectAllLabel=function(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var e=null!=this.valueModel.getMiniFilter()&&this.setFilterParams.excelMode?"selectAllSearchResults":"selectAll";return this.translateForSetFilter(e)},t.prototype.getAddSelectionToFilterLabel=function(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");return this.translateForSetFilter("addCurrentSelectionToFilter")},t.prototype.createSetListItem=function(e,r,n){var i=this;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var a=this.valueModel.hasGroups(),s=this.isSelectedExpanded(e),l=s.isSelected,u=s.isExpanded,c=this.newSetListItemAttributes(e,r),g=c.selectedListener,y=c.expandedListener,m=this.createBean(new Gd({focusWrapper:n,value:c.value,params:this.setFilterParams,translate:function(C){return i.translateForSetFilter(C)},valueFormatter:this.valueFormatter,item:e,isSelected:l,isTree:r,depth:c.depth,groupsExist:a,isGroup:c.isGroup,isExpanded:u,hasIndeterminateExpandState:c.hasIndeterminateExpandState}));return m.addEventListener(Gd.EVENT_SELECTION_CHANGED,g),y&&m.addEventListener(Gd.EVENT_EXPANDED_CHANGED,y),m},t.prototype.newSetTreeItemAttributes=function(e,r){var i,a,s,l,u,c,n=this;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var d=this.valueModel.hasGroups();return e.key===Pt.SELECT_ALL?{value:function(){return n.getSelectAllLabel()},isGroup:d,depth:e.depth,hasIndeterminateExpandState:!0,selectedListener:function(h){return n.onSelectAll(h.isSelected)},expandedListener:function(h){return n.onExpandAll(h.item,h.isExpanded)}}:e.key===Pt.ADD_SELECTION_TO_FILTER?{value:function(){return n.getAddSelectionToFilterLabel()},depth:e.depth,isGroup:!1,hasIndeterminateExpandState:!1,selectedListener:function(h){n.onAddCurrentSelectionToFilterChange(h.isSelected)}}:e.children?{value:null!==(s=null===(a=(i=this.setFilterParams).treeListFormatter)||void 0===a?void 0:a.call(i,e.treeKey,e.depth,e.parentTreeKeys))&&void 0!==s?s:e.treeKey,depth:e.depth,isGroup:!0,selectedListener:function(h){return n.onGroupItemSelected(h.item,h.isSelected)},expandedListener:function(h){return n.onExpandedChanged(h.item,h.isExpanded)}}:{value:null!==(c=null===(u=(l=this.setFilterParams).treeListFormatter)||void 0===u?void 0:u.call(l,e.treeKey,e.depth,e.parentTreeKeys))&&void 0!==c?c:e.treeKey,depth:e.depth,selectedListener:function(h){return n.onItemSelected(h.item.key,h.isSelected)}}},t.prototype.newSetListItemAttributes=function(e,r){var n=this;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");return this.isSetFilterModelTreeItem(e)?this.newSetTreeItemAttributes(e,r):e===Pt.SELECT_ALL?{value:function(){return n.getSelectAllLabel()},selectedListener:function(i){return n.onSelectAll(i.isSelected)}}:e===Pt.ADD_SELECTION_TO_FILTER?{value:function(){return n.getAddSelectionToFilterLabel()},selectedListener:function(i){n.onAddCurrentSelectionToFilterChange(i.isSelected)}}:{value:this.valueModel.getValue(e),selectedListener:function(i){return n.onItemSelected(i.item,i.isSelected)}}},t.prototype.updateSetListItem=function(e,r){var n=this.isSelectedExpanded(e);r.refresh(e,n.isSelected,n.isExpanded)},t.prototype.isSelectedExpanded=function(e){var r,n;return this.isSetFilterModelTreeItem(e)?(n=e.expanded,r=e.key===Pt.SELECT_ALL?this.isSelectAllSelected():e.key===Pt.ADD_SELECTION_TO_FILTER?this.valueModel.isAddCurrentSelectionToFilterChecked():e.children?this.areAllChildrenSelected(e):this.valueModel.isKeySelected(e.key)):r=e===Pt.SELECT_ALL?this.isSelectAllSelected():e===Pt.ADD_SELECTION_TO_FILTER?this.valueModel.isAddCurrentSelectionToFilterChecked():this.valueModel.isKeySelected(e),{isSelected:r,isExpanded:n}},t.prototype.isSetFilterModelTreeItem=function(e){return void 0!==e?.treeKey},t.prototype.initMiniFilter=function(){var e=this;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var n=this.eMiniFilter,a=this.localeService.getLocaleTextFunc();n.setDisplayed(!this.setFilterParams.suppressMiniFilter),n.setValue(this.valueModel.getMiniFilter()),n.onValueChange(function(){return e.onMiniFilterInput()}),n.setInputAriaLabel(a("ariaSearchFilterValues","Search filter values")),this.addManagedListener(n.getInputElement(),"keydown",function(s){return e.onMiniFilterKeyDown(s)})},t.prototype.afterGuiAttached=function(e){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");o.prototype.afterGuiAttached.call(this,e),this.resetExpansion(),this.refreshVirtualList();var r=this.eMiniFilter;r.setInputPlaceholder(this.translateForSetFilter("searchOoo")),(!e||!e.suppressFocus)&&r.getFocusableElement().focus()},t.prototype.afterGuiDetached=function(){var e,r;o.prototype.afterGuiDetached.call(this),null!==(e=this.setFilterParams)&&void 0!==e&&e.excelMode&&this.resetMiniFilter();var n=this.getModel();(null!==(r=this.setFilterParams)&&void 0!==r&&r.excelMode||!this.areModelsEqual(n,this.getModelFromUi()))&&(this.resetUiToActiveModel(n),this.showOrHideResults())},t.prototype.applyModel=function(e){var r=this;if(void 0===e&&(e="api"),!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");this.setFilterParams.excelMode&&"rowDataUpdated"!==e&&this.valueModel.isEverythingVisibleSelected()&&this.valueModel.selectAllMatchingMiniFilter();var n=this.valueModel.showAddCurrentSelectionToFilter()&&this.valueModel.isAddCurrentSelectionToFilterChecked();if(n&&!this.getModel())return!1;var i=o.prototype.applyModel.call(this,e),a=this.getModel();return a?(n||this.valueModel.setAppliedModelKeys(new Set),a.values.forEach(function(s){r.valueModel.addToAppliedModelKeys(s)})):n||this.valueModel.setAppliedModelKeys(null),i},t.prototype.isModelValid=function(e){return!this.setFilterParams||!this.setFilterParams.excelMode||null==e||e.values.length>0},t.prototype.doesFilterPass=function(e){var r=this;if(!this.setFilterParams||!this.valueModel||!this.valueModel.getCaseFormattedAppliedModelKeys())return!0;if(!this.valueModel.hasAnyAppliedModelKey())return!1;var n=e.node,i=e.data;if(this.treeDataTreeList)return this.doesFilterPassForTreeData(n,i);if(this.groupingTreeList)return this.doesFilterPassForGrouping(n,i);var a=this.getValueFromNode(n,i);return this.convertValuesToStrings?this.doesFilterPassForConvertValuesToString(n,a):null!=a&&Array.isArray(a)?0===a.length?this.valueModel.hasAppliedModelKey(null):a.some(function(s){return r.isInAppliedModel(r.createKey(s,n))}):this.isInAppliedModel(this.createKey(a,n))},t.prototype.doesFilterPassForConvertValuesToString=function(e,r){var n=this,i=this.createKey(r,e);return null!=i&&Array.isArray(i)?0===i.length?this.valueModel.hasAppliedModelKey(null):i.some(function(a){return n.isInAppliedModel(a)}):this.isInAppliedModel(i)},t.prototype.doesFilterPassForTreeData=function(e,r){var n;return(null===(n=e.childrenAfterGroup)||void 0===n||!n.length)&&this.isInAppliedModel(this.createKey(this.checkMakeNullDataPath(this.getDataPath(r))))},t.prototype.doesFilterPassForGrouping=function(e,r){var n=this,i=this.columnModel.getRowGroupColumns().map(function(a){return n.valueService.getKeyForNode(a,e)});return i.push(this.getValueFromNode(e,r)),this.isInAppliedModel(this.createKey(this.checkMakeNullDataPath(i)))},t.prototype.checkMakeNullDataPath=function(e){return e&&(e=e.map(function(r){return f._.toStringOrNull(f._.makeNull(r))})),e?.some(function(r){return null==r})?null:e},t.prototype.isInAppliedModel=function(e){return this.valueModel.hasAppliedModelKey(e)},t.prototype.getValueFromNode=function(e,r){var n=this.setFilterParams;return(0,n.valueGetter)({api:n.api,colDef:n.colDef,column:n.column,columnApi:n.columnApi,context:n.context,data:r,getValue:function(d){return r[d]},node:e})},t.prototype.getKeyCreatorParams=function(e,r){return void 0===r&&(r=null),{value:e,colDef:this.setFilterParams.colDef,column:this.setFilterParams.column,node:r,data:r?.data,api:this.setFilterParams.api,columnApi:this.setFilterParams.columnApi,context:this.setFilterParams.context}},t.prototype.onNewRowsLoaded=function(){this.isValuesTakenFromGrid()&&this.syncAfterDataChange()},t.prototype.isValuesTakenFromGrid=function(){return!!this.valueModel&&this.valueModel.getValuesType()===ir.TAKEN_FROM_GRID_VALUES},t.prototype.setFilterValues=function(e){var r=this;if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.overrideValues(e).then(function(){r.refresh(),r.onUiChanged()})},t.prototype.resetFilterValues=function(){if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.setValuesType(ir.TAKEN_FROM_GRID_VALUES),this.syncAfterDataChange()},t.prototype.refreshFilterValues=function(){var e=this;if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.isInitialised()&&this.valueModel.refreshValues().then(function(){e.refresh(),e.onUiChanged()})},t.prototype.onAnyFilterChanged=function(){var e=this;setTimeout(function(){if(e.isAlive()){if(!e.valueModel)throw new Error("Value model has not been created.");e.valueModel.refreshAfterAnyFilterChanged().then(function(r){r&&(e.refresh(),e.showOrHideResults())})}},0)},t.prototype.onMiniFilterInput=function(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");if(this.valueModel.setMiniFilter(this.eMiniFilter.getValue())){var e=this.setFilterParams||{};!e.readOnly&&e.applyMiniFilterWhileTyping?this.filterOnAllVisibleValues(!1):this.updateUiAfterMiniFilterChange()}},t.prototype.updateUiAfterMiniFilterChange=function(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var e=this.setFilterParams||{};null==e.excelMode||e.readOnly?this.refresh():null==this.valueModel.getMiniFilter()?this.resetUiToActiveModel(this.getModel()):(this.valueModel.selectAllMatchingMiniFilter(!0),this.refresh(),this.onUiChanged()),this.showOrHideResults()},t.prototype.showOrHideResults=function(){if(!this.valueModel)throw new Error("Value model has not been created.");var e=null!=this.valueModel.getMiniFilter()&&this.valueModel.getDisplayedValueCount()<1;f._.setDisplayed(this.eNoMatches,e),f._.setDisplayed(this.eSetFilterList,!e)},t.prototype.resetMiniFilter=function(){var e;this.eMiniFilter.setValue(null,!0),null===(e=this.valueModel)||void 0===e||e.setMiniFilter(null)},t.prototype.resetUiToActiveModel=function(e,r){var n=this;this.setModelAndRefresh(null==e?null:e.values).then(function(){n.onUiChanged(!1,"prevent"),r?.()})},t.prototype.handleCancelEnd=function(e){this.setMiniFilter(null),o.prototype.handleCancelEnd.call(this,e)},t.prototype.onMiniFilterKeyDown=function(e){var r=this.setFilterParams||{};e.key===f.Axe.ENTER&&!r.excelMode&&!r.readOnly&&this.filterOnAllVisibleValues()},t.prototype.filterOnAllVisibleValues=function(e){void 0===e&&(e=!0);var r=(this.setFilterParams||{}).readOnly;if(!this.valueModel)throw new Error("Value model has not been created.");if(r)throw new Error("Unable to filter in readOnly mode.");this.valueModel.selectAllMatchingMiniFilter(!0),this.refresh(),this.onUiChanged(!1,e?"immediately":"debounce"),this.showOrHideResults()},t.prototype.focusRowIfAlive=function(e){var r=this;null!=e&&window.setTimeout(function(){if(!r.virtualList)throw new Error("Virtual list has not been created.");r.isAlive()&&r.virtualList.focusRow(e)},0)},t.prototype.onSelectAll=function(e){if(!this.valueModel)throw new Error("Value model has not been created.");if(!this.virtualList)throw new Error("Virtual list has not been created.");e?this.valueModel.selectAllMatchingMiniFilter():this.valueModel.deselectAllMatchingMiniFilter(),this.refreshAfterSelection()},t.prototype.onGroupItemSelected=function(e,r){var n=this,i=function(a){a.children?a.children.forEach(function(s){return i(s)}):n.selectItem(a.key,r)};i(e),this.refreshAfterSelection()},t.prototype.onItemSelected=function(e,r){if(!this.valueModel)throw new Error("Value model has not been created.");if(!this.virtualList)throw new Error("Virtual list has not been created.");this.selectItem(e,r),this.refreshAfterSelection()},t.prototype.selectItem=function(e,r){r?this.valueModel.selectKey(e):this.valueModel.deselectKey(e)},t.prototype.onExpandAll=function(e,r){var n=function(i){i.filterPasses&&i.available&&i.children&&(i.children.forEach(function(a){return n(a)}),i.expanded=r)};n(e),this.refreshAfterExpansion()},t.prototype.onExpandedChanged=function(e,r){e.expanded=r,this.refreshAfterExpansion()},t.prototype.refreshAfterExpansion=function(){var e=this.virtualList.getLastFocusedRow();this.valueModel.updateDisplayedValues("expansion"),this.refresh(),this.focusRowIfAlive(e)},t.prototype.refreshAfterSelection=function(){var e=this.virtualList.getLastFocusedRow();this.refresh(),this.onUiChanged(),this.focusRowIfAlive(e)},t.prototype.setMiniFilter=function(e){this.eMiniFilter.setValue(e),this.onMiniFilterInput()},t.prototype.getMiniFilter=function(){return this.valueModel?this.valueModel.getMiniFilter():null},t.prototype.refresh=function(){if(!this.virtualList)throw new Error("Virtual list has not been created.");this.virtualList.refresh(!this.hardRefreshVirtualList),this.hardRefreshVirtualList&&(this.hardRefreshVirtualList=!1)},t.prototype.getFilterKeys=function(){return this.valueModel?this.valueModel.getKeys():[]},t.prototype.getFilterValues=function(){return this.valueModel?this.valueModel.getValues():[]},t.prototype.getValues=function(){return this.getFilterKeys()},t.prototype.refreshVirtualList=function(){this.setFilterParams&&this.setFilterParams.refreshValuesOnOpen?this.refreshFilterValues():this.refresh()},t.prototype.translateForSetFilter=function(e){return this.localeService.getLocaleTextFunc()(e,tI[e])},t.prototype.isSelectAllSelected=function(){if(!this.setFilterParams||!this.valueModel)return!1;if(this.setFilterParams.defaultToNothingSelected){if(this.valueModel.hasSelections()&&this.valueModel.isEverythingVisibleSelected())return!0;if(this.valueModel.isNothingVisibleSelected())return!1}else{if(this.valueModel.hasSelections()&&this.valueModel.isNothingVisibleSelected())return!1;if(this.valueModel.isEverythingVisibleSelected())return!0}},t.prototype.areAllChildrenSelected=function(e){var r=this,n=function(i){if(i.children){var a=!1,s=!1;return i.children.some(function(u){if(!u.filterPasses||!u.available)return!1;var c=n(u);return void 0===c||(c?a=!0:s=!0,a&&s)})?void 0:a}return r.valueModel.isKeySelected(i.key)};return this.setFilterParams.defaultToNothingSelected?this.valueModel.hasSelections()&&n(e):n(e)},t.prototype.destroy=function(){null!=this.virtualList&&(this.virtualList.destroy(),this.virtualList=null),o.prototype.destroy.call(this)},t.prototype.caseFormat=function(e){return null==e||"string"!=typeof e||this.caseSensitive?e:e.toUpperCase()},t.prototype.resetExpansion=function(){var e,r;if(null!==(e=this.setFilterParams)&&void 0!==e&&e.treeList){var n=null===(r=this.valueModel)||void 0===r?void 0:r.getSelectAllItem();if(this.isSetFilterModelTreeItem(n)){var i=function(a){a.children&&(a.children.forEach(function(s){return i(s)}),a.expanded=!1)};i(n),this.valueModel.updateDisplayedValues("expansion")}}},t.prototype.getModelAsString=function(e){return this.filterModelFormatter.getModelAsString(e,this)},t.prototype.getPositionableElement=function(){return this.eSetFilterList},bi([(0,f.IzG)("eMiniFilter")],t.prototype,"eMiniFilter",void 0),bi([(0,f.IzG)("eFilterLoading")],t.prototype,"eFilterLoading",void 0),bi([(0,f.IzG)("eSetFilterList")],t.prototype,"eSetFilterList",void 0),bi([(0,f.IzG)("eFilterNoMatches")],t.prototype,"eNoMatches",void 0),bi([(0,f.Qnc)("valueFormatterService")],t.prototype,"valueFormatterService",void 0),bi([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),bi([(0,f.Qnc)("valueService")],t.prototype,"valueService",void 0),t}(f.gPE),nI=function(){function o(t){this.model=t}return o.prototype.getRowCount=function(){return this.model.getDisplayedValueCount()},o.prototype.getRow=function(t){return this.model.getDisplayedItem(t)},o.prototype.isRowSelected=function(t){return this.model.isKeySelected(this.getRow(t))},o.prototype.areRowsEqual=function(t,e){return t===e},o}(),iI=function(){function o(t,e){this.model=t,this.isSelectAllSelected=e}return o.prototype.getRowCount=function(){var e=this.model.showAddCurrentSelectionToFilter()?2:1;return this.model.getDisplayedValueCount()+e},o.prototype.getRow=function(t){if(0===t)return this.model.getSelectAllItem();var e=this.model.showAddCurrentSelectionToFilter(),r=e?2:1;return 1===t&&e?this.model.getAddSelectionToFilterItem():this.model.getDisplayedItem(t-r)},o.prototype.isRowSelected=function(t){return 0===t?this.isSelectAllSelected():1===t&&this.model.showAddCurrentSelectionToFilter()?this.model.isAddCurrentSelectionToFilterChecked():this.model.isKeySelected(this.getRow(t))},o.prototype.areRowsEqual=function(t,e){return t===e},o}(),oI=function(){function o(t){this.model=t}return o.prototype.getRowCount=function(){return this.model.getRowCount()},o.prototype.getRow=function(t){return this.model.getRow(t)},o.prototype.areRowsEqual=function(t,e){return null==t&&null==e||null!=t&&null!=e&&t.treeKey===e.treeKey&&t.depth===e.depth},o}(),aI=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),hy=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},sI=function(o){function t(){var e=o.call(this,'\n            <div class="ag-floating-filter-input ag-set-floating-filter-input" role="presentation">\n                <ag-input-text-field ref="eFloatingFilterText"></ag-input-text-field>\n            </div>')||this;return e.availableValuesListenerAdded=!1,e.filterModelFormatter=new dy,e}return aI(t,o),t.prototype.destroy=function(){o.prototype.destroy.call(this)},t.prototype.init=function(e){var r=this;this.params=e,this.eFloatingFilterText.setDisabled(!0).addGuiEventListener("click",function(){return r.params.showParentFilter()}),this.setParams(e)},t.prototype.setParams=function(e){var r=this.columnModel.getDisplayNameForColumn(e.column,"header",!0),n=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setInputAriaLabel(r+" "+n("ariaFilterInput","Filter Input"))},t.prototype.onParamsUpdated=function(e){this.params=e,this.setParams(e)},t.prototype.onParentModelChanged=function(e){this.updateFloatingFilterText(e)},t.prototype.parentSetFilterInstance=function(e){this.params.parentFilterInstance(function(r){if(!(r instanceof fy))throw new Error("AG Grid - SetFloatingFilter expects SetFilter as its parent");e(r)})},t.prototype.addAvailableValuesListener=function(){var e=this;this.parentSetFilterInstance(function(r){var n=r.getValueModel();n&&e.addManagedListener(n,cy.EVENT_AVAILABLE_VALUES_CHANGED,function(){return e.updateFloatingFilterText()})}),this.availableValuesListenerAdded=!0},t.prototype.updateFloatingFilterText=function(e){var r=this;this.availableValuesListenerAdded||this.addAvailableValuesListener(),this.parentSetFilterInstance(function(n){r.eFloatingFilterText.setValue(r.filterModelFormatter.getModelAsString(e,n))})},hy([(0,f.IzG)("eFloatingFilterText")],t.prototype,"eFloatingFilterText",void 0),hy([(0,f.Qnc)("columnModel")],t.prototype,"columnModel",void 0),t}(f.YlN),uI={version:"30.2.1",moduleName:f.ekS.SetFilterModule,beans:[],userComponents:[{componentName:"agSetColumnFilter",componentClass:fy},{componentName:"agSetColumnFloatingFilter",componentClass:sI}],dependantModules:[Ue]},cI=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),fI=function(o){function t(){var e=o.call(this)||this;return e.allComponents={},e}return cI(t,o),t.prototype.registerStatusPanel=function(e,r){this.allComponents[e]=r},t.prototype.getStatusPanel=function(e){return this.allComponents[e]},t=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i}([(0,f.ekA)("statusBarService")],t),t}(f._QX),hI=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Uo=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},pI=function(o){function t(){return o.call(this,t.TEMPLATE)||this}return hI(t,o),t.prototype.postConstruct=function(){var e,r=null===(e=this.gridOptionsService.get("statusBar"))||void 0===e?void 0:e.statusPanels;if(r){var n=r.filter(function(s){return"left"===s.align});this.createAndRenderComponents(n,this.eStatusBarLeft);var i=r.filter(function(s){return"center"===s.align});this.createAndRenderComponents(i,this.eStatusBarCenter);var a=r.filter(function(s){return!s.align||"right"===s.align});this.createAndRenderComponents(a,this.eStatusBarRight)}else this.setDisplayed(!1)},t.prototype.createAndRenderComponents=function(e,r){var n=this,i=[];e.forEach(function(a){var u=n.userComponentFactory.getStatusPanelCompDetails(a,{}).newAgStackInstance();u&&i.push({key:a.key||a.statusPanel,promise:u})}),f.VVN.all(i.map(function(a){return a.promise})).then(function(){i.forEach(function(a){a.promise.then(function(s){var l=function(){n.getContext().destroyBean(s)};n.isAlive()?(n.statusBarService.registerStatusPanel(a.key,s),r.appendChild(s.getGui()),n.addDestroyFunc(l)):l()})})})},t.TEMPLATE='<div class="ag-status-bar">\n            <div ref="eStatusBarLeft" class="ag-status-bar-left" role="status"></div>\n            <div ref="eStatusBarCenter" class="ag-status-bar-center" role="status"></div>\n            <div ref="eStatusBarRight" class="ag-status-bar-right" role="status"></div>\n        </div>',Uo([(0,f.Qnc)("userComponentFactory")],t.prototype,"userComponentFactory",void 0),Uo([(0,f.Qnc)("statusBarService")],t.prototype,"statusBarService",void 0),Uo([(0,f.IzG)("eStatusBarLeft")],t.prototype,"eStatusBarLeft",void 0),Uo([(0,f.IzG)("eStatusBarCenter")],t.prototype,"eStatusBarCenter",void 0),Uo([(0,f.IzG)("eStatusBarRight")],t.prototype,"eStatusBarRight",void 0),Uo([f.QhY],t.prototype,"postConstruct",null),t}(f.YlN),vI=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),py=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},fs=function(o){function t(){return o.call(this,t.TEMPLATE)||this}return vI(t,o),t.prototype.setLabel=function(e,r){this.setDisplayed(!1);var n=this.localeService.getLocaleTextFunc();this.eLabel.innerHTML=n(e,r)},t.prototype.setValue=function(e){this.eValue.innerHTML=e},t.TEMPLATE='<div class="ag-status-name-value">\n            <span ref="eLabel"></span>:&nbsp;\n            <span ref="eValue" class="ag-status-name-value-value"></span>\n        </div>',py([(0,f.IzG)("eLabel")],t.prototype,"eLabel",void 0),py([(0,f.IzG)("eValue")],t.prototype,"eValue",void 0),t}(f.YlN),gI=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),vy=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},yI=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return gI(t,o),t.prototype.postConstruct=function(){"clientSide"===this.gridApi.getModel().getType()?(this.setLabel("totalAndFilteredRows","Rows"),this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-total-and-filtered-row-count"),this.setDisplayed(!0),this.addManagedListener(this.eventService,f.YFc.EVENT_MODEL_UPDATED,this.onDataChanged.bind(this)),this.onDataChanged()):console.warn("AG Grid: agTotalAndFilteredRowCountComponent should only be used with the client side row model.")},t.prototype.onDataChanged=function(){var e=this.localeService.getLocaleTextFunc(),r=e("thousandSeparator",","),n=e("decimalSeparator","."),i=f._.formatNumberCommas(this.getFilteredRowCountValue(),r,n),a=f._.formatNumberCommas(this.getTotalRowCount(),r,n);if(i===a)this.setValue(i);else{var s=this.localeService.getLocaleTextFunc();this.setValue(i+" "+s("of","of")+" "+a)}},t.prototype.getFilteredRowCountValue=function(){var e=0;return this.gridApi.forEachNodeAfterFilter(function(r){r.group||e++}),e},t.prototype.getTotalRowCount=function(){var e=0;return this.gridApi.forEachNode(function(r){r.group||e++}),e},t.prototype.init=function(){},t.prototype.destroy=function(){o.prototype.destroy.call(this)},vy([(0,f.Qnc)("gridApi")],t.prototype,"gridApi",void 0),vy([f.QhY],t.prototype,"postConstruct",null),t}(fs),mI=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),gy=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},SI=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return mI(t,o),t.prototype.postConstruct=function(){if(this.setLabel("filteredRows","Filtered"),"clientSide"===this.gridApi.getModel().getType()){this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-filtered-row-count"),this.setDisplayed(!0);var e=this.onDataChanged.bind(this);this.addManagedListener(this.eventService,f.YFc.EVENT_MODEL_UPDATED,e),e()}else console.warn("AG Grid: agFilteredRowCountComponent should only be used with the client side row model.")},t.prototype.onDataChanged=function(){var e=this.getTotalRowCountValue(),r=this.getFilteredRowCountValue(),n=this.localeService.getLocaleTextFunc(),i=n("thousandSeparator",","),a=n("decimalSeparator",".");this.setValue(f._.formatNumberCommas(r,i,a)),this.setDisplayed(e!==r)},t.prototype.getTotalRowCountValue=function(){var e=0;return this.gridApi.forEachNode(function(r){return e+=1}),e},t.prototype.getFilteredRowCountValue=function(){var e=0;return this.gridApi.forEachNodeAfterFilter(function(r){r.group||(e+=1)}),e},t.prototype.init=function(){},t.prototype.destroy=function(){o.prototype.destroy.call(this)},gy([(0,f.Qnc)("gridApi")],t.prototype,"gridApi",void 0),gy([f.QhY],t.prototype,"postConstruct",null),t}(fs),CI=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),yy=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},_I=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return CI(t,o),t.prototype.postConstruct=function(){this.setLabel("totalRows","Total Rows"),"clientSide"===this.gridApi.getModel().getType()?(this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-total-row-count"),this.setDisplayed(!0),this.addManagedListener(this.eventService,f.YFc.EVENT_MODEL_UPDATED,this.onDataChanged.bind(this)),this.onDataChanged()):console.warn("AG Grid: agTotalRowCountComponent should only be used with the client side row model.")},t.prototype.onDataChanged=function(){var e=this.localeService.getLocaleTextFunc(),r=e("thousandSeparator",","),n=e("decimalSeparator",".");this.setValue(f._.formatNumberCommas(this.getRowCountValue(),r,n))},t.prototype.getRowCountValue=function(){var e=0;return this.gridApi.forEachLeafNode(function(r){return e+=1}),e},t.prototype.init=function(){},t.prototype.destroy=function(){o.prototype.destroy.call(this)},yy([(0,f.Qnc)("gridApi")],t.prototype,"gridApi",void 0),yy([f.QhY],t.prototype,"postConstruct",null),t}(fs),xI=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Vd=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},wI=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return xI(t,o),t.prototype.postConstruct=function(){if(this.isValidRowModel()){this.setLabel("selectedRows","Selected"),this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-selected-row-count"),this.onRowSelectionChanged();var e=this.onRowSelectionChanged.bind(this);this.addManagedListener(this.eventService,f.YFc.EVENT_MODEL_UPDATED,e),this.addManagedListener(this.eventService,f.YFc.EVENT_SELECTION_CHANGED,e)}else console.warn("AG Grid: agSelectedRowCountComponent should only be used with the client and server side row model.")},t.prototype.isValidRowModel=function(){var e=this.gridApi.getModel().getType();return"clientSide"===e||"serverSide"===e},t.prototype.onRowSelectionChanged=function(){var e=this.selectionService.getSelectionCount();if(e<0)return this.setValue("?"),void this.setDisplayed(!0);var r=this.localeService.getLocaleTextFunc(),n=r("thousandSeparator",","),i=r("decimalSeparator",".");this.setValue(f._.formatNumberCommas(e,n,i)),this.setDisplayed(e>0)},t.prototype.init=function(){},t.prototype.destroy=function(){o.prototype.destroy.call(this)},Vd([(0,f.Qnc)("gridApi")],t.prototype,"gridApi",void 0),Vd([(0,f.Qnc)("selectionService")],t.prototype,"selectionService",void 0),Vd([f.QhY],t.prototype,"postConstruct",null),t}(fs),bI=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ht=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},OI=function(o){function t(){return o.call(this,t.TEMPLATE)||this}return bI(t,o),t.prototype.destroy=function(){o.prototype.destroy.call(this)},t.prototype.postConstruct=function(){this.isValidRowModel()?(this.avgAggregationComp.setLabel("avg","Average"),this.countAggregationComp.setLabel("count","Count"),this.minAggregationComp.setLabel("min","Min"),this.maxAggregationComp.setLabel("max","Max"),this.sumAggregationComp.setLabel("sum","Sum"),this.addManagedListener(this.eventService,f.YFc.EVENT_RANGE_SELECTION_CHANGED,this.onRangeSelectionChanged.bind(this)),this.addManagedListener(this.eventService,f.YFc.EVENT_MODEL_UPDATED,this.onRangeSelectionChanged.bind(this))):console.warn("AG Grid: agAggregationComponent should only be used with the client and server side row model.")},t.prototype.isValidRowModel=function(){var e=this.gridApi.getModel().getType();return"clientSide"===e||"serverSide"===e},t.prototype.init=function(){},t.prototype.setAggregationComponentValue=function(e,r,n){var i=this.getAggregationValueComponent(e);if(f._.exists(i)&&i){var a=this.localeService.getLocaleTextFunc(),s=a("thousandSeparator",","),l=a("decimalSeparator",".");i.setValue(f._.formatNumberTwoDecimalPlacesAndCommas(r,s,l)),i.setDisplayed(n)}},t.prototype.getAggregationValueComponent=function(e){var r=e+"AggregationComp",n=null,i=this.gridOptionsService.get("statusBar"),a=f._.exists(i)&&i?i.statusPanels.find(function(s){return"agAggregationComponent"===s.statusPanel}):null;return f._.exists(a)&&a?(!f._.exists(a.statusPanelParams)||f._.exists(a.statusPanelParams)&&f._.exists(a.statusPanelParams.aggFuncs)&&f._.exists(a.statusPanelParams.aggFuncs.find(function(s){return s===e})))&&(n=this[r]):n=this[r],n},t.prototype.onRangeSelectionChanged=function(){var e=this,r=this.rangeService?this.rangeService.getCellRanges():void 0,n=0,i=0,a=0,s=null,l=null,u={};r&&!f._.missingOrEmpty(r)&&r.forEach(function(h){for(var p=e.rangeService.getRangeStartRow(h),v=e.rangeService.getRangeEndRow(h);!f._.missing(p)&&p&&!e.rowPositionUtils.before(v,p)&&p&&h.columns;)h.columns.forEach(function(y){if(null!==p){var S=e.cellPositionUtils.createId({rowPinned:p.rowPinned,column:y,rowIndex:p.rowIndex});if(!u[S]){u[S]=!0;var m=e.rowRenderer.getRowNode(p);if(!f._.missing(m)){var C=e.valueService.getValue(y,m);f._.missing(C)||""===C||(i++,("object"!=typeof C||!("value"in C)||""!==(C=C.value))&&("string"==typeof C&&(C=Number(C)),"number"==typeof C&&!isNaN(C)&&(n+=C,(null===l||C>l)&&(l=C),(null===s||C<s)&&(s=C),a++)))}}}}),p=e.cellNavigationService.getRowBelow(p)});var d=a>1;this.setAggregationComponentValue("count",i,i>1),this.setAggregationComponentValue("sum",n,d),this.setAggregationComponentValue("min",s,d),this.setAggregationComponentValue("max",l,d),this.setAggregationComponentValue("avg",n/a,d)},t.TEMPLATE='<div class="ag-status-panel ag-status-panel-aggregations">\n            <ag-name-value ref="avgAggregationComp"></ag-name-value>\n            <ag-name-value ref="countAggregationComp"></ag-name-value>\n            <ag-name-value ref="minAggregationComp"></ag-name-value>\n            <ag-name-value ref="maxAggregationComp"></ag-name-value>\n            <ag-name-value ref="sumAggregationComp"></ag-name-value>\n        </div>',Ht([(0,f.T7N)("rangeService")],t.prototype,"rangeService",void 0),Ht([(0,f.Qnc)("valueService")],t.prototype,"valueService",void 0),Ht([(0,f.Qnc)("cellNavigationService")],t.prototype,"cellNavigationService",void 0),Ht([(0,f.Qnc)("rowRenderer")],t.prototype,"rowRenderer",void 0),Ht([(0,f.Qnc)("gridApi")],t.prototype,"gridApi",void 0),Ht([(0,f.Qnc)("cellPositionUtils")],t.prototype,"cellPositionUtils",void 0),Ht([(0,f.Qnc)("rowPositionUtils")],t.prototype,"rowPositionUtils",void 0),Ht([(0,f.IzG)("sumAggregationComp")],t.prototype,"sumAggregationComp",void 0),Ht([(0,f.IzG)("countAggregationComp")],t.prototype,"countAggregationComp",void 0),Ht([(0,f.IzG)("minAggregationComp")],t.prototype,"minAggregationComp",void 0),Ht([(0,f.IzG)("maxAggregationComp")],t.prototype,"maxAggregationComp",void 0),Ht([(0,f.IzG)("avgAggregationComp")],t.prototype,"avgAggregationComp",void 0),Ht([f.QhY],t.prototype,"postConstruct",null),t}(f.YlN),TI={version:"30.2.1",moduleName:f.ekS.StatusBarModule,beans:[fI],agStackComponents:[{componentName:"AgStatusBar",componentClass:pI},{componentName:"AgNameValue",componentClass:fs}],userComponents:[{componentName:"agAggregationComponent",componentClass:OI},{componentName:"agSelectedRowCountComponent",componentClass:wI},{componentName:"agTotalRowCountComponent",componentClass:_I},{componentName:"agFilteredRowCountComponent",componentClass:SI},{componentName:"agTotalAndFilteredRowCountComponent",componentClass:yI}],dependantModules:[Ue]},AI=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Wo=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},RI=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.firstRow=-1,e.lastRow=-1,e.rowCount=-1,e.rowNodesByIndex={},e}return AI(t,o),t.prototype.ensureRowHeightsValid=function(e,r,n,i){return!1},t.prototype.init=function(){this.rowHeight=this.gridOptionsService.getRowHeightAsNumber(),this.addManagedListener(this.eventService,f.YFc.EVENT_VIEWPORT_CHANGED,this.onViewportChanged.bind(this))},t.prototype.start=function(){this.gridOptionsService.get("viewportDatasource")&&this.setViewportDatasource(this.gridOptionsService.get("viewportDatasource"))},t.prototype.isLastRowIndexKnown=function(){return!0},t.prototype.destroyDatasource=function(){this.viewportDatasource&&(this.viewportDatasource.destroy&&this.viewportDatasource.destroy(),this.rowRenderer.datasourceChanged(),this.firstRow=-1,this.lastRow=-1)},t.prototype.getViewportRowModelPageSize=function(){return f._.oneOrGreater(this.gridOptionsService.getNum("viewportRowModelPageSize"),5)},t.prototype.getViewportRowModelBufferSize=function(){return f._.zeroOrGreater(this.gridOptionsService.getNum("viewportRowModelBufferSize"),5)},t.prototype.calculateFirstRow=function(e){var r=this.getViewportRowModelBufferSize(),n=this.getViewportRowModelPageSize(),i=e-r;return i<0?0:Math.floor(i/n)*n},t.prototype.calculateLastRow=function(e){if(-1===e)return e;var r=this.getViewportRowModelBufferSize(),n=this.getViewportRowModelPageSize(),a=Math.ceil((e+r)/n)*n;return Math.min(a,this.rowCount-1)},t.prototype.onViewportChanged=function(e){var r=this.calculateFirstRow(e.firstRow),n=this.calculateLastRow(e.lastRow);(this.firstRow!==r||this.lastRow!==n)&&(this.firstRow=r,this.lastRow=n,this.purgeRowsNotInViewport(),this.viewportDatasource&&this.viewportDatasource.setViewportRange(this.firstRow,this.lastRow))},t.prototype.purgeRowsNotInViewport=function(){var e=this;Object.keys(this.rowNodesByIndex).forEach(function(r){var n=parseInt(r,10);if(n<e.firstRow||n>e.lastRow){if(e.isRowFocused(n))return;delete e.rowNodesByIndex[n]}})},t.prototype.isRowFocused=function(e){var r=this.focusService.getFocusCellToUseAfterRefresh();return!(!r||null!=r.rowPinned)&&r.rowIndex===e},t.prototype.setViewportDatasource=function(e){this.destroyDatasource(),this.viewportDatasource=e,this.rowCount=-1,e.init?e.init({setRowCount:this.setRowCount.bind(this),setRowData:this.setRowData.bind(this),getRow:this.getRow.bind(this)}):console.warn("AG Grid: viewport is missing init method.")},t.prototype.getType=function(){return"viewport"},t.prototype.getRow=function(e){return this.rowNodesByIndex[e]||(this.rowNodesByIndex[e]=this.createBlankRowNode(e)),this.rowNodesByIndex[e]},t.prototype.getRowNode=function(e){var r;return this.forEachNode(function(n){n.id===e&&(r=n)}),r},t.prototype.getRowCount=function(){return-1===this.rowCount?0:this.rowCount},t.prototype.getRowIndexAtPixel=function(e){return 0!==this.rowHeight?Math.floor(e/this.rowHeight):0},t.prototype.getRowBounds=function(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}},t.prototype.getTopLevelRowCount=function(){return this.getRowCount()},t.prototype.getTopLevelRowDisplayedIndex=function(e){return e},t.prototype.isEmpty=function(){return this.rowCount>0},t.prototype.isRowsToRender=function(){return this.rowCount>0},t.prototype.getNodesInRangeForSelection=function(e,r){var n=f._.missing(e)?0:e.rowIndex,i=r.rowIndex;if(n<this.firstRow||n>this.lastRow||i<this.firstRow||i>this.lastRow)return[];for(var l=[],c=n<=i?i:n,d=n<=i?n:i;d<=c;d++)l.push(this.rowNodesByIndex[d]);return l},t.prototype.forEachNode=function(e){var r=this,n=0;Object.keys(this.rowNodesByIndex).forEach(function(i){var a=parseInt(i,10);e(r.rowNodesByIndex[a],n),n++})},t.prototype.setRowData=function(e){var r=this;f._.iterateObject(e,function(n,i){var a=parseInt(n,10);if(a>=r.firstRow&&a<=r.lastRow){var s=r.rowNodesByIndex[a];f._.missing(s)&&(s=r.createBlankRowNode(a),r.rowNodesByIndex[a]=s),s.setDataAndId(i,a.toString())}})},t.prototype.createBlankRowNode=function(e){var r=new f.w$i(this.beans);return r.setRowHeight(this.rowHeight),r.setRowTop(this.rowHeight*e),r.setRowIndex(e),r},t.prototype.setRowCount=function(e,r){void 0===r&&(r=!1),e!==this.rowCount&&(this.rowCount=e,this.eventService.dispatchEvent({type:f.YFc.EVENT_MODEL_UPDATED,newData:!1,newPage:!1,keepRenderedRows:r,animate:!1}))},t.prototype.isRowPresent=function(e){return!!this.getRowNode(e.id)},Wo([(0,f.Qnc)("rowRenderer")],t.prototype,"rowRenderer",void 0),Wo([(0,f.Qnc)("focusService")],t.prototype,"focusService",void 0),Wo([(0,f.Qnc)("beans")],t.prototype,"beans",void 0),Wo([f.QhY],t.prototype,"init",null),Wo([f.sR7],t.prototype,"destroyDatasource",null),Wo([(0,f.ekA)("rowModel")],t)}(f._QX),FI={version:"30.2.1",moduleName:f.ekS.ViewportRowModelModule,rowModel:"viewport",beans:[RI],dependantModules:[Ue]},NI=kt,hs=gt,kI=nc,GI=ph,my=function(o){return o instanceof Date&&!isNaN(+o)},VI=Ur,BI=cl,Bd=Je,jI=bt,Sy=Dc,At=function(o){return o[o.SERIES_FILL_ZINDEX=50]="SERIES_FILL_ZINDEX",o[o.AXIS_LINE_ZINDEX=500]="AXIS_LINE_ZINDEX",o[o.SERIES_STROKE_ZINDEX=1e3]="SERIES_STROKE_ZINDEX",o[o.SERIES_LABEL_ZINDEX=1500]="SERIES_LABEL_ZINDEX",o[o.CROSSHAIR_ZINDEX=2e3]="CROSSHAIR_ZINDEX",o[o.SERIES_MARKERS_ZINDEX=2500]="SERIES_MARKERS_ZINDEX",o}(At||{}),zI=function(){return function o(){this.type="category",this.stroke="rgb(204, 214, 235)",this.strokeWidth=1}}(),jd=function(){function o(){this.id=VI(this),this.seriesRect={x:0,y:0,width:0,height:0},this._context=void 0,this._container=void 0,this._data=void 0,this.padding=new BI(3),this.xKey="x",this.yKey="y",this.dataType=void 0,this.xData=[],this.yData=[],this.min=void 0,this.max=void 0,this.yScale=new Bd,this.axis=new zI,this.highlightStyle={size:6,fill:"yellow",stroke:"silver",strokeWidth:1},this._width=100,this._height=100,this.smallestInterval=void 0,this.layoutId=0,this.defaultDateFormatter=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),this._onMouseMove=this.onMouseMove.bind(this),this._onMouseOut=this.onMouseOut.bind(this);var t=new re;this.rootGroup=t;var e=document.createElement("div");e.setAttribute("class","ag-sparkline-wrapper");var r=new ec({document});if(this.scene=r,this.canvasElement=r.canvas.element,r.root=t,r.container=e,r.resize(this.width,this.height),this.seriesRect.width=this.width,this.seriesRect.height=this.height,-1===o.tooltipDocuments.indexOf(document)){var n=document.createElement("style");n.innerHTML="\n.ag-sparkline-tooltip-wrapper {\n    position: absolute;\n    user-select: none;\n    pointer-events: none;\n}\n\n.ag-sparkline-tooltip {\n    position: relative;\n    font: 12px arial,sans-serif;\n    border-radius: 2px;\n    box-shadow: 0 1px 3px rgb(0 0 0 / 20%), 0 1px 1px rgb(0 0 0 / 14%);\n    line-height: 1.7em;\n    overflow: hidden;\n    white-space: nowrap;\n    z-index: 99999;\n    background-color: rgb(255, 255, 255);\n    color: rgba(0,0,0, 0.67);\n}\n\n.ag-sparkline-tooltip-content {\n    padding: 0 7px;\n    opacity: 1;\n}\n\n.ag-sparkline-tooltip-title {\n    padding-left: 7px;\n    opacity: 1;\n}\n\n.ag-sparkline-tooltip-wrapper-hidden {\n    top: -10000px !important;\n}\n\n.ag-sparkline-wrapper {\n    box-sizing: border-box;\n    overflow: hidden;\n}\n",document.head.insertBefore(n,document.head.querySelector("style")),o.tooltipDocuments.push(document)}this.setupDomEventListeners(this.scene.canvas.element)}return Object.defineProperty(o.prototype,"context",{get:function(){return this._context},set:function(t){this._context!==t&&(this._context=t)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"container",{get:function(){return this._container},set:function(t){if(this._container!==t){var e=this.canvasElement.parentNode;e?.removeChild(this.canvasElement),t&&t.appendChild(this.canvasElement),this._container=t}},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"data",{get:function(){return this._data},set:function(t){this._data!==t&&(this._data=t,this.processData(),this.mouseMoveEvent&&this.highlightedDatum&&this.updateHitPoint(this.mouseMoveEvent))},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"width",{get:function(){return this._width},set:function(t){this._width!==t&&(this._width=t,this.scene.resize(t,this.height),this.scheduleLayout())},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"height",{get:function(){return this._height},set:function(t){this._height!==t&&(this._height=t,this.scene.resize(this.width,t),this.scheduleLayout())},enumerable:!1,configurable:!0}),o.prototype.update=function(){},o.prototype.updateYScale=function(){this.updateYScaleRange(),this.updateYScaleDomain()},o.prototype.updateYScaleDomain=function(){},o.prototype.updateYScaleRange=function(){this.yScale.range=[this.seriesRect.height,0]},o.prototype.updateXScale=function(){this.xScale=this.getXScale(this.axis.type),this.updateXScaleRange(),this.updateXScaleDomain()},o.prototype.updateXScaleRange=function(){this.xScale.range=[0,this.seriesRect.width]},o.prototype.updateXScaleDomain=function(){var n,e=this.xData,r=this.xScale;(r instanceof Bd||r instanceof Sy)&&(n=NI(e)),this.xScale.domain=n?n.slice():e},o.prototype.getXScale=function(t){switch(void 0===t&&(t="category"),t){case"number":return new Bd;case"time":return new Sy;default:return new jI}},o.prototype.updateAxisLine=function(){},o.prototype.updateAxes=function(){this.updateYScale(),this.updateXScale(),this.updateAxisLine()},o.prototype.updateCrosshairs=function(){this.updateXCrosshairLine(),this.updateYCrosshairLine()},o.prototype.generateNodeData=function(){return[]},o.prototype.getNodeData=function(){return[]},o.prototype.updateNodes=function(){},o.prototype.updateXCrosshairLine=function(){},o.prototype.updateYCrosshairLine=function(){},o.prototype.highlightDatum=function(t){this.updateNodes()},o.prototype.dehighlightDatum=function(){this.highlightedDatum=void 0,this.updateNodes(),this.updateCrosshairs()},o.prototype.onMouseMove=function(t){this.mouseMoveEvent=t,this.updateHitPoint(t)},o.prototype.updateHitPoint=function(t){var e,r,n,i=this.pickClosestSeriesNodeDatum(t.offsetX,t.offsetY);if(i){var a=this.highlightedDatum;this.highlightedDatum=i,(this.highlightedDatum&&!a||this.highlightedDatum&&a&&this.highlightedDatum!==a)&&(this.highlightDatum(i),this.updateCrosshairs(),this.scene.render().catch(function(l){return console.error("AG Grid - chart rendering failed",l)})),(null===(n=null===(r=null===(e=this.processedOptions)||void 0===e?void 0:e.tooltip)||void 0===r?void 0:r.enabled)||void 0===n||n)&&this.handleTooltip(t,i)}},o.prototype.onMouseOut=function(t){this.dehighlightDatum(),this.tooltip.toggle(!1),this.scene.render().catch(function(e){return console.error("AG Grid - chart rendering failed",e)})},o.prototype.processData=function(){var t=this,e=this,r=e.data,n=e.yData,i=e.xData;if(r&&!this.invalidData(this.data)){n.length=0,i.length=0;var a=r.length,s=this.getDataType(r);this.dataType=s;var h,l=this.axis.type,u="number"!==l&&"time"!==l?"category":l,c="number"===u||"time"===u,d=function(x,b){null==t.smallestInterval&&(t.smallestInterval={x:1/0,y:1/0});var O=t.smallestInterval.x,T=Math.abs(x-b);T>0&&T<O&&(t.smallestInterval.x=T)};if("number"===s)for(var p=0;p<a;p++){var g=r[p],y=this.getDatum(p,u),S=this.getDatum(g,"number");c&&d(y,h),i.push(y),n.push(S),h=y}else if("array"===s)for(p=0;p<a;p++){var m=r[p];if(Array.isArray(m)){if(g=m[1],y=this.getDatum(m[0],u),S=this.getDatum(g,"number"),null==y)continue;c&&d(y,h),i.push(y),n.push(S),h=y}}else if("object"===s){var _=this.yKey,w=this.xKey;for(p=0;p<a;p++)if("object"==typeof(m=r[p])&&!Array.isArray(m)){if(g=m[_],y=this.getDatum(m[w],u),S=this.getDatum(g,"number"),null==y)continue;c&&d(y,h),i.push(y),n.push(S),h=y}}this.updateAxes(),this.immediateLayout()}},o.prototype.getDataType=function(t){var e,r;try{for(var n=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),i=n.next();!i.done;i=n.next()){var a=i.value;if(null!=a){if(hs(a))return"number";if(Array.isArray(a))return"array";if("object"==typeof a)return"object"}}}catch(s){e={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},o.prototype.getDatum=function(t,e){if("number"===e&&hs(t)||"time"===e&&(hs(t)||my(t)))return t;if("category"===e){if(kI(t)||my(t)||hs(t))return{toString:function(){return String(t)}};if(GI(t))return t}},Object.defineProperty(o.prototype,"layoutScheduled",{get:function(){return!!this.layoutId},enumerable:!1,configurable:!0}),o.prototype.scheduleLayout=function(){var t=this;this.layoutId&&cancelAnimationFrame(this.layoutId),this.layoutId=requestAnimationFrame(function(){t.immediateLayout(),t.layoutId=0})},o.prototype.immediateLayout=function(){this.setSparklineDimensions(),!this.invalidData(this.data)&&(this.updateXScaleRange(),this.updateYScaleRange(),this.updateAxisLine(),this.update(),this.scene.render().catch(function(t){return console.error("AG Grid - chart rendering failed",t)}))},o.prototype.setSparklineDimensions=function(){var t=this,n=t.padding,i=t.seriesRect,a=t.rootGroup,l=t.height-n.top-n.bottom;i.width=t.width-n.left-n.right,i.height=l,i.x=n.left,i.y=n.top,a.translationX=i.x,a.translationY=i.y},o.prototype.pickClosestSeriesNodeDatum=function(t,e){for(var n,r=1/0,i=this.rootGroup.transformPoint(t,e),a=this.getNodeData(),s=0;s<a.length;s++){var l=a[s];if(!l.point)return;var u=this.getDistance(i,l.point);u<=r&&(r=u,n=l)}return n},o.prototype.getDistance=function(t,e){return Math.abs(t.x-e.x)},o.prototype.handleTooltip=function(t,e){var r,n,i=e.seriesDatum,a=this.canvasElement,u=null===(r=this.processedOptions)||void 0===r?void 0:r.tooltip,c={pageX:t.clientX,pageY:t.clientY,position:{xOffset:u?.xOffset,yOffset:u?.yOffset},container:u?.container};null==c.container&&(c.container=a);var d=i.y,h=i.x,p=null===(n=u?.enabled)||void 0===n||n,v=u?.renderer;if(v){var g=v({context:this.context,datum:i,yValue:d,xValue:h});p="string"!=typeof g&&void 0!==g.enabled?g.enabled:p}var y=p&&void 0!==i.y&&this.getTooltipHtml(e);y&&this.tooltip.show(c,y)},o.prototype.formatNumericDatum=function(t){return String(Math.round(10*t)/10)},o.prototype.formatDatum=function(t){var e=this.axis.type||"category";return"number"===e&&"number"==typeof t?this.formatNumericDatum(t):"time"===e&&(t instanceof Date||hs(t))?this.defaultDateFormatter.format(t):String(t)},o.prototype.setupDomEventListeners=function(t){t.addEventListener("mousemove",this._onMouseMove),t.addEventListener("mouseout",this._onMouseOut)},o.prototype.cleanupDomEventListeners=function(t){t.removeEventListener("mousemove",this._onMouseMove),t.removeEventListener("mouseout",this._onMouseOut)},o.prototype.invalidData=function(t){return!t||!Array.isArray(t)||0===t.length},o.prototype.destroy=function(){this.scene.container=void 0,this.container=void 0,this.cleanupDomEventListeners(this.scene.canvas.element)},o.tooltipDocuments=[],o}();function Ko(o,t){var e,r,n;if("string"==typeof o)return o;t=t??{};var g,y,i=o.content,a=void 0===i?null!==(e=t.content)&&void 0!==e?e:"":i,s=o.title,l=void 0===s?null!==(r=t.title)&&void 0!==r?r:void 0:s,u=o.color,c=void 0===u?t.color:u,d=o.backgroundColor,h=void 0===d?t.backgroundColor:d,p=o.opacity,v=void 0===p?null!==(n=t.opacity)&&void 0!==n?n:1:p;c?(g=l?'<span class="'+Yo.class+'-title"; style="color: '+c+'">'+l+"</span>":"",y='<span class="'+Yo.class+'-content" style="color: '+c+'">'+a+"</span>"):(g=l?'<span class="'+Yo.class+'-title">'+l+"</span>":"",y='<span class="'+Yo.class+'-content">'+a+"</span>");var S="opacity: "+v;return h&&(S+="; background-color: "+h.toLowerCase()),'<div class="'+Yo.class+'" style="'+S+'">\n                '+g+"\n                "+y+"\n            </div>"}var Yo=function(){function o(){this.element=document.createElement("div"),document.body.appendChild(this.element)}return o.prototype.isVisible=function(){var t=this.element;if(t.classList)return!t.classList.contains(o.class+"-wrapper-hidden");var e=t.getAttribute("class");return!!e&&e.split(" ").indexOf(o.class+"-wrapper-hidden")<0},o.prototype.updateClass=function(t){var e=[o.class+"-wrapper"];!0!==t&&e.push(o.class+"-wrapper-hidden"),this.element.setAttribute("class",e.join(" "))},o.prototype.show=function(t,e){var r,n,i,a;this.toggle(!1);var s=this.element;if(void 0!==e)s.innerHTML=e;else if(!s.innerHTML)return;var l=null!==(n=null===(r=t.position)||void 0===r?void 0:r.xOffset)&&void 0!==n?n:10,u=null!==(a=null===(i=t.position)||void 0===i?void 0:i.yOffset)&&void 0!==a?a:0,c=t.pageX+l,d=t.pageY+u,h=s.getBoundingClientRect(),p=window.innerWidth-h.width;if(t.container){var v=t.container.getBoundingClientRect();p=v.left+(v.width-h.width)}c>p&&(c=t.pageX-s.clientWidth-l),typeof scrollX<"u"&&(c+=scrollX),typeof scrollY<"u"&&(d+=scrollY),s.style.left=Math.round(c)+"px",s.style.top=Math.round(d)+"px",this.toggle(!0)},o.prototype.toggle=function(t){this.updateClass(t)},o.prototype.destroy=function(){var t=this.element.parentNode;t&&t.removeChild(this.element)},o.class="ag-sparkline-tooltip",o}();function Cy(o){switch(o){case"circle":default:return Aa;case"square":return Pa;case"diamond":return ip}}function gu(o,t){void 0===t&&(t="solid");var e={solid:[],dash:[4,3],dot:[1,3],dashDot:[4,3,1,3],dashDotDot:[4,3,1,3,1,3],shortDot:[1,1],shortDash:[3,1],shortDashDot:[3,1,1,1],shortDashDotDot:[3,1,1,1,1,1],longDash:[8,3],longDashDot:[8,3,1,3],longDashDotDot:[8,3,1,3,1,3]},r={solid:[],dash:[3,3],dot:[0,3],dashDot:[3,3,0,3],dashDotDot:[3,3,0,3,0,3],shortDot:[0,2],shortDash:[2,2],shortDashDot:[2,2,0,2],shortDashDotDot:[2,2,0,2,0,2],longDash:[7,3],longDashDot:[7,3,0,3],longDashDotDot:[7,3,0,3,0,3]};return"round"===o||"square"===o?null==r[t]?(console.warn("'"+t+"' is not a valid 'lineDash' option."),r.solid):r[t]:null==e[t]?(console.warn("'"+t+"' is not a valid 'lineDash' option."),e.solid):e[t]}var HI=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),UI=kt,WI=bt,KI=function(){return function o(){this.enabled=!0,this.shape="circle",this.size=0,this.fill="rgb(124, 181, 236)",this.stroke="rgb(124, 181, 236)",this.strokeWidth=1,this.formatter=void 0}}(),YI=function(){return function o(){this.stroke="rgb(124, 181, 236)",this.strokeWidth=1}}(),$I=function(){return function o(){this.xLine={enabled:!0,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0},this.yLine={enabled:!1,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0}}}(),XI=function(o){function t(){var e=o.call(this)||this;return e.fill="rgba(124, 181, 236, 0.25)",e.strokePath=new wt,e.fillPath=new wt,e.xCrosshairLine=new Ze,e.yCrosshairLine=new Ze,e.areaSparklineGroup=new re,e.xAxisLine=new Ze,e.markers=new re,e.markerSelection=Fe.select(e.markers,function(){return e.markerFactory()}),e.markerSelectionData=[],e.marker=new KI,e.line=new YI,e.crosshairs=new $I,e.rootGroup.append(e.areaSparklineGroup),e.xAxisLine.zIndex=At.AXIS_LINE_ZINDEX,e.fillPath.zIndex=At.SERIES_FILL_ZINDEX,e.strokePath.zIndex=At.SERIES_STROKE_ZINDEX,e.xCrosshairLine.zIndex=At.CROSSHAIR_ZINDEX,e.yCrosshairLine.zIndex=At.CROSSHAIR_ZINDEX,e.markers.zIndex=At.SERIES_MARKERS_ZINDEX,e.areaSparklineGroup.append([e.fillPath,e.xAxisLine,e.strokePath,e.xCrosshairLine,e.yCrosshairLine,e.markers]),e}return HI(t,o),t.prototype.markerFactory=function(){return new(Cy(this.marker.shape))},t.prototype.getNodeData=function(){return this.markerSelectionData},t.prototype.update=function(){var e=this.generateNodeData();if(e){var r=e.nodeData,n=e.fillData,i=e.strokeData;this.markerSelectionData=r,this.updateSelection(r),this.updateNodes(),this.updateStroke(i),this.updateFill(n)}},t.prototype.updateYScaleDomain=function(){var n=this.yScale,i=UI(this.yData),a=0,s=1;void 0!==i&&(a=this.min=i[0],s=this.max=i[1]),n.domain=[a=a<0?a:0,s=s<0?0:s]},t.prototype.generateNodeData=function(){var e=this,n=e.yData,i=e.xData,a=e.xScale,s=e.yScale;if(e.data){for(var v,g,y,S,l=!(a instanceof WI),u=l?0:a.bandwidth/2,c=n.length,d=[],h=[],p=[],m=s.convert(0),C=0;C<c;C++){var _=n[C],w=i[C],x=a.convert(l?a.toDomain(w):w)+u,b=void 0===_?NaN:s.convert(_);C+1<c&&(S=a.convert(l?a.toDomain(i[C+1]):i[C+1])+u),p.push({seriesDatum:{x:w,y:_},point:{x,y:b}}),void 0===_&&void 0!==y?(h.push({seriesDatum:void 0,point:{x:y,y:m}}),void 0!==S&&h.push({seriesDatum:void 0,point:{x:S,y:m}})):void 0!==_&&(h.push({seriesDatum:{x:w,y:_},point:{x,y:b}}),d.push({seriesDatum:{x:w,y:_},point:{x,y:b}}),v=void 0!==v?v:x,g=x),y=x}return h.push({seriesDatum:void 0,point:{x:g,y:m}},{seriesDatum:void 0,point:{x:v,y:m}}),{nodeData:d,fillData:h,strokeData:p}}},t.prototype.updateAxisLine=function(){var e=this,r=e.xScale,n=e.yScale,i=e.axis,a=e.xAxisLine;a.x1=r.range[0],a.x2=r.range[1],a.y1=a.y2=0,a.stroke=i.stroke,a.strokeWidth=i.strokeWidth;var s=n.convert(0);a.translationY=s},t.prototype.updateSelection=function(e){this.markerSelection.update(e)},t.prototype.updateNodes=function(){var e=this,r=this,n=r.highlightedDatum,i=r.highlightStyle,a=r.marker,s=i.size,l=i.fill,u=i.stroke,c=i.strokeWidth,d=a.formatter;this.markerSelection.each(function(h,p,v){var g=p.point,y=p.seriesDatum;if(g){var x,S=p===n,m=S&&void 0!==l?l:a.fill,C=S&&void 0!==u?u:a.stroke,_=S&&void 0!==c?c:a.strokeWidth,w=S&&void 0!==s?s:a.size;d&&(x=d({datum:p,xValue:y.x,yValue:y.y,min:y.y===e.min,max:y.y===e.max,first:0===v,last:v===e.markerSelectionData.length-1,fill:m,stroke:C,strokeWidth:_,size:w,highlighted:S})),h.size=x&&null!=x.size?x.size:w,h.fill=x&&null!=x.fill?x.fill:m,h.stroke=x&&null!=x.stroke?x.stroke:C,h.strokeWidth=x&&null!=x.strokeWidth?x.strokeWidth:_,h.translationX=g.x,h.translationY=g.y,h.visible=x&&null!=x.enabled?x.enabled:a.enabled&&h.size>0}})},t.prototype.updateStroke=function(e){var r=this,n=r.strokePath,a=r.line;if(!(r.yData.length<2)){var s=n.path,l=e.length,u=!0;s.clear();for(var c=0;c<l;c++){var d=e[c],h=d.point,v=h.x,g=h.y;null==d.seriesDatum.y?u=!0:u?(s.moveTo(v,g),u=!1):s.lineTo(v,g)}n.lineJoin=n.lineCap="round",n.fill=void 0,n.stroke=a.stroke,n.strokeWidth=a.strokeWidth}},t.prototype.updateFill=function(e){var r=this,n=r.fillPath,i=r.yData,a=r.fill,s=n.path,l=e.length;if(s.clear(),!(i.length<2)){for(var u=0;u<l;u++){var c=e[u].point,d=c.x,h=c.y;u>0?s.lineTo(d,h):s.moveTo(d,h)}s.closePath(),n.lineJoin="round",n.stroke=void 0,n.fill=a}},t.prototype.updateXCrosshairLine=function(){var e,r=this,n=r.yScale,i=r.xCrosshairLine,a=r.highlightedDatum,s=r.crosshairs.xLine;if(s.enabled&&null!=a){i.y1=n.range[0],i.y2=n.range[1],i.x1=i.x2=0,i.stroke=s.stroke,i.strokeWidth=null!==(e=s.strokeWidth)&&void 0!==e?e:1,i.lineCap="round"===s.lineCap||"square"===s.lineCap?s.lineCap:void 0;var l=s.lineDash;i.lineDash=Array.isArray(l)?l:gu(i.lineCap,s.lineDash),i.translationX=a.point.x}else i.strokeWidth=0},t.prototype.updateYCrosshairLine=function(){var e,r=this,n=r.xScale,i=r.yCrosshairLine,a=r.highlightedDatum,s=r.crosshairs.yLine;if(s.enabled&&null!=a){i.x1=n.range[0],i.x2=n.range[1],i.y1=i.y2=0,i.stroke=s.stroke,i.strokeWidth=null!==(e=s.strokeWidth)&&void 0!==e?e:1,i.lineCap="round"===s.lineCap||"square"===s.lineCap?s.lineCap:void 0;var l=s.lineDash;i.lineDash=Array.isArray(l)?l:gu(i.lineCap,s.lineDash),i.translationY=a.point.y}else i.strokeWidth=0},t.prototype.getTooltipHtml=function(e){var r,n,i=this.dataType,a=e.seriesDatum,s=a.y,l=a.x,d={content:this.formatNumericDatum(s),title:"array"===i||"object"===i?this.formatDatum(l):void 0},h=null===(n=null===(r=this.processedOptions)||void 0===r?void 0:r.tooltip)||void 0===n?void 0:n.renderer;return h?Ko(h({context:this.context,datum:a,yValue:s,xValue:l}),d):Ko(d)},t.className="AreaSparkline",t}(jd),QI=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ZI=kt,_y=bt,qI=function(){return function o(){this.enabled=!0,this.shape="circle",this.size=0,this.fill="rgb(124, 181, 236)",this.stroke="rgb(124, 181, 236)",this.strokeWidth=1,this.formatter=void 0}}(),JI=function(){return function o(){this.stroke="rgb(124, 181, 236)",this.strokeWidth=1}}(),eL=function(){return function o(){this.xLine={enabled:!0,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0},this.yLine={enabled:!1,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0}}}(),tL=function(o){function t(){var e=o.call(this)||this;return e.linePath=new wt,e.xCrosshairLine=new Ze,e.yCrosshairLine=new Ze,e.lineSparklineGroup=new re,e.markers=new re,e.markerSelection=Fe.select(e.markers,function(){return e.markerFactory()}),e.markerSelectionData=[],e.marker=new qI,e.line=new JI,e.crosshairs=new eL,e.rootGroup.append(e.lineSparklineGroup),e.linePath.zIndex=At.SERIES_STROKE_ZINDEX,e.xCrosshairLine.zIndex=At.CROSSHAIR_ZINDEX,e.yCrosshairLine.zIndex=At.CROSSHAIR_ZINDEX,e.markers.zIndex=At.SERIES_MARKERS_ZINDEX,e.lineSparklineGroup.append([e.linePath,e.xCrosshairLine,e.yCrosshairLine,e.markers]),e}return QI(t,o),t.prototype.getNodeData=function(){return this.markerSelectionData},t.prototype.markerFactory=function(){return new(Cy(this.marker.shape))},t.prototype.onMarkerShapeChange=function(){this.markerSelection=this.markerSelection.clear(),this.scheduleLayout()},t.prototype.update=function(){var e=this.generateNodeData();e&&(this.markerSelectionData=e,this.updateSelection(e),this.updateNodes(),this.updateLine())},t.prototype.updateYScaleDomain=function(){var n=this.yScale,i=ZI(this.yData),a=0,s=1;if(void 0!==i&&(a=this.min=i[0],s=this.max=i[1]),a===s){var l=Math.abs(.01*a);a-=l,s+=l}n.domain=[a,s]},t.prototype.generateNodeData=function(){var e=this,n=e.yData,i=e.xData,a=e.xScale,s=e.yScale;if(e.data){for(var l=!(a instanceof _y),u=l?0:a.bandwidth/2,c=[],d=0;d<n.length;d++){var h=n[d],p=i[d];if(null!=h){var v=a.convert(l?a.toDomain(p):p)+u,g=void 0===h?NaN:s.convert(h);c.push({seriesDatum:{x:p,y:h},point:{x:v,y:g}})}}return c}},t.prototype.updateSelection=function(e){this.markerSelection.update(e)},t.prototype.updateNodes=function(){var e=this,r=this,n=r.highlightedDatum,i=r.highlightStyle,a=r.marker,s=i.size,l=i.fill,u=i.stroke,c=i.strokeWidth,d=a.formatter;this.markerSelection.each(function(h,p,v){var _,g=p===n,y=g&&void 0!==l?l:a.fill,S=g&&void 0!==u?u:a.stroke,m=g&&void 0!==c?c:a.strokeWidth,C=g&&void 0!==s?s:a.size,w=p.seriesDatum,x=p.point;d&&(_=d({datum:p,xValue:w.x,yValue:w.y,min:w.y===e.min,max:w.y===e.max,first:0===v,last:v===e.markerSelectionData.length-1,fill:y,stroke:S,strokeWidth:m,size:C,highlighted:g})),h.size=_&&null!=_.size?_.size:C,h.fill=_&&null!=_.fill?_.fill:y,h.stroke=_&&null!=_.stroke?_.stroke:S,h.strokeWidth=_&&null!=_.strokeWidth?_.strokeWidth:m,h.translationX=x.x,h.translationY=x.y,h.visible=_&&null!=_.enabled?_.enabled:a.enabled&&h.size>0})},t.prototype.updateLine=function(){var e=this,r=e.linePath,n=e.yData,i=e.xData,a=e.xScale,s=e.yScale,l=e.line;if(!(n.length<2)){var u=!(a instanceof _y),c=r.path,d=n.length,h=u?0:a.bandwidth/2,p=!0;c.clear();for(var v=0;v<d;v++){var g=i[v],y=n[v],S=a.convert(u?a.toDomain(g):g)+h,m=void 0===y?NaN:s.convert(y);null==y?p=!0:p?(c.moveTo(S,m),p=!1):c.lineTo(S,m)}r.fill=void 0,r.stroke=l.stroke,r.strokeWidth=l.strokeWidth}},t.prototype.updateXCrosshairLine=function(){var e,r=this,n=r.yScale,i=r.xCrosshairLine,a=r.highlightedDatum,s=r.crosshairs.xLine;if(s.enabled&&null!=a){i.y1=n.range[0],i.y2=n.range[1],i.x1=i.x2=0,i.stroke=s.stroke,i.strokeWidth=null!==(e=s.strokeWidth)&&void 0!==e?e:1,i.lineCap="round"===s.lineCap||"square"===s.lineCap?s.lineCap:void 0;var l=s.lineDash;i.lineDash=Array.isArray(l)?l:gu(i.lineCap,s.lineDash),i.translationX=a.point.x}else i.strokeWidth=0},t.prototype.updateYCrosshairLine=function(){var e,r=this,n=r.xScale,i=r.yCrosshairLine,a=r.highlightedDatum,s=r.crosshairs.yLine;if(s.enabled&&null!=a){i.x1=n.range[0],i.x2=n.range[1],i.y1=i.y2=0,i.stroke=s.stroke,i.strokeWidth=null!==(e=s.strokeWidth)&&void 0!==e?e:1,i.lineCap="round"===s.lineCap||"square"===s.lineCap?s.lineCap:void 0;var l=s.lineDash;i.lineDash=Array.isArray(l)?l:gu(i.lineCap,s.lineDash),i.translationY=a.point.y}else i.strokeWidth=0},t.prototype.getTooltipHtml=function(e){var r,n,i=this.dataType,a=e.seriesDatum,s=a.y,l=a.x,d={content:this.formatNumericDatum(s),title:"array"===i||"object"===i?this.formatDatum(l):void 0},h=null===(n=null===(r=this.processedOptions)||void 0===r?void 0:r.tooltip)||void 0===n?void 0:n.renderer;return h?Ko(h({context:this.context,datum:a,yValue:s,xValue:l}),d):Ko(d)},t.className="LineSparkline",t}(jd),rL=function(){return function o(){this.enabled=!0,this.fontSize=8,this.fontFamily="Verdana, sans-serif",this.fontStyle=void 0,this.fontWeight=void 0,this.color="rgba(70, 70, 70, 1)"}}(),xy=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),nL=kt,wy=function(o){return o[o.Rect=0]="Rect",o[o.Label=1]="Label",o}(wy||{}),Gn=function(o){return o.InsideBase="insideBase",o.InsideEnd="insideEnd",o.Center="center",o.OutsideEnd="outsideEnd",o}(Gn||{}),iL=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.formatter=void 0,e.placement=Gn.InsideEnd,e}return xy(t,o),t}(rL),by=function(o){function t(){var e=o.call(this)||this;return e.fill="rgb(124, 181, 236)",e.stroke="silver",e.strokeWidth=0,e.paddingInner=.1,e.paddingOuter=.2,e.valueAxisDomain=void 0,e.formatter=void 0,e.axisLine=new Ze,e.bandWidth=0,e.sparklineGroup=new re,e.rectGroup=new re,e.labelGroup=new re,e.rectSelection=Fe.select(e.rectGroup,fr),e.labelSelection=Fe.select(e.labelGroup,Ee),e.nodeSelectionData=[],e.label=new iL,e.rootGroup.append(e.sparklineGroup),e.rectGroup.zIndex=At.SERIES_FILL_ZINDEX,e.axisLine.zIndex=At.AXIS_LINE_ZINDEX,e.labelGroup.zIndex=At.SERIES_LABEL_ZINDEX,e.sparklineGroup.append([e.rectGroup,e.axisLine,e.labelGroup]),e.axisLine.lineCap="round",e.label.enabled=!1,e}return xy(t,o),t.prototype.getNodeData=function(){return this.nodeSelectionData},t.prototype.update=function(){this.updateSelections(),this.updateNodes()},t.prototype.updateSelections=function(){var e=this.generateNodeData();e&&(this.nodeSelectionData=e,this.updateRectSelection(e),this.updateLabelSelection(e))},t.prototype.updateNodes=function(){this.updateRectNodes(),this.updateLabelNodes()},t.prototype.calculateStep=function(e){var r,n=this,i=n.xScale,a=n.paddingInner,s=n.paddingOuter,l=n.smallestInterval,c=(i.domain[1]-i.domain[0])/(null!==(r=l?.x)&&void 0!==r?r:1)+1,h=Math.min(c,50);return e/Math.max(1,2*s+(h-1)*a+h)},t.prototype.updateYScaleDomain=function(){var e=this,r=e.yScale,i=e.valueAxisDomain,a=nL(e.yData),s=0,l=1;void 0!==a&&(s=this.min=a[0],l=this.max=a[1]),s=s<0?s:0,l=l<0?0:l,i&&(i[1]<l&&(i[1]=l),i[0]>s&&(i[0]=s)),r.domain=i||[s,l]},t.prototype.updateRectSelection=function(e){this.rectSelection.update(e)},t.prototype.updateRectNodes=function(){var e=this,r=this,n=r.highlightedDatum,i=r.formatter,a=r.fill,s=r.stroke,l=r.strokeWidth,u=this.highlightStyle,c=u.fill,d=u.stroke,h=u.strokeWidth;this.rectSelection.each(function(p,v,g){var _,y=v===n,S=y&&void 0!==c?c:a,m=y&&void 0!==d?d:s,C=y&&void 0!==h?h:l,w=v.x,x=v.y,b=v.width,O=v.height,T=v.seriesDatum;i&&(_=i({datum:v,xValue:T.x,yValue:T.y,width:b,height:O,min:T.y===e.min,max:T.y===e.max,first:0===g,last:g===e.nodeSelectionData.length-1,fill:S,stroke:m,strokeWidth:C,highlighted:y})),p.fill=_&&_.fill||S,p.stroke=_&&_.stroke||m,p.strokeWidth=_&&_.strokeWidth||C,p.x=p.y=0,p.width=b,p.height=O,p.visible=p.height>0,p.translationX=w,p.translationY=x})},t.prototype.updateLabelSelection=function(e){this.labelSelection.update(e,function(r){r.tag=wy.Label,r.pointerEvents=Ct.None})},t.prototype.updateLabelNodes=function(){var e=this.label,r=e.enabled,n=e.fontStyle,i=e.fontWeight,a=e.fontSize,s=e.fontFamily,l=e.color;this.labelSelection.each(function(u,c){var d=c.label;d&&r?(u.fontStyle=n,u.fontWeight=i,u.fontSize=a,u.fontFamily=s,u.textAlign=d.textAlign,u.textBaseline=d.textBaseline,u.text=d.text,u.x=d.x,u.y=d.y,u.fill=l,u.visible=!0):u.visible=!1})},t.prototype.getTooltipHtml=function(e){var r,n,i=this.dataType,a=e.seriesDatum,s=a.y,l=a.x,d={content:this.formatNumericDatum(s),title:"array"===i||"object"===i?this.formatDatum(l):void 0},h=null===(n=null===(r=this.processedOptions)||void 0===r?void 0:r.tooltip)||void 0===n?void 0:n.renderer;return h?Ko(h({context:this.context,datum:a,yValue:s,xValue:l}),d):Ko(d)},t.prototype.formatLabelValue=function(e){return e.toFixed(e%1!=0?1:0)},t}(jd),oL=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),aL=gt,Oy=bt,sL=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return oL(t,o),t.prototype.updateYScaleRange=function(){this.yScale.range=[0,this.seriesRect.width]},t.prototype.updateXScaleRange=function(){var e=this,r=e.xScale,n=e.seriesRect,i=e.paddingOuter,a=e.paddingInner;if(r instanceof Oy)r.range=[0,n.height],r.paddingInner=a,r.paddingOuter=i;else{var s=this.calculateStep(n.height),l=s*i;this.bandWidth=s*(1-a),r.range=[l,n.height-l-this.bandWidth]}},t.prototype.updateAxisLine=function(){var e=this,r=e.yScale,n=e.axis,i=e.axisLine,a=e.seriesRect,s=n.strokeWidth;i.x1=0,i.x2=0,i.y1=0,i.y2=a.height,i.stroke=n.stroke,i.strokeWidth=s+(s%2==1?1:0);var l=r.convert(0);i.translationX=l},t.prototype.generateNodeData=function(){var e=this,n=e.yData,i=e.xData,a=e.xScale,s=e.yScale,l=e.fill,u=e.stroke,c=e.strokeWidth,d=e.label;if(e.data){for(var h=d.fontStyle,p=d.fontWeight,v=d.fontSize,g=d.fontFamily,y=d.color,S=d.formatter,m=d.placement,C=[],_=s.convert(0),w=!(a instanceof Oy),x=0,b=n.length;x<b;x++){var O=n[x],T=i[x],E=void 0===O;E&&(O=0);var L,P=a.convert(w?a.toDomain(T):T),D=Math.min(void 0===O?NaN:s.convert(O),_),R=Math.max(void 0===O?NaN:s.convert(O),_),M=w?this.bandWidth:a.bandwidth,F=R-D,I={x:_,y:P};L=S?S({value:O}):void 0!==O&&aL(O)?this.formatLabelValue(O):"";var N=P+M/2,k=void 0,G=void 0,B=void 0!==O&&O>=0;if(m===Gn.Center)k=D+F/2,G="center";else if(m===Gn.OutsideEnd)k=D+(B?F+4:-4),G=B?"start":"end";else if(m===Gn.InsideEnd){k=D+(B?F-4:4),G=B?"end":"start";var V=Ve.getTextSize(L,g).width||20;(B&&k<_+V||!B&&k>_-V)&&(k=_+4*(B?1:-1),G=B?"start":"end")}else k=_+4*(B?1:-1),G=B?"start":"end";C.push({x:D,y:P,width:F,height:M,fill:l,stroke:u,strokeWidth:c,seriesDatum:{x:T,y:E?void 0:O},point:I,label:{x:k,y:N,text:L,fontStyle:h,fontWeight:p,fontSize:v,fontFamily:g,textAlign:G,textBaseline:"middle",fill:y}})}return C}},t.prototype.getDistance=function(e,r){return Math.abs(e.y-r.y)},t.className="BarSparkline",t}(by),lL=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),uL=gt,Ey=bt,cL=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return lL(t,o),t.prototype.updateYScaleRange=function(){this.yScale.range=[this.seriesRect.height,0]},t.prototype.updateXScaleRange=function(){var e=this,r=e.xScale,n=e.seriesRect,i=e.paddingOuter,a=e.paddingInner;if(r instanceof Ey)r.range=[0,n.width],r.paddingInner=a,r.paddingOuter=i;else{var s=this.calculateStep(n.width),l=s*i;this.bandWidth=s*(1-a),r.range=[l,n.width-l-this.bandWidth]}},t.prototype.updateAxisLine=function(){var e=this,r=e.yScale,n=e.axis,i=e.axisLine,a=e.seriesRect,s=n.strokeWidth;i.x1=0,i.x2=a.width,i.y1=0,i.y2=0,i.stroke=n.stroke,i.strokeWidth=s+(s%2==1?1:0);var l=r.convert(0);i.translationY=l},t.prototype.generateNodeData=function(){var e=this,n=e.yData,i=e.xData,a=e.xScale,s=e.yScale,l=e.fill,u=e.stroke,c=e.strokeWidth,d=e.label;if(e.data){for(var h=d.fontStyle,p=d.fontWeight,v=d.fontSize,g=d.fontFamily,y=d.color,S=d.formatter,m=d.placement,C=[],_=s.convert(0),w=!(a instanceof Ey),x=0,b=n.length;x<b;x++){var O=n[x],T=i[x],E=void 0===O;E&&(O=0);var L,P=Math.min(void 0===O?NaN:s.convert(O),_),D=a.convert(w?a.toDomain(T):T),R=Math.max(void 0===O?NaN:s.convert(O),_),M=w?this.bandWidth:a.bandwidth,F=R-P,I={x:D+M/2,y:_};L=S?S({value:O}):void 0!==O&&uL(O)?this.formatLabelValue(O):"";var N=D+M/2,k=void 0,G=void 0,B=void 0!==O&&O>=0;if(m===Gn.Center)k=P+F/2,G="middle";else if(m===Gn.OutsideEnd)k=P+(B?-2:F+2),G=B?"bottom":"top";else if(m===Gn.InsideEnd){k=P+(B?2:F-2),G=B?"top":"bottom";var V=Ve.getTextSize(L,g).height||10;(B&&k>_-V||!B&&k<_+V)&&(k=_+2*(B?-1:1),G=B?"bottom":"top")}else k=_+2*(B?-1:1),G=B?"bottom":"top";C.push({x:D,y:P,width:M,height:F,fill:l,stroke:u,strokeWidth:c,seriesDatum:{x:T,y:E?void 0:O},point:I,label:{x:N,y:k,text:L,fontStyle:h,fontWeight:p,fontSize:v,fontFamily:g,textAlign:"center",textBaseline:G,fill:y}})}return C}},t.className="ColumnSparkline",t}(by),dL=gt,fL=function(){function o(){}return o.create=function(t,e){var r=function hL(o){switch(void 0===o&&(o="line"),o){case"column":return new cL;case"bar":return new sL;case"area":return new XI;default:return new tL}}((t=He([t])).type);return e&&(r.tooltip=e),function vL(o,t){se(o,"context",t.context,t),se(o,"width",t.width,t),se(o,"height",t.height,t),se(o,"container",t.container,t),se(o,"xKey",t.xKey,t),se(o,"yKey",t.yKey,t),t.padding&&function mL(o,t){se(o,"top",t.top,t),se(o,"right",t.right,t),se(o,"bottom",t.bottom,t),se(o,"left",t.left,t)}(o.padding,t.padding),t.axis&&function CL(o,t){se(o,"type",t.type,t),se(o,"stroke",t.stroke,t),se(o,"strokeWidth",t.strokeWidth,t)}(o.axis,t.axis),t.highlightStyle&&function _L(o,t){se(o,"fill",t.fill,t),se(o,"size",t.size,t),se(o,"stroke",t.stroke,t),se(o,"strokeWidth",t.strokeWidth,t)}(o.highlightStyle,t.highlightStyle)}(r,t),function pL(o,t){switch(t.type){case"bar":case"column":!function Ty(o,t){se(o,"valueAxisDomain",t.valueAxisDomain,t),se(o,"fill",t.fill,t),se(o,"stroke",t.stroke,t),se(o,"strokeWidth",t.strokeWidth,t),se(o,"paddingInner",t.paddingInner,t),se(o,"paddingOuter",t.paddingOuter,t),se(o,"formatter",t.formatter,t),t.label&&function SL(o,t){se(o,"enabled",t.enabled,t),se(o,"fontStyle",t.fontStyle,t),se(o,"fontWeight",t.fontWeight,t),se(o,"fontSize",t.fontSize,t),se(o,"fontFamily",t.fontFamily,t),se(o,"textAlign",t.textAlign,t),se(o,"textBaseline",t.textBaseline,t),se(o,"color",t.color,t),se(o,"formatter",t.formatter,t),se(o,"placement",t.placement,t)}(o.label,t.label)}(o,t);break;case"area":!function yL(o,t){se(o,"fill",t.fill,t),t.marker&&Py(o.marker,t.marker),t.line&&Ay(o.line,t.line),t.crosshairs&&Dy(o.crosshairs,t.crosshairs)}(o,t);break;default:!function gL(o,t){t.marker&&Py(o.marker,t.marker),t.line&&Ay(o.line,t.line),t.crosshairs&&Dy(o.crosshairs,t.crosshairs)}(o,t)}}(r,t),t.data&&(r.data=t.data),r.processedOptions=t,r},o}();function Py(o,t){se(o,"enabled",t.enabled,t),se(o,"size",t.size,t),se(o,"shape",t.shape,t),se(o,"fill",t.fill,t),se(o,"stroke",t.stroke,t),se(o,"strokeWidth",t.strokeWidth,t),se(o,"formatter",t.formatter,t)}function Ay(o,t){se(o,"stroke",t.stroke,t),se(o,"strokeWidth",t.strokeWidth,t)}function Dy(o,t){o.xLine&&t.xLine&&My(o.xLine,t.xLine),o.yLine&&t.yLine&&My(o.yLine,t.yLine)}function My(o,t){se(o,"enabled",t.enabled,t),se(o,"stroke",t.stroke,t),se(o,"strokeWidth",t.strokeWidth,t),se(o,"lineDash",t.lineDash,t),se(o,"lineCap",t.lineCap,t)}var Ry={},Fy=function(o,t,e){if(dL(t))return!0;var r="AG Charts: "+o+" must be a number, the value you provided is not a valid number. Using the default of "+e+"px.";return function xL(o,t){Ry[t]||(o(),Ry[t]=!0)}(function(){return console.warn(r)},o+" not a number"),!1},wL={xOffset:Fy,yOffset:Fy};function se(o,t,e,r){if(t in r)if(t in o){var n=wL[t];(!n||n(t,e,o[t]))&&o[t]!==e&&(o[t]=e)}else console.warn("Property "+t+" does not exist on the target object.")}var bL=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),zd=function(){return zd=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},zd.apply(this,arguments)},Hd=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},OL=function(o){function t(){return o.call(this,t.TEMPLATE)||this}return bL(t,o),t.prototype.init=function(e){var r=this,n=!0,a=this.resizeObserverService.observeResize(this.getGui(),function(){var s=r.getGui(),l=s.clientWidth,u=s.clientHeight;if(0!==l&&0!==u)if(n){var c=zd({data:e.value,width:l,height:u,context:{data:e.data}},e.sparklineOptions);r.sparkline=fL.create(c,r.sparklineTooltipSingleton.getSparklineTooltip()),r.eSparkline.appendChild(r.sparkline.canvasElement),n=!1}else r.sparkline.width=l,r.sparkline.height=u});this.addDestroyFunc(function(){return a()})},t.prototype.refresh=function(e){return!!this.sparkline&&(this.sparkline.data=e.value,!0)},t.prototype.destroy=function(){this.sparkline&&this.sparkline.destroy(),o.prototype.destroy.call(this)},t.TEMPLATE='<div class="ag-sparkline-wrapper">\n            <span ref="eSparkline"></span>\n        </div>',Hd([(0,f.IzG)("eSparkline")],t.prototype,"eSparkline",void 0),Hd([(0,f.Qnc)("resizeObserverService")],t.prototype,"resizeObserverService",void 0),Hd([(0,f.Qnc)("sparklineTooltipSingleton")],t.prototype,"sparklineTooltipSingleton",void 0),t}(f.YlN),EL=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ud=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},TL=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return EL(t,o),t.prototype.postConstruct=function(){this.tooltip=new Yo},t.prototype.getSparklineTooltip=function(){return this.tooltip},t.prototype.destroyTooltip=function(){this.tooltip&&this.tooltip.destroy()},Ud([f.QhY],t.prototype,"postConstruct",null),Ud([f.sR7],t.prototype,"destroyTooltip",null),Ud([(0,f.ekA)("sparklineTooltipSingleton")],t)}(f._QX);const Iy=[xm,Pm,G0,ZC,s_,NR,zR,tF,aF,Wg,uF,Sf,YF,uI,Bu,TI,FI,{version:"30.2.1",moduleName:f.ekS.SparklinesModule,beans:[TL],userComponents:[{componentName:"agSparklineCellRenderer",componentClass:OL}],dependantModules:[Ue]}];f._gN.concat(Iy),f.Y5$.registerModules(Iy)}}]);