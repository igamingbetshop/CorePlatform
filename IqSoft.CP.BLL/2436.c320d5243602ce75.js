"use strict";(self.webpackChunkAgentManagmentSystem=self.webpackChunkAgentManagmentSystem||[]).push([[2436],{2436:(J,p,n)=>{n.r(p),n.d(p,{CreateAgentComponent:()=>x});var f=n(1368),a=n(6504),g=n(7816),c=n(4060),E=n(1560),h=n(8416),G=n(2096),C=n(2864),y=n(3992),u=n(9120),I=n(3840),D=n(2064),d=n(3576),e=n(2116),R=n(8196),v=n(748),O=n(9112),k=n(2236),Y=n(5068);function w(t,l){1&t&&(e.I0R(0,"mat-error"),e.OEk(1),e.wVc(2,"translate"),e.C$Y()),2&t&&(e.yG2(),e.oRS(" ",e.kDX(2,1,"Errors.TheFieldIsRequired")," "))}function A(t,l){1&t&&(e.I0R(0,"mat-error"),e.OEk(1),e.wVc(2,"translate"),e.C$Y()),2&t&&(e.yG2(),e.oRS(" ",e.kDX(2,1,"Errors.TheFieldIsRequired")," "))}function M(t,l){1&t&&(e.I0R(0,"mat-error"),e.OEk(1),e.wVc(2,"translate"),e.C$Y()),2&t&&(e.yG2(),e.oRS(" ",e.kDX(2,1,"Errors.TheFieldIsRequired")," "))}function N(t,l){1&t&&(e.I0R(0,"mat-error"),e.OEk(1),e.wVc(2,"translate"),e.C$Y()),2&t&&(e.yG2(),e.oRS(" ",e.kDX(2,1,"Errors.MinLength")," "))}function T(t,l){1&t&&(e.I0R(0,"mat-error"),e.OEk(1),e.wVc(2,"translate"),e.C$Y()),2&t&&(e.yG2(),e.oRS(" ",e.kDX(2,1,"Errors.TheFieldIsRequired")," "))}function S(t,l){1&t&&(e.I0R(0,"mat-error"),e.OEk(1),e.wVc(2,"translate"),e.C$Y()),2&t&&(e.yG2(),e.oRS(" ",e.kDX(2,1,"Errors.TheFieldIsRequired")," "))}function b(t,l){if(1&t&&(e.I0R(0,"mat-option",17),e.OEk(1),e.C$Y()),2&t){const r=l.$implicit;e.E7m("value",r.Id),e.yG2(),e.cNF(r.Name)}}function $(t,l){1&t&&(e.I0R(0,"mat-error"),e.OEk(1),e.wVc(2,"translate"),e.C$Y()),2&t&&(e.yG2(),e.oRS(" ",e.kDX(2,1,"Errors.TheFieldIsRequired")," "))}function P(t,l){if(1&t&&(e.I0R(0,"mat-option",17),e.OEk(1),e.C$Y()),2&t){const r=l.$implicit;e.E7m("value",r.Id),e.yG2(),e.cNF(r.Name)}}function F(t,l){1&t&&(e.I0R(0,"mat-error"),e.OEk(1),e.wVc(2,"translate"),e.C$Y()),2&t&&(e.yG2(),e.oRS(" ",e.kDX(2,1,"Errors.TheFieldIsRequired")," "))}function V(t,l){if(1&t&&(e.I0R(0,"div",6)(1,"mat-form-field",7)(2,"mat-label"),e.OEk(3),e.wVc(4,"translate"),e.C$Y(),e.I0R(5,"mat-select",22)(6,"mat-option",17),e.OEk(7),e.wVc(8,"translate"),e.C$Y(),e.c53(9,P,2,2,"mat-option",17,e.wJt),e.C$Y(),e.yuY(11,F,3,3,"mat-error"),e.C$Y()()),2&t){const r=e.GaO();e.yG2(3),e.cNF(e.kDX(4,4,"Common.SelectLanguage")),e.yG2(3),e.E7m("value",0),e.yG2(),e.cNF(e.kDX(8,6,"Common.SelectLanguage")),e.yG2(2),e.oho(r.languages),e.yG2(2),e.C0Y(11,r.languageControl.hasError("required")?11:-1)}}function L(t,l){1&t&&(e.I0R(0,"mat-error"),e.OEk(1),e.wVc(2,"translate"),e.C$Y()),2&t&&(e.yG2(),e.oRS(" ",e.kDX(2,1,"Errors.TheFieldIsRequired")," "))}function X(t,l){1&t&&(e.I0R(0,"mat-error"),e.OEk(1),e.wVc(2,"translate"),e.C$Y()),2&t&&(e.yG2(),e.oRS(" ",e.kDX(2,1,"Errors.TheFieldIsRequired")," "))}function K(t,l){if(1&t&&(e.I0R(0,"div",6)(1,"mat-form-field",7)(2,"mat-label"),e.OEk(3),e.wVc(4,"translate"),e.C$Y(),e.wR5(5,"input",23),e.wVc(6,"translate"),e.yuY(7,L,3,3,"mat-error"),e.C$Y(),e.I0R(8,"mat-form-field",24)(9,"mat-label"),e.OEk(10),e.wVc(11,"translate"),e.C$Y(),e.wR5(12,"input",25),e.I0R(13,"mat-hint"),e.OEk(14,"MM/DD/YYYY"),e.C$Y(),e.wR5(15,"mat-datepicker-toggle",26)(16,"mat-datepicker",null,27),e.yuY(18,X,3,3,"mat-error"),e.C$Y()()),2&t){const r=e.Gew(17),i=e.GaO();let o;e.yG2(3),e.cNF(e.kDX(4,7,"Common.MobileNumber")),e.yG2(2),e.E7m("placeholder",e.kDX(6,9,"Common.MobileNumber")),e.yG2(2),e.C0Y(7,i.mobileNumberControl.hasError("required")?7:-1),e.yG2(3),e.cNF(e.kDX(11,11,"Common.ChooseADate")),e.yG2(2),e.E7m("matDatepicker",r),e.yG2(3),e.E7m("for",r),e.yG2(3),e.C0Y(18,null!=(o=i.formGroup.get("BirthDate"))&&o.hasError("required")?18:-1)}}function U(t,l){1&t&&(e.I0R(0,"div",6)(1,"mat-checkbox",28),e.OEk(2),e.wVc(3,"translate"),e.C$Y(),e.I0R(4,"mat-checkbox",29),e.OEk(5),e.wVc(6,"translate"),e.C$Y()()),2&t&&(e.yG2(2),e.cNF(e.kDX(3,2,"Common.SendMail")),e.yG2(3),e.cNF(e.kDX(6,4,"Common.SendSms")))}function B(t,l){if(1&t){const r=e.KQA();e.I0R(0,"button",30),e.qCj("click",function(){e.usT(r);const o=e.GaO();return e.CGJ(o.onSubmit())}),e.OEk(1),e.wVc(2,"translate"),e.C$Y()}if(2&t){const r=e.GaO();e.E7m("disabled",r.formGroup.invalid),e.yG2(),e.oRS(" ",e.kDX(2,2,"Common.CreateAgent")," ")}}function W(t,l){if(1&t){const r=e.KQA();e.I0R(0,"button",30),e.qCj("click",function(){e.usT(r);const o=e.GaO();return e.CGJ(o.onSubmit())}),e.OEk(1),e.wVc(2,"translate"),e.C$Y()}if(2&t){const r=e.GaO();e.E7m("disabled",r.formGroup.invalid),e.yG2(),e.oRS(" ",e.kDX(2,2,"Clients.CreateClient")," ")}}let x=(()=>{class t{get usernameControl(){return this.formGroup.get("UserName")}get passwordControl(){return this.formGroup.get("Password")}get firstNameControl(){return this.formGroup.get("FirstName")}get emailControl(){return this.formGroup.get("Email")}get lastNameControl(){return this.formGroup.get("LastName")}get stateControl(){return this.formGroup.get("State")}get genderControl(){return this.formGroup.get("Gender")}get languageControl(){return this.formGroup.get("LanguageId")}get mobileNumberControl(){return this.formGroup.get("MobileNumber")}constructor(r,i,o,m,_,s,q,Q){this.dialogRef=r,this.fb=i,this.localStorageService=o,this.snackbarService=m,this.clientService=_,this.data=s,this.enumService=q,this.mainService=Q,this.genders=[],this.languages=[],this.isClient=!1,7===this.data.level&&(this.isClient=!0),this.createForm()}ngOnInit(){this.setStates(),this.genders=this.localStorageService.get("enums").genders,this.languages=this.localStorageService.get("enums").languages,this.setCurrencyId()}setCurrencyId(){const r=this.localStorageService.get("user").CurrencyId;this.formGroup.patchValue({CurrencyId:r})}setStates(){this.states=this.enumService.getUserStates()}createForm(){this.formGroup=this.fb.group({Email:[null,a.AQ.required],FirstName:[null,[a.AQ.required]],Gender:[null,[a.AQ.required]],LastName:[null,[a.AQ.required]],UserName:[null,[a.AQ.required]],Password:[null,[a.AQ.required,a.AQ.minLength(8)]]}),this.isClient?this.isClient&&(this.formGroup.addControl("SendMail",new a.Ku(!1)),this.formGroup.addControl("SendSms",new a.Ku(!1)),this.formGroup.addControl("MobileNumber",new a.Ku(null)),this.formGroup.addControl("BirthDate",new a.Ku(null))):(this.formGroup.addControl("LanguageId",new a.Ku("")),this.formGroup.addControl("Level",new a.Ku(this.data.level)),this.formGroup.addControl("Type",new a.Ku(5)))}get errorControl(){return this.formGroup.controls}close(){this.dialogRef.close()}onSubmit(){if(this.formGroup.invalid)return;const r=this.formGroup.getRawValue();this.isClient?this.clientService.createClient(r).pipe((0,y.U)(1)).subscribe(i=>{0===i.ResponseCode?this.dialogRef.close(!0):this.snackbarService.showError(i.Description)}):this.mainService.createAgent(r).pipe((0,y.U)(1)).subscribe(i=>{0===i.ResponseCode?this.dialogRef.close("true"):this.snackbarService.showError(i.Description)})}validateBirthDate(r){if(r.value){const i=new Date,o=new Date(i.getFullYear()-18,i.getMonth(),i.getDate());if(new Date(r.value)>=o)return{invalidBirthDate:!0}}return null}static#e=this.\u0275fac=function(i){return new(i||t)(e.GI1(C.yI),e.GI1(a.KE),e.GI1(R.s),e.GI1(v.i),e.GI1(O.i),e.GI1(C.sR),e.GI1(k.Y),e.GI1(Y.M))};static#t=this.\u0275cmp=e.In1({type:t,selectors:[["app-create-agent"]],standalone:!0,features:[e.M5G([u.iU,d.Ko]),e.UHJ],decls:71,vars:56,consts:[[1,"dialog-container"],["mat-dialog-title","",1,"mat-dialog-title"],[1,"title"],["alt","icon",1,"icon",3,"click"],[1,"modal-body"],[1,"modal-form",3,"formGroup"],[1,"form-row","form-row-500"],[1,"mat-form-field"],["matInput","","formControlName","UserName",3,"placeholder"],["matInput","","formControlName","FirstName",3,"placeholder"],["matInput","","type","password","formControlName","Password",3,"placeholder"],["password",""],["mat-icon-button","","matSuffix","",3,"click"],[1,"password-icon",3,"click"],["matInput","","formControlName","LastName",3,"placeholder"],["matInput","","formControlName","Email",3,"placeholder"],["formControlName","Gender"],[3,"value"],["class","form-row form-row-500",4,"ngIf"],["mat-dialog-actions","",1,"mat-dialog-actions"],[1,"modal-cancel-btn",3,"click"],["class","modal-primary-btn","type","submit",3,"disabled","click",4,"ngIf"],["formControlName","LanguageId"],["matInput","","type","number","formControlName","MobileNumber",3,"placeholder"],[1,"example-full-width"],["matInput","","formControlName","BirthDate",3,"matDatepicker"],["matIconSuffix","",3,"for"],["picker",""],["formControlName","SendMail",1,"example-margin"],["formControlName","SendSms",1,"example-margin"],["type","submit",1,"modal-primary-btn",3,"disabled","click"]],template:function(i,o){if(1&i){const m=e.KQA();e.I0R(0,"div",0)(1,"div",1)(2,"span",2),e.OEk(3),e.wVc(4,"translate"),e.C$Y(),e.I0R(5,"mat-icon",3),e.qCj("click",function(){return o.close()}),e.OEk(6,"close"),e.C$Y()(),e.I0R(7,"div",4)(8,"form",5)(9,"div",6)(10,"mat-form-field",7)(11,"mat-label"),e.OEk(12),e.wVc(13,"translate"),e.C$Y(),e.wR5(14,"input",8),e.wVc(15,"translate"),e.yuY(16,w,3,3,"mat-error"),e.C$Y(),e.I0R(17,"mat-form-field",7)(18,"mat-label"),e.OEk(19),e.wVc(20,"translate"),e.C$Y(),e.wR5(21,"input",9),e.wVc(22,"translate"),e.yuY(23,A,3,3,"mat-error"),e.C$Y()(),e.I0R(24,"div",6)(25,"mat-form-field",7)(26,"mat-label"),e.OEk(27),e.wVc(28,"translate"),e.C$Y(),e.wR5(29,"input",10,11),e.I0R(31,"button",12),e.qCj("click",function(){e.usT(m);const s=e.Gew(30);return e.CGJ(s.type="password"===s.type?"text":"password")}),e.I0R(32,"mat-icon",13),e.qCj("click",function(){e.usT(m);const s=e.Gew(30);return e.CGJ(s.type="password"===s.type?"text":"password")}),e.OEk(33),e.C$Y()(),e.yuY(34,M,3,3,"mat-error")(35,N,3,3,"mat-error"),e.C$Y(),e.I0R(36,"mat-form-field",7)(37,"mat-label"),e.OEk(38),e.wVc(39,"translate"),e.C$Y(),e.wR5(40,"input",14),e.wVc(41,"translate"),e.yuY(42,T,3,3,"mat-error"),e.C$Y()(),e.I0R(43,"div",6)(44,"mat-form-field",7)(45,"mat-label"),e.OEk(46),e.wVc(47,"translate"),e.C$Y(),e.wR5(48,"input",15),e.wVc(49,"translate"),e.yuY(50,S,3,3,"mat-error"),e.C$Y(),e.I0R(51,"mat-form-field",7)(52,"mat-label"),e.OEk(53),e.wVc(54,"translate"),e.C$Y(),e.I0R(55,"mat-select",16)(56,"mat-option",17),e.OEk(57),e.wVc(58,"translate"),e.C$Y(),e.c53(59,b,2,2,"mat-option",17,e.wJt),e.C$Y(),e.yuY(61,$,3,3,"mat-error"),e.C$Y()(),e.yuY(62,V,12,8,"div",18)(63,K,19,13,"div",18)(64,U,7,6,"div",18),e.C$Y()(),e.I0R(65,"div",19)(66,"button",20),e.qCj("click",function(){return o.close()}),e.OEk(67),e.wVc(68,"translate"),e.C$Y(),e.yuY(69,B,3,4,"button",21)(70,W,3,4,"button",21),e.C$Y()()}if(2&i){const m=e.Gew(30);e.yG2(3),e.CAO("",e.kDX(4,30,"Common.AddAgent")," ",o.data.agentLevel," "),e.yG2(5),e.E7m("formGroup",o.formGroup),e.yG2(4),e.cNF(e.kDX(13,32,"Common.UserName")),e.yG2(2),e.E7m("placeholder",e.kDX(15,34,"Common.UserName")),e.yG2(2),e.C0Y(16,o.usernameControl.hasError("required")?16:-1),e.yG2(3),e.cNF(e.kDX(20,36,"Common.FirstName")),e.yG2(2),e.E7m("placeholder",e.kDX(22,38,"Common.FirstName")),e.yG2(2),e.C0Y(23,o.firstNameControl.hasError("required")?23:-1),e.yG2(4),e.cNF(e.kDX(28,40,"Common.Password")),e.yG2(2),e.E7m("placeholder","Password at least 8 characters"),e.yG2(4),e.cNF("password"===m.type?"visibility":"visibility_off"),e.yG2(),e.C0Y(34,o.passwordControl.hasError("required")?34:-1),e.yG2(),e.C0Y(35,o.passwordControl.hasError("minlength")?35:-1),e.yG2(3),e.cNF(e.kDX(39,42,"Common.LastName")),e.yG2(2),e.E7m("placeholder",e.kDX(41,44,"Common.LastName")),e.yG2(2),e.C0Y(42,o.lastNameControl.hasError("required")?42:-1),e.yG2(4),e.cNF(e.kDX(47,46,"Common.Email")),e.yG2(2),e.E7m("placeholder",e.kDX(49,48,"Common.Email")),e.yG2(2),e.C0Y(50,o.emailControl.hasError("required")?50:-1),e.yG2(3),e.cNF(e.kDX(54,50,"Common.SelectGender")),e.yG2(3),e.E7m("value",0),e.yG2(),e.cNF(e.kDX(58,52,"Common.SelectGender")),e.yG2(2),e.oho(o.genders),e.yG2(2),e.C0Y(61,o.genderControl.hasError("required")?61:-1),e.yG2(),e.E7m("ngIf",!o.isClient),e.yG2(),e.E7m("ngIf",o.isClient),e.yG2(),e.E7m("ngIf",o.isClient),e.yG2(3),e.cNF(e.kDX(68,54,"Common.Cancel")),e.yG2(2),e.E7m("ngIf",!o.isClient),e.yG2(),e.E7m("ngIf",o.isClient)}},dependencies:[f.MD,f.u_,a.y,a.sz,a.ot,a.O4,a.ue,a.u,E.oB,E.qL,a.sl,a.uW,a.Wo,c.wb,c.Up,c.w5,c.MX,c.wJ,c.Gm,G.d5,G.kX,d.I5,h.cN,h.yi,g.oJ,g.um,C.sr,C.WQ,C.Yp,u.iU,u.SU,u.Ul,u.yu,d.Ko,I.Vn,I.WK,D.O0,D.sD],styles:[".modal-body[_ngcontent-%COMP%]{position:relative;overflow:auto;height:100%;max-height:calc(65vh - 91px);min-height:200px;padding-right:14px}"]})}return t})()}}]);