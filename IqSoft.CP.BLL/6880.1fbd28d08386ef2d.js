"use strict";(self.webpackChunkAgentManagmentSystem=self.webpackChunkAgentManagmentSystem||[]).push([[6880],{6880:(E,p,r)=>{r.r(p),r.d(p,{RecoveryComponent:()=>T});var v=r(1368),d=r(2080),g=r(7816),n=r(6504),f=r(4060),u=r(1560),h=r(8416),y=r(7048);class b{static mapFormDataToRecoveryReqData(c){return{RecoveryToken:c.recoveryToken,NewPassword:c.newPassword}}}var w=r(2064),o=r(2116),C=r(5359),x=r(748),R=r(2100);function k(t,c){1&t&&(o.I0R(0,"mat-error"),o.OEk(1),o.wVc(2,"translate"),o.C$Y()),2&t&&(o.yG2(),o.oRS(" ",o.kDX(2,1,"Errors.TheFieldIsRequired")," "))}function P(t,c){1&t&&(o.I0R(0,"mat-error"),o.OEk(1),o.wVc(2,"translate"),o.C$Y()),2&t&&(o.yG2(),o.oRS(" ",o.kDX(2,1,"Errors.TheFieldIsRequired")," "))}function I(t,c){1&t&&(o.I0R(0,"mat-error"),o.OEk(1),o.wVc(2,"translate"),o.C$Y()),2&t&&(o.yG2(),o.oRS(" ",o.kDX(2,1,"Errors.TheFieldIsRequired")," "))}function G(t){const c=t.get("newPassword")?.value,a=t.get("confirmPassword")?.value;return c!==a?(t.get("confirmPassword")?.setErrors({passwordMismatch:!0}),{passwordMismatch:!0}):null}let T=(()=>{class t{get recoveryTokenControl(){return this.form.get("recoveryToken")}get newPasswordControl(){return this.form.get("newPassword")}get confirmPasswordControl(){return this.form.get("confirmPassword")}constructor(a,e,i,m){this.authService=a,this.snackbarService=e,this.fb=i,this.router=m,this.imagePath="",this.form=this.fb.group({recoveryToken:["",n.AQ.required],newPassword:["",n.AQ.required],confirmPassword:["",n.AQ.required]},{validators:G})}ngOnInit(){this.setLogoByDomain()}setLogoByDomain(){const a="assets/images/"+window.location.hostname+"/login-logo.svg";let e=new Image;e.onload=()=>{this.imagePath=a},e.onerror=()=>{this.imagePath="assets/images/login-logo.svg"},e.src=a}onSubmit(){const a=b.mapFormDataToRecoveryReqData(this.form.value);this.authService.recoverPassword(a).subscribe(e=>{0===e.ResponseCode?this.router.navigate(["/main"]):this.snackbarService.showError("An error occurred. Please try again.")})}toRedirectForgotLogin(){this.router.navigate(["/login"])}static#o=this.\u0275fac=function(e){return new(e||t)(o.GI1(C.o),o.GI1(x.i),o.GI1(n.KE),o.GI1(R.E5))};static#t=this.\u0275cmp=o.In1({type:t,selectors:[["app-recovery"]],standalone:!0,features:[o.UHJ],decls:44,vars:21,consts:[[1,"login-container"],[1,"card"],[1,"card-header"],["alt","logo",3,"src"],[1,"name"],[1,"login-form",3,"formGroup","ngSubmit"],[1,"title"],["appearance","outline"],["matInput","","placeholder","Recovery Code","type","text","formControlName","recoveryToken",1,"input"],["recoveryToken",""],["matTextPrefix","",1,"matTextPrefix"],[1,"icon"],["appearance","outline",1,"password-input"],["matInput","","placeholder","New Password","type","password","formControlName","newPassword",1,"input"],["newPassword",""],[1,"password-icon",3,"click"],["matInput","","placeholder","Confirm Password","type","password","formControlName","confirmPassword",1,"input"],["confirmPassword",""],[1,"forget-pass",3,"click"],[1,"btn-content"],["type","submit","mat-button","",1,"login-btn"]],template:function(e,i){if(1&e){const m=o.KQA();o.I0R(0,"div",0)(1,"mat-card",1)(2,"mat-card-header",2),o.wR5(3,"img",3),o.I0R(4,"div",4),o.OEk(5),o.wVc(6,"translate"),o.C$Y()(),o.I0R(7,"form",5),o.qCj("ngSubmit",function(){return i.onSubmit()}),o.I0R(8,"mat-card-content")(9,"div",6),o.OEk(10),o.wVc(11,"translate"),o.C$Y(),o.I0R(12,"mat-form-field",7),o.wR5(13,"input",8,9),o.I0R(15,"span",10)(16,"mat-icon",11),o.OEk(17,"token"),o.C$Y()(),o.yuY(18,k,3,3,"mat-error"),o.C$Y(),o.I0R(19,"mat-form-field",12),o.wR5(20,"input",13,14),o.I0R(22,"span",10)(23,"mat-icon",11),o.OEk(24,"key"),o.C$Y()(),o.I0R(25,"mat-icon",15),o.qCj("click",function(){o.usT(m);const l=o.Gew(21);return o.CGJ(l.type="password"===l.type?"text":"password")}),o.OEk(26),o.C$Y(),o.yuY(27,P,3,3,"mat-error"),o.C$Y(),o.I0R(28,"mat-form-field",12),o.wR5(29,"input",16,17),o.I0R(31,"span",10)(32,"mat-icon",11),o.OEk(33,"key"),o.C$Y()(),o.I0R(34,"mat-icon",15),o.qCj("click",function(){o.usT(m);const l=o.Gew(30);return o.CGJ(l.type="password"===l.type?"text":"password")}),o.OEk(35),o.C$Y(),o.yuY(36,I,3,3,"mat-error"),o.C$Y(),o.I0R(37,"a",18),o.qCj("click",function(){return i.toRedirectForgotLogin()}),o.OEk(38),o.wVc(39,"translate"),o.C$Y()(),o.I0R(40,"div",19)(41,"button",20),o.OEk(42),o.wVc(43,"translate"),o.C$Y()()()()()}if(2&e){const m=o.Gew(21),s=o.Gew(30);o.yG2(3),o._6D("src",i.imagePath,o.K6U),o.yG2(2),o.cNF(o.kDX(6,13,"Login.AgentsSystem")),o.yG2(2),o.E7m("formGroup",i.form),o.yG2(3),o.cNF(o.kDX(11,15,"Login.Recovery")),o.yG2(8),o.C0Y(18,i.recoveryTokenControl.hasError("required")?18:-1),o.yG2(8),o.cNF("password"===m.type?"visibility":"visibility_off"),o.yG2(),o.C0Y(27,i.newPasswordControl.hasError("required")?27:-1),o.yG2(8),o.cNF("password"===s.type?"visibility":"visibility_off"),o.yG2(),o.C0Y(36,i.confirmPasswordControl.hasError("required")?36:-1),o.yG2(2),o.cNF(o.kDX(39,17,"Login.Login")),o.yG2(3),o.eAK("disabled",i.form.invalid),o.yG2(),o.cNF(o.kDX(43,19,"Common.Submit"))}},dependencies:[v.MD,n.y,n.sz,n.ot,n.ue,n.u,n.sl,n.uW,n.Wo,d.NR,d.SM,d.WK,d.Uc,g.oJ,g.Gw,f.wb,f.Up,f.wJ,f.is,h.cN,h.yi,u.oB,u.qL,y.SU,w.O0,w.sD],styles:[".login-container{display:flex;justify-content:center;align-items:center;flex-direction:row;height:100vh;background-color:#076192}.login-container .card-header{text-align:center;width:100%;display:block;padding:34px 0}.login-container .card-header .name{color:#076192;margin-top:4px;cursor:default}.login-container mat-card{padding:0 24px 24px;background-color:#f0f5f8;box-shadow:unset;max-width:452px;width:100%;box-sizing:border-box}.login-container mat-card card-header{text-align:center;width:100%;display:block;padding:34px 0}.login-container mat-card card-header .name{color:#076192;margin-top:4px}.login-container mat-card .login-form{padding:0 34px 32px;border-radius:4px;background-color:#fff;box-shadow:0 4px 4px #00000040}.login-container mat-card .login-form mat-card-content{margin-bottom:60px}.login-container mat-card .login-form mat-card-content .title{text-align:center;padding:32px 0 30px;color:#035d8f;font-size:16px;cursor:default}.login-container mat-card .login-form mat-card-content mat-form-field{margin-bottom:10px;width:100%;color:#378fc8!important}.login-container mat-card .login-form mat-card-content mat-form-field .mat-mdc-text-field-wrapper{background-color:#e9f0fe}.login-container mat-card .login-form mat-card-content mat-form-field .input{margin-left:12px;width:100%}.login-container mat-card .login-form mat-card-content mat-form-field mat-select{width:100%;margin-left:12px;color:#378fc8!important}.login-container mat-card .login-form mat-card-content mat-form-field::placeholder{color:#378fc8!important}.login-container mat-card .login-form mat-card-content mat-form-field::placeholder .ng-invalid.ng-touched{color:#b11029!important}.login-container mat-card .login-form mat-card-content mat-form-field .mat-select-placeholder{color:#378fc8!important}.login-container mat-card .login-form mat-card-content mat-form-field .mat-select-placeholder.ng-invalid.ng-touched{color:#b11029!important}.login-container mat-card .login-form mat-card-content mat-form-field .mat-select-value-text{color:#378fc8!important}.login-container mat-card .login-form mat-card-content mat-form-field .mat-select-value-text.ng-invalid.ng-touched{color:#b11029!important}.login-container mat-card .login-form mat-card-content mat-form-field .mat-form-field-label{color:#378fc8!important}.login-container mat-card .login-form mat-card-content mat-form-field .mat-form-field-label.ng-invalid.ng-touched{color:#b11029!important}.login-container mat-card .login-form mat-card-content mat-form-field .mat-select-arrow{color:#378fc8!important}.login-container mat-card .login-form mat-card-content mat-form-field mat-error{font-size:12px!important;color:#b11029!important}.login-container mat-card .login-form .matTextPrefix{position:relative}.login-container mat-card .login-form .matTextPrefix .mat-icon{position:absolute;left:-14px;top:-17px;color:#035d8f}.login-container mat-card .login-form .password-input{position:relative;width:100%}.login-container mat-card .login-form .password-input .password-icon{position:absolute;top:10px;right:-17px;font-size:19px;color:#035d8f}a{color:#378fc8;cursor:pointer;text-decoration:none}a:hover{color:#b11029}.btn-content{position:relative}.btn-content .login-btn{width:100%;padding:0 10px;height:52px;color:#fff;background:linear-gradient(#2787b7,#035d8f);cursor:pointer;border:unset}.btn-content .login-btn ::ng-deep .mat-button-wrapper{color:#fff!important}.btn-content .login-btn.disabled{opacity:.7}.btn-content .login-btn:hover{border:1px solid #076192;background-color:#0573ba}.btn-content .mat-error{color:#d3455b;font-size:12px;position:absolute;left:0;top:43px}\n"],encapsulation:2})}return t})()}}]);