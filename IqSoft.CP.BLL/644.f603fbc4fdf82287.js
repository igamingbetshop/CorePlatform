"use strict";(self.webpackChunkAgentManagmentSystem=self.webpackChunkAgentManagmentSystem||[]).push([[644],{644:(F,m,i)=>{i.r(m),i.d(m,{AgentMainInfoComponent:()=>R});var a=i(6504),c=i(7816),g=i(4060),f=i(1560),u=i(8416),p=i(2096),d=i(2100),_=i(1368),C=i(2064),t=i(2116),O=i(9288),M=i(2236),P=i(748),b=i(8196),h=i(3576);function I(r,l){1&r&&(t.I0R(0,"mat-form-field"),t.wR5(1,"input",37),t.C$Y())}function v(r,l){if(1&r&&(t.I0R(0,"mat-option",39),t.OEk(1),t.C$Y()),2&r){const e=l.$implicit,n=t.GaO(2);t.E7m("value",e.Id)("disabled",!n.editMode),t.yG2(),t.oRS(" ",e.Name," ")}}function y(r,l){if(1&r&&(t.I0R(0,"mat-form-field")(1,"mat-select",38),t.c53(2,v,2,3,"mat-option",39,t.wJt),t.C$Y()()),2&r){const e=t.GaO();t.yG2(2),t.oho(e.userStateEnum)}}function E(r,l){if(1&r){const e=t.KQA();t.I0R(0,"div",40)(1,"button",41),t.qCj("click",function(){t.usT(e);const o=t.GaO();return t.CGJ(o.onCancel())}),t.OEk(2),t.C$Y(),t.I0R(3,"button",42),t.qCj("click",function(){t.usT(e);const o=t.GaO();return t.CGJ(o.onSubmit())}),t.OEk(4),t.C$Y()()}if(2&r){const e=t.GaO();t.yG2(2),t.cNF("Common.Cancel"),t.yG2(),t.E7m("disabled",e.userForm.invalid),t.yG2(),t.cNF("Common.Submit")}}let R=(()=>{class r{constructor(e,n,o,s,x,w,N){this.agentService=e,this.enumService=n,this.activatedRoute=o,this.route=s,this.snackbarService=x,this.localStorageService=w,this.fb=N,this.editMode=!1,this.datePipe=new _.y("en-US"),this.createForm()}ngOnInit(){this.id=this.activatedRoute.snapshot.queryParams.agentId,this.level=this.activatedRoute.snapshot.queryParams.level,this.agentId=this.activatedRoute.snapshot.queryParams.agentId,this.genders=this.localStorageService?.get("enums")?.genders,this.getUserStateEnum(),this.getUserTypesEnum(),this.getAgent()}getUserStateEnum(){this.enumService.getUserStateEnum().subscribe(e=>{0===e.ResponseCode&&(this.userStateEnum=e.ResponseObject)})}getUserTypesEnum(){this.enumService.getUserTypes().subscribe(e=>{0===e.ResponseCode&&(this.userTypes=e.ResponseObject)})}getAgent(){let e;if(this.id){let n=this.id.split(",");e=n[n.length-1]}else e=this.id;this.agentService.getAgents({Id:+e,WithDownlines:!0}).subscribe(n=>{if(0===n.ResponseCode){const o=n.ResponseObject.Agents.Entities[0];o.GenderName=this.genders?.find(s=>s.Id===o.Gender)?.Name,o.TypeName=this.userTypes?.find(s=>s.Id===o.Type)?.Name,o.StateName=this.userStateEnum?.find(s=>s.Id===o.State)?.Name,this.userForm.patchValue(o)}})}toggleEditMode(){if(this.editMode=!this.editMode,this.editMode){const e=this.userForm.get("Password"),n=this.userForm.get("State");this.userForm.get("CreationTime")?.disable(),this.userForm.get("UserName")?.disable(),this.userForm.get("Email")?.disable(),this.userForm.get("ClientCount")?.disable(),this.userForm.get("PartnerId")?.disable(),this.userForm.get("Id")?.disable(),this.userForm.get("Type")?.disable(),this.userForm.get("CurrencyId")?.disable(),this.userForm.get("LanguageId")?.disable(),this.userForm.get("FirstName")?.disable(),this.userForm.get("LastName")?.disable(),this.userForm.get("GenderName")?.disable(),this.userForm.get("TypeName")?.disable(),e&&e.setErrors({invalid:!0}),n&&n.setErrors({invalid:!0})}else this.setFormValuesEneble()}setFormValuesEneble(){this.userForm.get("CreationTime")?.enable(),this.userForm.get("UserName")?.enable(),this.userForm.get("Email")?.enable(),this.userForm.get("ClientCount")?.enable(),this.userForm.get("PartnerId")?.enable(),this.userForm.get("Id")?.enable(),this.userForm.get("Type")?.enable(),this.userForm.get("CurrencyId")?.enable(),this.userForm.get("LanguageId")?.enable(),this.userForm.get("FirstName")?.enable(),this.userForm.get("LastName")?.enable(),this.userForm.get("GenderName")?.enable(),this.userForm.get("TypeName")?.enable()}createForm(){this.userForm=this.fb.group({Id:[null],PartnerId:[null],UserName:[null],ClientCount:[null],FirstName:[null],CurrencyId:[null],LastName:[null],LanguageId:[null],Email:[null],State:[null],StateName:[null],Gender:[null],GenderName:[null],Type:[null],TypeName:[null],CreationTime:[null,[a.AQ.required]],Password:[null,[a.AQ.required,a.AQ.minLength(8)]]})}getFormattedDate(){const e=this.userForm.get("CreationTime")?.value;return null!=e?this.datePipe.transform(e,"dd/MM/yyyy HH:mm")??"":""}onCancel(){this.toggleEditMode()}onSubmit(){const e={ObjectId:this.userForm.get("Id")?.value,Password:this.userForm.get("Password")?.value,State:this.userForm.get("State")?.value};this.agentService.updateAgent(e).subscribe(n=>{0===n.ResponseCode?this.toggleEditMode():this.snackbarService.showError(n.Description)})}onNavigateToClient(){this.route.navigate(["main/clients/client"])}static#t=this.\u0275fac=function(n){return new(n||r)(t.GI1(O.Y),t.GI1(M.Y),t.GI1(d.gV),t.GI1(d.E5),t.GI1(P.i),t.GI1(b.s),t.GI1(a.im))};static#e=this.\u0275cmp=t.In1({type:r,selectors:[["app-agent-main-info"]],standalone:!0,features:[t.UHJ],decls:117,vars:42,consts:[[1,"content-action"],[1,"title"],[1,"edit-btn",3,"click"],[1,"user-profile"],[1,"user-details",3,"formGroup"],[1,"form-row"],[1,"form-label"],["for","Id"],[1,"form-input"],["appearance","outline"],["matInput","","type","text","id","Id","formControlName","Id","readonly",""],["for","PartnerId"],["matInput","","type","text","id","PartnerId","formControlName","PartnerId","readonly",""],["for","UserName"],["matInput","","type","text","id","UserName","formControlName","UserName","readonly",""],["for","ClientCount"],["matInput","","type","text","id","ClientCount","formControlName","ClientCount","readonly",""],["for","FirstName"],["matInput","","type","text","id","FirstName","formControlName","FirstName","readonly",""],["for","CurrencyId"],["matInput","","type","text","id","CurrencyId","formControlName","CurrencyId","readonly",""],["for","LastName"],["matInput","","type","text","id","LastName","formControlName","LastName","readonly",""],["for","LanguageId"],["matInput","","type","text","id","LanguageId","formControlName","LanguageId","readonly",""],["for","Email"],["matInput","","type","email","id","Email","formControlName","Email","readonly",""],["for","Gender"],["matInput","","type","text","id","GenderName","formControlName","GenderName","readonly",""],["for","Type"],["matInput","","type","text","id","TypeName","formControlName","TypeName","readonly",""],["for","State"],["for","CreationTime"],["matInput","","type","text","id","CreationTime","readonly","",3,"value","disabled"],["for","Password"],["matInput","","type","password","placeholder","*******","id","Password","formControlName","Password",3,"readonly"],["class","actions"],["matInput","","type","text","id","StateName","formControlName","StateName","readonly",""],["placeholder","Select State","formControlName","State"],[3,"value","disabled"],[1,"actions"],["mat-stroked-button","",1,"mat-cancel-btn",3,"click"],["mat-stroked-button","","type","submit",1,"mat-btn",3,"disabled","click"]],template:function(n,o){1&n&&(t.I0R(0,"div",0),t.wR5(1,"div",1),t.I0R(2,"button",2),t.qCj("click",function(){return o.toggleEditMode()}),t.OEk(3),t.C$Y()(),t.I0R(4,"div",3)(5,"form",4)(6,"div",5)(7,"div",6)(8,"label",7),t.OEk(9),t.wVc(10,"translate"),t.C$Y()(),t.I0R(11,"div",8)(12,"mat-form-field",9),t.wR5(13,"input",10),t.C$Y()()(),t.I0R(14,"div",5)(15,"div",6)(16,"label",11),t.OEk(17),t.wVc(18,"translate"),t.C$Y()(),t.I0R(19,"div",8)(20,"mat-form-field"),t.wR5(21,"input",12),t.C$Y()()(),t.I0R(22,"div",5)(23,"div",6)(24,"label",13),t.OEk(25),t.wVc(26,"translate"),t.C$Y()(),t.I0R(27,"div",8)(28,"mat-form-field"),t.wR5(29,"input",14),t.C$Y()()(),t.I0R(30,"div",5)(31,"div",6)(32,"label",15),t.OEk(33),t.wVc(34,"translate"),t.C$Y()(),t.I0R(35,"div",8)(36,"mat-form-field"),t.wR5(37,"input",16),t.C$Y()()(),t.I0R(38,"div",5)(39,"div",6)(40,"label",17),t.OEk(41),t.wVc(42,"translate"),t.C$Y()(),t.I0R(43,"div",8)(44,"mat-form-field"),t.wR5(45,"input",18),t.C$Y()()(),t.I0R(46,"div",5)(47,"div",6)(48,"label",19),t.OEk(49),t.C$Y()(),t.I0R(50,"div",8)(51,"mat-form-field"),t.wR5(52,"input",20),t.C$Y()()(),t.I0R(53,"div",5)(54,"div",6)(55,"label",21),t.OEk(56),t.wVc(57,"translate"),t.C$Y()(),t.I0R(58,"div",8)(59,"mat-form-field"),t.wR5(60,"input",22),t.C$Y()()(),t.I0R(61,"div",5)(62,"div",6)(63,"label",23),t.OEk(64),t.wVc(65,"translate"),t.C$Y()(),t.I0R(66,"div",8)(67,"mat-form-field"),t.wR5(68,"input",24),t.C$Y()()(),t.I0R(69,"div",5)(70,"div",6)(71,"label",25),t.OEk(72,"Email:"),t.C$Y()(),t.I0R(73,"div",8)(74,"mat-form-field"),t.wR5(75,"input",26),t.C$Y()()(),t.I0R(76,"div",5)(77,"div",6)(78,"label",27),t.OEk(79),t.wVc(80,"translate"),t.C$Y()(),t.I0R(81,"div",8)(82,"mat-form-field"),t.wR5(83,"input",28),t.C$Y()()(),t.I0R(84,"div",5)(85,"div",6)(86,"label",29),t.OEk(87),t.C$Y()(),t.I0R(88,"div",8)(89,"mat-form-field"),t.wR5(90,"input",30),t.C$Y()()(),t.I0R(91,"div",5)(92,"div",6)(93,"label",31),t.OEk(94),t.wVc(95,"translate"),t.C$Y()(),t.I0R(96,"div",8),t.yuY(97,I,2,0,"mat-form-field")(98,y,4,0),t.C$Y()(),t.I0R(99,"div",5)(100,"div",6)(101,"label",32),t.OEk(102),t.wVc(103,"translate"),t.C$Y()(),t.I0R(104,"div",8)(105,"mat-form-field"),t.wR5(106,"input",33),t.C$Y()()(),t.I0R(107,"div",5)(108,"div",6)(109,"label",34),t.OEk(110),t.wVc(111,"translate"),t.C$Y()(),t.I0R(112,"div",8)(113,"mat-form-field"),t.wR5(114,"input",35),t.C$Y()()(),t.wR5(115,"div"),t.yuY(116,E,5,3,"div",36),t.C$Y()()),2&n&&(t.yG2(3),t.cNF("Edit"),t.yG2(2),t.E7m("formGroup",o.userForm),t.yG2(4),t.oRS("",t.kDX(10,20,"Common.Id"),":"),t.yG2(8),t.oRS("",t.kDX(18,22,"Common.PartnerId"),":"),t.yG2(8),t.oRS("",t.kDX(26,24,"Common.UserName"),":"),t.yG2(8),t.oRS("",t.kDX(34,26,"Common.ClientCount"),":"),t.yG2(8),t.oRS("",t.kDX(42,28,"Common.FirstName"),":"),t.yG2(8),t.oRS("","Common.Currency",":"),t.yG2(7),t.oRS("",t.kDX(57,30,"Common.LastName"),":"),t.yG2(8),t.oRS("",t.kDX(65,32,"Common.Language"),":"),t.yG2(15),t.oRS("",t.kDX(80,34,"Gender"),":"),t.yG2(8),t.oRS("","Common.Type",":"),t.yG2(7),t.oRS("",t.kDX(95,36,"Common.State"),":"),t.yG2(3),t.C0Y(97,o.editMode?98:97),t.yG2(5),t.oRS("",t.kDX(103,38,"Common.CreationTime"),":"),t.yG2(4),t.E7m("value",o.getFormattedDate())("disabled",o.editMode),t.yG2(4),t.oRS("",t.kDX(111,40,"Common.Password"),":"),t.yG2(4),t.E7m("readonly",!o.editMode),t.yG2(2),t.C0Y(116,o.editMode?116:-1))},dependencies:[a.y,a.sz,a.ot,a.ue,a.u,a.sl,a.uW,a.Wo,c.oJ,c.Gw,g.wb,g.Up,u.cN,u.yi,f.oB,p.d5,p.kX,h.I5,d.qQ,C.O0,C.sD],styles:[".content-action[_ngcontent-%COMP%]{height:6%;display:flex;align-items:center;flex-wrap:wrap;padding-right:10px;padding-left:10px;margin-bottom:20px}.content-action[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.04em;color:#076192;flex:1;padding-left:10px}.content-action[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#076192}.content-action[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#000}.content-action[_ngcontent-%COMP%]   .edit-btn[_ngcontent-%COMP%]{margin-left:auto;background-color:#239dff;padding:10px;border:1px solid #239dff;min-width:104px;color:#fff;border-radius:4px;font-size:16px;font-weight:500}.content-action[_ngcontent-%COMP%]   .edit-btn.disabled[_ngcontent-%COMP%]{opacity:.7;pointer-events:none}.content-action[_ngcontent-%COMP%]   .edit-btn[_ngcontent-%COMP%]:hover{border:1px solid #076192;background-color:#dbecf8;color:#000}.user-profile[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:10px;padding-left:10px;padding-right:10px}.user-profile[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:left}.user-profile[_ngcontent-%COMP%]   .edit-button[_ngcontent-%COMP%]{float:right;margin-right:10px;padding:5px 10px}.user-profile[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:20px}.user-profile[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:flex;align-items:center;position:relative;min-height:50px}.user-profile[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{position:absolute;min-height:45px;padding:0 10px;top:12%;border-radius:4px;width:33%;display:flex;align-items:center;background-color:#dbecf8;color:#0573ba;font-size:16px;font-weight:400;line-height:19px;letter-spacing:.04em;text-align:left}.user-profile[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .editMode[_ngcontent-%COMP%]{border:1px solid red}.user-profile[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{position:absolute;min-height:46px;border-radius:4px;top:11%;left:36%;width:64%;display:flex;align-items:center;box-sizing:border-box;font-size:16px;letter-spacing:.04em;text-align:left;word-break:break-all;overflow:auto}.user-profile[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.user-profile[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:5px}.user-profile[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;column-gap:6px}.user-profile[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .mat-btn[_ngcontent-%COMP%]{background-color:#239dff;padding:10px;border:1px solid #239dff;min-width:104px;color:#fff;border-radius:4px;font-size:16px;font-weight:500}.user-profile[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .mat-btn.disabled[_ngcontent-%COMP%]{opacity:.7;pointer-events:none}.user-profile[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .mat-btn[_ngcontent-%COMP%]:hover{border:1px solid #076192;background-color:#dbecf8;color:#000}.user-profile[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .mat-btn.disabled[_ngcontent-%COMP%]{color:#076192!important;background-color:#a0c4d8;pointer-events:none}.user-profile[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .mat-btn.disabled[_ngcontent-%COMP%]   .mat-button-wrapper[_ngcontent-%COMP%]{color:#076192!important}.user-profile[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .mat-btn[_ngcontent-%COMP%]:hover{cursor:pointer;border:1px solid #076192;background:linear-gradient(#076192,#258ecd 50%,#0573ba)}.user-profile[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .mat-cancel-btn[_ngcontent-%COMP%]{background-color:#239dff;padding:10px;border:1px solid #239dff;min-width:104px;color:#fff;border-radius:4px;font-size:16px;font-weight:500;background:none;color:#000;border:1px solid var(--text-3, rgb(89, 89, 89))}.user-profile[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .mat-cancel-btn.disabled[_ngcontent-%COMP%]{opacity:.7;pointer-events:none}.user-profile[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .mat-cancel-btn[_ngcontent-%COMP%]:hover{border:1px solid #076192;background-color:#dbecf8;color:#000}.user-profile[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .mat-cancel-btn[_ngcontent-%COMP%]:hover{border:1px solid #076192;background:#c4c4c4}.user-profile[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .mat-cancel-btn[_ngcontent-%COMP%]:hover   .mat-button-wrapper[_ngcontent-%COMP%]{color:#076192!important}@media screen and (max-width: 768px){.content-action[_ngcontent-%COMP%]{margin-top:43px}.user-profile[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr!important}.user-profile[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{flex-direction:column}.user-profile[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{position:static;padding:0;width:100%;font-size:18px;color:var(--main, rgb(33, 150, 243));margin-bottom:4px}.user-profile[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding-left:16px}.user-profile[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{position:static;width:100%}}"]})}return r})()}}]);