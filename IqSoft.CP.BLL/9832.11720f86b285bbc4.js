"use strict";(self.webpackChunkAgentManagmentSystem=self.webpackChunkAgentManagmentSystem||[]).push([[9832],{516:(E,P,i)=>{i.d(P,{E:()=>v});var h=i(2116),r=i(7408),O=i(7672),y=(i(7024),i(5648));let v=(()=>{class f extends r.K{constructor(a){super(a),this.filterService=(0,h.uUt)(y.q),this.pagination=!0,this.paginationAutoPageSize=!1,this.paginationPageSize=100,this.cacheBlockSize=100,this.suppressPaginationPanel=!1,this.rowModelType=O.kt.SERVER_SIDE,this.serverSideStoreType="full",this.pageSizes=[100,500,1e3,2e3,5e3],this.defaultPageSize=100,this.paginationPage=1,this.defaultColDef={flex:1,editable:!1,filter:"agTextColumnFilter",resizable:!0,unSortIcon:!1,menuTabs:["filterMenuTab","generalMenuTab"],minWidth:15}}onFilterModified(a){this.colId=a.column.colId}keyPressHandler(a){if(document.querySelector(".ag-theme-balham .ag-popup")&&this.colId&&this.gridApi&&"13"===a.key){const g=this.gridApi.getFilterInstance(this.colId);this.colId=void 0,g&&g.applyModel(),this.gridApi.onFilterChanged(),this.gridApi.hidePopupMenu()}}onPaginationChanged(a){const c=this.gridApi?.paginationGetCurrentPage();isNaN(c)||(this.paginationPage=c+1)}onPaginationGoToPage(a){"Enter"===a.key&&(a.preventDefault(),this.gridApi?.paginationGoToPage(this.paginationPage-1))}setFilter(a,c){this.isEmpty(a)||Object.entries(a).forEach(([g,s])=>{const C=g+"s";if(c[C]={ApiOperationTypeList:[],IsAnd:this.getIsAnd(s.operator)},s.hasOwnProperty("condition1")&&s.condition1&&c[C].ApiOperationTypeList.push(this.mapFilterData(s.condition1)),s.hasOwnProperty("condition2")&&s.condition2)c[C].ApiOperationTypeList.push(this.mapFilterData(s.condition2));else{if(0===s.ApiOperationTypeList?.length)return;c[C].ApiOperationTypeList.push(this.mapFilterData(s))}})}mapFilterData(a){const c={OperationTypeId:a.type};switch(a.filterType){case"number":const g=parseFloat(a.filter);isNaN(g)||(c.DecimalValue=g,c.IntValue=Math.round(g));break;case"text":void 0!==a.filter&&(c.StringValue=a.filter);break;case"date":c.DateTimeValue=void 0!==a.dateFrom?a.dateFrom:new Date;break;case"boolean":void 0!==a.filter&&(c.BooleanValue=1===a.filter);break;case"set":c.OperationTypeId=11,void 0!==a.values&&(c.ArrayValue=a.values)}return console.log(c,"appendedFilter"),c}setFilterDropdown(a,c){const g=a.request.filterModel;for(const s of c)g[s]&&!g[s].filter&&(g[s].hasOwnProperty("condition1")?(g[s].condition1.filter=g[s].condition1.type,g[s].condition2.filter=g[s].condition2.type,g[s].condition1.type=1,g[s].condition2.type=1):(g[s].filter=g[s].type,g[s].type=1))}changeFilerName(a,c,g){for(let s=0;s<c.length;s++){const C=c[s];a[C]&&(a[g[s]]=a[C],delete a[C])}}static#e=this.\u0275fac=function(c){return new(c||f)(h.GI1(h.zZn))};static#t=this.\u0275dir=h.Sc5({type:f,standalone:!0,features:[h.eg9]})}return f})()},7084:(E,P,i)=>{i.d(P,{s:()=>h});var h=function(r){return r[r.Agents=215]="Agents",r[r.Clients=216]="Clients",r[r.Users=217]="Users",r[r.ReferralLinks=218]="ReferralLinks",r[r.Announcement=219]="Announcement",r[r.ReportByBetShops=223]="ReportByBetShops",r[r.ReportByInternetClientBets=225]="ReportByInternetClientBets",r[r.ReportByAgents=227]="ReportByAgents",r[r.ReportByAgentsCasion=228]="ReportByAgentsCasion",r[r.ReportByTransactions=229]="ReportByTransactions",r[r.Deposits=231]="Deposits",r[r.Withdrawals=232]="Withdrawals",r[r.PaymentForms=233]="PaymentForms",r[r.Tickets=234]="Tickets",r}(h||{})},9832:(E,P,i)=>{i.r(P),i.d(P,{AgentsComponent:()=>U});var h=i(1528),r=i(2864),O=i(2100),M=i(1368),y=i(6504),v=i(6692),f=i(7816),R=i(7672),a=i(2064),c=i(7084),g=i(3992),s=i(4796),C=i(9120),b=i(3576),T=i(516),t=i(2116),S=i(9288),I=i(9112),L=i(2236),B=i(8196);function w(u,D){if(1&u){const e=t.KQA();t.I0R(0,"button",8),t.qCj("click",function(){t.usT(e);const n=t.GaO();return t.CGJ(n.onCreateAgent())}),t.OEk(1),t.wVc(2,"translate"),t.C$Y()}2&u&&(t.yG2(),t.cNF(t.kDX(2,1,"Common.AddAgent")))}function W(u,D){if(1&u){const e=t.KQA();t.I0R(0,"button",8),t.qCj("click",function(){t.usT(e);const n=t.GaO();return t.CGJ(n.onCreateAgent())}),t.OEk(1),t.wVc(2,"translate"),t.C$Y()}2&u&&(t.yG2(),t.cNF(t.kDX(2,1,"Clients.AddClient")))}function F(u,D){1&u&&t.wR5(0,"router-outlet")}const x=u=>({hide:u});let U=(()=>{class u extends T.E{constructor(e,o,n,l,d,A,_){super(_),this.agentService=e,this.clientService=o,this.dialog=n,this.activateRoute=l,this.enumService=d,this.localStorageService=A,this.frameworkComponents={numericEditor:s.K},this.rowData=[],this.genders=[],this.agentLevel="",this.defaultColDef={width:240,editable:!1,flex:1,sortable:!1,resizable:!0,filter:!1,suppressMenu:!0,minWidth:50},this.autoGroupColumnDef={headerName:"Id",field:"Id",checkboxSelection:!1,cellRenderer:"agGroupCellRenderer",cellRendererParams:{innerRenderer:m=>m.data.Id}},this.isServerSideGroup=m=>m.group,this.getServerSideGroupKey=m=>m.Id,this.getDataPath=m=>m.groupKey,this.createServerSideDatasource=()=>({getRows:m=>{const p={WithClients:!1,WithDownlines:!1};this.setSort(m.request.sortModel,p),this.setFilter(m.request.filterModel,p),m.parentNode.data?(p.ParentId=String(m.parentNode.data.Id),delete p.Level,6===m.parentNode.data?.Level?this.getClients(p,m):this.getAgents(p,m)):(p.Level=this.level,"7"===this.level?this.getClients(p,m):this.getAgents(p,m))}}),this.adminMenuId=c.s.Agents,this.setColDefs()}ngOnInit(){this.activateRoute.queryParamMap.subscribe(e=>{this.level=e.get("level"),this.getCurrentPage(),this.setAgentLevel()}),this.genders=this.localStorageService.get("enums")?.genders,this.getUserStateEnum(),this.getUserTypesEnum(),this.getUserLevelTypes()}onGridReady(e){super.onGridReady(e),this.gridApi?.setServerSideDatasource(this.createServerSideDatasource())}setColDefs(){this.columnDefs=[{headerName:"Common.Email",headerValueGetter:this.localizeHeader.bind(this),field:"Email",filter:"agTextColumnFilter",minWidth:90,sortable:!0},{headerName:"Common.UserName",headerValueGetter:this.localizeHeader.bind(this),field:"UserName",filter:"agTextColumnFilter",minWidth:90,sortable:!0},{headerName:"Common.Balance",headerValueGetter:this.localizeHeader.bind(this),field:"Balance",filter:!1,minWidth:90,sortable:!0},{headerName:"Common.ClientCount",headerValueGetter:this.localizeHeader.bind(this),field:"ClientCount",filter:!1,minWidth:90,sortable:!0},{headerName:"Common.Gender",headerValueGetter:this.localizeHeader.bind(this),field:"Gender",cellRenderer:e=>{const o=e.value,n=this.genders?.find(l=>l.Id===o);if(n)return n.Name},minWidth:90,filter:"agSetColumnFilter",sortable:!0,filterParams:{values:this.genders.map(e=>e.Id),debounceMs:200,suppressFilterButton:!0,valueFormatter:e=>e.value=this.genders.find(o=>o.Id==e.value)?.Name}},{headerName:"Common.FirstName",headerValueGetter:this.localizeHeader.bind(this),field:"FirstName",filter:"agTextColumnFilter",sortable:!0,minWidth:90},{headerName:"Common.LastName",headerValueGetter:this.localizeHeader.bind(this),field:"LastName",filter:"agTextColumnFilter",sortable:!0,minWidth:90},{headerName:"Common.Language",headerValueGetter:this.localizeHeader.bind(this),field:"LanguageId",filter:"agTextColumnFilter",sortable:!0,minWidth:90},{headerName:"Common.Currency",headerValueGetter:this.localizeHeader.bind(this),field:"CurrencyId",filter:"agTextColumnFilter",minWidth:90},{headerName:"Level",headerValueGetter:this.localizeHeader.bind(this),field:"Level",sortable:!0,minWidth:90,cellRenderer:e=>{const o=e.value,n=this.userLevelTypes?.find(l=>l.Id===o);if(n)return n.Name},filter:!1},{headerName:"Common.State",headerValueGetter:this.localizeHeader.bind(this),field:"State",minWidth:90,sortable:!0,cellRenderer:e=>{const o=e.value,n=this.userStateEnum?.find(l=>l.Id===o);if(n)return n.Name},filter:"agSetColumnFilter",filterParams:{values:this.userStateEnum?.map(e=>e.Id),debounceMs:200,suppressFilterButton:!0,valueFormatter:e=>e.value=this.userStateEnum?.find(o=>o.Id==e.value)?.Name}},{headerName:"Common.CreationTime",headerValueGetter:this.localizeHeader.bind(this),field:"CreationTime",minWidth:90,sortable:!0,cellRenderer:function(e){return`${new M.y("en-US").transform(e.data?.CreationTime,"medium")}`},filter:!1},{headerName:"Common.View",headerValueGetter:this.localizeHeader.bind(this),filter:!1,minWidth:30,cellRenderer:e=>e.node.rowPinned?"":'<i style="color:rgba(33, 150, 243, 1); cursor: pointer; margin-left: 0!important" class="material-icons">\n            visibility\n          </i>',onCellClicked:e=>{7===e.data.Level?this.toRedirectToClient(e):this.toRedirectToAgent(e)},pinned:"right",width:1}]}getUserLevelTypes(){this.enumService.getAgentLevels().subscribe(e=>{0===e.ResponseCode&&(this.userLevelTypes=e.ResponseObject,this.setAgentLevel())})}setAgentLevel(){this.agentLevel=this.userLevelTypes?.find(e=>e.Id==this.level)?.Name}getUserStateEnum(){this.enumService.getUserStateEnum().subscribe(e=>{0===e.ResponseCode&&(this.userStateEnum=e.ResponseObject,this.setColDefs())})}getUserTypesEnum(){this.enumService.getUserTypes().subscribe(e=>{0===e.ResponseCode&&(this.userTypes=e.ResponseObject)})}onCreateAgent(){var e=this;return(0,h.c)(function*(){const{CreateAgentComponent:o}=yield Promise.all([i.e(2096),i.e(1560),i.e(3840),i.e(2436)]).then(i.bind(i,2436));e.dialog.open(o,{width:R.il.MEDIUM,data:{level:+e.level,agentLevel:e.agentLevel}}).afterClosed().subscribe(l=>{l&&e.getCurrentPage()})})()}onCreateClient(){return(0,h.c)(function*(){})()}toRedirectToClient(e){this.router.navigate(["/main/clients/client/main"],{queryParams:{clientId:e.data.Id}})}toRedirectToAgent(e){this.router.navigate(["/main/agents/agent/main"],{queryParams:{agentId:e.data.Id}})}getRows(){this.agentService.getAgents({Level:this.level,WithClients:!1,WithDownlines:!1}).pipe((0,g.U)(1)).subscribe(o=>{let n=[];this.rowData=o.ResponseObject.Agents.Entities.forEach(d=>{this.handleDataRecursively(o.ResponseObject.Agents.Entities,d,n)});const l=n.flatMap(d=>d);this.rowData=l})}handleDataRecursively(e,o,n){o.groupKey=Array.isArray(o.groupKey)?o.groupKey:[o.Id];const l=n.find(_=>_[0].ParentId===o.Id),d=l||[o];return d.some(_=>_.Id===o.Id)||d.push(o),l||n.push(d),e.filter(_=>_.ParentId===o.Id).forEach(_=>{_.groupKey=[...o.groupKey,_.Id],n=this.handleDataRecursively(e,_,n)}),n}getAgents(e,o){this.agentService.getAgents(e).subscribe(n=>{if(0===n.ResponseCode){const l=n.ResponseObject.Agents.Entities;Array.isArray(l)&&(l.forEach(d=>{d.group=!0}),o.success({rowData:l,rowCount:l.length}))}})}getClients(e,o){this.clientService.getClients(e).subscribe(n=>{if(0===n.ResponseCode){const l=n.ResponseObject.Entities;Array.isArray(l)&&(l.forEach(d=>{d.group=!1}),o.success({rowData:l,rowCount:l.length}))}})}static#e=this.\u0275fac=function(o){return new(o||u)(t.GI1(S.Y),t.GI1(I.i),t.GI1(r.qW),t.GI1(O.gV),t.GI1(L.Y),t.GI1(B.s),t.GI1(t.zZn))};static#t=this.\u0275cmp=t.In1({type:u,selectors:[["app-agents"]],standalone:!0,features:[t.eg9,t.UHJ],decls:12,vars:29,consts:[[1,"container",3,"ngClass"],[1,"content-action"],[1,"title"],[1,"grid-content"],["rowSelection","single",1,"ag-theme-balham",3,"headerHeight","rowHeight","rowData","autoGroupColumnDef","suppressCopyRowsToClipboard","suppressRowClickSelection","rowModelType","columnDefs","defaultColDef","treeData","animateRows","ensureDomOrder","enableCellTextSelection","cacheBlockSize","components","isServerSideGroup","getServerSideGroupKey","getContextMenuItems","sideBar","gridReady","columnPinned","columnMoved","columnResized","columnVisible"],[1,"footer-ag-grid"],[1,"match-action"],["mat-stroked-button","","class","mat-btn",3,"click",4,"ngIf"],["mat-stroked-button","",1,"mat-btn",3,"click"]],template:function(o,n){1&o&&(t.I0R(0,"div",0)(1,"div",1)(2,"div",2),t.OEk(3),t.wVc(4,"translate"),t.C$Y()(),t.I0R(5,"div",3)(6,"ag-grid-angular",4),t.qCj("gridReady",function(d){return n.onGridReady(d)})("columnPinned",function(d){return n.onColumnPinned(d)})("columnMoved",function(d){return n.onColumnMoved(d)})("columnResized",function(d){return n.onColumnResized(d)})("columnVisible",function(d){return n.onColumnVisible(d)}),t.C$Y(),t.I0R(7,"div",5)(8,"div",6),t.yuY(9,w,3,3,"button",7)(10,W,3,3,"button",7),t.C$Y()()()(),t.yuY(11,F,1,0,"router-outlet")),2&o&&(t.E7m("ngClass",t.S45(27,x,n.activateRoute.snapshot.queryParams.clientId)),t.yG2(3),t.CAO("",t.kDX(4,25,"Menus.Agents")," ",n.agentLevel," "),t.yG2(3),t.E7m("headerHeight",n.headerHeight)("rowHeight",n.rowHeight)("rowData",n.rowData)("autoGroupColumnDef",n.autoGroupColumnDef)("suppressCopyRowsToClipboard",!0)("suppressRowClickSelection",!0)("rowModelType",n.rowModelType)("columnDefs",n.columnDefs)("defaultColDef",n.defaultColDef)("treeData",!0)("animateRows",!0)("ensureDomOrder",!0)("enableCellTextSelection",!0)("cacheBlockSize",n.cacheBlockSize)("components",n.frameworkComponents)("isServerSideGroup",n.isServerSideGroup)("getServerSideGroupKey",n.getServerSideGroupKey)("getContextMenuItems",n.getContextMenuItems)("sideBar",n.sideBar),t.yG2(3),t.E7m("ngIf","7"!==n.level),t.yG2(),t.E7m("ngIf","7"===n.level),t.yG2(),t.C0Y(11,n.activateRoute.snapshot.queryParams.clientId?11:-1))},dependencies:[M.MD,M.QF,M.u_,y.y,v.Oc,v.U5,f.oJ,f.Gw,O.qQ,O.cP,a.O0,a.sD,C.iU,b.Ko,r.sr],styles:[".ag-theme-balham .ag-cell-wrapper{align-items:center}.container[_ngcontent-%COMP%]{width:100%;height:100%;padding:0 10px;box-sizing:border-box}.container[_ngcontent-%COMP%]   .content-action[_ngcontent-%COMP%]{height:6%;display:flex;align-items:center;flex-wrap:wrap;height:60px}.container[_ngcontent-%COMP%]   .content-action[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.04em;color:#076192;flex:1;padding-left:10px}.container[_ngcontent-%COMP%]   .content-action[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#076192}.container[_ngcontent-%COMP%]   .content-action[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#000}.container[_ngcontent-%COMP%]   .content-action[_ngcontent-%COMP%]   .mat-btn[_ngcontent-%COMP%]{margin-left:8px;background-color:#239dff;padding:10px;border:1px solid #239dff;min-width:104px;color:#fff;border-radius:4px;font-size:16px;font-weight:500}.container[_ngcontent-%COMP%]   .content-action[_ngcontent-%COMP%]   .mat-btn[_ngcontent-%COMP%]     .mat-button-wrapper{color:#fff!important}.container[_ngcontent-%COMP%]   .content-action[_ngcontent-%COMP%]   .mat-btn.disabled[_ngcontent-%COMP%]{color:#076192!important;background-color:#a0c4d8;pointer-events:none}.container[_ngcontent-%COMP%]   .content-action[_ngcontent-%COMP%]   .mat-btn.disabled[_ngcontent-%COMP%]     .mat-button-wrapper{color:#076192!important}.container[_ngcontent-%COMP%]   .content-action[_ngcontent-%COMP%]   .mat-btn[_ngcontent-%COMP%]:hover{cursor:pointer;border:1px solid #076192;background:linear-gradient(#076192,#258ecd 50%,#0573ba)}.container[_ngcontent-%COMP%]   .grid-content[_ngcontent-%COMP%]{width:100%;height:86%}.container[_ngcontent-%COMP%]   .grid-content[_ngcontent-%COMP%]     .ag-paging-panel{align-items:center;display:flex;justify-content:flex-end}.container[_ngcontent-%COMP%]   .grid-content[_ngcontent-%COMP%]     ag-grid-angular{width:100%;height:100%}.container[_ngcontent-%COMP%]   .grid-content[_ngcontent-%COMP%]   .footer-ag-grid[_ngcontent-%COMP%]{position:absolute;left:23%;bottom:14px;display:flex;align-items:center;width:77%}.container[_ngcontent-%COMP%]   .grid-content[_ngcontent-%COMP%]   .footer-ag-grid[_ngcontent-%COMP%]   .mat-select[_ngcontent-%COMP%]    {font-size:14px}.container[_ngcontent-%COMP%]   .grid-content[_ngcontent-%COMP%]   .footer-ag-grid[_ngcontent-%COMP%]   .mat-select[_ngcontent-%COMP%]     .mat-select{height:36px;border-radius:4px;display:flex!important;align-items:center;width:169px!important;padding:0 8px 0 10px;background-color:#0573ba}.container[_ngcontent-%COMP%]   .grid-content[_ngcontent-%COMP%]   .footer-ag-grid[_ngcontent-%COMP%]   .mat-select[_ngcontent-%COMP%]     .mat-select[aria-expanded=true] .mat-select-trigger .mat-select-arrow-wrapper .mat-select-arrow{border-bottom:5px solid #FFFFFF;border-top:5px solid transparent;margin:0 4px 4px}.container[_ngcontent-%COMP%]   .grid-content[_ngcontent-%COMP%]   .footer-ag-grid[_ngcontent-%COMP%]   .mat-select[_ngcontent-%COMP%]     .mat-select .mat-select-trigger .mat-select-value{color:#fff}.container[_ngcontent-%COMP%]   .grid-content[_ngcontent-%COMP%]   .footer-ag-grid[_ngcontent-%COMP%]   .mat-select[_ngcontent-%COMP%]     .mat-select .mat-select-trigger .mat-select-value .mat-select-placeholder{color:#fff;opacity:.9}.container[_ngcontent-%COMP%]   .grid-content[_ngcontent-%COMP%]   .footer-ag-grid[_ngcontent-%COMP%]   .mat-select[_ngcontent-%COMP%]     .mat-select .mat-select-trigger .mat-select-arrow-wrapper .mat-select-arrow{color:#fff}.container[_ngcontent-%COMP%]   .grid-content[_ngcontent-%COMP%]   .footer-ag-grid[_ngcontent-%COMP%]   .mat-select[_ngcontent-%COMP%]     .mat-select.mat-select-disabled{opacity:.7;pointer-events:none}.container[_ngcontent-%COMP%]   .grid-content[_ngcontent-%COMP%]   .footer-ag-grid[_ngcontent-%COMP%]   .match-action[_ngcontent-%COMP%]{margin-left:auto}.container[_ngcontent-%COMP%]   .grid-content[_ngcontent-%COMP%]   .footer-ag-grid[_ngcontent-%COMP%]   .match-action[_ngcontent-%COMP%]   .mat-btn[_ngcontent-%COMP%]{margin-right:10px;background-color:#239dff;padding:10px;border:1px solid #239dff;min-width:104px;color:#fff;border-radius:4px;font-size:16px;font-weight:500}.container[_ngcontent-%COMP%]   .grid-content[_ngcontent-%COMP%]   .footer-ag-grid[_ngcontent-%COMP%]   .match-action[_ngcontent-%COMP%]   .mat-btn[_ngcontent-%COMP%]     .mat-button-wrapper{color:#fff!important}.container[_ngcontent-%COMP%]   .grid-content[_ngcontent-%COMP%]   .footer-ag-grid[_ngcontent-%COMP%]   .match-action[_ngcontent-%COMP%]   .mat-btn.disabled[_ngcontent-%COMP%]{color:#076192!important;background-color:#a0c4d8;pointer-events:none}.container[_ngcontent-%COMP%]   .grid-content[_ngcontent-%COMP%]   .footer-ag-grid[_ngcontent-%COMP%]   .match-action[_ngcontent-%COMP%]   .mat-btn.disabled[_ngcontent-%COMP%]     .mat-button-wrapper{color:#076192!important}.container[_ngcontent-%COMP%]   .grid-content[_ngcontent-%COMP%]   .footer-ag-grid[_ngcontent-%COMP%]   .match-action[_ngcontent-%COMP%]   .mat-btn[_ngcontent-%COMP%]:hover{cursor:pointer;border:1px solid #076192;background:linear-gradient(#076192,#258ecd 50%,#0573ba)}@media screen and (max-width: 780px){.grid-content[_ngcontent-%COMP%]{height:82%!important}}"]})}return u})()}}]);