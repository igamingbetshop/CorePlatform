"use strict";(self.webpackChunkAgentManagmentSystem=self.webpackChunkAgentManagmentSystem||[]).push([[3904],{3904:(W,s,t)=>{t.r(s),t.d(s,{ReportByAgentsComponent:()=>I});var m=t(7084),_=t(516),h=t(1368),d=t(6504),g=t(6692),u=t(7816),C=t(2100),c=t(9196),p=t(4976),f=t(2064),P=t(1624),M=t(1560),O=t(4060),D=t(2096),E=t(8416),b=t(180),T=t(6232),R=t(9556),n=t(2116),A=t(3064),v=t(8196),B=t(748);let I=(()=>{class l extends _.E{constructor(a,o,e,i){super(i),this.reportService=a,this.localStorageService=o,this.snackbarService=e,this.rowData=[],this.genders=[],this.groupDefaultExpanded=0,this.defaultColDef={width:240,editable:!1,flex:1,sortable:!1,resizable:!0,filter:!1,suppressMenu:!0,minWidth:50},this.autoGroupColumnDef={headerName:"Agent Id",field:"AgentId",checkboxSelection:!1,cellRenderer:"agGroupCellRenderer",cellRendererParams:{innerRenderer:r=>r.data.AgentId}},this.isServerSideGroup=r=>r.group,this.getServerSideGroupKey=r=>r.AgentId,this.adminMenuId=m.s.ReportByAgents,this.userId=this.localStorageService.get("user")?.UserId,console.log(this.userId),this.columnDefs=[]}ngOnInit(){this.genders=this.localStorageService.get("enums")?.genders;const[a,o]=c.o.startDate();this.fromDate=a,this.toDate=o,this.setColDefs()}setColDefs(){this.columnDefs=[{headerName:"Common.AgentFirstName",headerValueGetter:this.localizeHeader.bind(this),field:"AgentFirstName",filter:!1,sortable:!0,minWidth:80},{headerName:"Common.AgentLastName",headerValueGetter:this.localizeHeader.bind(this),field:"AgentLastName",filter:!1,sortable:!0,minWidth:80},{headerName:"Common.AgentUserName",headerValueGetter:this.localizeHeader.bind(this),field:"AgentUserName",filter:!1,sortable:!0,minWidth:80},{headerName:"Common.TotalDepositCount",headerValueGetter:this.localizeHeader.bind(this),field:"TotalDepositCount",filter:!1,sortable:!0,minWidth:80},{headerName:"Common.TotalWithdrawCount",headerValueGetter:this.localizeHeader.bind(this),field:"TotalWithdrawCount",filter:!1,sortable:!0,minWidth:80},{headerName:"Common.TotalDepositAmount",headerValueGetter:this.localizeHeader.bind(this),field:"TotalDepositAmount",filter:!1,sortable:!0,minWidth:80},{headerName:"Common.TotalWithdrawAmount",headerValueGetter:this.localizeHeader.bind(this),field:"TotalWithdrawAmount",filter:!1,sortable:!0,minWidth:80},{headerName:"Common.TotalBetsCount",headerValueGetter:this.localizeHeader.bind(this),field:"TotalBetsCount",filter:!1,sortable:!0,minWidth:80},{headerName:"Common.TotalBetsAmount",headerValueGetter:this.localizeHeader.bind(this),field:"TotalBetsAmount",filter:!1,sortable:!0,minWidth:80},{headerName:"Common.TotalUnsettledBetsCount",headerValueGetter:this.localizeHeader.bind(this),field:"TotalUnsettledBetsCount",filter:!1,sortable:!0,minWidth:80},{headerName:"Common.TotalDeletedBetsCount",headerValueGetter:this.localizeHeader.bind(this),field:"TotalDeletedBetsCount",filter:!1,sortable:!0,minWidth:80},{headerName:"Common.TotalWinAmount",headerValueGetter:this.localizeHeader.bind(this),field:"TotalWinAmount",filter:!1,sortable:!0,minWidth:80},{headerName:"Common.TotalProfit",headerValueGetter:this.localizeHeader.bind(this),field:"TotalProfit",filter:!1,sortable:!0,minWidth:80},{headerName:"Common.TotalProfitPercent",headerValueGetter:this.localizeHeader.bind(this),field:"TotalProfitPercent",filter:!1,sortable:!0,minWidth:80},{headerName:"Common.TotalGGRCommission",headerValueGetter:this.localizeHeader.bind(this),field:"TotalGGRCommission",filter:!1,sortable:!0,minWidth:80},{headerName:"Common.TotalTurnoverCommission",headerValueGetter:this.localizeHeader.bind(this),field:"TotalProfitPercent",filter:!1,sortable:!0,minWidth:80}]}onDateChange(a){this.fromDate=a.fromDate,this.toDate=a.toDate,this.getCurrentPage()}onGridReady(a){super.onGridReady(a),this.gridApi?.setServerSideDatasource(this.createServerSideDatasource())}onPageSizeChanged(a){this.cacheBlockSize=a.value,this.gridApi?.paginationSetPageSize(Number(this.cacheBlockSize)),setTimeout(()=>{this.gridApi?.refreshServerSide({purge:!0})},0)}toRedirectToAgent(a){this.router.navigate(["/main/agents/agent/main"],{queryParams:{agentId:a.data.Id,level:a.data.Level}})}createServerSideDatasource(){return{getRows:a=>{let o=new p.E;o.SkipCount=this.paginationPage-1,o.TakeCount=Number(this.cacheBlockSize),o.FromDate=this.fromDate,o.ToDate=this.toDate,o.ParentId=this.userId,this.setSort(a.request.sortModel,o),this.setFilter(a.request.filterModel,o),this.getAgents(o,a)}}}getAgents(a,o){this.reportService.getAgentReports(a).subscribe(e=>{if(0===e.ResponseCode){const i=e.ResponseObject.Entities;Array.isArray(i)&&(i.forEach(r=>{r.group=!0}),o.success({rowData:i,rowCount:e.ResponseObject.Count}))}else this.snackbarService.showError(e.Description)})}static#e=this.\u0275fac=function(o){return new(o||l)(n.GI1(A.Q),n.GI1(v.s),n.GI1(B.i),n.GI1(n.zZn))};static#t=this.\u0275cmp=n.In1({type:l,selectors:[["app-report-by-agents"]],standalone:!0,features:[n.eg9,n.UHJ],decls:6,vars:18,consts:[[3,"title","toDateChange"],[1,"container"],[1,"grid-content"],["rowSelection","single",1,"ag-theme-balham",3,"headerHeight","rowHeight","rowData","suppressCopyRowsToClipboard","suppressRowClickSelection","rowModelType","columnDefs","defaultColDef","animateRows","ensureDomOrder","enableCellTextSelection","sideBar","pagination","masterDetail","getContextMenuItems","gridReady","columnPinned","columnMoved","columnResized","columnVisible"],[1,"footer-ag-grid"],[3,"cacheBlockSize","defaultPageSize","pageChange"]],template:function(o,e){1&o&&(n.I0R(0,"app-header",0),n.qCj("toDateChange",function(r){return e.onDateChange(r)}),n.C$Y(),n.I0R(1,"div",1)(2,"div",2)(3,"ag-grid-angular",3),n.qCj("gridReady",function(r){return e.onGridReady(r)})("columnPinned",function(r){return e.onColumnPinned(r)})("columnMoved",function(r){return e.onColumnMoved(r)})("columnResized",function(r){return e.onColumnResized(r)})("columnVisible",function(r){return e.onColumnVisible(r)}),n.C$Y(),n.I0R(4,"div",4)(5,"app-pagination",5),n.qCj("pageChange",function(r){return e.onPageSizeChanged(r)}),n.C$Y()()()()),2&o&&(n.E7m("title","Report By Agents"),n.yG2(3),n.E7m("headerHeight",e.headerHeight)("rowHeight",e.rowHeight)("rowData",e.rowData)("suppressCopyRowsToClipboard",!0)("suppressRowClickSelection",!0)("rowModelType",e.rowModelType)("columnDefs",e.columnDefs)("defaultColDef",e.defaultColDef)("animateRows",!0)("ensureDomOrder",!0)("enableCellTextSelection",!0)("sideBar",e.sideBar)("pagination",e.pagination)("masterDetail",!0)("getContextMenuItems",e.getContextMenuItems),n.yG2(2),n.E7m("cacheBlockSize",e.cacheBlockSize)("defaultPageSize",e.defaultPageSize))},dependencies:[h.MD,d.y,g.Oc,g.U5,u.oJ,C.qQ,c.k,f.O0,P.uE,M.oB,d.sl,O.wb,D.d5,E.cN,b.WG,T.CQ,R.i],styles:[".container[_ngcontent-%COMP%]{width:100%;height:100%;padding:0 10px;box-sizing:border-box;height:94%}.container[_ngcontent-%COMP%]   .grid-content[_ngcontent-%COMP%]{width:100%;height:100%}.container[_ngcontent-%COMP%]   .grid-content[_ngcontent-%COMP%]     ag-grid-angular{width:100%;height:100%}.container[_ngcontent-%COMP%]   .grid-content[_ngcontent-%COMP%]   .footer-ag-grid[_ngcontent-%COMP%]{position:absolute;left:16%;bottom:14px;display:flex;align-items:center;width:77%}.container[_ngcontent-%COMP%]   .grid-content[_ngcontent-%COMP%]   .footer-ag-grid[_ngcontent-%COMP%]   .mat-select[_ngcontent-%COMP%]    {font-size:14px}.container[_ngcontent-%COMP%]   .grid-content[_ngcontent-%COMP%]   .footer-ag-grid[_ngcontent-%COMP%]   .mat-select[_ngcontent-%COMP%]     .mat-select{height:36px;border-radius:4px;display:flex!important;align-items:center;width:169px!important;padding:0 8px 0 10px;background-color:#0573ba}.container[_ngcontent-%COMP%]   .grid-content[_ngcontent-%COMP%]   .footer-ag-grid[_ngcontent-%COMP%]   .mat-select[_ngcontent-%COMP%]     .mat-select[aria-expanded=true] .mat-select-trigger .mat-select-arrow-wrapper .mat-select-arrow{border-bottom:5px solid #FFFFFF;border-top:5px solid transparent;margin:0 4px 4px}.container[_ngcontent-%COMP%]   .grid-content[_ngcontent-%COMP%]   .footer-ag-grid[_ngcontent-%COMP%]   .mat-select[_ngcontent-%COMP%]     .mat-select .mat-select-trigger .mat-select-value{color:#fff}.container[_ngcontent-%COMP%]   .grid-content[_ngcontent-%COMP%]   .footer-ag-grid[_ngcontent-%COMP%]   .mat-select[_ngcontent-%COMP%]     .mat-select .mat-select-trigger .mat-select-value .mat-select-placeholder{color:#fff;opacity:.9}.container[_ngcontent-%COMP%]   .grid-content[_ngcontent-%COMP%]   .footer-ag-grid[_ngcontent-%COMP%]   .mat-select[_ngcontent-%COMP%]     .mat-select .mat-select-trigger .mat-select-arrow-wrapper .mat-select-arrow{color:#fff}.container[_ngcontent-%COMP%]   .grid-content[_ngcontent-%COMP%]   .footer-ag-grid[_ngcontent-%COMP%]   .mat-select[_ngcontent-%COMP%]     .mat-select.mat-select-disabled{opacity:.7;pointer-events:none}@media screen and (max-width: 780px){.footer-ag-grid[_ngcontent-%COMP%]{display:flex!important;bottom:4px!important;left:55%!important;width:45%!important;gap:3px!important}.footer-ag-grid[_ngcontent-%COMP%]   .match-action[_ngcontent-%COMP%]{display:flex!important}.footer-ag-grid[_ngcontent-%COMP%]   .match-action[_ngcontent-%COMP%]   .mat-btn[_ngcontent-%COMP%]{margin-right:10px;background-color:#239dff;padding:10px;border:1px solid #239dff;min-width:104px;color:#fff;border-radius:4px;font-size:16px;font-weight:500}.footer-ag-grid[_ngcontent-%COMP%]   .match-action[_ngcontent-%COMP%]   .mat-btn[_ngcontent-%COMP%]     .mat-button-wrapper{color:#fff!important}.footer-ag-grid[_ngcontent-%COMP%]   .match-action[_ngcontent-%COMP%]   .mat-btn.disabled[_ngcontent-%COMP%]{color:#076192!important;background-color:#a0c4d8;pointer-events:none}.footer-ag-grid[_ngcontent-%COMP%]   .match-action[_ngcontent-%COMP%]   .mat-btn.disabled[_ngcontent-%COMP%]     .mat-button-wrapper{color:#076192!important}.footer-ag-grid[_ngcontent-%COMP%]   .match-action[_ngcontent-%COMP%]   .mat-btn[_ngcontent-%COMP%]:hover{cursor:pointer;border:1px solid #076192;background:linear-gradient(#076192,#258ecd 50%,#0573ba)}.grid-content[_ngcontent-%COMP%]{height:100%!important}.container[_ngcontent-%COMP%]{height:86%}}@media screen and (max-width: 780px){.grid-content[_ngcontent-%COMP%]{height:82%!important}}"]})}return l})()}}]);