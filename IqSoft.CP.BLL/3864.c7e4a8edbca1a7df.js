"use strict";(self.webpackChunkAgentManagmentSystem=self.webpackChunkAgentManagmentSystem||[]).push([[3864],{3864:(D,l,r)=>{r.r(l),r.d(l,{ReportByAgentCasinoComponent:()=>O});var s=r(1368),m=r(6504),_=r(7816),C=r(2100),d=r(6692),g=r(9196),u=r(7408),p=r(7672),h=r(7084),a=r(2116),P=r(3064),M=r(2236),f=r(8196);let O=(()=>{class c extends u.K{constructor(e,n,t,i){super(i),this.reportService=e,this.enumService=n,this.localStorageService=t,this.rowData=[],this.rowModelType=p.kt.CLIENT_SIDE,this.autoGroupColumnDef={headerName:"Id",floatingFilter:!0,floatingFilterComponentParams:{suppressFilterButton:!0},checkboxSelection:!0,filter:"agNumberColumnFilter",cellRendererParams:{suppressCount:!0},minWidth:230},this.genders=[],this.groupDefaultExpanded=0,this.getDataPath=o=>o.groupKey,this.columnDefs=[],this.adminMenuId=h.s.ReportByAgentsCasion}ngOnInit(){const[e,n]=g.o.startDate();this.fromDate=e,this.toDate=n,this.genders=this.localStorageService.get("enums")?.genders,this.setColdefs(),this.getRows()}setColdefs(){this.columnDefs=[{headerName:"Common.UserName",headerValueGetter:this.localizeHeader.bind(this),field:"UserName"},{headerName:"Common.Gender",headerValueGetter:this.localizeHeader.bind(this),field:"Gender",cellRenderer:e=>{const n=e.value,t=this.genders?.find(i=>i.Id===n);return t?t.Name:"Unknown Gender"},filter:"agSetColumnFilter",filterParams:{values:this.genders.map(e=>e.Id),debounceMs:200,suppressFilterButton:!0,valueFormatter:e=>e.value=this.genders.find(n=>n.Id==e.value)?.Name}},{headerName:"Common.FirstName",headerValueGetter:this.localizeHeader.bind(this),field:"FirstName"},{headerName:"Common.LastName",headerValueGetter:this.localizeHeader.bind(this),field:"LastName"},{headerName:"Common.CurrencyId",headerValueGetter:this.localizeHeader.bind(this),field:"CurrencyId"},{headerName:"Common.ClientCount",headerValueGetter:this.localizeHeader.bind(this),field:"ClientCount",cellRenderer:e=>`${e.data.ClientCount}  (${e.data.DirectClientCount})`},{headerName:"Common.BetAmount",headerValueGetter:this.localizeHeader.bind(this),field:"TotalBetAmount",cellRenderer:e=>`${e.data.TotalBetAmount}  (${e.data.DirectBetAmount})`},{headerName:"Common.WinAmount",headerValueGetter:this.localizeHeader.bind(this),field:"TotalWinAmount",cellRenderer:e=>`${e.data.TotalWinAmount}  (${e.data.DirectWinAmount})`},{headerName:"Common.GGR",headerValueGetter:this.localizeHeader.bind(this),field:"TotalGGR",cellRenderer:e=>`${e.data.TotalGGR}  (${e.data.DirectGGR})`},{headerName:"Common.GGRProfit",headerValueGetter:this.localizeHeader.bind(this),field:"TotalGGRProfit",cellRenderer:e=>`${e.data.TotalGGRProfit}  (${e.data.DirectGGRProfit})`},{headerName:"Common.TurnoverProfit",headerValueGetter:this.localizeHeader.bind(this),field:"TurnoverProfit",cellRenderer:e=>`${e.data.TotalTurnoverProfit}  (${e.data.DirectTurnoverProfit})`},{headerName:"Common.View",headerValueGetter:this.localizeHeader.bind(this),filter:!1,cellRenderer:e=>e.node.rowPinned?"":'<i style="color:#076192; cursor: pointer;" class="material-icons">\n            visibility\n          </i>',onCellClicked:e=>this.toRedirectToAgent(e)}]}onDateChange(e){this.fromDate=e.fromDate,this.toDate=e.toDate,this.getRows()}getRows(){this.reportService.getAgentCasinoReport(this.fromDate,this.toDate).subscribe(e=>{if(0===e.ResponseCode){let n=[];e.ResponseObject.forEach(t=>{null===t.ParentId&&(t.groupKey=[t.Id],n.push(t),this.handleDataRecursively(e.ResponseObject,t,n))}),this.rowData=n}})}handleDataRecursively(e,n,t){let i=e.filter(o=>o.ParentId===n.Id);i.length>0&&i.forEach(o=>{o.groupKey=[...n.groupKey,o.Id],t.push(o),this.handleDataRecursively(e,o,t)})}toRedirectToAgent(e){this.router.navigate(["/main/agents/agent/main"],{queryParams:{agentId:e.data.Id,level:e.data.Level}})}static#e=this.\u0275fac=function(n){return new(n||c)(a.GI1(P.Q),a.GI1(M.Y),a.GI1(f.s),a.GI1(a.zZn))};static#t=this.\u0275cmp=a.In1({type:c,selectors:[["app-report-by-agent-casino"]],standalone:!0,features:[a.eg9,a.UHJ],decls:4,vars:18,consts:[[3,"title","toDateChange"],[1,"container"],[1,"grid-content"],["rowSelection","single",1,"ag-theme-balham",3,"headerHeight","rowHeight","rowData","suppressCopyRowsToClipboard","suppressRowClickSelection","rowModelType","columnDefs","defaultColDef","animateRows","ensureDomOrder","sideBar","autoGroupColumnDef","treeData","groupDefaultExpanded","enableCellTextSelection","getDataPath","getContextMenuItems","gridReady","columnPinned","columnMoved","columnResized","columnVisible"]],template:function(n,t){1&n&&(a.I0R(0,"app-header",0),a.qCj("toDateChange",function(o){return t.onDateChange(o)}),a.C$Y(),a.I0R(1,"div",1)(2,"div",2)(3,"ag-grid-angular",3),a.qCj("gridReady",function(o){return t.onGridReady(o)})("columnPinned",function(o){return t.onColumnPinned(o)})("columnMoved",function(o){return t.onColumnMoved(o)})("columnResized",function(o){return t.onColumnResized(o)})("columnVisible",function(o){return t.onColumnVisible(o)}),a.C$Y()()()),2&n&&(a.E7m("title","Report By Agent Casin"),a.yG2(3),a.E7m("headerHeight",t.headerHeight)("rowHeight",t.rowHeight)("rowData",t.rowData)("suppressCopyRowsToClipboard",!0)("suppressRowClickSelection",!0)("rowModelType",t.rowModelType)("columnDefs",t.columnDefs)("defaultColDef",t.defaultColDef)("animateRows",!0)("ensureDomOrder",!0)("sideBar",t.sideBar)("autoGroupColumnDef",t.autoGroupColumnDef)("treeData",!0)("groupDefaultExpanded",t.groupDefaultExpanded)("enableCellTextSelection",!0)("getDataPath",t.getDataPath)("getContextMenuItems",t.getContextMenuItems))},dependencies:[s.MD,m.y,d.Oc,d.U5,_.oJ,C.qQ,g.k],styles:[".container[_ngcontent-%COMP%]{width:100%;height:100%;padding:0 10px;box-sizing:border-box;height:94%}.container[_ngcontent-%COMP%]   .content-action[_ngcontent-%COMP%]{height:6%;display:flex;align-items:center;flex-wrap:wrap;height:60px}.container[_ngcontent-%COMP%]   .content-action[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.04em;color:#076192;flex:1;padding-left:10px}.container[_ngcontent-%COMP%]   .content-action[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#076192}.container[_ngcontent-%COMP%]   .content-action[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#000}.container[_ngcontent-%COMP%]   .content-action[_ngcontent-%COMP%]   .mat-btn[_ngcontent-%COMP%]{margin-left:8px;background-color:#239dff;padding:10px;border:1px solid #239dff;min-width:104px;color:#fff;border-radius:4px;font-size:16px;font-weight:500}.container[_ngcontent-%COMP%]   .content-action[_ngcontent-%COMP%]   .mat-btn[_ngcontent-%COMP%]     .mat-button-wrapper{color:#fff!important}.container[_ngcontent-%COMP%]   .content-action[_ngcontent-%COMP%]   .mat-btn.disabled[_ngcontent-%COMP%]{color:#076192!important;background-color:#a0c4d8;pointer-events:none}.container[_ngcontent-%COMP%]   .content-action[_ngcontent-%COMP%]   .mat-btn.disabled[_ngcontent-%COMP%]     .mat-button-wrapper{color:#076192!important}.container[_ngcontent-%COMP%]   .content-action[_ngcontent-%COMP%]   .mat-btn[_ngcontent-%COMP%]:hover{cursor:pointer;border:1px solid #076192;background:linear-gradient(#076192,#258ecd 50%,#0573ba)}.container[_ngcontent-%COMP%]   .grid-content[_ngcontent-%COMP%]{width:100%;height:86%}.container[_ngcontent-%COMP%]   .grid-content[_ngcontent-%COMP%]     .ag-paging-panel{align-items:center;display:flex;justify-content:flex-end}.container[_ngcontent-%COMP%]   .grid-content[_ngcontent-%COMP%]     ag-grid-angular{width:100%;height:100%}.container[_ngcontent-%COMP%]   .grid-content[_ngcontent-%COMP%]   .footer-ag-grid[_ngcontent-%COMP%]{position:absolute;left:23%;bottom:14px;display:flex;align-items:center;width:77%}.container[_ngcontent-%COMP%]   .grid-content[_ngcontent-%COMP%]   .footer-ag-grid[_ngcontent-%COMP%]   .mat-select[_ngcontent-%COMP%]    {font-size:14px}.container[_ngcontent-%COMP%]   .grid-content[_ngcontent-%COMP%]   .footer-ag-grid[_ngcontent-%COMP%]   .mat-select[_ngcontent-%COMP%]     .mat-select{height:36px;border-radius:4px;display:flex!important;align-items:center;width:169px!important;padding:0 8px 0 10px;background-color:#0573ba}.container[_ngcontent-%COMP%]   .grid-content[_ngcontent-%COMP%]   .footer-ag-grid[_ngcontent-%COMP%]   .mat-select[_ngcontent-%COMP%]     .mat-select[aria-expanded=true] .mat-select-trigger .mat-select-arrow-wrapper .mat-select-arrow{border-bottom:5px solid #FFFFFF;border-top:5px solid transparent;margin:0 4px 4px}.container[_ngcontent-%COMP%]   .grid-content[_ngcontent-%COMP%]   .footer-ag-grid[_ngcontent-%COMP%]   .mat-select[_ngcontent-%COMP%]     .mat-select .mat-select-trigger .mat-select-value{color:#fff}.container[_ngcontent-%COMP%]   .grid-content[_ngcontent-%COMP%]   .footer-ag-grid[_ngcontent-%COMP%]   .mat-select[_ngcontent-%COMP%]     .mat-select .mat-select-trigger .mat-select-value .mat-select-placeholder{color:#fff;opacity:.9}.container[_ngcontent-%COMP%]   .grid-content[_ngcontent-%COMP%]   .footer-ag-grid[_ngcontent-%COMP%]   .mat-select[_ngcontent-%COMP%]     .mat-select .mat-select-trigger .mat-select-arrow-wrapper .mat-select-arrow{color:#fff}.container[_ngcontent-%COMP%]   .grid-content[_ngcontent-%COMP%]   .footer-ag-grid[_ngcontent-%COMP%]   .mat-select[_ngcontent-%COMP%]     .mat-select.mat-select-disabled{opacity:.7;pointer-events:none}.container[_ngcontent-%COMP%]   .grid-content[_ngcontent-%COMP%]   .footer-ag-grid[_ngcontent-%COMP%]   .match-action[_ngcontent-%COMP%]{margin-left:auto}.container[_ngcontent-%COMP%]   .grid-content[_ngcontent-%COMP%]   .footer-ag-grid[_ngcontent-%COMP%]   .match-action[_ngcontent-%COMP%]   .mat-btn[_ngcontent-%COMP%]{margin-right:10px;background-color:#239dff;padding:10px;border:1px solid #239dff;min-width:104px;color:#fff;border-radius:4px;font-size:16px;font-weight:500}.container[_ngcontent-%COMP%]   .grid-content[_ngcontent-%COMP%]   .footer-ag-grid[_ngcontent-%COMP%]   .match-action[_ngcontent-%COMP%]   .mat-btn[_ngcontent-%COMP%]     .mat-button-wrapper{color:#fff!important}.container[_ngcontent-%COMP%]   .grid-content[_ngcontent-%COMP%]   .footer-ag-grid[_ngcontent-%COMP%]   .match-action[_ngcontent-%COMP%]   .mat-btn.disabled[_ngcontent-%COMP%]{color:#076192!important;background-color:#a0c4d8;pointer-events:none}.container[_ngcontent-%COMP%]   .grid-content[_ngcontent-%COMP%]   .footer-ag-grid[_ngcontent-%COMP%]   .match-action[_ngcontent-%COMP%]   .mat-btn.disabled[_ngcontent-%COMP%]     .mat-button-wrapper{color:#076192!important}.container[_ngcontent-%COMP%]   .grid-content[_ngcontent-%COMP%]   .footer-ag-grid[_ngcontent-%COMP%]   .match-action[_ngcontent-%COMP%]   .mat-btn[_ngcontent-%COMP%]:hover{cursor:pointer;border:1px solid #076192;background:linear-gradient(#076192,#258ecd 50%,#0573ba)}"]})}return c})()}}]);