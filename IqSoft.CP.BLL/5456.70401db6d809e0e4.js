"use strict";(self.webpackChunkAgentManagmentSystem=self.webpackChunkAgentManagmentSystem||[]).push([[5456],{516:(D,h,s)=>{s.d(h,{E:()=>C});var c=s(2116),m=s(7408),g=s(7672),f=(s(7024),s(5648));let C=(()=>{class o extends m.K{constructor(e){super(e),this.filterService=(0,c.uUt)(f.q),this.pagination=!0,this.paginationAutoPageSize=!1,this.paginationPageSize=100,this.cacheBlockSize=100,this.suppressPaginationPanel=!1,this.rowModelType=g.kt.SERVER_SIDE,this.serverSideStoreType="full",this.pageSizes=[100,500,1e3,2e3,5e3],this.defaultPageSize=100,this.paginationPage=1,this.defaultColDef={flex:1,editable:!1,filter:"agTextColumnFilter",resizable:!0,unSortIcon:!1,menuTabs:["filterMenuTab","generalMenuTab"],minWidth:15}}onFilterModified(e){this.colId=e.column.colId}keyPressHandler(e){if(document.querySelector(".ag-theme-balham .ag-popup")&&this.colId&&this.gridApi&&"13"===e.key){const i=this.gridApi.getFilterInstance(this.colId);this.colId=void 0,i&&i.applyModel(),this.gridApi.onFilterChanged(),this.gridApi.hidePopupMenu()}}onPaginationChanged(e){const t=this.gridApi?.paginationGetCurrentPage();isNaN(t)||(this.paginationPage=t+1)}onPaginationGoToPage(e){"Enter"===e.key&&(e.preventDefault(),this.gridApi?.paginationGoToPage(this.paginationPage-1))}setFilter(e,t){this.isEmpty(e)||Object.entries(e).forEach(([i,n])=>{const a=i+"s";if(t[a]={ApiOperationTypeList:[],IsAnd:this.getIsAnd(n.operator)},n.hasOwnProperty("condition1")&&n.condition1&&t[a].ApiOperationTypeList.push(this.mapFilterData(n.condition1)),n.hasOwnProperty("condition2")&&n.condition2)t[a].ApiOperationTypeList.push(this.mapFilterData(n.condition2));else{if(0===n.ApiOperationTypeList?.length)return;t[a].ApiOperationTypeList.push(this.mapFilterData(n))}})}mapFilterData(e){const t={OperationTypeId:e.type};switch(e.filterType){case"number":const i=parseFloat(e.filter);isNaN(i)||(t.DecimalValue=i,t.IntValue=Math.round(i));break;case"text":void 0!==e.filter&&(t.StringValue=e.filter);break;case"date":t.DateTimeValue=void 0!==e.dateFrom?e.dateFrom:new Date;break;case"boolean":void 0!==e.filter&&(t.BooleanValue=1===e.filter);break;case"set":t.OperationTypeId=11,void 0!==e.values&&(t.ArrayValue=e.values)}return console.log(t,"appendedFilter"),t}setFilterDropdown(e,t){const i=e.request.filterModel;for(const n of t)i[n]&&!i[n].filter&&(i[n].hasOwnProperty("condition1")?(i[n].condition1.filter=i[n].condition1.type,i[n].condition2.filter=i[n].condition2.type,i[n].condition1.type=1,i[n].condition2.type=1):(i[n].filter=i[n].type,i[n].type=1))}changeFilerName(e,t,i){for(let n=0;n<t.length;n++){const a=t[n];e[a]&&(e[i[n]]=e[a],delete e[a])}}static#e=this.\u0275fac=function(t){return new(t||o)(c.GI1(c.zZn))};static#t=this.\u0275dir=c.Sc5({type:o,standalone:!0,features:[c.eg9]})}return o})()},4976:(D,h,s)=>{s.d(h,{E:()=>c});class c{constructor(){this.OrderBy=null}}},5456:(D,h,s)=>{s.r(h),s.d(h,{ReportByBetshopsComponent:()=>t});var c=s(516),m=s(9196),g=s(6692),_=s(1368),f=s(4976),C=s(7084),o=s(2116),P=s(3064),e=s(2236);let t=(()=>{class i extends c.E{constructor(a,p,l){super(l),this.reportsService=a,this.enumService=p,this.rowData=[],this.createServerSideDatasource=()=>({getRows:d=>{let r=new f.E;r.SkipCount=this.paginationPage-1,r.TakeCount=Number(this.cacheBlockSize),r.FromDate=this.fromDate,r.ToDate=this.toDate,this.setSort(d.request.sortModel,r),this.setFilter(d.request.filterModel,r),this.reportsService.getBetShopReport(r).subscribe(u=>{if(0===u.ResponseCode){const y=u.ResponseObject.Entities,R=u.ResponseObject.TotalBetAmount,E=u.ResponseObject.TotalWinAmount,M=u.ResponseObject.TotalProfit;this.rowData=u.ResponseObject.Entities,this.gridApi?.setPinnedBottomRowData([{BetAmount:`${R.toLocaleString("en-US",{maximumFractionDigits:2}).replace(/,/g," ")}`,WinAmount:`${E.toLocaleString("en-US",{maximumFractionDigits:2}).replace(/,/g," ")}`,Profit:`${M.toLocaleString("en-US",{maximumFractionDigits:2}).replace(/,/g," ")}`}]),d.success({rowData:y,rowCount:u.ResponseObject.Count})}})}}),this.adminMenuId=C.s.ReportByBetShops,this.columnDefs=[{headerName:"Common.Id",headerValueGetter:this.localizeHeader.bind(this),field:"Id",filter:!1,sortable:!0},{headerName:"Common.CahierId",headerValueGetter:this.localizeHeader.bind(this),field:"CahierId",filter:!1,sortable:!0},{headerName:"Common.ProductId",headerValueGetter:this.localizeHeader.bind(this),field:"ProductId",filter:!1,sortable:!0},{headerName:"Common.ProductName",headerValueGetter:this.localizeHeader.bind(this),field:"ProductName",filter:!1,sortable:!0},{headerName:"Common.ProviderName",headerValueGetter:this.localizeHeader.bind(this),field:"ProviderName",filter:!1,sortable:!0},{headerName:"Common.TicketNumber",headerValueGetter:this.localizeHeader.bind(this),field:"TicketNumber",filter:!1,sortable:!0},{headerName:"Common.BetAmount",headerValueGetter:this.localizeHeader.bind(this),field:"BetAmount",filter:!1,sortable:!0},{headerName:"Common.WinAmount",headerValueGetter:this.localizeHeader.bind(this),field:"WinAmount",filter:!1,sortable:!0},{headerName:"Common.Profit",headerValueGetter:this.localizeHeader.bind(this),field:"Profit",filter:!1,sortable:!0},{headerName:"Common.BetDate",headerValueGetter:this.localizeHeader.bind(this),field:"BetDate",filter:!1,sortable:!0,cellRenderer:function(d){let u=new _.y("en-US").transform(d.data.BetDate,"medium");return u?`${u}`:""}},{headerName:"Common.CalculationDate",headerValueGetter:this.localizeHeader.bind(this),field:"CalculationDate",filter:!1,sortable:!0,cellRenderer:function(d){let u=new _.y("en-US").transform(d.data.CalculationDate,"medium");return u?`${u}`:""}}]}ngOnInit(){const[a,p]=m.o.startDate();this.fromDate=a,this.toDate=p,this.setGameProviders()}setGameProviders(){this.enumService.getGameProviders().subscribe(a=>{0===a.ResponseCode&&(this.gameProviders=a.ResponseObject)})}onDateChange(a){this.fromDate=a.fromDate,this.toDate=a.toDate,this.getCurrentPage()}onGridReady(a){super.onGridReady(a),this.gridApi?.setServerSideDatasource(this.createServerSideDatasource())}static#e=this.\u0275fac=function(p){return new(p||i)(o.GI1(P.Q),o.GI1(e.Y),o.GI1(o.zZn))};static#t=this.\u0275cmp=o.In1({type:i,selectors:[["app-report-by-betshops"]],standalone:!0,features:[o.eg9,o.UHJ],decls:4,vars:14,consts:[[3,"title","toDateChange"],[1,"container"],[1,"grid-content"],["rowSelection","single",1,"ag-theme-balham",3,"headerHeight","rowHeight","rowData","suppressCopyRowsToClipboard","suppressRowClickSelection","rowModelType","columnDefs","defaultColDef","animateRows","ensureDomOrder","enableCellTextSelection","sideBar","getContextMenuItems","gridReady","columnPinned","columnMoved","columnResized","columnVisible"]],template:function(p,l){1&p&&(o.I0R(0,"app-header",0),o.qCj("toDateChange",function(r){return l.onDateChange(r)}),o.C$Y(),o.I0R(1,"div",1)(2,"div",2)(3,"ag-grid-angular",3),o.qCj("gridReady",function(r){return l.onGridReady(r)})("columnPinned",function(r){return l.onColumnPinned(r)})("columnMoved",function(r){return l.onColumnMoved(r)})("columnResized",function(r){return l.onColumnResized(r)})("columnVisible",function(r){return l.onColumnVisible(r)}),o.C$Y()()()),2&p&&(o.E7m("title","Report By Bet Shops"),o.yG2(3),o.E7m("headerHeight",l.headerHeight)("rowHeight",l.rowHeight)("rowData",l.rowData)("suppressCopyRowsToClipboard",!0)("suppressRowClickSelection",!0)("rowModelType",l.rowModelType)("columnDefs",l.columnDefs)("defaultColDef",l.defaultColDef)("animateRows",!0)("ensureDomOrder",!0)("enableCellTextSelection",!0)("sideBar",l.sideBar)("getContextMenuItems",l.getContextMenuItems))},dependencies:[g.Oc,g.U5,m.k],styles:[".container[_ngcontent-%COMP%]{width:100%;height:100%;padding:0 10px;box-sizing:border-box;height:90%}.container[_ngcontent-%COMP%]   .grid-content[_ngcontent-%COMP%]{width:100%;height:100%}.container[_ngcontent-%COMP%]   .grid-content[_ngcontent-%COMP%]     ag-grid-angular{width:100%;height:100%}@media screen and (max-width: 780px){.grid-content[_ngcontent-%COMP%]{height:90%!important}}"]})}return i})()}}]);