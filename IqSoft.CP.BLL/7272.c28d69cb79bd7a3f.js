"use strict";(self.webpackChunkAgentManagmentSystem=self.webpackChunkAgentManagmentSystem||[]).push([[7272],{516:(T,c,o)=>{o.d(c,{E:()=>C});var p=o(2116),m=o(7408),g=o(7672),f=(o(7024),o(5648));let C=(()=>{class h extends m.K{constructor(e){super(e),this.filterService=(0,p.uUt)(f.q),this.pagination=!0,this.paginationAutoPageSize=!1,this.paginationPageSize=100,this.cacheBlockSize=100,this.suppressPaginationPanel=!1,this.rowModelType=g.kt.SERVER_SIDE,this.serverSideStoreType="full",this.pageSizes=[100,500,1e3,2e3,5e3],this.defaultPageSize=100,this.paginationPage=1,this.defaultColDef={flex:1,editable:!1,filter:"agTextColumnFilter",resizable:!0,unSortIcon:!1,menuTabs:["filterMenuTab","generalMenuTab"],minWidth:15}}onFilterModified(e){this.colId=e.column.colId}keyPressHandler(e){if(document.querySelector(".ag-theme-balham .ag-popup")&&this.colId&&this.gridApi&&"13"===e.key){const n=this.gridApi.getFilterInstance(this.colId);this.colId=void 0,n&&n.applyModel(),this.gridApi.onFilterChanged(),this.gridApi.hidePopupMenu()}}onPaginationChanged(e){const t=this.gridApi?.paginationGetCurrentPage();isNaN(t)||(this.paginationPage=t+1)}onPaginationGoToPage(e){"Enter"===e.key&&(e.preventDefault(),this.gridApi?.paginationGoToPage(this.paginationPage-1))}setFilter(e,t){this.isEmpty(e)||Object.entries(e).forEach(([n,i])=>{const a=n+"s";if(t[a]={ApiOperationTypeList:[],IsAnd:this.getIsAnd(i.operator)},i.hasOwnProperty("condition1")&&i.condition1&&t[a].ApiOperationTypeList.push(this.mapFilterData(i.condition1)),i.hasOwnProperty("condition2")&&i.condition2)t[a].ApiOperationTypeList.push(this.mapFilterData(i.condition2));else{if(0===i.ApiOperationTypeList?.length)return;t[a].ApiOperationTypeList.push(this.mapFilterData(i))}})}mapFilterData(e){const t={OperationTypeId:e.type};switch(e.filterType){case"number":const n=parseFloat(e.filter);isNaN(n)||(t.DecimalValue=n,t.IntValue=Math.round(n));break;case"text":void 0!==e.filter&&(t.StringValue=e.filter);break;case"date":t.DateTimeValue=void 0!==e.dateFrom?e.dateFrom:new Date;break;case"boolean":void 0!==e.filter&&(t.BooleanValue=1===e.filter);break;case"set":t.OperationTypeId=11,void 0!==e.values&&(t.ArrayValue=e.values)}return console.log(t,"appendedFilter"),t}setFilterDropdown(e,t){const n=e.request.filterModel;for(const i of t)n[i]&&!n[i].filter&&(n[i].hasOwnProperty("condition1")?(n[i].condition1.filter=n[i].condition1.type,n[i].condition2.filter=n[i].condition2.type,n[i].condition1.type=1,n[i].condition2.type=1):(n[i].filter=n[i].type,n[i].type=1))}changeFilerName(e,t,n){for(let i=0;i<t.length;i++){const a=t[i];e[a]&&(e[n[i]]=e[a],delete e[a])}}static#e=this.\u0275fac=function(t){return new(t||h)(p.GI1(p.zZn))};static#t=this.\u0275dir=p.Sc5({type:h,standalone:!0,features:[p.eg9]})}return h})()},4976:(T,c,o)=>{o.d(c,{E:()=>p});class p{constructor(){this.OrderBy=null}}},7272:(T,c,o)=>{o.r(c),o.d(c,{ReportByTransactionsComponent:()=>t});var p=o(1368),m=o(9196),g=o(516),_=o(6692),f=o(4976),C=o(7084),h=o(3992),l=o(2116),e=o(3064);let t=(()=>{class n extends g.E{constructor(a,u){super(u),this.reportsService=a,this.rowData=[],this.createServerSideDatasource=()=>({getRows:r=>{let d=new f.E;d.SkipCount=this.paginationPage-1,d.TakeCount=Number(this.cacheBlockSize),d.FromDate=this.fromDate,d.ToDate=this.toDate,this.setSort(r.request.sortModel,d),this.setFilter(r.request.filterModel,d),this.reportsService.getTransactions(d).subscribe(s=>{if(0===s.ResponseCode){const D=s.ResponseObject.Entities;this.rowData=D,D.forEach(y=>{let P=this.operationTypeIds?.find(E=>E.Id==y.OperationTypeId);P&&(y.OperationType=P.Name)}),r.success({rowData:D,rowCount:s.ResponseObject.Count})}})}}),this.adminMenuId=C.s.ReportByTransactions,this.getOperationTypesEnum(),this.columnDefs=[{headerName:"Common.Id",headerValueGetter:this.localizeHeader.bind(this),field:"Id",filter:!1,sortable:!0},{headerName:"Common.OperationType",headerValueGetter:this.localizeHeader.bind(this),field:"OperationType",filter:!1,sortable:!0},{headerName:"Common.Type",headerValueGetter:this.localizeHeader.bind(this),field:"TransactionType",filter:!1,sortable:!0},{headerName:"Common.GroupId",headerValueGetter:this.localizeHeader.bind(this),field:"GroupId",filter:!1,sortable:!0},{headerName:"Common.ProductName",headerValueGetter:this.localizeHeader.bind(this),field:"ProductName",filter:!1,sortable:!0},{headerName:"Common.Amount",headerValueGetter:this.localizeHeader.bind(this),field:"Amount",filter:!1,sortable:!0},{headerName:"Common.Currency",headerValueGetter:this.localizeHeader.bind(this),field:"CurrencyId",filter:!1,sortable:!0},{headerName:"Common.LastUpdateTime",headerValueGetter:this.localizeHeader.bind(this),field:"LastUpdateTime",filter:!1,sortable:!0,cellRenderer:function(r){return`${new p.y("en-US").transform(r.data.LastUpdateTime,"medium")}`}}]}ngOnInit(){const[a,u]=m.o.startDate();this.fromDate=a,this.toDate=u}onDateChange(a){this.fromDate=a.fromDate,this.toDate=a.toDate,this.getCurrentPage()}onGridReady(a){super.onGridReady(a),this.gridApi?.setServerSideDatasource(this.createServerSideDatasource())}getOperationTypesEnum(){this.reportsService.getOperationTypesEnum().pipe((0,h.U)(1)).subscribe(a=>{this.operationTypeIds=a.ResponseObject})}static#e=this.\u0275fac=function(u){return new(u||n)(l.GI1(e.Q),l.GI1(l.zZn))};static#t=this.\u0275cmp=l.In1({type:n,selectors:[["app-report-by-transactions"]],standalone:!0,features:[l.eg9,l.UHJ],decls:4,vars:14,consts:[[3,"title","toDateChange"],[1,"container"],[1,"grid-content"],["rowSelection","single",1,"ag-theme-balham",3,"headerHeight","rowHeight","rowData","suppressCopyRowsToClipboard","suppressRowClickSelection","rowModelType","columnDefs","defaultColDef","animateRows","ensureDomOrder","enableCellTextSelection","sideBar","getContextMenuItems","gridReady","columnPinned","columnMoved","columnResized","columnVisible"]],template:function(u,r){1&u&&(l.I0R(0,"app-header",0),l.qCj("toDateChange",function(s){return r.onDateChange(s)}),l.C$Y(),l.I0R(1,"div",1)(2,"div",2)(3,"ag-grid-angular",3),l.qCj("gridReady",function(s){return r.onGridReady(s)})("columnPinned",function(s){return r.onColumnPinned(s)})("columnMoved",function(s){return r.onColumnMoved(s)})("columnResized",function(s){return r.onColumnResized(s)})("columnVisible",function(s){return r.onColumnVisible(s)}),l.C$Y()()()),2&u&&(l.E7m("title","Report By Transactions"),l.yG2(3),l.E7m("headerHeight",r.headerHeight)("rowHeight",r.rowHeight)("rowData",r.rowData)("suppressCopyRowsToClipboard",!0)("suppressRowClickSelection",!0)("rowModelType",r.rowModelType)("columnDefs",r.columnDefs)("defaultColDef",r.defaultColDef)("animateRows",!0)("ensureDomOrder",!0)("enableCellTextSelection",!0)("sideBar",r.sideBar)("getContextMenuItems",r.getContextMenuItems))},dependencies:[p.MD,_.Oc,_.U5,m.k],styles:[".container[_ngcontent-%COMP%]{width:100%;height:100%;padding:0 10px;box-sizing:border-box;height:94%}.container[_ngcontent-%COMP%]   .grid-content[_ngcontent-%COMP%]{width:100%;height:92%}.container[_ngcontent-%COMP%]   .grid-content[_ngcontent-%COMP%]     ag-grid-angular{width:100%;height:100%}"]})}return n})()}}]);